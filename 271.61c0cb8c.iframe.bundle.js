/*! For license information please see 271.61c0cb8c.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkdi_saas_fe=self.webpackChunkdi_saas_fe||[]).push([[271],{"./node_modules/devextreme-angular/fesm2015/devextreme-angular-ui-tree-list.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>DxTreeListModule});var platform_browser=__webpack_require__("./node_modules/@angular/platform-browser/fesm2020/platform-browser.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs"),component_registrator=__webpack_require__("./node_modules/devextreme/esm/core/component_registrator.js"),common=__webpack_require__("./node_modules/devextreme/esm/core/utils/common.js"),utils_type=__webpack_require__("./node_modules/devextreme/esm/core/utils/type.js"),iterator=__webpack_require__("./node_modules/devextreme/esm/core/utils/iterator.js"),extend=__webpack_require__("./node_modules/devextreme/esm/core/utils/extend.js"),ui_widget=__webpack_require__("./node_modules/devextreme/esm/ui/widget/ui.widget.js"),themes=__webpack_require__("./node_modules/devextreme/esm/ui/themes.js"),renderer=__webpack_require__("./node_modules/devextreme/esm/core/renderer.js"),core_class=__webpack_require__("./node_modules/devextreme/esm/core/class.js"),callbacks=__webpack_require__("./node_modules/devextreme/esm/core/utils/callbacks.js"),message=__webpack_require__("./node_modules/devextreme/esm/localization/message.js"),utils_window=__webpack_require__("./node_modules/devextreme/esm/core/utils/window.js"),ui_errors=__webpack_require__("./node_modules/devextreme/esm/ui/widget/ui.errors.js");const ModuleItem=core_class.Z.inherit({_endUpdateCore(){},ctor(component){const that=this;that._updateLockCount=0,that.component=component,that._actions={},that._actionConfigs={},(0,iterator.S6)(this.callbackNames()||[],(function(index,name){const flags=that.callbackFlags(name)||{};flags.unique=!0,flags.syncStrategy=!0,that[this]=(0,callbacks.Z)(flags)}))},init(){},callbackNames(){},callbackFlags(){},publicMethods(){},beginUpdate(){this._updateLockCount++},endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())},option(name){const{component}=this,optionCache=component._optionCache;return 1===arguments.length&&optionCache?(name in optionCache||(optionCache[name]=component.option(name)),optionCache[name]):component.option.apply(component,arguments)},_silentOption(name,value){const{component}=this,optionCache=component._optionCache;return optionCache&&(optionCache[name]=value),component._setOptionWithoutOptionChange(name,value)},localize(name){const optionCache=this.component._optionCache;return optionCache?(name in optionCache||(optionCache[name]=message.Z.format(name)),optionCache[name]):message.Z.format(name)},on(){return this.component.on.apply(this.component,arguments)},off(){return this.component.off.apply(this.component,arguments)},optionChanged(args){args.name in this._actions&&(this.createAction(args.name,this._actionConfigs[args.name]),args.handled=!0)},getAction(actionName){return this._actions[actionName]},setAria(name,value,$target){const target=$target.get(0),prefix="role"!==name&&"id"!==name?"aria-":"";target.setAttribute?target.setAttribute(prefix+name,value):$target.attr(prefix+name,value)},_createComponent(){return this.component._createComponent.apply(this.component,arguments)},getController(name){return this.component._controllers[name]},createAction(actionName,config){if((0,utils_type.mf)(actionName)){const action=this.component._createAction(actionName.bind(this),config);return function(e){action({event:e})}}this._actions[actionName]=this.component._createActionByOption(actionName,config),this._actionConfigs[actionName]=config},executeAction(actionName,options){const action=this._actions[actionName];return action&&action(options)},dispose(){const that=this;(0,iterator.S6)(that.callbackNames()||[],(function(){that[this].empty()}))},addWidgetPrefix(className){return`dx-${this.component.NAME.slice(2).toLowerCase()}${className?"-"+className:""}`},getWidgetContainerClass(){const containerName="dxDataGrid"===this.component.NAME?null:"container";return this.addWidgetPrefix(containerName)},elementIsInsideGrid($element){return $element.closest("."+this.getWidgetContainerClass()).parent().is(this.component.$element())}}),Controller=ModuleItem,ViewController=Controller.inherit({getView(name){return this.component._views[name]},getViews(){return this.component._views}}),View=ModuleItem.inherit({_isReady(){return this.component.isReady()},_endUpdateCore(){this.callBase(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))},_invalidate(requireResize,requireReady){this._requireRender=!0,this.component._requireResize=(0,utils_window.Ym)()&&(this.component._requireResize||requireResize),this._requireReady=this._requireReady||requireReady},_renderCore(){},_resizeCore(){},_parentElement(){return this._$parent},ctor(component){this.callBase(component),this.renderCompleted=(0,callbacks.Z)(),this.resizeCompleted=(0,callbacks.Z)()},element(){return this._$element},getElementHeight(){const $element=this.element();if(!$element)return 0;const marginTop=parseFloat($element.css("marginTop"))||0,marginBottom=parseFloat($element.css("marginBottom"))||0,{offsetHeight}=$element.get(0);return offsetHeight+marginTop+marginBottom},isVisible:()=>!0,getTemplate(name){return this.component._getTemplate(name)},render($parent,options){let $element=this._$element;const isVisible=this.isVisible();if(($element||$parent)&&(this._requireReady=!1,$element||($element=this._$element=(0,renderer.Z)("<div>").appendTo($parent),this._$parent=$parent),$element.toggleClass("dx-hidden",!isVisible),isVisible)){this.component._optionCache={};const deferred=this._renderCore(options);this.component._optionCache=void 0,deferred?deferred.done((()=>{this.renderCompleted.fire(options)})):this.renderCompleted.fire(options)}},resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1},focus(preventScroll){this.element().get(0).focus({preventScroll})}});function getExtendedTypes(types,moduleExtenders={}){const extendTypes={};return Object.entries(moduleExtenders).forEach((([name,extender])=>{const currentType=types[name];if(currentType)if((0,utils_type.mf)(extender))extendTypes[name]=extender(currentType);else{const classType=currentType;extendTypes[name]=classType.inherit(extender)}})),extendTypes}const modules={modules:[],View,ViewController,Controller,registerModule(name,module){const{modules}=this;for(let i=0;i<modules.length;i++)if(modules[i].name===name)return;module.name=name,modules.push(module)},registerModulesOrder(moduleNames){this.modulesOrder=moduleNames},unregisterModule(name){this.modules=(0,common.h3)(this.modules,(module=>module.name!==name))},processModules:function processModules(componentInstance,componentClass){const{modules}=componentClass,{modulesOrder}=componentClass;function createModuleItems(moduleTypes){const moduleItems={};return(0,iterator.S6)(moduleTypes,((name,moduleType)=>{const moduleItem=new moduleType(componentInstance);moduleItem.name=name,function registerPublicMethods(componentInstance,name,moduleItem){const publicMethods=moduleItem.publicMethods();publicMethods&&(0,iterator.S6)(publicMethods,((_,methodName)=>{if(!moduleItem[methodName])throw ui_errors.Z.Error("E1006",name,methodName);if(componentInstance[methodName])throw ui_errors.Z.Error("E1005",methodName);componentInstance[methodName]=(...args)=>moduleItem[methodName](...args)}))}(componentInstance,name,moduleItem),moduleItems[name]=moduleItem})),moduleItems}modulesOrder&&modules.sort(((module1,module2)=>{let orderIndex1=modulesOrder.indexOf(module1.name),orderIndex2=modulesOrder.indexOf(module2.name);return orderIndex1<0&&(orderIndex1=1e6),orderIndex2<0&&(orderIndex2=1e6),orderIndex1-orderIndex2}));const rootControllerTypes={},rootViewTypes={};modules.forEach((({name:moduleName,controllers={},views={}})=>{Object.entries(controllers).forEach((([name,type])=>{var _a;if(rootControllerTypes[name])throw ui_errors.Z.Error("E1001",moduleName,name);if(!(null===(_a=null==type?void 0:type.subclassOf)||void 0===_a?void 0:_a.call(type,Controller)))throw ui_errors.Z.Error("E1002",moduleName,name);rootControllerTypes[name]=type})),Object.entries(views).forEach((([name,type])=>{var _a;if(rootViewTypes[name])throw ui_errors.Z.Error("E1003",moduleName,name);if(!(null===(_a=null==type?void 0:type.subclassOf)||void 0===_a?void 0:_a.call(type,View)))throw ui_errors.Z.Error("E1004",moduleName,name);rootViewTypes[name]=type}))}));const moduleExtenders=modules.filter((({extenders})=>!!extenders)),controllerTypes=moduleExtenders.reduce(((types,{extenders})=>Object.assign(Object.assign({},types),getExtendedTypes(types,null==extenders?void 0:extenders.controllers))),rootControllerTypes),viewTypes=moduleExtenders.reduce(((types,{extenders})=>Object.assign(Object.assign({},types),getExtendedTypes(types,null==extenders?void 0:extenders.views))),rootViewTypes);componentInstance._controllers=createModuleItems(controllerTypes),componentInstance._views=createModuleItems(viewTypes)},callModuleItemsMethod:function(that,methodName,args){args=args||[],that._controllers&&(0,iterator.S6)(that._controllers,(function(){this[methodName]&&this[methodName].apply(this,args)})),that._views&&(0,iterator.S6)(that._views,(function(){this[methodName]&&this[methodName].apply(this,args)}))}},ui_grid_core_modules=modules,module_core=(0,extend.l)({},ui_grid_core_modules,{modules:[],foreachNodes(nodes,callBack,ignoreHasChildren){for(let i=0;i<nodes.length;i++)!1!==callBack(nodes[i])&&(ignoreHasChildren||nodes[i].hasChildren)&&nodes[i].children.length&&this.foreachNodes(nodes[i].children,callBack,ignoreHasChildren)}});var size=__webpack_require__("./node_modules/devextreme/esm/core/utils/size.js"),events_engine=__webpack_require__("./node_modules/devextreme/esm/events/core/events_engine.js"),dom_adapter=__webpack_require__("./node_modules/devextreme/esm/core/dom_adapter.js"),element_data=__webpack_require__("./node_modules/devextreme/esm/core/element_data.js"),pointer=__webpack_require__("./node_modules/devextreme/esm/events/pointer.js"),click=__webpack_require__("./node_modules/devextreme/esm/events/click.js"),double_click=__webpack_require__("./node_modules/devextreme/esm/events/double_click.js"),browser=__webpack_require__("./node_modules/devextreme/esm/core/utils/browser.js"),style=__webpack_require__("./node_modules/devextreme/esm/core/utils/style.js"),core_element=__webpack_require__("./node_modules/devextreme/esm/core/element.js"),utils_position=__webpack_require__("./node_modules/devextreme/esm/core/utils/position.js"),utils_deferred=__webpack_require__("./node_modules/devextreme/esm/core/utils/deferred.js"),string=__webpack_require__("./node_modules/devextreme/esm/core/utils/string.js"),data=__webpack_require__("./node_modules/devextreme/esm/core/utils/data.js"),utils=__webpack_require__("./node_modules/devextreme/esm/data/utils.js"),math=__webpack_require__("./node_modules/devextreme/esm/core/utils/math.js"),inflector=__webpack_require__("./node_modules/devextreme/esm/core/utils/inflector.js"),timeIntervals={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6};function toMilliseconds(value){return timeIntervals[value]}var DAYS_IN_WEEK=7,dateUnitIntervals=["millisecond","second","minute","hour","day","week","month","quarter","year"],convertMillisecondsToDateUnits=function(value){var i,dateUnitCount,dateUnitInterval,dateUnitIntervals=["millisecond","second","minute","hour","day","month","year"],result={};for(i=dateUnitIntervals.length-1;i>=0;i--)dateUnitInterval=dateUnitIntervals[i],(dateUnitCount=Math.floor(value/toMilliseconds(dateUnitInterval)))>0&&(result[dateUnitInterval+"s"]=dateUnitCount,value-=convertDateUnitToMilliseconds(dateUnitInterval,dateUnitCount));return result};function convertDateUnitToMilliseconds(dateUnit,count){return toMilliseconds(dateUnit)*count}function getDateUnitInterval(tickInterval){var i,maxInterval=-1;return(0,utils_type.HD)(tickInterval)?tickInterval:(0,utils_type.Kn)(tickInterval)?((0,iterator.S6)(tickInterval,(function(key,value){for(i=0;i<dateUnitIntervals.length;i++)value&&(key===dateUnitIntervals[i]+"s"||key===dateUnitIntervals[i])&&maxInterval<i&&(maxInterval=i)})),dateUnitIntervals[maxInterval]):""}var tickIntervalToFormatMap={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"};var getQuarter=function(month){return Math.floor(month/3)},getFirstQuarterMonth=function(month){return 3*getQuarter(month)};function correctDateWithUnitBeginning(date,dateInterval,withCorrection,firstDayOfWeek){date=new Date(date.getTime());var firstQuarterMonth,month,oldDate=new Date(date.getTime()),dateUnitInterval=getDateUnitInterval(dateInterval);switch(dateUnitInterval){case"second":date=new Date(1e3*Math.floor(oldDate.getTime()/1e3));break;case"minute":date=new Date(6e4*Math.floor(oldDate.getTime()/6e4));break;case"hour":date=new Date(36e5*Math.floor(oldDate.getTime()/36e5));break;case"year":date.setMonth(0);case"month":date.setDate(1);case"day":date.setHours(0,0,0,0);break;case"week":(date=getFirstWeekDate(date,firstDayOfWeek||0)).setHours(0,0,0,0);break;case"quarter":firstQuarterMonth=getFirstQuarterMonth(date.getMonth()),month=date.getMonth(),date.setDate(1),date.setHours(0,0,0,0),month!==firstQuarterMonth&&date.setMonth(firstQuarterMonth)}return withCorrection&&"hour"!==dateUnitInterval&&"minute"!==dateUnitInterval&&"second"!==dateUnitInterval&&fixTimezoneGap(oldDate,date),date}function trimTime(date){return correctDateWithUnitBeginning(date,"day")}function addDateInterval(value,interval,dir){var result=new Date(value.getTime()),intervalObject=(0,utils_type.HD)(interval)?getDateIntervalByString(interval.toLowerCase()):(0,utils_type.kE)(interval)?convertMillisecondsToDateUnits(interval):interval;return intervalObject.years&&result.setFullYear(result.getFullYear()+intervalObject.years*dir),intervalObject.quarters&&result.setMonth(result.getMonth()+3*intervalObject.quarters*dir),intervalObject.months&&result.setMonth(result.getMonth()+intervalObject.months*dir),intervalObject.weeks&&result.setDate(result.getDate()+7*intervalObject.weeks*dir),intervalObject.days&&result.setDate(result.getDate()+intervalObject.days*dir),intervalObject.hours&&result.setTime(result.getTime()+36e5*intervalObject.hours*dir),intervalObject.minutes&&result.setTime(result.getTime()+6e4*intervalObject.minutes*dir),intervalObject.seconds&&result.setTime(result.getTime()+1e3*intervalObject.seconds*dir),intervalObject.milliseconds&&result.setTime(result.getTime()+intervalObject.milliseconds*dir),result}var addInterval=function(value,interval,isNegative){var dir=isNegative?-1:1;return(0,utils_type.J_)(value)?addDateInterval(value,interval,dir):(0,math.zB)(value+interval*dir,interval)};function getLastMonthDay(date){return createDateWithFullYear(date.getFullYear(),date.getMonth()+1,0).getDate()}function getDateIntervalByString(intervalString){var result={};switch(intervalString){case"year":result.years=1;break;case"month":result.months=1;break;case"quarter":result.months=3;break;case"week":result.weeks=1;break;case"day":result.days=1;break;case"hour":result.hours=1;break;case"minute":result.minutes=1;break;case"second":result.seconds=1;break;case"millisecond":result.milliseconds=1}return result}function sameMonthAndYear(date1,date2){return sameYear(date1,date2)&&date1.getMonth()===date2.getMonth()}function sameYear(date1,date2){return date1&&date2&&date1.getFullYear()===date2.getFullYear()}function getFirstDecadeInCentury(date){return date&&date.getFullYear()-date.getFullYear()%100}function getFirstYearInDecade(date){return date&&date.getFullYear()-date.getFullYear()%10}function getFirstWeekDate(date,firstDayOfWeek){var delta=(date.getDay()-firstDayOfWeek+DAYS_IN_WEEK)%DAYS_IN_WEEK,result=new Date(date);return result.setDate(date.getDate()-delta),result}function getUTCTime(date){return Date.UTC(date.getFullYear(),date.getMonth(),date.getDate())}function getFirstDateInYear(year){return new Date(year,0,1)}function getLastDateInYear(year){return new Date(year,11,31)}function getDayWeekNumber(date,firstDayOfWeek){var day=date.getDay()-firstDayOfWeek+1;return day<=0&&(day+=DAYS_IN_WEEK),day}function normalizeDate(date,min,max){var normalizedDate=date;return(0,utils_type.$K)(date)?((0,utils_type.$K)(min)&&date<min&&(normalizedDate=min),(0,utils_type.$K)(max)&&date>max&&(normalizedDate=max),normalizedDate):date}function fixTimezoneGap(oldDate,newDate){if((0,utils_type.$K)(oldDate)){var diff=newDate.getHours()-oldDate.getHours();if(0!==diff){var sign=1===diff||-23===diff?-1:1,trial=new Date(newDate.getTime()+36e5*sign);(sign>0||trial.getDate()===newDate.getDate())&&newDate.setTime(trial.getTime())}}}function getTimezonesDifference(min,max){return 60*(max.getTimezoneOffset()-min.getTimezoneOffset())*1e3}var createDateWithFullYear=function(year){var result=new Date(...arguments);return result.setFullYear(year),result},dateUtils={dateUnitIntervals,convertMillisecondsToDateUnits,dateToMilliseconds:function(tickInterval){var milliseconds=0;return(0,utils_type.Kn)(tickInterval)&&(0,iterator.S6)(tickInterval,(function(key,value){milliseconds+=convertDateUnitToMilliseconds(key.substr(0,key.length-1),value)})),(0,utils_type.HD)(tickInterval)&&(milliseconds=convertDateUnitToMilliseconds(tickInterval,1)),milliseconds},getNextDateUnit:function(unit,withWeeks){switch(getDateUnitInterval(unit)){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return withWeeks?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},convertDateUnitToMilliseconds,getDateUnitInterval,getDateFormatByTickInterval:function getDateFormatByTickInterval(tickInterval){return tickIntervalToFormatMap[getDateUnitInterval(tickInterval)]||""},getDatesDifferences:function(date1,date2){var counter=0,differences={year:date1.getFullYear()!==date2.getFullYear(),month:date1.getMonth()!==date2.getMonth(),day:date1.getDate()!==date2.getDate(),hour:date1.getHours()!==date2.getHours(),minute:date1.getMinutes()!==date2.getMinutes(),second:date1.getSeconds()!==date2.getSeconds(),millisecond:date1.getMilliseconds()!==date2.getMilliseconds()};return(0,iterator.S6)(differences,(function(key,value){value&&counter++})),0===counter&&0!==getTimezonesDifference(date1,date2)&&(differences.hour=!0,counter++),differences.count=counter,differences},correctDateWithUnitBeginning,trimTime,setToDayEnd:function(date){var result=trimTime(date);return result.setDate(result.getDate()+1),new Date(result.getTime()-1)},roundDateByStartDayHour:function(date,startDayHour){var startTime=this.dateTimeFromDecimal(startDayHour),result=new Date(date);return(date.getHours()===startTime.hours&&date.getMinutes()<startTime.minutes||date.getHours()<startTime.hours)&&result.setHours(startTime.hours,startTime.minutes,0,0),result},dateTimeFromDecimal:function(number){return{hours:Math.floor(number),minutes:number%1*60}},addDateInterval,addInterval,getSequenceByInterval:function(min,max,interval){var cur,intervals=[];for(intervals.push((0,utils_type.J_)(min)?new Date(min.getTime()):min),cur=min;cur<max;)cur=addInterval(cur,interval),intervals.push(cur);return intervals},getDateIntervalByString,sameHoursAndMinutes:function sameHoursAndMinutes(date1,date2){return date1&&date2&&date1.getHours()===date2.getHours()&&date1.getMinutes()===date2.getMinutes()},sameDate:function sameDate(date1,date2){return sameMonthAndYear(date1,date2)&&date1.getDate()===date2.getDate()},sameMonthAndYear,sameMonth:sameMonthAndYear,sameYear,sameDecade:function(date1,date2){if((0,utils_type.$K)(date1)&&(0,utils_type.$K)(date2)){var startDecadeDate1=date1.getFullYear()-date1.getFullYear()%10,startDecadeDate2=date2.getFullYear()-date2.getFullYear()%10;return date1&&date2&&startDecadeDate1===startDecadeDate2}},sameCentury:function(date1,date2){if((0,utils_type.$K)(date1)&&(0,utils_type.$K)(date2)){var startCenturyDate1=date1.getFullYear()-date1.getFullYear()%100,startCenturyDate2=date2.getFullYear()-date2.getFullYear()%100;return date1&&date2&&startCenturyDate1===startCenturyDate2}},getDifferenceInMonth:function(typeView){var difference=1;return"year"===typeView&&(difference=12),"decade"===typeView&&(difference=120),"century"===typeView&&(difference=1200),difference},getDifferenceInMonthForCells:function(typeView){var difference=1;return"decade"===typeView&&(difference=12),"century"===typeView&&(difference=120),difference},getFirstYearInDecade,getFirstDecadeInCentury,getShortDateFormat:function(){return"yyyy/MM/dd"},getViewFirstCellDate:function(viewType,date){return"month"===viewType?createDateWithFullYear(date.getFullYear(),date.getMonth(),1):"year"===viewType?createDateWithFullYear(date.getFullYear(),0,date.getDate()):"decade"===viewType?createDateWithFullYear(getFirstYearInDecade(date),date.getMonth(),date.getDate()):"century"===viewType?createDateWithFullYear(getFirstDecadeInCentury(date),date.getMonth(),date.getDate()):void 0},getViewLastCellDate:function(viewType,date){return"month"===viewType?createDateWithFullYear(date.getFullYear(),date.getMonth(),getLastMonthDay(date)):"year"===viewType?createDateWithFullYear(date.getFullYear(),11,date.getDate()):"decade"===viewType?createDateWithFullYear(getFirstYearInDecade(date)+9,date.getMonth(),date.getDate()):"century"===viewType?createDateWithFullYear(getFirstDecadeInCentury(date)+90,date.getMonth(),date.getDate()):void 0},getViewDown:function(typeView){switch(typeView){case"century":return"decade";case"decade":return"year";case"year":return"month"}},getViewUp:function(typeView){switch(typeView){case"month":return"year";case"year":return"decade";case"decade":return"century"}},getLastMonthDay,getLastMonthDate:function(date){if((0,utils_type.$K)(date))return createDateWithFullYear(date.getFullYear(),date.getMonth()+1,0)},getFirstMonthDate:function(date){if((0,utils_type.$K)(date))return createDateWithFullYear(date.getFullYear(),date.getMonth(),1)},getFirstWeekDate,getWeekNumber:function getWeekNumber(date,firstDayOfWeek,rule){var firstWeekDayInYear=getDayWeekNumber(getFirstDateInYear(date.getFullYear()),firstDayOfWeek),lastWeekDayInYear=getDayWeekNumber(getLastDateInYear(date.getFullYear()),firstDayOfWeek),daysInFirstWeek=DAYS_IN_WEEK-firstWeekDayInYear+1,weekNumber=Math.ceil((function getDayNumber(date){var ms=getUTCTime(date)-getUTCTime(getFirstDateInYear(date.getFullYear()));return 1+Math.floor(ms/toMilliseconds("day"))}(date)-daysInFirstWeek)/7);switch(rule){case"fullWeek":return daysInFirstWeek===DAYS_IN_WEEK&&weekNumber++,0===weekNumber?getWeekNumber(getLastDateInYear(date.getFullYear()-1),firstDayOfWeek,rule):weekNumber;case"firstDay":return daysInFirstWeek>0&&weekNumber++,(weekNumber>52&&!(7===firstWeekDayInYear||7===lastWeekDayInYear)||54===weekNumber)&&(weekNumber=1),weekNumber;case"firstFourDays":return daysInFirstWeek>3&&weekNumber++,weekNumber>52&&!(4===firstWeekDayInYear||4===lastWeekDayInYear)&&(weekNumber=1),0===weekNumber?getWeekNumber(getLastDateInYear(date.getFullYear()-1),firstDayOfWeek,rule):weekNumber}},normalizeDateByWeek:function(date,currentDate){var differenceInDays=dateUtils.getDatesInterval(date,currentDate,"day"),resultDate=new Date(date);return differenceInDays>=6&&(resultDate=new Date(resultDate.setDate(resultDate.getDate()+7))),resultDate},getQuarter,getFirstQuarterMonth,dateInRange:function(date,min,max,format){return"date"===format&&(min=min&&dateUtils.correctDateWithUnitBeginning(min,"day"),max=max&&dateUtils.correctDateWithUnitBeginning(max,"day"),date=date&&dateUtils.correctDateWithUnitBeginning(date,"day")),normalizeDate(date,min,max)===date},intervalsOverlap:function(options){var{firstMin,firstMax,secondMin,secondMax}=options;return firstMin<=secondMin&&secondMin<=firstMax||firstMin>secondMin&&firstMin<secondMax||firstMin<secondMax&&firstMax>secondMax},roundToHour:function(date){var result=new Date(date.getTime());return result.setHours(result.getHours()+1),result.setMinutes(0),result},normalizeDate,getViewMinBoundaryDate:function(viewType,date){var resultDate=createDateWithFullYear(date.getFullYear(),date.getMonth(),1);return"month"===viewType?resultDate:(resultDate.setMonth(0),"year"===viewType||("decade"===viewType&&resultDate.setFullYear(getFirstYearInDecade(date)),"century"===viewType&&resultDate.setFullYear(getFirstDecadeInCentury(date))),resultDate)},getViewMaxBoundaryDate:function(viewType,date){var resultDate=new Date(date);return resultDate.setDate(getLastMonthDay(date)),"month"===viewType?resultDate:(resultDate.setMonth(11),resultDate.setDate(getLastMonthDay(resultDate)),"year"===viewType||("decade"===viewType&&resultDate.setFullYear(getFirstYearInDecade(date)+9),"century"===viewType&&resultDate.setFullYear(getFirstDecadeInCentury(date)+99)),resultDate)},fixTimezoneGap,getTimezonesDifference,makeDate:function(date){return new Date(date)},getDatesInterval:function(startDate,endDate,intervalUnit){var delta=endDate.getTime()-startDate.getTime(),millisecondCount=toMilliseconds(intervalUnit)||1;return Math.floor(delta/millisecondCount)},getDatesOfInterval:function(startDate,endDate,step){for(var result=[],currentDate=new Date(startDate.getTime());currentDate<endDate;)result.push(new Date(currentDate.getTime())),currentDate=this.addInterval(currentDate,step);return result},createDateWithFullYear,sameView:function(view,date1,date2){return dateUtils[(0,inflector._A)("same "+view)](date1,date2)}};const utils_date=dateUtils;var number=__webpack_require__("./node_modules/devextreme/esm/localization/number.js"),dependency_injector=__webpack_require__("./node_modules/devextreme/esm/core/utils/dependency_injector.js"),errors=__webpack_require__("./node_modules/devextreme/esm/core/errors.js");function leftPad(text,length){for(;text.length<length;)text="0"+text;return text}var FORMAT_TYPES={3:"abbreviated",4:"wide",5:"narrow"},LDML_FORMATTERS={y:function(date,count,useUtc){var year=date[useUtc?"getUTCFullYear":"getFullYear"]();return 2===count&&(year%=100),leftPad(year.toString(),count)},M:function(date,count,useUtc,dateParts){var month=date[useUtc?"getUTCMonth":"getMonth"](),formatType=FORMAT_TYPES[count];return formatType?dateParts.getMonthNames(formatType,"format")[month]:leftPad((month+1).toString(),Math.min(count,2))},L:function(date,count,useUtc,dateParts){var month=date[useUtc?"getUTCMonth":"getMonth"](),formatType=FORMAT_TYPES[count];return formatType?dateParts.getMonthNames(formatType,"standalone")[month]:leftPad((month+1).toString(),Math.min(count,2))},Q:function(date,count,useUtc,dateParts){var month=date[useUtc?"getUTCMonth":"getMonth"](),quarter=Math.floor(month/3),formatType=FORMAT_TYPES[count];return formatType?dateParts.getQuarterNames(formatType)[quarter]:leftPad((quarter+1).toString(),Math.min(count,2))},E:function(date,count,useUtc,dateParts){var day=date[useUtc?"getUTCDay":"getDay"](),formatType=FORMAT_TYPES[count<3?3:count];return dateParts.getDayNames(formatType)[day]},a:function(date,count,useUtc,dateParts){var period=date[useUtc?"getUTCHours":"getHours"]()<12?0:1,formatType=FORMAT_TYPES[count];return dateParts.getPeriodNames(formatType)[period]},d:function(date,count,useUtc){return leftPad(date[useUtc?"getUTCDate":"getDate"]().toString(),Math.min(count,2))},H:function(date,count,useUtc){return leftPad(date[useUtc?"getUTCHours":"getHours"]().toString(),Math.min(count,2))},h:function(date,count,useUtc){return leftPad((date[useUtc?"getUTCHours":"getHours"]()%12||12).toString(),Math.min(count,2))},m:function(date,count,useUtc){return leftPad(date[useUtc?"getUTCMinutes":"getMinutes"]().toString(),Math.min(count,2))},s:function(date,count,useUtc){return leftPad(date[useUtc?"getUTCSeconds":"getSeconds"]().toString(),Math.min(count,2))},S:function(date,count,useUtc){return leftPad(date[useUtc?"getUTCMilliseconds":"getMilliseconds"]().toString(),3).substr(0,count)},x:function(date,count,useUtc){var timezoneOffset=useUtc?0:date.getTimezoneOffset(),signPart=timezoneOffset>0?"-":"+",timezoneOffsetAbs=Math.abs(timezoneOffset),minutes=timezoneOffsetAbs%60,hoursPart=leftPad(Math.floor(timezoneOffsetAbs/60).toString(),2),minutesPart=leftPad(minutes.toString(),2);return signPart+hoursPart+(count>=3?":":"")+(count>1||minutes?minutesPart:"")},X:function(date,count,useUtc){return useUtc||!date.getTimezoneOffset()?"Z":LDML_FORMATTERS.x(date,count,useUtc)},Z:function(date,count,useUtc){return LDML_FORMATTERS.X(date,count>=5?3:2,useUtc)}},getFormatter=function(format,dateParts){return function(date){var charIndex,formatter,char,isCurrentCharEqualsNext,charCount=0,isEscaping=!1,result="";if(!date)return null;if(!format)return date;var useUtc="Z"===format[format.length-1]||"'Z'"===format.slice(-3);for(charIndex=0;charIndex<format.length;charIndex++)char=format[charIndex],formatter=LDML_FORMATTERS[char],charCount++,(isCurrentCharEqualsNext=char===format[charIndex+1])||(formatter&&!isEscaping&&(result+=formatter(date,charCount,useUtc,dateParts)),charCount=0),"'"!==char||isCurrentCharEqualsNext?!isEscaping&&formatter||(result+=char):isEscaping=!isEscaping,"'"===char&&isCurrentCharEqualsNext&&charIndex++;return result}},FORMAT_SEPARATORS=" .,:;/\\<>()-[]،",checkDigit=function(char){var code=char&&number.Z.convertDigits(char,!1).charCodeAt(0),zeroCode=number.Z.convertDigits("0",!1).charCodeAt(0);return zeroCode<=code&&code<zeroCode+10},checkPatternContinue=function(text,patterns,index,isDigit){var char=text[index],nextChar=text[index+1];if(!isDigit){if("."===char||" "===char&&". m."===text.slice(index-1,index+3))return!0;if("-"===char&&!checkDigit(nextChar))return!0}var isDigitChanged=isDigit&&patterns.some((pattern=>text[index]!==pattern[index]));return FORMAT_SEPARATORS.indexOf(char)<0&&isDigit===checkDigit(char)&&(!isDigit||isDigitChanged)},getPatternStartIndex=function(defaultPattern,index){if(!checkDigit(defaultPattern[index]))for(;index>0&&!checkDigit(defaultPattern[index-1])&&("."===defaultPattern[index-1]||FORMAT_SEPARATORS.indexOf(defaultPattern[index-1])<0);)index--;return index},formatValue=function(value,formatter){return Array.isArray(value)?value.map((function(value){return(formatter(value)||"").toString()})):(formatter(value)||"").toString()},ESCAPE_CHARS_REGEXP=/[a-zA-Z]/g,getFormat=function(formatter){var processedIndexes=[],defaultPattern=formatValue(new Date(2009,8,8,6,5,4),formatter),patternPositions=defaultPattern.split("").map((function(_,index){return index})),result=defaultPattern,replacedPatterns={},datePatterns=[{date:new Date(2009,8,8,6,5,4,111),pattern:"S"},{date:new Date(2009,8,8,6,5,2),pattern:"s"},{date:new Date(2009,8,8,6,2,4),pattern:"m"},{date:new Date(2009,8,8,18,5,4),pattern:"H",isDigit:!0},{date:new Date(2009,8,8,2,5,4),pattern:"h",isDigit:!0},{date:new Date(2009,8,8,18,5,4),pattern:"a",isDigit:!1},{date:new Date(2009,8,1,6,5,4),pattern:"d"},{date:[new Date(2009,8,2,6,5,4),new Date(2009,8,3,6,5,4),new Date(2009,8,4,6,5,4)],pattern:"E"},{date:new Date(2009,9,6,6,5,4),pattern:"M"},{date:new Date(1998,8,8,6,5,4),pattern:"y"}];if(result)return datePatterns.forEach((function(test){var diff=function(defaultPattern,patterns,processedIndexes,isDigit){var i=0,result=[],patternsFilter=function(pattern){return defaultPattern[i]!==pattern[i]&&(void 0===isDigit||checkDigit(defaultPattern[i])===isDigit)};for(Array.isArray(patterns)||(patterns=[patterns]),i=0;i<defaultPattern.length;i++)if(processedIndexes.indexOf(i)<0&&patterns.filter(patternsFilter).length){i=getPatternStartIndex(defaultPattern,i);do{if(isDigit=checkDigit(defaultPattern[i]),!result.length&&!isDigit&&checkDigit(patterns[0][i]))break;result.push(i),processedIndexes.unshift(i),i++}while(defaultPattern[i]&&checkPatternContinue(defaultPattern,patterns,i,isDigit));break}return 1!==result.length||"0"!==defaultPattern[processedIndexes[0]-1]&&"٠"!==defaultPattern[processedIndexes[0]-1]||processedIndexes.unshift(processedIndexes[0]-1),result}(defaultPattern,formatValue(test.date,formatter),processedIndexes,test.isDigit),pattern="M"!==test.pattern||replacedPatterns.d?test.pattern:"L";result=function(pattern,indexes,char,patternPositions){var i,index,patternIndex;if(!checkDigit(pattern[indexes[0]]||"0")){for(var letterCount=Math.max(indexes.length<=3?3:4,char.length);indexes.length>letterCount;){for(patternIndex=patternPositions[index=indexes.pop()],patternPositions[index]=-1,i=index+1;i<patternPositions.length;i++)patternPositions[i]--;pattern=pattern.substr(0,patternIndex)+pattern.substr(patternIndex+1)}for(patternIndex=(index=indexes[indexes.length-1]+1)<patternPositions.length?patternPositions[index]:index;indexes.length<letterCount;){for(indexes.push(indexes[indexes.length-1]+1),i=index;i<patternPositions.length;i++)patternPositions[i]++;pattern=pattern.substr(0,patternIndex)+" "+pattern.substr(patternIndex)}}return pattern=function(pattern,indexes,char,patternPositions){var baseCharIndex=indexes[0],patternIndex=baseCharIndex<patternPositions.length?patternPositions[baseCharIndex]:baseCharIndex;return indexes.forEach((function(_,index){pattern=pattern.substr(0,patternIndex+index)+(char.length>1?char[index]:char)+pattern.substr(patternIndex+index+1)})),1===indexes.length&&(pattern=(pattern=pattern.replace("0"+char,char+char)).replace("٠"+char,char+char)),pattern}(pattern,indexes,char,patternPositions),pattern}(result,diff,pattern,patternPositions),replacedPatterns[pattern]=diff.length})),result=function(pattern,defaultPattern,processedIndexes,patternPositions){var escapeIndexes=defaultPattern.split("").map((function(char,index){return processedIndexes.indexOf(index)<0&&(char.match(ESCAPE_CHARS_REGEXP)||"'"===char)?patternPositions[index]:-1}));return pattern.split("").map((function(char,index){var result=char,isCurrentCharEscaped=escapeIndexes.indexOf(index)>=0,isPrevCharEscaped=index>0&&escapeIndexes.indexOf(index-1)>=0,isNextCharEscaped=escapeIndexes.indexOf(index+1)>=0;return isCurrentCharEscaped&&(isPrevCharEscaped||(result="'"+result),isNextCharEscaped||(result+="'")),result})).join("")}(result,defaultPattern,processedIndexes,patternPositions),processedIndexes.length?result:void 0},console=__webpack_require__("./node_modules/devextreme/esm/core/utils/console.js"),date_parser_FORMAT_TYPES={3:"abbreviated",4:"wide",5:"narrow"},monthRegExpGenerator=function(count,dateParts){return count>2?Object.keys(date_parser_FORMAT_TYPES).map((function(count){return["format","standalone"].map((function(type){return dateParts.getMonthNames(date_parser_FORMAT_TYPES[count],type).join("|")})).join("|")})).join("|"):2===count?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},PATTERN_REGEXPS={":":function(count,dateParts){var countSuffix=count>1?"{".concat(count,"}"):"",timeSeparator=(0,common.hr)(dateParts.getTimeSeparator());return":"!==timeSeparator&&(timeSeparator="".concat(timeSeparator,"|:")),"".concat(timeSeparator).concat(countSuffix)},y:function(count){return 2===count?"[0-9]{".concat(count,"}"):"[0-9]+?"},M:monthRegExpGenerator,L:monthRegExpGenerator,Q:function(count,dateParts){return count>2?dateParts.getQuarterNames(date_parser_FORMAT_TYPES[count],"format").join("|"):"0?[1-4]"},E:function(count,dateParts){return"\\D*"},a:function(count,dateParts){return dateParts.getPeriodNames(date_parser_FORMAT_TYPES[count<3?3:count],"format").join("|")},d:function(count){return 2===count?"3[01]|[12][0-9]|0?[1-9]":"0??[1-9]|[12][0-9]|3[01]"},H:function(count){return 2===count?"2[0-3]|1[0-9]|0?[0-9]":"0??[0-9]|1[0-9]|2[0-3]"},h:function(count){return 2===count?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},m:function(count){return 2===count?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},s:function(count){return 2===count?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},S:function(count){return"[0-9]{1,".concat(count,"}")},w:function(count){return 2===count?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"}},parseNumber=Number,caseInsensitiveIndexOf=function(array,value){return array.map((item=>item.toLowerCase())).indexOf(value.toLowerCase())},monthPatternParser=function(text,count,dateParts){return count>2?["format","standalone"].map((function(type){return Object.keys(date_parser_FORMAT_TYPES).map((function(count){var monthNames=dateParts.getMonthNames(date_parser_FORMAT_TYPES[count],type);return caseInsensitiveIndexOf(monthNames,text)}))})).reduce((function(a,b){return a.concat(b)})).filter((function(index){return index>=0}))[0]:parseNumber(text)-1},PATTERN_PARSERS={y:function(text,count){var year=parseNumber(text);return 2===count?year<30?2e3+year:1900+year:year},M:monthPatternParser,L:monthPatternParser,Q:function(text,count,dateParts){return count>2?dateParts.getQuarterNames(date_parser_FORMAT_TYPES[count],"format").indexOf(text):parseNumber(text)-1},E:function(text,count,dateParts){var dayNames=dateParts.getDayNames(date_parser_FORMAT_TYPES[count<3?3:count],"format");return caseInsensitiveIndexOf(dayNames,text)},a:function(text,count,dateParts){var periodNames=dateParts.getPeriodNames(date_parser_FORMAT_TYPES[count<3?3:count],"format");return caseInsensitiveIndexOf(periodNames,text)},d:parseNumber,H:parseNumber,h:parseNumber,m:parseNumber,s:parseNumber,S:function(text,count){for(count=Math.max(count,3),text=text.slice(0,3);count<3;)text+="0",count++;return parseNumber(text)}},ORDERED_PATTERNS=["y","M","d","h","m","s","S"],PATTERN_SETTERS={y:"setFullYear",M:"setMonth",L:"setMonth",a:function(date,value,datePartValues){var hours=date.getHours(),hourPartValue=datePartValues.h;void 0!==hourPartValue&&hourPartValue!==hours&&hours--,value||12!==hours?value&&12!==hours&&(hours+=12):hours=0,date.setHours(hours)},d:"setDate",H:"setHours",h:"setHours",m:"setMinutes",s:"setSeconds",S:"setMilliseconds"},getSameCharCount=function(text,index){var char=text[index];if(!char)return 0;var count=0;do{index++,count++}while(text[index]===char);return count},createPattern=function(char,count){for(var result="",i=0;i<count;i++)result+=char;return result},getRegExpInfo=function(format,dateParts){for(var isEscaping,regexpText="",stubText="",patterns=[],addPreviousStub=function(){stubText&&(patterns.push("'".concat(stubText,"'")),regexpText+="".concat((0,common.hr)(stubText),")"),stubText="")},i=0;i<format.length;i++){var char=format[i],regexpPart=PATTERN_REGEXPS[char];if(!("'"===char)||(isEscaping=!isEscaping,"'"===format[i-1]))if(regexpPart&&!isEscaping){var count=getSameCharCount(format,i),pattern=createPattern(char,count);addPreviousStub(),patterns.push(pattern),regexpText+="(".concat(regexpPart(count,dateParts),")"),i+=count-1}else stubText||(regexpText+="("),stubText+=char}return addPreviousStub(),isPossibleForParsingFormat(patterns)||console.k.warn("The following format may be parsed incorrectly: ".concat(format,".")),{patterns,regexp:new RegExp("^".concat(regexpText,"$"),"i")}},digitFieldSymbols=["d","H","h","m","s","w","M","L","Q"],isPossibleForParsingFormat=function(patterns){var isDigitPattern=pattern=>{if(!pattern)return!1;var char=pattern[0];return["y","S"].includes(char)||digitFieldSymbols.includes(char)&&pattern.length<3},possibleForParsing=!0,ambiguousDigitPatternsCount=0;return patterns.every(((pattern,index,patterns)=>(isDigitPattern(pattern)&&((pattern=>"S"!==pattern[0]&&2!==pattern.length)(pattern)&&(possibleForParsing=++ambiguousDigitPatternsCount<2),isDigitPattern(patterns[index+1])||(ambiguousDigitPatternsCount=0)),possibleForParsing)))},getParser=function(format,dateParts){var regExpInfo=getRegExpInfo(format,dateParts);return function(text){var indexes,regExpResult=regExpInfo.regexp.exec(text);if(regExpResult){var now=new Date,date=new Date(now.getFullYear(),0,1),formatPatterns=regExpInfo.patterns.map((function(pattern){return"'"===pattern[0]?"":"H"===pattern[0]?"h":pattern[0]})),maxPatternIndex=(indexes=formatPatterns.map((function(pattern){return ORDERED_PATTERNS.indexOf(pattern)})),Math.max.apply(Math,indexes)),orderedFormatPatterns=function(formatPatterns){var otherPatterns=formatPatterns.filter((function(pattern){return ORDERED_PATTERNS.indexOf(pattern)<0}));return ORDERED_PATTERNS.concat(otherPatterns)}(formatPatterns),datePartValues={};return orderedFormatPatterns.forEach((function(pattern,index){if(pattern&&!(index<ORDERED_PATTERNS.length&&index>maxPatternIndex)){var patternIndex=formatPatterns.indexOf(pattern);if(patternIndex>=0){var regExpPattern=regExpInfo.patterns[patternIndex],regExpText=regExpResult[patternIndex+1];!function(date,pattern,text,dateParts,datePartValues){var patternChar=pattern[0],partSetter=PATTERN_SETTERS[patternChar],partParser=PATTERN_PARSERS[patternChar];if(partSetter&&partParser){var value=partParser(text,pattern.length,dateParts);datePartValues[pattern]=value,date[partSetter]?date[partSetter](value):partSetter(date,value,datePartValues)}}(date,regExpPattern,regExpText,dateParts,datePartValues)}else!function(date,pattern,now){var setterName=PATTERN_SETTERS[pattern],value=now["g"+setterName.substr(1)]();date[setterName](value)}(date,pattern,now)}})),date}return null}},MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"],DAYS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],PERIODS=["AM","PM"],QUARTERS=["Q1","Q2","Q3","Q4"],cutCaptions=(captions,format)=>{var lengthByFormat={abbreviated:3,short:2,narrow:1};return(0,iterator.UI)(captions,(caption=>caption.substr(0,lengthByFormat[format])))};const default_date_names={getMonthNames:function(format){return cutCaptions(MONTHS,format)},getDayNames:function(format){return cutCaptions(DAYS,format)},getQuarterNames:function(format){return QUARTERS},getPeriodNames:function(format){return PERIODS}},first_day_of_week_data={"af-NA":1,agq:1,ak:1,ar:6,"ar-EH":1,"ar-ER":1,"ar-KM":1,"ar-LB":1,"ar-MA":1,"ar-MR":1,"ar-PS":1,"ar-SO":1,"ar-SS":1,"ar-TD":1,"ar-TN":1,asa:1,ast:1,az:1,"az-Cyrl":1,bas:1,be:1,bem:1,bez:1,bg:1,bm:1,br:1,bs:1,"bs-Cyrl":1,ca:1,ce:1,cgg:1,ckb:6,cs:1,cy:1,da:1,de:1,dje:1,dsb:1,dua:1,dyo:1,ee:1,el:1,"en-001":1,"en-AE":6,"en-BI":1,"en-MP":1,"en-MV":5,"en-SD":6,eo:1,es:1,et:1,eu:1,ewo:1,fa:6,ff:1,"ff-Adlm":1,fi:1,fo:1,fr:1,"fr-DJ":6,"fr-DZ":6,"fr-SY":6,fur:1,fy:1,ga:1,gd:1,gl:1,gsw:1,gv:1,ha:1,hr:1,hsb:1,hu:1,hy:1,ia:1,ig:1,is:1,it:1,jgo:1,jmc:1,ka:1,kab:6,kde:1,kea:1,khq:1,kk:1,kkj:1,kl:1,"ko-KP":1,ksb:1,ksf:1,ksh:1,ku:1,kw:1,ky:1,lag:1,lb:1,lg:1,ln:1,lrc:6,lt:1,lu:1,lv:1,"mas-TZ":1,mfe:1,mg:1,mgo:1,mi:1,mk:1,mn:1,ms:1,mua:1,mzn:6,naq:1,nds:1,nl:1,nmg:1,nnh:1,no:1,nus:1,nyn:1,os:1,pcm:1,pl:1,ps:6,"pt-AO":1,"pt-CH":1,"pt-CV":1,"pt-GQ":1,"pt-GW":1,"pt-LU":1,"pt-ST":1,"pt-TL":1,"qu-BO":1,"qu-EC":1,rm:1,rn:1,ro:1,rof:1,ru:1,rw:1,rwk:1,sah:1,sbp:1,sc:1,se:1,ses:1,sg:1,shi:1,"shi-Latn":1,si:1,sk:1,sl:1,smn:1,so:1,"so-DJ":6,sq:1,sr:1,"sr-Latn":1,sv:1,sw:1,"ta-LK":1,"ta-MY":1,teo:1,tg:1,"ti-ER":1,tk:1,to:1,tr:1,tt:1,twq:1,tzm:1,uk:1,uz:1,"uz-Arab":6,"uz-Cyrl":1,vai:1,"vai-Latn":1,vi:1,vun:1,wae:1,wo:1,xog:1,yav:1,yi:1,yo:1,zgh:1};var localization_core=__webpack_require__("./node_modules/devextreme/esm/localization/core.js"),SYMBOLS_TO_REMOVE_REGEX=/[\u200E\u200F]/g,NARROW_NO_BREAK_SPACE_REGEX=/[\u202F]/g,getIntlFormatter=format=>date=>{if(!format.timeZoneName){var year=date.getFullYear(),recognizableAsTwentyCentury=String(year).length<3,temporaryYearValue=recognizableAsTwentyCentury?year+400:year,utcDate=new Date(Date.UTC(temporaryYearValue,date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()));return recognizableAsTwentyCentury&&utcDate.setFullYear(year),formatDateTime(utcDate,(0,extend.l)({timeZone:"UTC"},format))}return formatDateTime(date,format)},formattersCache={},date_getFormatter=format=>{var key=localization_core.Z.locale()+"/"+JSON.stringify(format);return formattersCache[key]||(formattersCache[key]=new Intl.DateTimeFormat(localization_core.Z.locale(),format).format),formattersCache[key]};function formatDateTime(date,format){return date_getFormatter(format)(date).replace(SYMBOLS_TO_REMOVE_REGEX,"").replace(NARROW_NO_BREAK_SPACE_REGEX," ")}var numeralsMapCache,formatNumber=number=>new Intl.NumberFormat(localization_core.Z.locale()).format(number),getAlternativeNumeralsMap=(numeralsMapCache={},locale=>{if(!(locale in numeralsMapCache)){if("0"===formatNumber(0))return numeralsMapCache[locale]=!1,!1;numeralsMapCache[locale]={};for(var i=0;i<10;++i)numeralsMapCache[locale][formatNumber(i)]=i}return numeralsMapCache[locale]}),normalizeNumerals=dateString=>{var alternativeNumeralsMap=getAlternativeNumeralsMap(localization_core.Z.locale());return alternativeNumeralsMap?dateString.split("").map((sign=>sign in alternativeNumeralsMap?String(alternativeNumeralsMap[sign]):sign)).join(""):dateString},removeLeadingZeroes=str=>str.replace(/(\D)0+(\d)/g,"$1$2"),normalizeMonth=text=>text.replace("d’","de "),intlFormats={day:{day:"numeric"},dayofweek:{weekday:"long"},longdate:{weekday:"long",year:"numeric",month:"long",day:"numeric"},longdatelongtime:{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},longtime:{hour:"numeric",minute:"numeric",second:"numeric"},month:{month:"long"},monthandday:{month:"long",day:"numeric"},monthandyear:{year:"numeric",month:"long"},shortdate:{},shorttime:{hour:"numeric",minute:"numeric"},shortyear:{year:"2-digit"},year:{year:"numeric"}};Object.defineProperty(intlFormats,"shortdateshorttime",{get:function(){var defaultOptions=Intl.DateTimeFormat(localization_core.Z.locale()).resolvedOptions();return{year:defaultOptions.year,month:defaultOptions.month,day:defaultOptions.day,hour:"numeric",minute:"numeric"}}});var monthNameStrategies={standalone:function(monthIndex,monthFormat){var date=new Date(1999,monthIndex,13,1);return getIntlFormatter({month:monthFormat})(date)},format:function(monthIndex,monthFormat){var date=new Date(0,monthIndex,13,1),parts=normalizeMonth(getIntlFormatter({day:"numeric",month:monthFormat})(date)).split(" ").filter((part=>part.indexOf("13")<0));return 1===parts.length?parts[0]:2===parts.length?parts[0].length>parts[1].length?parts[0]:parts[1]:monthNameStrategies.standalone(monthIndex,monthFormat)}};const date={engine:function(){return"intl"},getMonthNames:function(format,type){var monthFormat={wide:"long",abbreviated:"short",narrow:"narrow"}[format||"wide"];return type="format"===type?type:"standalone",Array.apply(null,new Array(12)).map(((_,monthIndex)=>monthNameStrategies[type](monthIndex,monthFormat)))},getDayNames:function(format){var result=(format=>Array.apply(null,new Array(7)).map(((_,dayIndex)=>getIntlFormatter({weekday:format})(new Date(0,0,dayIndex)))))({wide:"long",abbreviated:"short",short:"narrow",narrow:"narrow"}[format||"wide"]);return result},getPeriodNames:function(){var hour12Formatter=getIntlFormatter({hour:"numeric",hour12:!0});return[1,13].map((hours=>{var hourNumberText=formatNumber(1),timeParts=hour12Formatter(new Date(0,0,1,hours)).split(hourNumberText);return 2!==timeParts.length?"":(timeParts[0].length>timeParts[1].length?timeParts[0]:timeParts[1]).trim()}))},format:function(date,_format){if(date){if(!_format)return date;"function"==typeof _format||_format.formatter||(_format=_format.type||_format);var format,intlFormat="string"==typeof(format=_format)&&intlFormats[format.toLowerCase()];if(intlFormat)return getIntlFormatter(intlFormat)(date);var formatType=typeof _format;return _format.formatter||"function"===formatType||"string"===formatType?this.callBase.apply(this,arguments):getIntlFormatter(_format)(date)}},parse:function(dateString,format){var formatter;return format&&!format.parser&&"string"==typeof dateString&&(dateString=normalizeMonth(dateString),formatter=date=>normalizeMonth(this.format(date,format))),this.callBase(dateString,formatter||format)},_parseDateBySimpleFormat:function(dateString,format){dateString=normalizeNumerals(dateString);var formatParts=this.getFormatParts(format),dateParts=dateString.split(/\D+/).filter((part=>part.length>0));if(formatParts.length===dateParts.length){var dateArgs=this._generateDateArgs(formatParts,dateParts),constructValidDate=ampmShift=>{var actual,expected,parsedDate=((dateArgs,ampmShift)=>{var hoursShift=ampmShift?12:0;return new Date(dateArgs.year,dateArgs.month,dateArgs.day,(dateArgs.hours+hoursShift)%24,dateArgs.minutes,dateArgs.seconds)})(dateArgs,ampmShift);if(actual=normalizeNumerals(this.format(parsedDate,format)),expected=dateString,removeLeadingZeroes(actual)===removeLeadingZeroes(expected))return parsedDate};return constructValidDate(!1)||constructValidDate(!0)}},_generateDateArgs:function(formatParts,dateParts){var currentDate=new Date,dateArgs={year:currentDate.getFullYear(),month:currentDate.getMonth(),day:currentDate.getDate(),hours:0,minutes:0,seconds:0};return formatParts.forEach(((formatPart,index)=>{var datePart=dateParts[index],parsed=parseInt(datePart,10);"month"===formatPart&&(parsed-=1),dateArgs[formatPart]=parsed})),dateArgs},formatUsesMonthName:function(format){return"object"!=typeof format||format.type||format.format?this.callBase.apply(this,arguments):"long"===format.month},formatUsesDayName:function(format){return"object"!=typeof format||format.type||format.format?this.callBase.apply(this,arguments):"long"===format.weekday},getTimeSeparator:function(){return normalizeNumerals(formatDateTime(new Date(2001,1,1,11,11),{hour:"numeric",minute:"numeric",hour12:!1})).replace(/\d/g,"")},getFormatParts:function(format){if("string"==typeof format)return this.callBase(format);var intlFormat=(0,extend.l)({},intlFormats[format.toLowerCase()]),date=new Date(2001,2,4,5,6,7),formattedDate=getIntlFormatter(intlFormat)(date);return formattedDate=normalizeNumerals(formattedDate),[{name:"year",value:1},{name:"month",value:3},{name:"day",value:4},{name:"hours",value:5},{name:"minutes",value:6},{name:"seconds",value:7}].map((part=>({name:part.name,index:formattedDate.indexOf(part.value)}))).filter((part=>part.index>-1)).sort(((a,b)=>a.index-b.index)).map((part=>part.name))}};var hasIntl="undefined"!=typeof Intl,FORMATS_TO_PATTERN_MAP={shortdate:"M/d/y",shorttime:"h:mm a",longdate:"EEEE, MMMM d, y",longtime:"h:mm:ss a",monthandday:"MMMM d",monthandyear:"MMMM y",quarterandyear:"QQQ y",day:"d",year:"y",shortdateshorttime:"M/d/y, h:mm a",longdatelongtime:"EEEE, MMMM d, y, h:mm:ss a",month:"LLLL",shortyear:"yy",dayofweek:"EEEE",quarter:"QQQ",hour:"HH",minute:"mm",second:"ss",millisecond:"SSS","datetime-local":"yyyy-MM-ddTHH':'mm':'ss"},possiblePartPatterns={year:["y","yy","yyyy"],day:["d","dd"],month:["M","MM","MMM","MMMM"],hours:["H","HH","h","hh","ah"],minutes:["m","mm"],seconds:["s","ss"],milliseconds:["S","SS","SSS"]},dateLocalization=(0,dependency_injector.Z)({engine:function(){return"base"},_getPatternByFormat:function(format){return FORMATS_TO_PATTERN_MAP[format.toLowerCase()]},_expandPattern:function(pattern){return this._getPatternByFormat(pattern)||pattern},formatUsesMonthName:function(format){return-1!==this._expandPattern(format).indexOf("MMMM")},formatUsesDayName:function(format){return-1!==this._expandPattern(format).indexOf("EEEE")},getFormatParts:function(format){var pattern=this._getPatternByFormat(format)||format,result=[];return(0,iterator.S6)(pattern.split(/\W+/),((_,formatPart)=>{(0,iterator.S6)(possiblePartPatterns,((partName,possiblePatterns)=>{possiblePatterns.includes(formatPart)&&result.push(partName)}))})),result},getMonthNames:function(format){return default_date_names.getMonthNames(format)},getDayNames:function(format){return default_date_names.getDayNames(format)},getQuarterNames:function(format){return default_date_names.getQuarterNames(format)},getPeriodNames:function(format){return default_date_names.getPeriodNames(format)},getTimeSeparator:function(){return":"},is24HourFormat:function(format){for(var amTime=new Date(2017,0,20,11,0,0,0),pmTime=new Date(2017,0,20,23,0,0,0),amTimeFormatted=this.format(amTime,format),pmTimeFormatted=this.format(pmTime,format),i=0;i<amTimeFormatted.length;i++)if(amTimeFormatted[i]!==pmTimeFormatted[i])return!isNaN(parseInt(amTimeFormatted[i]))},format:function(date,_format){if(date){if(!_format)return date;var formatter;if("function"==typeof _format)formatter=_format;else if(_format.formatter)formatter=_format.formatter;else if(_format=_format.type||_format,(0,utils_type.HD)(_format))return _format=FORMATS_TO_PATTERN_MAP[_format.toLowerCase()]||_format,number.Z.convertDigits(getFormatter(_format,this)(date));if(formatter)return formatter(date)}},parse:function(text,format){var ldmlFormat,formatter,that=this;if(text){if(!format)return this.parse(text,"shortdate");if(format.parser)return format.parser(text);if("string"!=typeof format||FORMATS_TO_PATTERN_MAP[format.toLowerCase()]){formatter=value=>{var text=that.format(value,format);return number.Z.convertDigits(text,!0)};try{ldmlFormat=getFormat(formatter)}catch(e){}}else ldmlFormat=format;if(ldmlFormat)return text=number.Z.convertDigits(text,!0),getParser(ldmlFormat,this)(text);errors.Z.log("W0012");var result=new Date(text);if(result&&!isNaN(result.getTime()))return result}},firstDayOfWeekIndex:function(){var index=localization_core.Z.getValueByClosestLocale((locale=>first_day_of_week_data[locale]));return void 0===index?0:index}});hasIntl&&dateLocalization.inject(date);const localization_date=dateLocalization;__webpack_require__("./node_modules/devextreme/esm/localization/currency.js");const format_helper=(0,dependency_injector.Z)({format:function(value,_format){var formatIsValid=(0,utils_type.HD)(_format)&&""!==_format||(0,utils_type.PO)(_format)||(0,utils_type.mf)(_format),valueIsValid=(0,utils_type.kE)(value)||(0,utils_type.J_)(value);return formatIsValid&&valueIsValid?(0,utils_type.mf)(_format)?_format(value):((0,utils_type.HD)(_format)&&(_format={type:_format}),(0,utils_type.kE)(value)?number.Z.format(value,_format):(0,utils_type.J_)(value)?localization_date.format(value,_format):void 0):(0,utils_type.$K)(value)?value.toString():""},getTimeFormat:function(showSecond){return showSecond?"longtime":"shorttime"},_normalizeFormat:function(format){return Array.isArray(format)?1===format.length?format[0]:function(date){return format.map((function(formatPart){return localization_date.format(date,formatPart)})).join(" ")}:format},getDateFormatByDifferences:function(dateDifferences,intervalFormat){var resultFormat=[],needSpecialSecondFormatter=intervalFormat&&dateDifferences.millisecond&&!(dateDifferences.year||dateDifferences.month||dateDifferences.day);return needSpecialSecondFormatter?resultFormat.push((function(date){return date.getSeconds()+date.getMilliseconds()/1e3+"s"})):dateDifferences.millisecond&&resultFormat.push("millisecond"),(dateDifferences.hour||dateDifferences.minute||!needSpecialSecondFormatter&&dateDifferences.second)&&resultFormat.unshift(this.getTimeFormat(dateDifferences.second)),dateDifferences.year&&dateDifferences.month&&dateDifferences.day?intervalFormat&&"month"===intervalFormat?"monthandyear":(resultFormat.unshift("shortdate"),this._normalizeFormat(resultFormat)):dateDifferences.year&&dateDifferences.month?"monthandyear":dateDifferences.year&&dateDifferences.quarter?"quarterandyear":dateDifferences.year?"year":dateDifferences.quarter?"quarter":dateDifferences.month&&dateDifferences.day?(intervalFormat?resultFormat.unshift((function(date){return localization_date.getMonthNames("abbreviated")[date.getMonth()]+" "+localization_date.format(date,"day")})):resultFormat.unshift("monthandday"),this._normalizeFormat(resultFormat)):dateDifferences.month?"month":dateDifferences.day?(intervalFormat?resultFormat.unshift("day"):resultFormat.unshift((function(date){return localization_date.format(date,"dayofweek")+", "+localization_date.format(date,"day")})),this._normalizeFormat(resultFormat)):this._normalizeFormat(resultFormat)},getDateFormatByTicks:function(ticks){var maxDiff,currentDiff,i;if(ticks.length>1)for(maxDiff=utils_date.getDatesDifferences(ticks[0],ticks[1]),i=1;i<ticks.length-1;i++)currentDiff=utils_date.getDatesDifferences(ticks[i],ticks[i+1]),maxDiff.count<currentDiff.count&&(maxDiff=currentDiff);else maxDiff={year:!0,month:!0,day:!0,hour:ticks[0].getHours()>0,minute:ticks[0].getMinutes()>0,second:ticks[0].getSeconds()>0,millisecond:ticks[0].getMilliseconds()>0};return this.getDateFormatByDifferences(maxDiff)},getDateFormatByTickInterval:function(startValue,endValue,tickInterval){var dateUnitInterval,correctDateDifferences=function(dateDifferences,tickInterval,value){switch(tickInterval){case"year":case"quarter":dateDifferences.month=value;case"month":dateDifferences.day=value;case"week":case"day":dateDifferences.hour=value;case"hour":dateDifferences.minute=value;case"minute":dateDifferences.second=value;case"second":dateDifferences.millisecond=value}};tickInterval=(0,utils_type.HD)(tickInterval)?tickInterval.toLowerCase():tickInterval;var differences,minDate,maxDate,dateDifferences=utils_date.getDatesDifferences(startValue,endValue);return startValue!==endValue&&(differences=dateDifferences,minDate=startValue>endValue?endValue:startValue,!(maxDate=startValue>endValue?startValue:endValue).getMilliseconds()&&maxDate.getSeconds()?maxDate.getSeconds()-minDate.getSeconds()==1&&(differences.millisecond=!0,differences.second=!1):!maxDate.getSeconds()&&maxDate.getMinutes()?maxDate.getMinutes()-minDate.getMinutes()==1&&(differences.second=!0,differences.minute=!1):!maxDate.getMinutes()&&maxDate.getHours()?maxDate.getHours()-minDate.getHours()==1&&(differences.minute=!0,differences.hour=!1):!maxDate.getHours()&&maxDate.getDate()>1?maxDate.getDate()-minDate.getDate()==1&&(differences.hour=!0,differences.day=!1):1===maxDate.getDate()&&maxDate.getMonth()?maxDate.getMonth()-minDate.getMonth()==1&&(differences.day=!0,differences.month=!1):!maxDate.getMonth()&&maxDate.getFullYear()&&maxDate.getFullYear()-minDate.getFullYear()==1&&(differences.month=!0,differences.year=!1)),correctDateDifferences(dateDifferences,dateUnitInterval=utils_date.getDateUnitInterval(dateDifferences),!0),correctDateDifferences(dateDifferences,dateUnitInterval=utils_date.getDateUnitInterval(tickInterval||"second"),!1),dateDifferences[{week:"day"}[dateUnitInterval]||dateUnitInterval]=!0,this.getDateFormatByDifferences(dateDifferences)}});var data_source=__webpack_require__("./node_modules/devextreme/esm/data/data_source/data_source.js"),data_source_utils=__webpack_require__("./node_modules/devextreme/esm/data/data_source/utils.js"),variable_wrapper=__webpack_require__("./node_modules/devextreme/esm/core/utils/variable_wrapper.js"),load_panel=__webpack_require__("./node_modules/devextreme/esm/ui/load_panel.js"),DEFAULT_DATE_INTERVAL=["year","month","day"],DEFAULT_DATETIME_INTERVAL=["year","month","day","hour","minute"],isDateType=function(dataType){return"date"===dataType||"datetime"===dataType},getGroupInterval=function(column){var index,result=[],dateIntervals=["year","month","day","hour","minute","second"],groupInterval=column.headerFilter&&column.headerFilter.groupInterval,interval="quarter"===groupInterval?"month":groupInterval;return isDateType(column.dataType)&&null!==groupInterval?(result="datetime"===column.dataType?DEFAULT_DATETIME_INTERVAL:DEFAULT_DATE_INTERVAL,(index=dateIntervals.indexOf(interval))>=0?((result=dateIntervals.slice(0,index)).push(groupInterval),result):result):(0,utils_type.$K)(groupInterval)?Array.isArray(groupInterval)?groupInterval:[groupInterval]:void 0};const filtering=(getFilterSelector=function(column,target){var selector=column.dataField||column.selector;return"search"===target&&(selector=column.displayField||column.calculateDisplayValue||selector),selector},getFilterExpressionByRange=function(filterValue,target){var endFilterValue,startFilterExpression,endFilterExpression,date,selector=getFilterSelector(this,target);if(Array.isArray(filterValue)&&(0,utils_type.$K)(filterValue[0])&&(0,utils_type.$K)(filterValue[1]))return startFilterExpression=[selector,">=",filterValue[0]],endFilterExpression=[selector,"<=",filterValue[1]],isDateType(this.dataType)&&(date=filterValue[1]).getHours()+date.getMinutes()+date.getSeconds()+date.getMilliseconds()<1&&(endFilterValue=new Date(filterValue[1].getTime()),"date"===this.dataType&&endFilterValue.setDate(filterValue[1].getDate()+1),endFilterExpression=[selector,"<",endFilterValue]),[startFilterExpression,"and",endFilterExpression]},getFilterExpressionForDate=function(filterValue,selectedFilterOperation,target){var dateStart,dateEnd,dateInterval,dateValue,values=(dateValue=filterValue,(0,utils_type.J_)(dateValue)?[dateValue.getFullYear(),dateValue.getMonth(),dateValue.getDate(),dateValue.getHours(),dateValue.getMinutes(),dateValue.getSeconds()]:(0,iterator.UI)((""+dateValue).split("/"),(function(value,index){return 1===index?Number(value)-1:Number(value)}))),selector=getFilterSelector(this,target);switch("headerFilter"===target?dateInterval=getGroupInterval(this)[values.length-1]:"datetime"===this.dataType&&(dateInterval="minute"),dateInterval){case"year":dateStart=new Date(values[0],0,1),dateEnd=new Date(values[0]+1,0,1);break;case"month":dateStart=new Date(values[0],values[1],1),dateEnd=new Date(values[0],values[1]+1,1);break;case"quarter":dateStart=new Date(values[0],3*values[1],1),dateEnd=new Date(values[0],3*values[1]+3,1);break;case"hour":dateStart=new Date(values[0],values[1],values[2],values[3]),dateEnd=new Date(values[0],values[1],values[2],values[3]+1);break;case"minute":dateStart=new Date(values[0],values[1],values[2],values[3],values[4]),dateEnd=new Date(values[0],values[1],values[2],values[3],values[4]+1);break;case"second":dateStart=new Date(values[0],values[1],values[2],values[3],values[4],values[5]),dateEnd=new Date(values[0],values[1],values[2],values[3],values[4],values[5]+1);break;default:dateStart=new Date(values[0],values[1],values[2]),dateEnd=new Date(values[0],values[1],values[2]+1)}switch(selectedFilterOperation){case"<":return[selector,"<",dateStart];case"<=":return[selector,"<",dateEnd];case">":return[selector,">=",dateEnd];case">=":return[selector,">=",dateStart];case"<>":return[[selector,"<",dateStart],"or",[selector,">=",dateEnd]];default:return[[selector,">=",dateStart],"and",[selector,"<",dateEnd]]}},getFilterExpressionForNumber=function(filterValue,selectedFilterOperation,target){var selector=getFilterSelector(this,target),groupInterval=getGroupInterval(this);if("headerFilter"===target&&groupInterval&&(0,utils_type.$K)(filterValue)){var values=(""+filterValue).split("/"),value=Number(values[values.length-1]);return[[selector,">=",value],"and",[selector,"<",value+groupInterval[values.length-1]]]}return[selector,selectedFilterOperation||"=",filterValue]},{defaultCalculateFilterExpression:function(filterValue,selectedFilterOperation,target){var selector=getFilterSelector(this,target),isSearchByDisplayValue=this.calculateDisplayValue&&"search"===target,dataType=isSearchByDisplayValue&&this.lookup&&this.lookup.dataType||this.dataType,filter=null;if("headerFilter"!==target&&"filterBuilder"!==target||null!==filterValue)if("string"!==dataType||this.lookup&&!isSearchByDisplayValue){if("between"===selectedFilterOperation)return getFilterExpressionByRange.apply(this,[filterValue,target]);if(isDateType(dataType)&&(0,utils_type.$K)(filterValue))return getFilterExpressionForDate.apply(this,arguments);if("number"===dataType)return getFilterExpressionForNumber.apply(this,arguments);filter=[selector,selectedFilterOperation||"=",filterValue]}else filter=[selector,selectedFilterOperation||"contains",filterValue];else filter=[selector,selectedFilterOperation||"=",null],"string"===dataType&&(filter=[filter,"="===selectedFilterOperation?"or":"and",[selector,selectedFilterOperation||"=",""]]);return filter},getGroupInterval});var getFilterSelector,getFilterExpressionByRange,getFilterExpressionForDate,getFilterExpressionForNumber;const DATE_INTERVAL_SELECTORS={year:value=>value&&value.getFullYear(),month:value=>value&&value.getMonth()+1,day:value=>value&&value.getDate(),quarter:value=>value&&Math.floor(value.getMonth()/3)+1,hour:value=>value&&value.getHours(),minute:value=>value&&value.getMinutes(),second:value=>value&&value.getSeconds()},getIntervalSelector=function(){const data=arguments[1],value=this.calculateCellValue(data);if(!(0,utils_type.$K)(value))return null;if(module_utils_isDateType(this.dataType)){return DATE_INTERVAL_SELECTORS[arguments[0]](value)}if("number"===this.dataType){const groupInterval=arguments[0];return Math.floor(Number(value)/groupInterval)*groupInterval}};function module_utils_isDateType(dataType){return"date"===dataType||"datetime"===dataType}const setEmptyText=function($container){$container.get(0).textContent=" "},normalizeSortingInfo=function(sort){sort=sort||[];const result=(0,utils.G5)(sort);for(let i=0;i<sort.length;i++)sort&&sort[i]&&void 0!==sort[i].isExpanded&&(result[i].isExpanded=sort[i].isExpanded),sort&&sort[i]&&void 0!==sort[i].groupInterval&&(result[i].groupInterval=sort[i].groupInterval);return result},module_utils_formatValue=function(value,options){const valueText=format_helper.format(value,options.format)||value&&value.toString()||"",formatObject={value,valueText:options.getDisplayFormat?options.getDisplayFormat(valueText):valueText,target:options.target||"row",groupInterval:options.groupInterval};return options.customizeText?options.customizeText.call(options,formatObject):formatObject.valueText},getSummaryText=function(summaryItem,summaryTexts){const displayFormat=summaryItem.displayFormat||summaryItem.columnCaption&&summaryTexts[summaryItem.summaryType+"OtherColumn"]||summaryTexts[summaryItem.summaryType];return module_utils_formatValue(summaryItem.value,{format:summaryItem.valueFormat,getDisplayFormat:valueText=>displayFormat?(0,string.WU)(displayFormat,valueText,summaryItem.columnCaption):valueText,customizeText:summaryItem.customizeText})},getWidgetInstance=function($element){const editorData=$element.data&&$element.data(),dxComponents=editorData&&editorData.dxComponents,widgetName=dxComponents&&dxComponents[0];return widgetName&&editorData[widgetName]},equalFilterParameters=function(filter1,filter2){if(Array.isArray(filter1)&&Array.isArray(filter2)){if(filter1.length!==filter2.length)return!1;for(let i=0;i<filter1.length;i++)if(!equalFilterParameters(filter1[i],filter2[i]))return!1;return!0}return(0,utils_type.mf)(filter1)&&filter1.columnIndex>=0&&(0,utils_type.mf)(filter2)&&filter2.columnIndex>=0?filter1.columnIndex===filter2.columnIndex&&(0,data.Ex)(filter1.filterValue)===(0,data.Ex)(filter2.filterValue)&&(0,data.Ex)(filter1.selectedFilterOperation)===(0,data.Ex)(filter2.selectedFilterOperation):(0,data.Ex)(filter1)==(0,data.Ex)(filter2)};const module_utils={renderNoDataText($element){const that=this;if(!($element=$element||this.element()))return;const noDataClass=that.addWidgetPrefix("nodata");let noDataElement=$element.find("."+noDataClass).last();const isVisible=this._dataController.isEmpty(),isLoading=this._dataController.isLoading();noDataElement.length||(noDataElement=(0,renderer.Z)("<span>").addClass(noDataClass).appendTo($element)),isVisible&&!isLoading?noDataElement.removeClass("dx-hidden").text(that._getNoDataText()):noDataElement.addClass("dx-hidden")},renderLoadPanel($element,$container,isLocalStore){const that=this;let loadPanelOptions;that._loadPanel&&that._loadPanel.$element().remove(),loadPanelOptions=that.option("loadPanel"),loadPanelOptions&&("auto"===loadPanelOptions.enabled?!isLocalStore:loadPanelOptions.enabled)?(loadPanelOptions=(0,extend.l)({shading:!1,message:loadPanelOptions.text,container:$container},loadPanelOptions),that._loadPanel=that._createComponent((0,renderer.Z)("<div>").appendTo($container),load_panel.Z,loadPanelOptions)):that._loadPanel=null},calculateLoadPanelPosition($element){const $window=(0,renderer.Z)((0,utils_window.Jj)());return(0,size.Cr)($element)>(0,size.Cr)($window)?{of:$window,boundary:$element,collision:"fit"}:{of:$element}},getIndexByKey(key,items,keyName){let index=-1;if(void 0!==key&&Array.isArray(items)){keyName=arguments.length<=2?"key":keyName;for(let i=0;i<items.length;i++){const item=(0,utils_type.$K)(keyName)?items[i][keyName]:items[i];if((0,common.bY)(key,item)){index=i;break}}}return index},combineFilters(filters,operation){var _a;let resultFilter=[];operation=operation||"and";for(let i=0;i<filters.length;i++)if(filters[i]){if(1===(null===(_a=filters[i])||void 0===_a?void 0:_a.length)&&"!"===filters[i][0]){if("and"===operation)return["!"];if("or"===operation)continue}resultFilter.length&&resultFilter.push(operation),resultFilter.push(filters[i])}if(1===resultFilter.length&&(resultFilter=resultFilter[0]),resultFilter.length)return resultFilter},checkChanges(changes,changeNames){let changesWithChangeNamesCount=0;for(let i=0;i<changeNames.length;i++)changes[changeNames[i]]&&changesWithChangeNamesCount++;return changes.length&&changes.length===changesWithChangeNamesCount},equalFilterParameters,proxyMethod(instance,methodName,defaultResult){instance[methodName]||(instance[methodName]=function(){const dataSource=this._dataSource;return dataSource?dataSource[methodName].apply(dataSource,arguments):defaultResult})},formatValue:module_utils_formatValue,getFormatOptionsByColumn:(column,target)=>({format:column.format,getDisplayFormat:column.getDisplayFormat,customizeText:column.customizeText,target,trueText:column.trueText,falseText:column.falseText}),getDisplayValue:(column,value,data,rowType)=>column.displayValueMap&&void 0!==column.displayValueMap[value]?column.displayValueMap[value]:column.calculateDisplayValue&&data&&"group"!==rowType?column.calculateDisplayValue(data):!column.lookup||"group"===rowType&&(column.calculateGroupValue||column.calculateDisplayValue)?value:column.lookup.calculateCellValue(value),getGroupRowSummaryText(summaryItems,summaryTexts){let result="(";for(let i=0;i<summaryItems.length;i++){const summaryItem=summaryItems[i];result+=(i>0?", ":"")+getSummaryText(summaryItem,summaryTexts)}return result+")"},getSummaryText,normalizeSortingInfo,getFormatByDataType(dataType){switch(dataType){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(column,remoteGrouping){let result=[];const dataField=column.dataField||column.name,groupInterval=filtering.getGroupInterval(column);return groupInterval?((0,iterator.S6)(groupInterval,((index,interval)=>{result.push(remoteGrouping?{selector:dataField,groupInterval:interval,isExpanded:index<groupInterval.length-1}:getIntervalSelector.bind(column,interval))})),result):(remoteGrouping?result=[{selector:dataField,isExpanded:!1}]:(result=function(data){let result=column.calculateCellValue(data);return void 0!==result&&""!==result||(result=null),result},column.sortingMethod&&(result=[{selector:result,compare:column.sortingMethod.bind(column)}])),result)},equalSortParameters(sortParameters1,sortParameters2,ignoreIsExpanded){if(sortParameters1=normalizeSortingInfo(sortParameters1),sortParameters2=normalizeSortingInfo(sortParameters2),Array.isArray(sortParameters1)&&Array.isArray(sortParameters2)){if(sortParameters1.length!==sortParameters2.length)return!1;for(let i=0;i<sortParameters1.length;i++)if(selector1=sortParameters1[i].selector,selector2=sortParameters2[i].selector,!((0,utils_type.mf)(selector1)&&(0,utils_type.mf)(selector2)&&selector1.originalCallback&&selector2.originalCallback?selector1.originalCallback===selector2.originalCallback&&selector1.columnIndex===selector2.columnIndex:selector1===selector2)||sortParameters1[i].desc!==sortParameters2[i].desc||sortParameters1[i].groupInterval!==sortParameters2[i].groupInterval||!ignoreIsExpanded&&Boolean(sortParameters1[i].isExpanded)!==Boolean(sortParameters2[i].isExpanded))return!1;return!0}var selector1,selector2;return(!sortParameters1||!sortParameters1.length)==(!sortParameters2||!sortParameters2.length)},getPointsByColumns(items,pointCreated,isVertical,startColumnIndex){const cellsLength=items.length;let item,offset,notCreatePoint=!1,columnIndex=startColumnIndex||0;const result=[];let rtlEnabled;for(let i=0;i<=cellsLength;i++){i<cellsLength&&(item=items.eq(i),offset=item.offset(),rtlEnabled="rtl"===item.css("direction"));const point={index:columnIndex,x:offset?offset.left+(!isVertical&&rtlEnabled^i===cellsLength?(0,utils_position.l)(item[0]).width:0):0,y:offset?offset.top+(isVertical&&i===cellsLength?(0,utils_position.l)(item[0]).height:0):0,columnIndex};if(!isVertical&&i>0){const prevItemOffset=items.eq(i-1).offset();prevItemOffset.top<point.y&&(point.y=prevItemOffset.top)}pointCreated&&(notCreatePoint=pointCreated(point)),notCreatePoint||result.push(point),columnIndex++}return result},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(container,options){const $container=(0,renderer.Z)(container);if(!(0,utils_type.$K)(options.value)||options.data&&options.data.isContinuation||options.row.isNewRow)setEmptyText($container);else{const rowsView=options.component.getView("rowsView");$container.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,renderer.Z)("<div>").addClass(options.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo($container),rowsView.setAria("label",options.value?rowsView.localize("dxDataGrid-ariaCollapse"):rowsView.localize("dxDataGrid-ariaExpand"),$container)}}}),setEmptyText,isDateType:module_utils_isDateType,getSelectionRange(focusedElement){try{if(focusedElement)return{selectionStart:focusedElement.selectionStart,selectionEnd:focusedElement.selectionEnd}}catch(e){}return{}},setSelectionRange(focusedElement,selectionRange){try{focusedElement&&focusedElement.setSelectionRange&&focusedElement.setSelectionRange(selectionRange.selectionStart,selectionRange.selectionEnd)}catch(e){}},focusAndSelectElement(component,$element){const isFocused=$element.is(":focus");events_engine.Z.trigger($element,"focus");const isSelectTextOnEditingStart=component.option("editing.selectTextOnEditStart"),element=$element.get(0);if(!isFocused&&isSelectTextOnEditingStart&&$element.is(".dx-texteditor-input")&&!$element.is("[readonly]")){const editor=getWidgetInstance($element.closest(".dx-texteditor"));(0,utils_deferred.gx)(editor&&editor._loadItemDeferred).done((()=>{element.select()}))}},getWidgetInstance,getLastResizableColumnIndex(columns,resultWidths){const hasResizableColumns=columns.some((column=>column&&!column.command&&!column.fixed&&!1!==column.allowResizing));let lastColumnIndex;for(lastColumnIndex=columns.length-1;columns[lastColumnIndex];lastColumnIndex--){const column=columns[lastColumnIndex],width=resultWidths&&resultWidths[lastColumnIndex],allowResizing=!hasResizableColumns||!1!==column.allowResizing;if(!column.command&&!column.fixed&&"adaptiveHidden"!==width&&allowResizing)break}return lastColumnIndex},isElementInCurrentGrid(controller,$element){if($element&&$element.length){return $element.closest("."+controller.getWidgetContainerClass()).parent().is(controller.component.$element())}return!1},isVirtualRowRendering(that){const rowRenderingMode=that.option("scrolling.rowRenderingMode"),isVirtualMode="virtual"===that.option("scrolling.mode"),isAppendMode="infinite"===that.option("scrolling.mode");return!(!1!==that.option("scrolling.legacyMode")||!isVirtualMode&&!isAppendMode)||"virtual"===rowRenderingMode},getPixelRatio:window=>window.devicePixelRatio||1,_setPixelRatioFn(value){this.getPixelRatio=value},getContentHeightLimit(browser){return browser.mozilla?8e6:15e6/this.getPixelRatio((0,utils_window.Jj)())},normalizeLookupDataSource(lookup){let lookupDataSourceOptions;return lookup.items?lookupDataSourceOptions=lookup.items:(lookupDataSourceOptions=lookup.dataSource,(0,utils_type.mf)(lookupDataSourceOptions)&&!variable_wrapper.default.isWrapped(lookupDataSourceOptions)&&(lookupDataSourceOptions=lookupDataSourceOptions({}))),(0,data_source_utils.aN)(lookupDataSourceOptions)},getWrappedLookupDataSource(column,dataSource,filter){if(!dataSource)return[];const lookupDataSourceOptions=this.normalizeLookupDataSource(column.lookup);if(column.calculateCellValue!==column.defaultCalculateCellValue)return lookupDataSourceOptions;const hasGroupPaging=dataSource.remoteOperations().groupPaging,hasLookupOptimization=column.displayField&&(0,utils_type.HD)(column.displayField);let cachedUniqueRelevantItems,previousTake,previousSkip;const sliceItems=(items,loadOptions)=>{var _a;const start=null!==(_a=loadOptions.skip)&&void 0!==_a?_a:0,end=loadOptions.take?start+loadOptions.take:items.length;return items.slice(start,end)},lookupDataSource=Object.assign(Object.assign({},lookupDataSourceOptions),{__dataGridSourceFilter:filter,load:loadOptions=>{const d=new utils_deferred.BH;return(loadOptions=>{const group=function normalizeGroupingLoadOptions(group){return Array.isArray(group)||(group=[group]),group.map(((item,i)=>(0,utils_type.HD)(item)?{selector:item,isExpanded:i<group.length-1}:item))}(hasLookupOptimization?[column.dataField,column.displayField]:column.dataField),d=new utils_deferred.BH;return cachedUniqueRelevantItems&&(!hasGroupPaging||loadOptions.skip===previousSkip&&loadOptions.take===previousTake)?d.resolve(sliceItems(cachedUniqueRelevantItems,loadOptions)):(previousSkip=loadOptions.skip,previousTake=loadOptions.take,dataSource.load({filter,group,take:hasGroupPaging?loadOptions.take:void 0,skip:hasGroupPaging?loadOptions.skip:void 0}).done((items=>{cachedUniqueRelevantItems=items,d.resolve(hasGroupPaging?items:sliceItems(items,loadOptions))})).fail(d.fail)),d})(loadOptions).done((items=>{if(0===items.length)return void d.resolve([]);const filter=this.combineFilters(items.flatMap((data=>data.key)).map((key=>[column.lookup.valueExpr,key])),"or");new data_source.o(Object.assign(Object.assign(Object.assign({},lookupDataSourceOptions),loadOptions),{filter:this.combineFilters([filter,loadOptions.filter],"and"),paginate:!1})).load().done(d.resolve).fail(d.fail)})).fail(d.fail),d},key:column.lookup.valueExpr,byKey(key){const d=(0,utils_deferred.BH)();return this.load({filter:[column.lookup.valueExpr,"=",key]}).done((arr=>{d.resolve(arr[0])})),d.promise()}});return lookupDataSource}},ui_grid_core_utils=module_utils,ui_grid_core_column_state_mixin={_applyColumnState(options){var _a;const rtlEnabled=this.option("rtlEnabled"),columnAlignment=this._getColumnAlignment(options.column.alignment,rtlEnabled),parameters=(0,extend.l)(!0,{columnAlignment},options),isGroupPanelItem=parameters.rootElement.hasClass("dx-group-panel-item"),$indicatorsContainer=this._createIndicatorContainer(parameters,isGroupPanelItem),$span=(0,renderer.Z)("<span>").addClass(this._getIndicatorClassName(options.name)),columnsController=null===(_a=this.component)||void 0===_a?void 0:_a.getController("columns"),indicatorAlignment=(null==columnsController?void 0:columnsController.getHeaderContentAlignment(columnAlignment))||columnAlignment;return parameters.container=$indicatorsContainer,parameters.indicator=$span,this._renderIndicator(parameters),$indicatorsContainer[!isGroupPanelItem&&options.showColumnLines||"left"!==indicatorAlignment?"prependTo":"appendTo"](options.rootElement),$span},_getIndicatorClassName:common.ZT,_getColumnAlignment(alignment,rtlEnabled){return rtlEnabled=rtlEnabled||this.option("rtlEnabled"),alignment&&"center"!==alignment?alignment:(0,utils_position.q)(rtlEnabled)},_createIndicatorContainer(options,ignoreIndicatorAlignment){let $indicatorsContainer=this._getIndicatorContainer(options.rootElement);const indicatorAlignment="left"===options.columnAlignment?"right":"left";return $indicatorsContainer.length||($indicatorsContainer=(0,renderer.Z)("<div>").addClass("dx-column-indicators")),this.setAria("role","presentation",$indicatorsContainer),$indicatorsContainer.css("float",options.showColumnLines&&!ignoreIndicatorAlignment?indicatorAlignment:null)},_getIndicatorContainer:$cell=>$cell&&$cell.find(".dx-column-indicators"),_getIndicatorElements($cell){const $indicatorContainer=this._getIndicatorContainer($cell);return $indicatorContainer&&$indicatorContainer.children()},_renderIndicator(options){const $container=options.container,$indicator=options.indicator;$container&&$indicator&&$container.append($indicator)},_updateIndicators(indicatorName){const that=this,columns=that.getColumns(),$cells=that.getColumnElements();let $cell;if($cells&&columns.length===$cells.length)for(let i=0;i<columns.length;i++){$cell=$cells.eq(i),that._updateIndicator($cell,columns[i],indicatorName);const rowOptions=$cell.parent().data("options");rowOptions&&rowOptions.cells&&(rowOptions.cells[$cell.index()].column=columns[i])}},_updateIndicator($cell,column,indicatorName){if(!column.command)return this._applyColumnState({name:indicatorName,rootElement:$cell,column,showColumnLines:this.option("showColumnLines")})}};var support=__webpack_require__("./node_modules/devextreme/esm/core/utils/support.js"),appendElementTemplate={render:function(options){options.container.append(options.content)}},getWidthStyle=function(width){return"auto"===width?"":(0,utils_type.kE)(width)?width+"px":width},setCellWidth=function(cell,column,width){cell.style.width=cell.style.maxWidth="auto"===column.width?"":width},columnsViewMembers={_createScrollableOptions:function(){var scrollingOptions=this.option("scrolling"),useNativeScrolling=this.option("scrolling.useNative"),options=(0,extend.l)({},scrollingOptions,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return void 0===useNativeScrolling&&(useNativeScrolling=!0),"auto"===useNativeScrolling?(delete options.useNative,delete options.useSimulatedScrollbar):(options.useNative=!!useNativeScrolling,options.useSimulatedScrollbar=!useNativeScrolling),options},_updateCell:function($cell,parameters){parameters.rowType&&this._cellPrepared($cell,parameters)},_createCell:function(options){var column=options.column,alignment=column.alignment||(0,utils_position.q)(this.option("rtlEnabled")),cell=dom_adapter.Z.createElement("td");cell.style.textAlign=alignment;var $cell=(0,renderer.Z)(cell);return"data"===options.rowType&&column.headerId&&!column.type&&this.component.option("showColumnHeaders")&&this.setAria("describedby",column.headerId,$cell),column.cssClass&&$cell.addClass(column.cssClass),"expand"===column.command&&($cell.addClass(column.cssClass),$cell.addClass(this.addWidgetPrefix("group-space"))),column.colspan>1?$cell.attr("colSpan",column.colspan):!column.isBand&&"auto"!==column.visibleWidth&&this.option("columnAutoWidth")&&((column.width||column.minWidth)&&(cell.style.minWidth=getWidthStyle(column.minWidth||column.width)),column.width&&setCellWidth(cell,column,getWidthStyle(column.width))),$cell},_createRow:function(rowObject,tagName){tagName=tagName||"tr";var $element=(0,renderer.Z)("<".concat(tagName,">")).addClass("dx-row");return this.setAria("role","row",$element),$element},_isAltRow:function(row){return row&&row.dataIndex%2==1},_createTable:function(columns,isAppend){var that=this,$table=(0,renderer.Z)("<table>").addClass(that.addWidgetPrefix("table")).addClass(that.addWidgetPrefix("table-fixed"));if(columns&&!isAppend?($table.append(that._createColGroup(columns)),browser.Z.safari&&$table.append((0,renderer.Z)("<thead>").append("<tr>")),that.setAria("role","presentation",$table)):that.setAria("hidden",!0,$table),this.setAria("role","presentation",(0,renderer.Z)("<tbody>").appendTo($table)),isAppend)return $table;browser.Z.mozilla&&events_engine.Z.on($table,"mousedown","td",(function(e){e.ctrlKey&&e.preventDefault()})),that.option("cellHintEnabled")&&events_engine.Z.on($table,"mousemove",".dx-row > td",this.createAction((function(args){var e=args.event,$element=(0,renderer.Z)(e.target),$cell=(0,renderer.Z)(e.currentTarget),$row=$cell.parent(),visibleColumns=that._columnsController.getVisibleColumns(),rowOptions=$row.data("options"),columnIndex=$cell.index(),cellOptions=rowOptions&&rowOptions.cells&&rowOptions.cells[columnIndex],column=cellOptions?cellOptions.column:visibleColumns[columnIndex],isHeaderRow=$row.hasClass("dx-header-row"),isDataRow=$row.hasClass("dx-data-row"),isMasterDetailRow=$row.hasClass("dx-master-detail-row"),isGroupRow=$row.hasClass("dx-group-row"),isFilterRow=$row.hasClass(that.addWidgetPrefix("filter-row")),isDataRowWithTemplate=isDataRow&&(!column||column.cellTemplate),isEditorShown=isDataRow&&cellOptions&&(rowOptions.isEditing||cellOptions.isEditing||(null==column?void 0:column.showEditorAlways)),isHeaderRowWithTemplate=isHeaderRow&&(!column||column.headerCellTemplate),isGroupCellWithTemplate=isGroupRow&&(!column||column.groupIndex&&column.groupCellTemplate);isMasterDetailRow||isFilterRow||isEditorShown||isDataRowWithTemplate||isHeaderRowWithTemplate||isGroupCellWithTemplate||($element.data("dxCellHintVisible")&&($element.removeAttr("title"),$element.data("dxCellHintVisible",!1)),$element[0].scrollWidth-$element[0].clientWidth>0&&!(0,utils_type.$K)($element.attr("title"))&&($element.attr("title",$element.text()),$element.data("dxCellHintVisible",!0)))})));var getOptions=function(event){var $cell=(0,renderer.Z)(event.currentTarget),$fieldItemContent=(0,renderer.Z)(event.target).closest(".dx-field-item-content"),$row=$cell.parent(),rowOptions=$row.data("options"),options=rowOptions&&rowOptions.cells&&rowOptions.cells[$cell.index()];if($cell.closest("table").is(event.delegateTarget)){var resultOptions=(0,extend.l)({},options,{cellElement:(0,core_element.u)($cell),event,eventType:event.type});if(resultOptions.rowIndex=that.getRowIndex($row),$fieldItemContent.length){var formItemOptions=$fieldItemContent.data("dx-form-item");formItemOptions.column&&(resultOptions.column=formItemOptions.column,resultOptions.columnIndex=that._columnsController.getVisibleIndex(resultOptions.column.index))}return resultOptions}};return events_engine.Z.on($table,"mouseover",".dx-row > td",(function(e){var options=getOptions(e);options&&that.executeAction("onCellHoverChanged",options)})),events_engine.Z.on($table,"mouseout",".dx-row > td",(function(e){var options=getOptions(e);options&&that.executeAction("onCellHoverChanged",options)})),events_engine.Z.on($table,click.u,".dx-row > td",(function(e){var options=getOptions(e);options&&that.executeAction("onCellClick",options)})),events_engine.Z.on($table,double_click.u,".dx-row > td",(function(e){var options=getOptions(e);options&&that.executeAction("onCellDblClick",options)})),function(that,$table){var touchTarget,touchCurrentTarget,timeoutId;function clearTouchTargets(timeout){return setTimeout((function(){touchTarget=touchCurrentTarget=null}),timeout)}events_engine.Z.on($table,"touchstart touchend",".dx-row",(function(e){clearTimeout(timeoutId),"touchstart"===e.type?(touchTarget=e.target,touchCurrentTarget=e.currentTarget,timeoutId=clearTouchTargets(1e3)):timeoutId=clearTouchTargets()})),events_engine.Z.on($table,[click.u,double_click.u,pointer.Z.down].join(" "),".dx-row",that.createAction((function(e){var event=e.event;touchTarget&&(event.target=touchTarget,event.currentTarget=touchCurrentTarget),(0,renderer.Z)(event.target).closest("a").length||(e.rowIndex=that.getRowIndex(event.currentTarget),e.rowIndex>=0&&(e.rowElement=(0,core_element.u)((0,renderer.Z)(event.currentTarget)),e.columns=that.getColumns(),event.type===pointer.Z.down?that._rowPointerDown(e):event.type===click.u?that._rowClick(e):that._rowDblClick(e)))})))}(that,$table),$table},_rowPointerDown:common.ZT,_rowClick:common.ZT,_rowDblClick:common.ZT,_createColGroup:function(columns){for(var colgroupElement=(0,renderer.Z)("<colgroup>"),i=0;i<columns.length;i++)for(var colspan=columns[i].colspan||1,j=0;j<colspan;j++)colgroupElement.append(this._createCol(columns[i]));return colgroupElement},_createCol:function(column){var width=column.visibleWidth||column.width;"adaptiveHidden"===width&&(width="0.0001px");var col=(0,renderer.Z)("<col>");return(0,style.cl)(col,width),col},renderDelayedTemplates:function(change){var delayedTemplates=this._delayedTemplates,syncTemplates=delayedTemplates.filter((template=>!template.async)),asyncTemplates=delayedTemplates.filter((template=>template.async));this._delayedTemplates=[],this._renderDelayedTemplatesCore(syncTemplates,!1,change),this._renderDelayedTemplatesCoreAsync(asyncTemplates)},_renderDelayedTemplatesCoreAsync:function(templates){var that=this;templates.length&&(that._templateTimeout=(0,utils_window.Jj)().setTimeout((function(){that._renderDelayedTemplatesCore(templates,!0)})))},_renderDelayedTemplatesCore:function(templates,isAsync,change){for(var date=new Date;templates.length;){var templateParameters=templates.shift(),options=templateParameters.options,doc=dom_adapter.Z.getRootNode((0,renderer.Z)(options.container).get(0)),needWaitAsyncTemplates=this.needWaitAsyncTemplates();if((!isAsync||(0,renderer.Z)(options.container).closest(doc).length||needWaitAsyncTemplates)&&(change&&(options.change=change),templateParameters.template.render(options)),isAsync&&new Date-date>30){this._renderDelayedTemplatesCoreAsync(templates);break}}!templates.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()},_processTemplate:function(template){var renderingTemplate;if(template&&template.render&&!(0,utils_type.ZU)(template))renderingTemplate={allowRenderToDetachedContainer:template.allowRenderToDetachedContainer,render:function(options){template.render(options.container,options.model,options.change),options.deferred&&options.deferred.resolve()}};else if((0,utils_type.mf)(template))renderingTemplate={render:function(options){var renderedTemplate=template((0,core_element.u)(options.container),options.model,options.change);renderedTemplate&&(renderedTemplate.nodeType||(0,utils_type.ZU)(renderedTemplate))&&options.container.append(renderedTemplate),options.deferred&&options.deferred.resolve()}};else{var templateID=(0,utils_type.HD)(template)?template:(0,renderer.Z)(template).attr("id");templateID?(this._templatesCache[templateID]||(this._templatesCache[templateID]=this.getTemplate(template)),renderingTemplate=this._templatesCache[templateID]):renderingTemplate=this.getTemplate(template)}return renderingTemplate},renderTemplate:function(container,template,options,allowRenderToDetachedContainer,change){var that=this,renderingTemplate=that._processTemplate(template,options),column=options.column,isDataRow="data"===options.rowType,templateDeferred=new utils_deferred.BH,templateOptions={container,model:options,deferred:templateDeferred,onRendered:()=>{that.component._disposed||templateDeferred.resolve()}};if(renderingTemplate){options.component=that.component;var async=column&&(column.renderAsync&&isDataRow||that.option("renderAsync")&&(!1!==column.renderAsync&&(column.command||column.showEditorAlways)&&isDataRow||"filter"===options.rowType));!renderingTemplate.allowRenderToDetachedContainer&&!allowRenderToDetachedContainer||async?that._delayedTemplates.push({template:renderingTemplate,options:templateOptions,async}):renderingTemplate.render(templateOptions),this._templateDeferreds.add(templateDeferred)}else templateDeferred.reject();return templateDeferred.promise().always((()=>{this._templateDeferreds.delete(templateDeferred)}))},_getBodies:function(tableElement){return(0,renderer.Z)(tableElement).children("tbody").not(".dx-header").not(".dx-footer")},_needWrapRow:function($tableElement){var _this$_getBodies;return!!this.option().rowTemplate&&!(null===(_this$_getBodies=this._getBodies($tableElement))||void 0===_this$_getBodies||!_this$_getBodies.filter(".dx-row").length)},_wrapRowIfNeed:function($table,$row,isRefreshing){var $tableElement=isRefreshing?$table||this._tableElement:this._tableElement||$table;if(this._needWrapRow($tableElement)){var $tbody=(0,renderer.Z)("<tbody>").addClass($row.attr("class"));return this.setAria("role","presentation",$tbody),$tbody.append($row)}return $row},_appendRow:function($table,$row,appendTemplate){(appendTemplate=appendTemplate||appendElementTemplate).render({content:$row,container:$table})},_resizeCore:function(){var scrollLeft=this._scrollLeft;scrollLeft>=0&&(this._scrollLeft=0,this.scrollTo({left:scrollLeft}))},_renderCore:function(e){var $root=this.element().parent();$root&&!$root.parent().length||this.renderDelayedTemplates(e)},_renderTable:function(options){(options=options||{}).columns=this._columnsController.getVisibleColumns();var changeType=options.change&&options.change.changeType,$table=this._createTable(options.columns,"append"===changeType||"prepend"===changeType||"update"===changeType);return this._renderRows($table,options),$table},_renderRows:function($table,options){for(var rows=this._getRows(options.change),columnIndices=options.change&&options.change.columnIndices||[],changeTypes=options.change&&options.change.changeTypes||[],i=0;i<rows.length;i++)this._renderRow($table,(0,extend.l)({row:rows[i],columnIndices:columnIndices[i],changeType:changeTypes[i]},options))},_renderRow:function($table,options){options.columnIndices||(options.row.cells=[]);var $row=this._createRow(options.row),$wrappedRow=this._wrapRowIfNeed($table,$row);"remove"!==options.changeType&&this._renderCells($row,options),this._appendRow($table,$wrappedRow);var rowOptions=(0,extend.l)({columns:options.columns},options.row);this._addWatchMethod(rowOptions,options.row),this._rowPrepared($wrappedRow,rowOptions,options.row)},_needRenderCell:function(columnIndex,columnIndices){return!columnIndices||columnIndices.indexOf(columnIndex)>=0},_renderCells:function($row,options){for(var columnIndex=0,row=options.row,columns=options.columns,i=0;i<columns.length;i++)this._needRenderCell(i,options.columnIndices)&&this._renderCell($row,(0,extend.l)({column:columns[i],columnIndex,value:row.values&&row.values[columnIndex],oldValue:row.oldValues&&row.oldValues[columnIndex]},options)),columns[i].colspan>1?columnIndex+=columns[i].colspan:columnIndex++},_updateCells:function($rowElement,$newRowElement,columnIndices){var $cells=$rowElement.children(),$newCells=$newRowElement.children(),highlightChanges=this.option("highlightChanges"),cellUpdatedClass=this.addWidgetPrefix("cell-updated-animation");columnIndices.forEach((function(columnIndex,index){var $cell=$cells.eq(columnIndex),$newCell=$newCells.eq(index);$cell.replaceWith($newCell),highlightChanges&&!$newCell.hasClass("dx-command-expand")&&$newCell.addClass(cellUpdatedClass)})),function(element,newElement){if(element&&newElement){var i,oldAttributes=element.attributes,newAttributes=newElement.attributes;for(i=0;i<oldAttributes.length;i++){var name=oldAttributes[i].nodeName;newElement.hasAttribute(name)||element.removeAttribute(name)}for(i=0;i<newAttributes.length;i++)element.setAttribute(newAttributes[i].nodeName,newAttributes[i].nodeValue)}}($rowElement.get(0),$newRowElement.get(0))},_setCellAriaAttributes:function($cell,cellOptions){if("freeSpace"!==cellOptions.rowType){this.setAria("role","gridcell",$cell);var columnIndexOffset=this._columnsController.getColumnIndexOffset(),ariaColIndex=cellOptions.columnIndex+columnIndexOffset+1;this.setAria("colindex",ariaColIndex,$cell)}},_renderCell:function($row,options){var cellOptions=this._getCellOptions(options);if(options.columnIndices){if(options.row.cells){var cellIndex=options.row.cells.findIndex((cell=>cell.columnIndex===cellOptions.columnIndex));options.row.cells[cellIndex]=cellOptions}}else options.row.cells.push(cellOptions);var $cell=this._createCell(cellOptions);return this._setCellAriaAttributes($cell,cellOptions),this._renderCellContent($cell,cellOptions,options),$row.get(0).appendChild($cell.get(0)),$cell},_renderCellContent:function($cell,options,renderOptions){var template=this._getCellTemplate(options);(0,utils_deferred.gx)(!template||this.renderTemplate($cell,template,options,void 0,renderOptions.change)).done((()=>{this._updateCell($cell,options)}))},_getCellTemplate:function(){},_getRows:function(){return[]},_getCellOptions:function(options){var cellOptions={column:options.column,columnIndex:options.columnIndex,rowType:options.row.rowType,isAltRow:this._isAltRow(options.row)};return this._addWatchMethod(cellOptions),cellOptions},_addWatchMethod:function(options,source){if(this.option("repaintChangesOnly")){var watchers=[];return(source=source||options).watch=source.watch||function(getter,updateValueFunc,updateRowFunc){var oldValue=getter(source.data),watcher=function(row){row&&updateRowFunc&&updateRowFunc(row);var newValue=getter(source.data);JSON.stringify(oldValue)!==JSON.stringify(newValue)&&(row&&updateValueFunc(newValue),oldValue=newValue)};return watchers.push(watcher),function(){var index=watchers.indexOf(watcher);index>=0&&watchers.splice(index,1)}},source.update=source.update||function(row,keepRow){row&&(this.data=options.data=row.data,this.rowIndex=options.rowIndex=row.rowIndex,this.dataIndex=options.dataIndex=row.dataIndex,this.isExpanded=options.isExpanded=row.isExpanded,options.row&&!keepRow&&(options.row=row)),watchers.forEach((function(watcher){watcher(row)}))},source!==options&&(options.watch=source.watch.bind(source)),options}},_cellPrepared:function(cell,options){options.cellElement=(0,core_element.u)((0,renderer.Z)(cell)),this.executeAction("onCellPrepared",options)},_rowPrepared:function($row,options){(0,element_data.aT)($row.get(0),"options",options),options.rowElement=(0,core_element.u)($row),this.executeAction("onRowPrepared",options)},_columnOptionChanged:function(e){var optionNames=e.optionNames;if(ui_grid_core_utils.checkChanges(optionNames,["width","visibleWidth"])){var visibleColumns=this._columnsController.getVisibleColumns(),widths=iterator.UI(visibleColumns,(function(column){var width=column.visibleWidth||column.width;return(0,utils_type.$K)(width)?width:"auto"}));this.setColumnWidths({widths,optionNames})}else this._requireReady||this.render()},getCellIndex:function($cell){return $cell.length?$cell[0].cellIndex:-1},getTableElements:function(){return this._tableElement||(0,renderer.Z)()},getTableElement:function(){return this._tableElement},setTableElement:function(tableElement){this._tableElement=tableElement},optionChanged:function(args){switch(this.callBase(args),args.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":this._invalidate(!0,!0),args.handled=!0}},init:function(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:e=>{this._afterRowPrepared(e)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))},_afterRowPrepared:common.ZT,_handleDataChanged:function(){},callbackNames:function(){return["scrollChanged"]},_updateScrollLeftPosition:function(){var scrollLeft=this._scrollLeft;scrollLeft>=0&&(this._scrollLeft=0,this.scrollTo({left:scrollLeft}))},scrollTo:function(pos){var $element=this.element(),$scrollContainer=$element&&$element.children("."+this.addWidgetPrefix("scroll-container")).not("."+this.addWidgetPrefix("content-fixed"));(0,utils_type.$K)(pos)&&(0,utils_type.$K)(pos.left)&&this._scrollLeft!==pos.left&&(this._scrollLeft=pos.left,$scrollContainer&&$scrollContainer.scrollLeft(pos.left))},_wrapTableInScrollContainer:function($table){var $scrollContainer=(0,renderer.Z)("<div>"),useNative=this.option("scrolling.useNative");return(!1===useNative||"auto"===useNative&&!support.nativeScrolling)&&$scrollContainer.addClass(this.addWidgetPrefix("scrollable-simulated")),events_engine.Z.on($scrollContainer,"scroll",(()=>{var scrollLeft=$scrollContainer.scrollLeft();scrollLeft!==this._scrollLeft&&this.scrollChanged.fire({left:scrollLeft},this.name)})),$scrollContainer.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix("scroll-container")).append($table).appendTo(this.element()),this.setAria("role","presentation",$scrollContainer),$scrollContainer},needWaitAsyncTemplates:function(){return this.option("templatesRenderAsynchronously")&&!1===this.option("renderAsync")},waitAsyncTemplates:function(){var forceWaiting=arguments.length>0&&void 0!==arguments[0]&&arguments[0],result=new utils_deferred.BH;if(!(forceWaiting||this.needWaitAsyncTemplates()))return result.resolve();var waitTemplatesRecursion=()=>utils_deferred.gx.apply(this,Array.from(this._templateDeferreds)).done((()=>{this._templateDeferreds.size>0?waitTemplatesRecursion():result.resolve()})).fail(result.reject);return waitTemplatesRecursion(),result.promise()},_updateContent:function($newTableElement,change,isFixedTableRendering){return this.waitAsyncTemplates().done((()=>{this.setTableElement($newTableElement,isFixedTableRendering),this._wrapTableInScrollContainer($newTableElement,isFixedTableRendering)}))},_findContentElement:common.ZT,_getWidths:function($cellElements){var width,result=[];return $cellElements&&iterator.S6($cellElements,(function(index,item){if(width=item.offsetWidth,item.getBoundingClientRect){var clientRect=(0,utils_position.l)(item);clientRect.width>width-1&&(width=clientRect.width)}result.push(width)})),result},getColumnWidths:function($tableElement){var $rows,$cells,result=[];if((this.option("forceApplyBindings")||common.ZT)(),$tableElement=$tableElement||this.getTableElement()){$rows=$tableElement.children("tbody:not(.dx-header)").children();for(var i=0;i<$rows.length;i++){var $row=$rows.eq(i),isRowVisible="none"!==$row.get(0).style.display&&!$row.hasClass("dx-state-invisible");if(!$row.is(".dx-group-row")&&!$row.is(".dx-master-detail-row")&&!$row.is(".dx-error-row")&&isRowVisible){$cells=$row.children("td");break}}result=this._getWidths($cells)}return result},getVisibleColumnIndex:function(columnIndex,rowIndex){return columnIndex},setColumnWidths:function(_ref){var $cols,width,minWidth,columnIndex,{widths,$tableElement,columns,fixed}=_ref,columnAutoWidth=this.option("columnAutoWidth");if(($tableElement=$tableElement||this.getTableElement())&&$tableElement.length&&widths){columnIndex=0,$cols=$tableElement.children("colgroup").children("col"),(0,style.cl)($cols,"auto"),columns=columns||this.getColumns(null,$tableElement);for(var i=0;i<columns.length;i++){if(columnAutoWidth&&!fixed&&(width=columns[i].width)&&!columns[i].command){width=columns[i].visibleWidth||width,width=getWidthStyle(width),minWidth=getWidthStyle(columns[i].minWidth||width);for(var $rows=$rows||$tableElement.children().children(".dx-row").not(".dx-master-detail-row"),rowIndex=0;rowIndex<$rows.length;rowIndex++){var row=$rows[rowIndex],cell=void 0,visibleIndex=this.getVisibleColumnIndex(i,rowIndex);(cell=row.classList.contains("dx-group-row")?row.querySelector("td[aria-colindex='".concat(visibleIndex+1,"']:not(.").concat("dx-group-cell",")")):row.cells[visibleIndex])&&(setCellWidth(cell,columns[i],width),cell.style.minWidth=minWidth)}}columns[i].colspan?columnIndex+=columns[i].colspan:("adaptiveHidden"===(width=widths[columnIndex])&&(width="0.0001px"),"number"==typeof width&&(width=width.toFixed(3)+"px"),(0,style.cl)($cols.eq(columnIndex),(0,utils_type.$K)(width)?width:"auto"),columnIndex++)}}},getCellElements:function(rowIndex){return this._getCellElementsCore(rowIndex)},_getCellElementsCore:function(rowIndex){return this._getRowElements().eq(rowIndex).children()},_getCellElement:function(rowIndex,columnIdentifier){var $cell,$cells=this.getCellElements(rowIndex),columnVisibleIndex=this._getVisibleColumnIndex($cells,rowIndex,columnIdentifier);if($cells.length&&columnVisibleIndex>=0&&($cell=$cells.eq(columnVisibleIndex)),$cell&&$cell.length)return $cell},_getRowElement:function(rowIndex){var that=this,$rowElement=(0,renderer.Z)(),$tableElements=that.getTableElements();if(iterator.S6($tableElements,(function(_,tableElement){$rowElement=$rowElement.add(that._getRowElements((0,renderer.Z)(tableElement)).eq(rowIndex))})),$rowElement.length)return $rowElement},getCellElement:function(rowIndex,columnIdentifier){return(0,core_element.u)(this._getCellElement(rowIndex,columnIdentifier))},getRowElement:function(rowIndex){var $rows=this._getRowElement(rowIndex),elements=[];if($rows&&!(0,core_element.u)($rows).get)for(var i=0;i<$rows.length;i++)elements.push($rows[i]);else elements=$rows;return elements},_getVisibleColumnIndex:function($cells,rowIndex,columnIdentifier){if((0,utils_type.HD)(columnIdentifier)){var columnIndex=this._columnsController.columnOption(columnIdentifier,"index");return this._columnsController.getVisibleIndex(columnIndex)}return columnIdentifier},getColumnElements:function(){},getColumns:function(rowIndex){return this._columnsController.getVisibleColumns(rowIndex)},getCell:function(cellPosition,rows,cells){var $cells,$rows=rows||this._getRowElements();if($rows.length>0&&cellPosition.rowIndex>=0&&("virtual"!==this.option("scrolling.mode")&&"virtual"!==this.option("scrolling.rowRenderingMode")&&(cellPosition.rowIndex=cellPosition.rowIndex<$rows.length?cellPosition.rowIndex:$rows.length-1),($cells=cells||this.getCellElements(cellPosition.rowIndex))&&$cells.length>0))return $cells.eq($cells.length>cellPosition.columnIndex?cellPosition.columnIndex:$cells.length-1)},getRowsCount:function(){var tableElement=this.getTableElement();return tableElement&&1===tableElement.length?tableElement[0].rows.length:0},_getRowElementsCore:function(tableElement){if(tableElement=tableElement||this.getTableElement()){var tBodies=(this.option().rowTemplate||this.option("dataRowTemplate"))&&tableElement.find("> tbody.dx-row");return tBodies&&tBodies.length?tBodies:tableElement.find("> tbody > .dx-row, > .dx-row")}return(0,renderer.Z)()},_getRowElements:function(tableElement){return this._getRowElementsCore(tableElement)},getRowIndex:function($row){return this._getRowElements().index($row)},getBoundingRect:function(){},getName:function(){},setScrollerSpacing:function(width){var $element=this.element(),rtlEnabled=this.option("rtlEnabled");$element&&$element.css({paddingLeft:rtlEnabled?width:"",paddingRight:rtlEnabled?"":width})},isScrollbarVisible:function(isHorizontal){var $element=this.element(),$tableElement=this._tableElement;return!(!$element||!$tableElement)&&(isHorizontal?(0,size.Y_)($tableElement)-(0,size.dz)($element)>0:(0,size.zp)($tableElement)-(0,size.Cr)($element)>0)},dispose:function(){(0,utils_window.Ym)()&&(0,utils_window.Jj)().clearTimeout(this._templateTimeout)}},ColumnsView=ui_grid_core_modules.View.inherit(ui_grid_core_column_state_mixin).inherit(columnsViewMembers),events_utils=__webpack_require__("./node_modules/devextreme/esm/events/utils/index.js"),FOCUS_STATE_CLASS="dx-state-focused",FOCUS_DISABLED_CLASS="dx-cell-focus-disabled",GRID_CELL_SELECTOR="".concat(".dx-datagrid-rowsview .dx-row"," > td"),TREELIST_CELL_SELECTOR="".concat(".dx-treelist-rowsview .dx-row"," > td"),viewItemSelectorMap={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:["".concat(".dx-row-focused"),"".concat(".dx-datagrid-rowsview .dx-row","[tabindex]"),"".concat(GRID_CELL_SELECTOR,"[tabindex]"),"".concat(GRID_CELL_SELECTOR),"".concat(".dx-treelist-rowsview .dx-row","[tabindex]"),"".concat(TREELIST_CELL_SELECTOR,"[tabindex]"),"".concat(TREELIST_CELL_SELECTOR)],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]},isMouseDown=!1,isHiddenFocusing=!1,focusedElementInfo=null;function saveFocusedElementInfo(target,instance){var $target=(0,renderer.Z)(target),ariaLabel=$target.attr("aria-label"),targetIndex=getActiveAccessibleElements(ariaLabel,instance.element()).index($target);focusedElementInfo=(0,extend.l)({},{ariaLabel,index:targetIndex},{viewInstance:instance})}function getActiveAccessibleElements(ariaLabel,viewElement){var $viewElement=(0,renderer.Z)(viewElement);return ariaLabel?$viewElement.find('[aria-label="'.concat(ariaLabel,'"][tabindex]')):$viewElement.find("[tabindex]")}function findFocusedViewElement(viewSelectors,element){var root=(null==element?void 0:element.getRootNode())||dom_adapter.Z.getDocument();for(var index in viewSelectors){var selector=viewSelectors[index],$focusViewElement=(0,renderer.Z)(root).find(selector).first();if($focusViewElement.length)return $focusViewElement}}function onDocumentVisibilityChange(){isHiddenFocusing="visible"===dom_adapter.Z.getDocument().visibilityState}function registerKeyboardAction(viewName,instance,$element,selector,action,executeKeyDown){if(instance.option("useLegacyKeyboardNavigation"))return common.ZT;var getMainElement=()=>(0,renderer.Z)(instance.element()),keyDownHandler=e=>function processKeyDown(viewName,instance,event,action,$mainElement,executeKeyDown){var isHandled=function fireKeyDownEvent(instance,event,executeAction){var args={event,handled:!1};return executeAction?executeAction(args):instance._createActionByOption("onKeyDown")(args),args.handled}(instance,event.originalEvent,executeKeyDown);if(!isHandled){var keyName=(0,events_utils.EV)(event);"enter"===keyName||"space"===keyName?(saveFocusedElementInfo(event.target,instance),action&&action({event})):"tab"===keyName?$mainElement.addClass(FOCUS_STATE_CLASS):selectView(viewName,instance,event)}}(viewName,instance,e,action,getMainElement(),executeKeyDown),mouseDownHandler=()=>{isMouseDown=!0,getMainElement().removeClass(FOCUS_STATE_CLASS)},focusinHandler=()=>{!isMouseDown&&!isHiddenFocusing&&getMainElement().addClass(FOCUS_STATE_CLASS),isMouseDown=!1};return events_engine.Z.on($element,"keydown",selector,keyDownHandler),events_engine.Z.on($element,"mousedown",selector,mouseDownHandler),events_engine.Z.on($element,"focusin",selector,focusinHandler),()=>{events_engine.Z.off($element,"keydown",selector,keyDownHandler),events_engine.Z.off($element,"mousedown",selector,mouseDownHandler),events_engine.Z.off($element,"focusin",selector,focusinHandler)}}function restoreFocus(instance){if(!instance.option("useLegacyKeyboardNavigation")&&focusedElementInfo){var viewInstance=focusedElementInfo.viewInstance;if(viewInstance){var $targetElement=getActiveAccessibleElements(focusedElementInfo.ariaLabel,viewInstance.element()).eq(focusedElementInfo.index);focusedElementInfo=null,events_engine.Z.trigger($targetElement,"focus")}}}function selectView(viewName,instance,event){var keyName=(0,events_utils.EV)(event);if(event.ctrlKey&&("upArrow"===keyName||"downArrow"===keyName))for(var viewNames=Object.keys(viewItemSelectorMap),viewItemIndex=viewNames.indexOf(viewName);viewItemIndex>=0&&viewItemIndex<viewNames.length;){var _viewName=viewNames[viewItemIndex="upArrow"===keyName?--viewItemIndex:++viewItemIndex],$focusViewElement=findFocusedViewElement(viewItemSelectorMap[_viewName],event.target);if($focusViewElement&&$focusViewElement.length){$focusViewElement.attr("tabindex",instance.option("tabindex")||0),events_engine.Z.trigger($focusViewElement,"focus"),$focusViewElement.removeClass(FOCUS_DISABLED_CLASS);break}}}const module_accessibility_registerKeyboardAction=function(viewName,instance,$element,selector,action){const keyboardController=instance.getController("keyboardNavigation");instance.option("useLegacyKeyboardNavigation")||keyboardController&&!keyboardController.isKeyboardEnabled()||(instance.createAction("onKeyDown"),registerKeyboardAction(viewName,instance,$element,selector,action,(args=>{instance.executeAction("onKeyDown",args)})))};var columnHeadersModule={defaultOptions:function(){return{showColumnHeaders:!0,cellHintEnabled:!0}},views:{columnHeadersView:ColumnsView.inherit(function(){var createCellContent=function(that,$cell,options){var $cellContent=(0,renderer.Z)("<div>").addClass(that.addWidgetPrefix("text-content"));that.setAria("role","presentation",$cellContent),addCssClassesToCellContent(that,$cell,options.column,$cellContent);var showColumnLines=that.option("showColumnLines"),contentAlignment=that.getController("columns").getHeaderContentAlignment(options.column.alignment);return $cellContent[showColumnLines||"right"===contentAlignment?"appendTo":"prependTo"]($cell)};function addCssClassesToCellContent(that,$cell,column,$cellContent){var $indicatorElements=that._getIndicatorElements($cell,!0),$visibleIndicatorElements=that._getIndicatorElements($cell),indicatorCount=$indicatorElements&&$indicatorElements.length,columnAlignment=that._getColumnAlignment(column.alignment),sortIndicatorClassName=".".concat(that._getIndicatorClassName("sort")),sortIndexIndicatorClassName=".".concat(that._getIndicatorClassName("sortIndex")),$sortIndicator=$visibleIndicatorElements.filter(sortIndicatorClassName),$sortIndexIndicator=$visibleIndicatorElements.children().filter(sortIndexIndicatorClassName);($cellContent=$cellContent||$cell.children("."+that.addWidgetPrefix("text-content"))).toggleClass("dx-text-content-alignment-"+columnAlignment,indicatorCount>0).toggleClass("dx-text-content-alignment-"+("left"===columnAlignment?"right":"left"),indicatorCount>0&&"center"===column.alignment).toggleClass("dx-sort-indicator",!!$sortIndicator.length).toggleClass("dx-sort-index-indicator",!!$sortIndexIndicator.length).toggleClass("dx-header-filter-indicator",!!$visibleIndicatorElements.filter("."+that._getIndicatorClassName("headerFilter")).length)}var members={_createTable:function(){var $table=this.callBase.apply(this,arguments);return events_engine.Z.on($table,"mousedown selectstart",this.createAction((function(e){var event=e.event;event.shiftKey&&event.preventDefault()}))),$table},_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")},_getDefaultTemplate:function(column){var that=this;return function($container,options){var $content=column.command?$container:createCellContent(that,$container,options),caption="expand"!==column.command&&column.caption;caption?$content.text(caption):column.command&&$container.html("&nbsp;")}},_getHeaderTemplate:function(column){return column.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(column)}},_processTemplate:function(template,options){var resultTemplate,that=this,column=options.column,renderingTemplate=that.callBase(template);return resultTemplate="header"===options.rowType&&renderingTemplate&&column.headerCellTemplate&&!column.command?{render:function(options){var $content=createCellContent(that,options.container,options.model);renderingTemplate.render((0,extend.l)({},options,{container:$content}))}}:renderingTemplate,resultTemplate},_handleDataChanged:function(e){"refresh"===e.changeType&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())},_renderCell:function($row,options){var $cell=this.callBase($row,options);return"header"===options.row.rowType&&($cell.addClass("dx-cell-focus-disabled"),this._isLegacyKeyboardNavigation()||options.column&&!options.column.type&&$cell.attr("tabindex",this.option("tabindex")||0)),$cell},_setCellAriaAttributes:function($cell,cellOptions){this.callBase($cell,cellOptions),"header"===cellOptions.rowType&&(this.setAria("role","columnheader",$cell),!cellOptions.column||cellOptions.column.command||cellOptions.column.isBand||($cell.attr("id",cellOptions.column.headerId),this.setAria("label",message.Z.format("dxDataGrid-ariaColumn")+" "+cellOptions.column.caption,$cell)))},_createRow:function(row){var $row=this.callBase.apply(this,arguments);return $row.toggleClass("dx-column-lines",this.option("showColumnLines")),"header"===row.rowType&&($row.addClass("dx-header-row"),this._isLegacyKeyboardNavigation()||module_accessibility_registerKeyboardAction("columnHeaders",this,$row,"td",this._handleActionKeyDown.bind(this))),$row},_handleActionKeyDown:function(args){var event=args.event,$target=(0,renderer.Z)(event.target);if(this._lastActionElement=event.target,$target.is(".dx-header-filter")){var headerFilterController=this.getController("headerFilter"),$column=$target.closest("td"),columnIndex=this.getColumnIndexByElement($column);columnIndex>=0&&headerFilterController.showHeaderFilterMenu(columnIndex,!1)}else{var $row=$target.closest(".dx-row");this._processHeaderAction(event,$row)}event.preventDefault()},_renderCore:function(){var $container=this.element(),change={};if(!this._tableElement||this._dataController.isLoaded()||this._hasRowElements){$container.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")).empty(),this.setAria("role","presentation",$container);var deferred=this._updateContent(this._renderTable({change}),change);return this.getRowCount()>1&&$container.addClass("dx-header-multi-row"),this.callBase.apply(this,arguments),deferred}},_renderRows:function(){(this._dataController.isLoaded()||this._hasRowElements)&&(this.callBase.apply(this,arguments),this._hasRowElements=!0)},_getRowVisibleColumns:function(rowIndex){return this._columnsController.getVisibleColumns(rowIndex)},_renderRow:function($table,options){options.columns=this._getRowVisibleColumns(options.row.rowIndex),this.callBase($table,options)},_createCell:function(options){var column=options.column,$cellElement=this.callBase.apply(this,arguments);return column.rowspan>1&&"header"===options.rowType&&$cellElement.attr("rowSpan",column.rowspan),$cellElement},_getRows:function(){var result=[],rowCount=this.getRowCount();if(this.option("showColumnHeaders"))for(var i=0;i<rowCount;i++)result.push({rowType:"header",rowIndex:i});return result},_getCellTemplate:function(options){if("header"===options.rowType)return this._getHeaderTemplate(options.column)},_columnOptionChanged:function(e){var changeTypes=e.changeTypes,optionNames=e.optionNames;changeTypes.grouping||changeTypes.groupExpanding?changeTypes.grouping&&(this._isGroupingChanged=!0):(this.callBase(e),(optionNames.width||optionNames.visible)&&this.resizeCompleted.fire())},_isElementVisible:function(elementOptions){return elementOptions&&elementOptions.visible},_alignCaptionByCenter:function($cell){var $indicatorsContainer=this._getIndicatorContainer($cell,!0);$indicatorsContainer&&$indicatorsContainer.length&&($indicatorsContainer.filter(".dx-visibility-hidden").remove(),($indicatorsContainer=this._getIndicatorContainer($cell)).clone().addClass("dx-visibility-hidden").css("float","").insertBefore($cell.children("."+this.addWidgetPrefix("text-content"))))},_updateCell:function($cell,options){"header"===options.rowType&&"center"===options.column.alignment&&this._alignCaptionByCenter($cell),this.callBase.apply(this,arguments)},_updateIndicator:function($cell,column,indicatorName){var $indicatorElement=this.callBase.apply(this,arguments);return"center"===column.alignment&&this._alignCaptionByCenter($cell),addCssClassesToCellContent(this,$cell,column),$indicatorElement},_getIndicatorContainer:function($cell,returnAll){var $indicatorsContainer=this.callBase($cell);return returnAll?$indicatorsContainer:$indicatorsContainer.filter(":not(.dx-visibility-hidden)")},_isSortableElement:function(){return!0},getHeadersRowHeight:function(){var $tableElement=this.getTableElement(),$headerRows=$tableElement&&$tableElement.find(".dx-header-row");return $headerRows&&$headerRows.toArray().reduce((function(sum,headerRow){return sum+(0,size.Cr)(headerRow)}),0)||0},getHeaderElement:function(index){var columnElements=this.getColumnElements();return columnElements&&columnElements.eq(index)},getColumnElements:function(index,bandColumnIndex){var $cellElement,that=this,columnsController=that._columnsController,rowCount=that.getRowCount();if(that.option("showColumnHeaders")){if(rowCount>1&&(!(0,utils_type.$K)(index)||(0,utils_type.$K)(bandColumnIndex))){var result=[],visibleColumns=(0,utils_type.$K)(bandColumnIndex)?columnsController.getChildrenByBandColumn(bandColumnIndex,!0):columnsController.getVisibleColumns();return(0,iterator.S6)(visibleColumns,(function(_,column){var rowIndex=(0,utils_type.$K)(index)?index:columnsController.getRowIndex(column.index);($cellElement=that._getCellElement(rowIndex,columnsController.getVisibleIndex(column.index,rowIndex)))&&result.push($cellElement.get(0))})),(0,renderer.Z)(result)}if(!index||index<rowCount)return that.getCellElements(index||0)}},getColumnIndexByElement:function($cell){var cellIndex=this.getCellIndex($cell),rowIndex=$cell.closest(".dx-row")[0].rowIndex,column=this.getColumns(rowIndex)[cellIndex];return column?column.index:-1},getVisibleColumnIndex:function(columnIndex,rowIndex){var column=this.getColumns()[columnIndex];return column?this._columnsController.getVisibleIndex(column.index,rowIndex):-1},getColumnWidths:function(){var $columnElements=this.getColumnElements();return $columnElements&&$columnElements.length?this._getWidths($columnElements):this.callBase.apply(this,arguments)},allowDragging:function(column,sourceLocation,draggingPanels){var i,draggableColumnCount=0,rowIndex=column&&this._columnsController.getRowIndex(column.index),columns=this.getColumns(0===rowIndex?0:null),canHideColumn=(null==column?void 0:column.allowHiding)&&columns.length>1,allowDrag=function(column){return column.allowReordering||column.allowGrouping||column.allowHiding};for(i=0;i<columns.length;i++)allowDrag(columns[i])&&draggableColumnCount++;if(draggableColumnCount<=1&&!canHideColumn)return!1;if(!draggingPanels)return(this.option("allowColumnReordering")||this._columnsController.isColumnOptionUsed("allowReordering"))&&column&&column.allowReordering;for(i=0;i<draggingPanels.length;i++){var draggingPanel=draggingPanels[i];if(draggingPanel&&draggingPanel.allowDragging(column,sourceLocation))return!0}return!1},getBoundingRect:function(){var $columnElements=this.getColumnElements();return $columnElements&&$columnElements.length?{top:this.getTableElement().offset().top}:null},getName:function(){return"headers"},getColumnCount:function(){var $columnElements=this.getColumnElements();return $columnElements?$columnElements.length:0},isVisible:function(){return this.option("showColumnHeaders")},optionChanged:function(args){switch(args.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":this._invalidate(!0,!0),args.handled=!0;break;default:this.callBase(args)}},getHeight:function(){return this.getElementHeight()},getContextMenuItems:function(options){var that=this,column=options.column;if(options.row&&("header"===options.row.rowType||"detailAdaptive"===options.row.rowType)){var sortingOptions=that.option("sorting");if(sortingOptions&&"none"!==sortingOptions.mode&&column&&column.allowSorting){var onItemClick=function(params){setTimeout((function(){that._columnsController.changeSortOrder(column.index,params.itemData.value)}))};return[{text:sortingOptions.ascendingText,value:"asc",disabled:"asc"===column.sortOrder,icon:"context-menu-sort-asc",onItemClick},{text:sortingOptions.descendingText,value:"desc",disabled:"desc"===column.sortOrder,icon:"context-menu-sort-desc",onItemClick},{text:sortingOptions.clearText,value:"none",disabled:!column.sortOrder,icon:"context-menu-sort-none",onItemClick}]}}},getRowCount:function(){return this._columnsController&&this._columnsController.getRowCount()},setRowsOpacity:function(columnIndex,value,rowIndex){var i,columnElements,that=this,rowCount=that.getRowCount(),columns=that._columnsController.getColumns(),column=columns&&columns[columnIndex],columnID=column&&column.isBand&&column.index,setColumnOpacity=function(index,column){column.ownerBand===columnID&&(columnElements.eq(index).css({opacity:value}),column.isBand&&that.setRowsOpacity(column.index,value,i+1))};if((0,utils_type.$K)(columnID))for(i=rowIndex=rowIndex||0;i<rowCount;i++)columnElements=that.getCellElements(i),(0,iterator.S6)(that.getColumns(i),setColumnOpacity)}};return members}())}};module_core.registerModule("columnHeaders",columnHeadersModule);var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),array=__webpack_require__("./node_modules/devextreme/esm/core/utils/array.js"),config=__webpack_require__("./node_modules/devextreme/esm/core/config.js"),object=__webpack_require__("./node_modules/devextreme/esm/core/utils/object.js"),DATE_SERIALIZATION_FORMAT="yyyy/MM/dd",ISO8601_PATTERN=/^(\d{4,})(-)?(\d{2})(-)?(\d{2})(?:T(\d{2})(:)?(\d{2})?(:)?(\d{2}(?:\.(\d{1,3})\d*)?)?)?(Z|([+-])(\d{2})(:)?(\d{2})?)?$/,ISO8601_TIME_PATTERN=/^(\d{2}):(\d{2})(:(\d{2}))?$/,ISO8601_PATTERN_PARTS=["","yyyy","","MM","","dd","THH","","mm","","ss",".SSS"],DATE_SERIALIZATION_PATTERN=/^(\d{4})\/(\d{2})\/(\d{2})$/,dateParser=function(text,skipISO8601Parsing){var result;return(0,utils_type.HD)(text)&&!skipISO8601Parsing&&(result=function parseISO8601String(text){var parts=text.match(ISO8601_PATTERN);if(!parts)return(parts=text.match(ISO8601_TIME_PATTERN))?new Date(0,0,0,getTimePart(parts[1]),getTimePart(parts[2]),getTimePart(parts[4])):void 0;var year=getTimePart(parts[1]),month=--parts[3],day=parts[5],timeZoneHour=0,timeZoneMinute=0,correctYear=d=>(year<100&&d.setFullYear(year),d);timeZoneHour=getTimePart(parts[14]),timeZoneMinute=getTimePart(parts[16]),"-"===parts[13]&&(timeZoneHour=-timeZoneHour,timeZoneMinute=-timeZoneMinute);var hour=getTimePart(parts[6])-timeZoneHour,minute=getTimePart(parts[8])-timeZoneMinute,second=getTimePart(parts[10]),millisecond=(part=parts[11],getTimePart(part=part||"")*Math.pow(10,3-part.length));var part;if(parts[12])return correctYear(new Date(Date.UTC(year,month,day,hour,minute,second,millisecond)));return correctYear(new Date(year,month,day,hour,minute,second,millisecond))}(text)),result||function parseDate(text){var isDefaultSerializationFormat=getDateSerializationFormat(text)===DATE_SERIALIZATION_FORMAT,parsedValue=!(0,utils_type.J_)(text)&&Date.parse(text);if(!parsedValue&&isDefaultSerializationFormat){var parts=text.match(DATE_SERIALIZATION_PATTERN);if(parts){var newDate=new Date(getTimePart(parts[1]),getTimePart(parts[2]),getTimePart(parts[3]));return newDate.setFullYear(getTimePart(parts[1])),newDate.setMonth(getTimePart(parts[2])-1),newDate.setDate(getTimePart(parts[3])),newDate}}return(0,utils_type.kE)(parsedValue)?new Date(parsedValue):text}(text)};function getTimePart(part){return+part||0}var getDateSerializationFormat=function(value){return"number"==typeof value?"number":(0,utils_type.HD)(value)?((0,config.Z)().forceIsoDateParsing&&(format=function(text,useUtc){var parts=text.match(ISO8601_PATTERN),result="";if(!parts)return(parts=text.match(ISO8601_TIME_PATTERN))?parts[3]?"HH:mm:ss":"HH:mm":void 0;for(var i=1;i<ISO8601_PATTERN_PARTS.length;i++)parts[i]&&(result+=ISO8601_PATTERN_PARTS[i]||parts[i]);return"Z"===parts[12]&&(result+="'Z'"),parts[14]&&(parts[15]?result+="xxx":parts[16]?result+="xx":result+="x"),result}(value)),format||(value.indexOf(":")>=0?"yyyy/MM/dd HH:mm:ss":DATE_SERIALIZATION_FORMAT)):value?null:void 0;var format};const date_serialization={dateParser,deserializeDate:function(value){return"number"==typeof value?new Date(value):dateParser(value,!(0,config.Z)().forceIsoDateParsing)},serializeDate:function(value,serializationFormat){return serializationFormat?(0,utils_type.J_)(value)?"number"===serializationFormat?value&&value.valueOf?value.valueOf():null:getFormatter(serializationFormat,default_date_names)(value):null:value},getDateSerializationFormat};var abstract_store=__webpack_require__("./node_modules/devextreme/esm/data/abstract_store.js"),USER_STATE_FIELD_NAMES_15_1=["filterValues","filterType","fixed","fixedPosition"],USER_STATE_FIELD_NAMES=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(USER_STATE_FIELD_NAMES_15_1),IGNORE_COLUMN_OPTION_NAMES={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991,regExp=/columns\[(\d+)\]\.?/gi,globalColumnId=1,columnsControllerModule={defaultOptions:function(){return{commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:message.Z.format("dxDataGrid-trueText"),falseText:message.Z.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}},controllers:{columns:ui_grid_core_modules.Controller.inherit(function(){var DEFAULT_COLUMN_OPTIONS={visible:!0,showInColumnChooser:!0},DATATYPE_OPERATIONS={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},COLUMN_INDEX_OPTIONS={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},setFilterOperationsAsDefaultValues=function(column){column.filterOperations=column.defaultFilterOperations},createColumn=function(that,columnOptions,userStateColumnOptions,bandColumn){var commonColumnOptions={};if(columnOptions){(0,utils_type.HD)(columnOptions)&&(columnOptions={dataField:columnOptions}),that.setName(columnOptions);var result={};if(columnOptions.command)result=(0,object.HR)(commonColumnOptions,columnOptions);else{commonColumnOptions=that.getCommonSettings(columnOptions),userStateColumnOptions&&userStateColumnOptions.name&&userStateColumnOptions.dataField&&(columnOptions=(0,extend.l)({},columnOptions,{dataField:userStateColumnOptions.dataField}));var calculatedColumnOptions=that._createCalculatedColumnOptions(columnOptions,bandColumn);columnOptions.type||(result={headerId:"dx-col-".concat(globalColumnId++)}),result=(0,object.HR)(result,DEFAULT_COLUMN_OPTIONS),(0,object.HR)(result,commonColumnOptions),(0,object.HR)(result,calculatedColumnOptions),(0,object.HR)(result,columnOptions),(0,object.HR)(result,{selector:null})}return columnOptions.filterOperations===columnOptions.defaultFilterOperations&&setFilterOperationsAsDefaultValues(result),result}},createColumnsFromOptions=function createColumnsFromOptions(that,columnsOptions,bandColumn){var result=[];return columnsOptions&&(0,iterator.S6)(columnsOptions,(function(index,columnOptions){var userStateColumnOptions=that._columnsUserState&&checkUserStateColumn(columnOptions,that._columnsUserState[index])&&that._columnsUserState[index],column=createColumn(that,columnOptions,userStateColumnOptions,bandColumn);column&&(bandColumn&&(column.ownerBand=bandColumn),result.push(column),column.columns&&(result=result.concat(createColumnsFromOptions(that,column.columns,column)),delete column.columns,column.hasColumns=!0))})),result},getParentBandColumns=function(columnIndex,columnParentByIndex){for(var result=[],parent=columnParentByIndex[columnIndex];parent;)result.unshift(parent),parent=columnParentByIndex[columnIndex=parent.index];return result},_getChildrenByBandColumn=function(columnIndex,columnChildrenByIndex,recursive){var result=[],children=columnChildrenByIndex[columnIndex];if(children)for(var i=0;i<children.length;i++){var column=children[i];(0,utils_type.$K)(column.groupIndex)&&!column.showWhenGrouped||(result.push(column),recursive&&column.isBand&&(result=result.concat(_getChildrenByBandColumn(column.index,columnChildrenByIndex,recursive))))}return result},calculateColspan=function calculateColspan(that,columnID){var colspan=0,columns=that.getChildrenByBandColumn(columnID,!0);return(0,iterator.S6)(columns,(function(_,column){column.isBand?(column.colspan=column.colspan||calculateColspan(that,column.index),colspan+=column.colspan||1):colspan+=1})),colspan},getValueDataType=function(value){var dataType=(0,utils_type.dt)(value);return"string"!==dataType&&"boolean"!==dataType&&"number"!==dataType&&"date"!==dataType&&"object"!==dataType&&(dataType=void 0),dataType},getSerializationFormat=function(dataType,value){switch(dataType){case"date":case"datetime":return date_serialization.getDateSerializationFormat(value);case"number":if((0,utils_type.HD)(value))return"string";if((0,utils_type.kE)(value))return null}},updateSerializers=function(options,dataType){options.deserializeValue||(ui_grid_core_utils.isDateType(dataType)&&(options.deserializeValue=function(value){return date_serialization.deserializeDate(value)},options.serializeValue=function(value){return(0,utils_type.HD)(value)?value:date_serialization.serializeDate(value,this.serializationFormat)}),"number"===dataType&&(options.deserializeValue=function(value){var parsedValue=parseFloat(value);return isNaN(parsedValue)?value:parsedValue},options.serializeValue=function(value,target){return"filter"===target?value:(0,utils_type.$K)(value)&&"string"===this.serializationFormat?value.toString():value}))},customizeTextForBooleanDataType=function(e){return!0===e.value?this.trueText||"true":!1===e.value?this.falseText||"false":e.valueText||""},getCustomizeTextByDataType=function(dataType){if("boolean"===dataType)return customizeTextForBooleanDataType},updateColumnIndexes=function(that){(0,iterator.S6)(that._columns,(function(index,column){column.index=index})),(0,iterator.S6)(that._columns,(function(index,column){(0,utils_type.Kn)(column.ownerBand)&&(column.ownerBand=column.ownerBand.index)})),(0,iterator.S6)(that._commandColumns,(function(index,column){column.index=-(index+1)}))},updateColumnGroupIndexes=function(that,currentColumn){(0,array.Sq)(that._columns,"groupIndex",currentColumn,(function(column){var grouped=column.grouped;return delete column.grouped,grouped}))},getColumnIndexByVisibleIndex=function(that,visibleIndex,location){var column,rowIndex=(0,utils_type.Kn)(visibleIndex)?visibleIndex.rowIndex:null,columns="group"===location?that.getGroupColumns():"columnChooser"===location?that.getChooserColumns():that.getVisibleColumns(rowIndex);return visibleIndex=(0,utils_type.Kn)(visibleIndex)?visibleIndex.columnIndex:visibleIndex,(column=columns[visibleIndex])&&"groupExpand"===column.type&&(column=that._columns.filter((col=>column.type===col.type))[0]||column),column&&(0,utils_type.$K)(column.index)?column.index:-1};function checkUserStateColumn(column,userStateColumn){return column&&userStateColumn&&userStateColumn.name===(column.name||column.dataField)&&(userStateColumn.dataField===column.dataField||column.name)}var applyUserState=function(that){var column,userStateColumnIndex,i,columnsUserState=that._columnsUserState,ignoreColumnOptionNames=that._ignoreColumnOptionNames||[],columns=that._columns,columnCountById={},resultColumns=[],allColumnsHaveState=!0,userStateColumnIndexes=[];function applyFieldsState(column,userStateColumn){if(userStateColumn)for(var index=0;index<USER_STATE_FIELD_NAMES.length;index++){var fieldName=USER_STATE_FIELD_NAMES[index];ignoreColumnOptionNames.includes(fieldName)||("dataType"===fieldName?column[fieldName]=column[fieldName]||userStateColumn[fieldName]:USER_STATE_FIELD_NAMES_15_1.includes(fieldName)?fieldName in userStateColumn&&(column[fieldName]=userStateColumn[fieldName]):("selectedFilterOperation"===fieldName&&userStateColumn[fieldName]&&(column.defaultSelectedFilterOperation=column[fieldName]||null),column[fieldName]=userStateColumn[fieldName]))}}function findUserStateColumn(columnsUserState,column){for(var id=column.name||column.dataField,count=columnCountById[id]||0,j=0;j<columnsUserState.length;j++)if(checkUserStateColumn(column,columnsUserState[j])){if(!count)return columnCountById[id]=columnCountById[id]||0,columnCountById[id]++,j;count--}return-1}if(columnsUserState){for(i=0;i<columns.length;i++)userStateColumnIndex=findUserStateColumn(columnsUserState,columns[i]),allColumnsHaveState=allColumnsHaveState&&userStateColumnIndex>=0,userStateColumnIndexes.push(userStateColumnIndex);for(i=0;i<columns.length;i++)column=columns[i],userStateColumnIndex=userStateColumnIndexes[i],(that._hasUserState||allColumnsHaveState)&&applyFieldsState(column,columnsUserState[userStateColumnIndex]),userStateColumnIndex>=0&&(0,utils_type.$K)(columnsUserState[userStateColumnIndex].initialIndex)?resultColumns[userStateColumnIndex]=column:resultColumns.push(column);var hasAddedBands=!1;for(i=0;i<columnsUserState.length;i++){var columnUserState=columnsUserState[i];columnUserState.added&&findUserStateColumn(columns,columnUserState)<0&&(applyFieldsState(column=createColumn(that,columnUserState.added),columnUserState),resultColumns.push(column),columnUserState.added.columns&&(hasAddedBands=!0))}hasAddedBands&&(updateColumnIndexes(that),resultColumns=createColumnsFromOptions(that,resultColumns)),assignColumns(that,resultColumns)}},updateIndexes=function(that,column){updateColumnIndexes(that),updateColumnGroupIndexes(that,column),function(that,currentColumn){(0,iterator.S6)(that._columns,(function(index,column){(0,utils_type.$K)(column.sortIndex)&&!isSortOrderValid(column.sortOrder)&&delete column.sortIndex})),(0,array.Sq)(that._columns,"sortIndex",currentColumn,(function(column){return!(0,utils_type.$K)(column.groupIndex)&&isSortOrderValid(column.sortOrder)}))}(that,column),resetBandColumnsCache(that),function(that,currentColumn){for(var column,result=[],bandColumnsCache=that.getBandColumnsCache(),bandedColumns=[],columns=that._columns.filter((column=>!column.command)),i=0;i<columns.length;i++){column=columns[i],getParentBandColumns(i,bandColumnsCache.columnParentByIndex).length?bandedColumns.push(column):result.push(column)}(0,array.Sq)(bandedColumns,"visibleIndex",currentColumn),(0,array.Sq)(result,"visibleIndex",currentColumn)}(that,column)},resetColumnsCache=function(that){that.resetColumnsCache()};function assignColumns(that,columns){that._previousColumns=that._columns,that._columns=columns,resetColumnsCache(that),that.updateColumnDataTypes()}var updateColumnChanges=function(that,changeType,optionName,columnIndex){var columnChanges=that._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex};optionName=(optionName=optionName||"all").split(".")[0];var changeTypes=columnChanges.changeTypes;changeType&&!changeTypes[changeType]&&(changeTypes[changeType]=!0,changeTypes.length++);var optionNames=columnChanges.optionNames;optionName&&!optionNames[optionName]&&(optionNames[optionName]=!0,optionNames.length++),void 0!==columnIndex&&columnIndex===columnChanges.columnIndex||delete columnChanges.columnIndex,that._columnChanges=columnChanges,resetColumnsCache(that)},fireColumnsChanged=function(that){var options,onColumnsChanging=that.option("onColumnsChanging"),columnChanges=that._columnChanges;that.isInitialized()&&!that._updateLockCount&&columnChanges&&(onColumnsChanging&&(that._updateLockCount++,onColumnsChanging((0,extend.l)({component:that.component},columnChanges)),that._updateLockCount--),that._columnChanges=void 0,(options=columnChanges.optionNames)&&["dataField","lookup","dataType","columns"].some((name=>options[name]))?(that._reinitAfterLookupChanges=null==columnChanges?void 0:columnChanges.optionNames.lookup,that.reinit(),that._reinitAfterLookupChanges=void 0):that.columnsChanged.fire(columnChanges))},columnOptionCore=function(that,column,optionName,value,notFireEvent){var columns,changeType,initialColumn,optionGetter=(0,data.vb)(optionName),columnIndex=column.index;if(3===arguments.length)return optionGetter(column,{functionsAsIs:!0});var prevValue=optionGetter(column,{functionsAsIs:!0});if(!(0,common.bY)(prevValue,value)){"groupIndex"===optionName||"calculateGroupValue"===optionName?(changeType="grouping",function(that,column,groupIndex,prevGroupIndex){if(groupIndex>=0)prevGroupIndex>=0||(column.lastSortOrder=column.sortOrder);else{var sortMode=that.option("sorting.mode"),sortOrder=column.lastSortOrder;"single"===sortMode&&that._columns.some((col=>col!==column&&(0,utils_type.$K)(col.sortIndex)))&&(sortOrder=void 0),column.sortOrder=sortOrder}}(that,column,value,prevValue)):changeType="sortIndex"===optionName||"sortOrder"===optionName||"calculateSortValue"===optionName?"sorting":"columns";var optionSetter=(0,data.OM)(optionName);optionSetter(column,value,{functionsAsIs:!0});var fullOptionName=function(that,column){var columns,result=[],bandColumnsCache=that.getBandColumnsCache(),callbackFilter=function(item){return item.ownerBand===column.ownerBand};if(bandColumnsCache.isPlain){var columnIndex=that._columns.indexOf(column);columnIndex>=0&&(result=["columns[".concat(columnIndex,"]")])}else for(columns=that._columns.filter(callbackFilter);columns.length&&-1!==columns.indexOf(column);)result.unshift("columns[".concat(columns.indexOf(column),"]")),columns=(column=bandColumnsCache.columnParentByIndex[column.index])?that._columns.filter(callbackFilter):[];return result.join(".")}(that,column);COLUMN_INDEX_OPTIONS[optionName]&&(updateIndexes(that,column),value=optionGetter(column)),"name"!==optionName&&"allowEditing"!==optionName||that._checkColumns(),(0,utils_type.$K)(prevValue)||(0,utils_type.$K)(value)||0===optionName.indexOf("buffer")||(notFireEvent=!0),notFireEvent?resetColumnsCache(that):(USER_STATE_FIELD_NAMES.includes(optionName)||"visibleWidth"===optionName||(columns=that.option("columns"),initialColumn=that.getColumnByPath(fullOptionName,columns),(0,utils_type.HD)(initialColumn)&&(initialColumn=columns[columnIndex]={dataField:initialColumn}),initialColumn&&checkUserStateColumn(initialColumn,column)&&optionSetter(initialColumn,value,{functionsAsIs:!0})),updateColumnChanges(that,changeType,optionName,columnIndex)),fullOptionName&&function(that,options){var value=options.value,optionName=options.optionName,prevValue=options.prevValue,fullOptionName=options.fullOptionName,fullOptionPath="".concat(fullOptionName,".").concat(optionName);IGNORE_COLUMN_OPTION_NAMES[optionName]||that._skipProcessingColumnsChange===fullOptionPath||(that._skipProcessingColumnsChange=fullOptionPath,that.component._notifyOptionChanged(fullOptionPath,value,prevValue),that._skipProcessingColumnsChange=!1)}(that,{fullOptionName,optionName,value,prevValue})}};function isSortOrderValid(sortOrder){return"asc"===sortOrder||"desc"===sortOrder}var defaultSetCellValue=function(data,value){if(this.dataField){var path=this.dataField.split("."),dotCount=path.length-1;this.serializeValue&&(value=this.serializeValue(value));for(var i=0;i<dotCount;i++){var name=path[i];data=data[name]=data[name]||{}}data[path[dotCount]]=value}},isCustomCommandColumn=(that,commandColumn)=>!!that._columns.filter((column=>column.type===commandColumn.type)).length,getFixedPosition=function(that,column){var rtlEnabled=that.option("rtlEnabled");return column.command&&!isCustomCommandColumn(that,column)||!column.fixedPosition?rtlEnabled?"right":"left":column.fixedPosition},processExpandColumns=function(columns,expandColumns,type,columnIndex){var customColumnIndex,rowCount=this.getRowCount(),rowspan=columns[columnIndex]&&columns[columnIndex].rowspan,expandColumnsByType=expandColumns.filter((column=>column.type===type));return columns.forEach(((column,index)=>{column.type===type&&(customColumnIndex=index,rowspan=columns[index+1]?columns[index+1].rowspan:rowCount)})),rowspan>1&&(expandColumnsByType=(0,iterator.UI)(expandColumnsByType,(function(expandColumn){return(0,extend.l)({},expandColumn,{rowspan})}))),expandColumnsByType.unshift.apply(expandColumnsByType,(0,utils_type.$K)(customColumnIndex)?[customColumnIndex,1]:[columnIndex,0]),columns.splice.apply(columns,expandColumnsByType),rowspan||1},numberToString=function(number,digitsCount){for(var str=number?number.toString():"0";str.length<digitsCount;)str="0"+str;return str},mergeColumns=(that,columns,commandColumns,needToExtend)=>{for(var column,commandColumnIndex,result=columns.slice().map((column=>(0,extend.l)({},column))),isColumnFixing=that._isColumnFixing(),defaultCommandColumns=commandColumns.slice().map((column=>(0,extend.l)({fixed:isColumnFixing},column))),getCommandColumnIndex=column=>commandColumns.reduce(((result,commandColumn,index)=>{var columnType=needToExtend&&"groupExpand"===column.type?"expand":column.type;return commandColumn.type===columnType||commandColumn.command===column.command?index:result}),-1),callbackFilter=commandColumn=>commandColumn.command!==commandColumns[commandColumnIndex].command,i=0;i<columns.length;i++)if(column=columns[i],(commandColumnIndex=column&&(column.type||column.command)?getCommandColumnIndex(column):-1)>=0)if(needToExtend)result[i]=(0,extend.l)({fixed:isColumnFixing},commandColumns[commandColumnIndex],column),"groupExpand"!==column.type&&(defaultCommandColumns=defaultCommandColumns.filter(callbackFilter));else{var columnOptions={visibleIndex:column.visibleIndex,index:column.index,headerId:column.headerId,allowFixing:0===column.groupIndex,allowReordering:0===column.groupIndex,groupIndex:column.groupIndex};result[i]=(0,extend.l)({},column,commandColumns[commandColumnIndex],"groupExpand"===column.type&&columnOptions)}return columns.length&&needToExtend&&defaultCommandColumns.length&&(result=result.concat(defaultCommandColumns)),result},isColumnFixed=(that,column)=>(0,utils_type.$K)(column.fixed)||!column.type?column.fixed:that._isColumnFixing(),resetBandColumnsCache=that=>{that._bandColumnsCache=void 0},findColumn=(columns,identifier)=>{var column,identifierOptionName=(0,utils_type.HD)(identifier)&&identifier.substr(0,identifier.indexOf(":"));if(void 0!==identifier)return identifierOptionName&&(identifier=identifier.substr(identifierOptionName.length+1)),identifierOptionName?column=columns.filter((column=>""+column[identifierOptionName]===identifier))[0]:["index","name","dataField","caption"].some((optionName=>!!(column=columns.filter((column=>column[optionName]===identifier))[0]))),column},members={_getExpandColumnOptions:function(){return{type:"expand",command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}},_getFirstItems:function(dataSource){var groupsCount,items=[];return dataSource&&dataSource.items().length>0&&(groupsCount=ui_grid_core_utils.normalizeSortingInfo(dataSource.group()).length,items=function getFirstItemsCore(items,groupsCount){if(!items||!groupsCount)return items;for(var i=0;i<items.length;i++){var childItems=getFirstItemsCore(items[i].items||items[i].collapsedItems,groupsCount-1);if(childItems&&childItems.length)return childItems}}(dataSource.items(),groupsCount)||[]),items},_endUpdateCore:function(){!this._skipProcessingColumnsChange&&fireColumnsChanged(this)},init:function(isApplyingUserState){var that,options,columns=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!columns,this._isColumnsFromOptions?(assignColumns(this,columns?createColumnsFromOptions(this,columns):[]),applyUserState(this)):assignColumns(this,this._columnsUserState?createColumnsFromOptions(this,this._columnsUserState):this._columns),options=(that=this)._getExpandColumnOptions(),that.addCommandColumn(options),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,isApplyingUserState):updateIndexes(this),this._checkColumns()},callbackNames:function(){return["columnsChanged"]},getColumnByPath:function(path,columns){var column,columnIndexes=[];return path.replace(regExp,(function(_,columnIndex){return columnIndexes.push(parseInt(columnIndex)),""})),columnIndexes.length&&(column=columns?columnIndexes.reduce((function(column,index){return column&&column.columns&&column.columns[index]}),{columns}):function(that,columnIndexes){var result,columns,callbackFilter=function(column){var ownerBand=result?result.index:void 0;return column.ownerBand===ownerBand};if(that.getBandColumnsCache().isPlain)result=that._columns[columnIndexes[0]];else{columns=that._columns.filter(callbackFilter);for(var i=0;i<columnIndexes.length;i++)(result=columns[columnIndexes[i]])&&(columns=that._columns.filter(callbackFilter))}return result}(this,columnIndexes)),column},optionChanged:function(args){var needUpdateRequireResize;switch(args.name){case"adaptColumnWidthByRatio":args.handled=!0;break;case"dataSource":args.value===args.previousValue||this.option("columns")||Array.isArray(args.value)&&Array.isArray(args.previousValue)||(this._columns=[]);break;case"columns":needUpdateRequireResize=this._skipProcessingColumnsChange,args.handled=!0,this._skipProcessingColumnsChange||(args.name===args.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(args),needUpdateRequireResize=!0)),needUpdateRequireResize&&this._updateRequireResize(args);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":args.handled=!0;var ignoreColumnOptionNames="columnWidth"===args.fullName&&["width"];this.reinit(ignoreColumnOptionNames);break;case"rtlEnabled":this.reinit();break;default:this.callBase(args)}},_columnOptionChanged:function(args){var columnOptionValue={},column=this.getColumnByPath(args.fullName),columnOptionName=args.fullName.replace(regExp,"");column&&(columnOptionName?columnOptionValue[columnOptionName]=args.value:columnOptionValue=args.value,this._skipProcessingColumnsChange=args.fullName,this.columnOption(column.index,columnOptionValue),this._skipProcessingColumnsChange=!1)},_updateRequireResize:function(args){var component=this.component;"width"===args.fullName.replace(regExp,"")&&component._updateLockCount&&(component._requireResize=!0)},publicMethods:function(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]},applyDataSource:function(dataSource,forceApplying,isApplyingUserState){var isDataSourceLoaded=dataSource&&dataSource.isLoaded();if(this._dataSource=dataSource,!this._dataSourceApplied||0===this._dataSourceColumnsCount||forceApplying||this.option("regenerateColumnsByVisibleItems")){if(isDataSourceLoaded){if(!this._isColumnsFromOptions){var columnsFromDataSource=function(that,dataSource){for(var fieldName,firstItems=that._getFirstItems(dataSource),processedFields={},result=[],i=0;i<firstItems.length;i++)if(firstItems[i])for(fieldName in firstItems[i])(0,utils_type.mf)(firstItems[i][fieldName])&&!variable_wrapper.default.isWrapped(firstItems[i][fieldName])||(processedFields[fieldName]=!0);for(fieldName in processedFields)if(0!==fieldName.indexOf("__")){var column=createColumn(that,fieldName);result.push(column)}return result}(this,dataSource);columnsFromDataSource.length&&(assignColumns(this,columnsFromDataSource),this._dataSourceColumnsCount=this._columns.length,applyUserState(this))}return this.updateColumns(dataSource,forceApplying,isApplyingUserState)}this._dataSourceApplied=!1,updateIndexes(this)}else if(isDataSourceLoaded&&!this.isAllDataTypesDefined(!0)&&this.updateColumnDataTypes(dataSource))return updateColumnChanges(this,"columns"),fireColumnsChanged(this),(new utils_deferred.BH).reject().promise()},reset:function(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()},resetColumnsCache:function(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,resetBandColumnsCache(this)},reinit:function(ignoreColumnOptionNames){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=ignoreColumnOptionNames||null,this.init(),ignoreColumnOptionNames&&(this._ignoreColumnOptionNames=null)},isInitialized:function(){return!!this._columns.length||!!this.option("columns")},isDataSourceApplied:function(){return this._dataSourceApplied},getCommonSettings:function(column){var commonColumnSettings=(!column||!column.type)&&this.option("commonColumnSettings")||{},groupingOptions=this.option("grouping")||{},groupPanelOptions=this.option("groupPanel")||{};return(0,extend.l)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:groupingOptions.autoExpandAll,allowCollapsing:groupingOptions.allowCollapsing,allowGrouping:groupPanelOptions.allowColumnDragging&&groupPanelOptions.visible||groupingOptions.contextMenuEnabled},commonColumnSettings)},isColumnOptionUsed:function(optionName){for(var i=0;i<this._columns.length;i++)if(this._columns[i][optionName])return!0},isAllDataTypesDefined:function(checkSerializers){var columns=this._columns;if(!columns.length)return!1;for(var i=0;i<columns.length;i++)if((columns[i].dataField||columns[i].calculateCellValue!==columns[i].defaultCalculateCellValue)&&(!columns[i].dataType||checkSerializers&&columns[i].deserializeValue&&void 0===columns[i].serializationFormat))return!1;return!0},getColumns:function(){return this._columns},isBandColumnsUsed:function(){return this.getColumns().some((function(column){return column.isBand}))},getGroupColumns:function(){var result=[];return(0,iterator.S6)(this._columns,(function(){(0,utils_type.$K)(this.groupIndex)&&(result[this.groupIndex]=this)})),result},_shouldReturnVisibleColumns:function(){return!0},_compileVisibleColumns:function(rowIndex){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),rowIndex=(0,utils_type.$K)(rowIndex)?rowIndex:this._visibleColumns.length-1,this._visibleColumns[rowIndex]||[]},getVisibleColumns:function(rowIndex){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]},getFixedColumns:function(rowIndex){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),rowIndex=(0,utils_type.$K)(rowIndex)?rowIndex:this._fixedColumns.length-1,this._fixedColumns[rowIndex]||[]},getFilteringColumns:function(){return this.getColumns().filter((item=>(item.dataField||item.name)&&(item.allowFiltering||item.allowHeaderFiltering))).map((item=>{var field=(0,extend.l)(!0,{},item);return(0,utils_type.$K)(field.dataField)||(field.dataField=field.name),field.filterOperations=item.filterOperations!==item.defaultFilterOperations?field.filterOperations:null,field}))},getColumnIndexOffset:function(){return 0},_getFixedColumnsCore:function(){var notFixedColumnCount,transparentColumnIndex,lastFixedPosition,result=[],rowCount=this.getRowCount(),transparentColumn={command:"transparent"},transparentColspan=0;if(this._isColumnFixing())for(var i=0;i<=rowCount;i++){notFixedColumnCount=0,lastFixedPosition=null,transparentColumnIndex=null;for(var visibleColumns=this.getVisibleColumns(i,!0),j=0;j<visibleColumns.length;j++){var prevColumn=visibleColumns[j-1],column=visibleColumns[j];column.fixed?prevColumn&&prevColumn.fixed&&getFixedPosition(this,prevColumn)!==getFixedPosition(this,column)?(0,utils_type.$K)(transparentColumnIndex)||(transparentColumnIndex=j):lastFixedPosition=column.fixedPosition:(0===i&&(column.isBand&&column.colspan?transparentColspan+=column.colspan:transparentColspan++),notFixedColumnCount++,(0,utils_type.$K)(transparentColumnIndex)||(transparentColumnIndex=j))}if(0===i&&(0===notFixedColumnCount||notFixedColumnCount>=visibleColumns.length))return[];(0,utils_type.$K)(transparentColumnIndex)||(transparentColumnIndex="right"===lastFixedPosition?0:visibleColumns.length),result[i]=visibleColumns.slice(0),transparentColumn.colspan||(transparentColumn.colspan=transparentColspan),result[i].splice(transparentColumnIndex,notFixedColumnCount,transparentColumn)}return result.map((columns=>columns.map((column=>{var newColumn=(0,esm_extends.Z)({},column);return newColumn.headerId&&(newColumn.headerId+="-fixed"),newColumn}))))},_isColumnFixing:function(){var isColumnFixing=this.option("columnFixing.enabled");return!isColumnFixing&&(0,iterator.S6)(this._columns,(function(_,column){if(column.fixed)return isColumnFixing=!0,!1})),isColumnFixing},_getExpandColumnsCore:function(){return this.getGroupColumns()},getExpandColumns:function(){var expandColumn,expandColumns=this._getExpandColumnsCore(),firstGroupColumn=expandColumns.filter((column=>0===column.groupIndex))[0],isFixedFirstGroupColumn=firstGroupColumn&&firstGroupColumn.fixed,isColumnFixing=this._isColumnFixing(),rtlEnabled=this.option("rtlEnabled");return expandColumns.length&&(expandColumn=this.columnOption("command:expand")),expandColumns=(0,iterator.UI)(expandColumns,(column=>(0,extend.l)({},column,{visibleWidth:null,minWidth:null,cellTemplate:(0,utils_type.$K)(column.groupIndex)?null:column.cellTemplate,headerCellTemplate:null,fixed:!(!(0,utils_type.$K)(column.groupIndex)||!isFixedFirstGroupColumn)||isColumnFixing,fixedPosition:rtlEnabled?"right":"left"},expandColumn,{index:column.index,type:column.type||"groupExpand"})))},getBandColumnsCache:function(){if(!this._bandColumnsCache){var columns=this._columns,columnChildrenByIndex={},columnParentByIndex={},isPlain=!0;columns.forEach((function(column){var ownerBand=column.ownerBand,parentIndex=(0,utils_type.Kn)(ownerBand)?ownerBand.index:ownerBand,parent=columns[parentIndex];column.hasColumns&&(isPlain=!1),column.colspan&&(column.colspan=void 0),column.rowspan&&(column.rowspan=void 0),parent?columnParentByIndex[column.index]=parent:parentIndex=-1,columnChildrenByIndex[parentIndex]=columnChildrenByIndex[parentIndex]||[],columnChildrenByIndex[parentIndex].push(column)})),this._bandColumnsCache={isPlain,columnChildrenByIndex,columnParentByIndex}}return this._bandColumnsCache},_isColumnVisible:function(column){return column.visible&&this.isParentColumnVisible(column.index)},_compileVisibleColumnsCore:function(){var i,isFixedToEnd,that=this,result=[],rowspanGroupColumns=0,rowspanExpandColumns=0,rowCount=that.getRowCount(),positiveIndexedColumns=[],negativeIndexedColumns=[],notGroupedColumnsCount=0,rtlEnabled=that.option("rtlEnabled"),bandColumnsCache=that.getBandColumnsCache(),expandColumns=mergeColumns(that,that.getExpandColumns(),that._columns),columns=mergeColumns(that,that._columns,that._commandColumns,!0),columnDigitsCount=function(number){var i;for(i=0;number>1;i++)number/=10;return i}(columns.length);for(function(that,columns,bandColumnsCache){for(var rowspan,i=0;i<columns.length;i++){var column=columns[i];(column.visible||column.command)&&(column.isBand&&(column.colspan=column.colspan||calculateColspan(that,column.index)),column.isBand&&column.colspan||(rowspan=that.getRowCount(),column.command||(0,utils_type.$K)(column.groupIndex)&&!column.showWhenGrouped||(rowspan-=getParentBandColumns(column.index,bandColumnsCache.columnParentByIndex).length),rowspan>1&&(column.rowspan=rowspan)))}}(that,columns,bandColumnsCache),i=0;i<rowCount;i++)result[i]=[],negativeIndexedColumns[i]=[{}],positiveIndexedColumns[i]=[{},{},{}];return(0,iterator.S6)(columns,(function(){var indexedColumns,visibleIndex=this.visibleIndex,parentBandColumns=getParentBandColumns(this.index,bandColumnsCache.columnParentByIndex);if(that._isColumnVisible(this)&&(!(0,utils_type.$K)(this.groupIndex)||this.showWhenGrouped)){var rowIndex=parentBandColumns.length;if(visibleIndex<0?(visibleIndex=-visibleIndex,indexedColumns=negativeIndexedColumns[rowIndex]):(this.fixed=parentBandColumns.length?parentBandColumns[0].fixed:this.fixed,this.fixedPosition=parentBandColumns.length?parentBandColumns[0].fixedPosition:this.fixedPosition,this.fixed?(isFixedToEnd="right"===this.fixedPosition,!rtlEnabled||this.command&&!isCustomCommandColumn(that,this)||(isFixedToEnd=!isFixedToEnd),indexedColumns=isFixedToEnd?positiveIndexedColumns[rowIndex][2]:positiveIndexedColumns[rowIndex][0]):indexedColumns=positiveIndexedColumns[rowIndex][1]),parentBandColumns.length)for(visibleIndex=numberToString(visibleIndex,columnDigitsCount),i=parentBandColumns.length-1;i>=0;i--)visibleIndex=numberToString(parentBandColumns[i].visibleIndex,columnDigitsCount)+visibleIndex;indexedColumns[visibleIndex]=indexedColumns[visibleIndex]||[],indexedColumns[visibleIndex].push(this),notGroupedColumnsCount++}})),(0,iterator.S6)(result,(function(rowIndex){(0,object.jS)(negativeIndexedColumns[rowIndex],(function(_,columns){result[rowIndex].unshift.apply(result[rowIndex],columns)}));var firstPositiveIndexColumn=result[rowIndex].length;(0,iterator.S6)(positiveIndexedColumns[rowIndex],(function(index,columnsByFixing){(0,object.jS)(columnsByFixing,(function(_,columnsByVisibleIndex){result[rowIndex].push.apply(result[rowIndex],columnsByVisibleIndex)}))})),rowspanExpandColumns<rowIndex+1&&(rowspanExpandColumns+=processExpandColumns.call(that,result[rowIndex],expandColumns,"detailExpand",firstPositiveIndexColumn)),rowspanGroupColumns<rowIndex+1&&(rowspanGroupColumns+=processExpandColumns.call(that,result[rowIndex],expandColumns,"groupExpand",firstPositiveIndexColumn))})),result.push(function getDataColumns(columns,rowIndex,bandColumnID){var result=[];return columns[rowIndex=rowIndex||0]&&(0,iterator.S6)(columns[rowIndex],(function(_,column){column.ownerBand!==bandColumnID&&"groupExpand"!==column.type||(column.isBand&&column.colspan?result.push.apply(result,getDataColumns(columns,rowIndex+1,column.index)):(!column.command||rowIndex<1)&&result.push(column))})),result}(result)),!notGroupedColumnsCount&&that._columns.length&&result[rowCount].push({command:"empty"}),result},getInvisibleColumns:function(columns,bandColumnIndex){var hiddenColumnsByBand,that=this,result=[];return columns=columns||that._columns,(0,iterator.S6)(columns,(function(_,column){column.ownerBand===bandColumnIndex&&(column.isBand?(hiddenColumnsByBand=column.visible?that.getInvisibleColumns(that.getChildrenByBandColumn(column.index),column.index):that.getChildrenByBandColumn(column.index)).length&&(result.push(column),result=result.concat(hiddenColumnsByBand)):column.visible||result.push(column))})),result},getChooserColumns:function(getAllColumns){return((columns,sortOrder)=>{if("asc"!==sortOrder&&"desc"!==sortOrder)return columns;var sign="asc"===sortOrder?1:-1;return columns.sort((function(column1,column2){var caption1=column1.caption||"",caption2=column2.caption||"";return sign*caption1.localeCompare(caption2)})),columns})((getAllColumns?this.getColumns():this.getInvisibleColumns()).filter((column=>column.showInColumnChooser)),this.option("columnChooser.sortOrder"))},allowMoveColumn:function(fromVisibleIndex,toVisibleIndex,sourceLocation,targetLocation){var columnIndex=getColumnIndexByVisibleIndex(this,fromVisibleIndex,sourceLocation),sourceColumn=this._columns[columnIndex];return!(!sourceColumn||!(sourceColumn.allowReordering||sourceColumn.allowGrouping||sourceColumn.allowHiding))&&(sourceLocation===targetLocation?"columnChooser"!==sourceLocation&&((fromVisibleIndex=(0,utils_type.Kn)(fromVisibleIndex)?fromVisibleIndex.columnIndex:fromVisibleIndex)!==(toVisibleIndex=(0,utils_type.Kn)(toVisibleIndex)?toVisibleIndex.columnIndex:toVisibleIndex)&&fromVisibleIndex+1!==toVisibleIndex):"group"===sourceLocation&&"columnChooser"!==targetLocation||"group"===targetLocation?sourceColumn&&sourceColumn.allowGrouping:"columnChooser"!==sourceLocation&&"columnChooser"!==targetLocation||sourceColumn&&sourceColumn.allowHiding)},moveColumn:function(fromVisibleIndex,toVisibleIndex,sourceLocation,targetLocation){var prevGroupIndex,targetGroupIndex,options={},fromIndex=getColumnIndexByVisibleIndex(this,fromVisibleIndex,sourceLocation),toIndex=getColumnIndexByVisibleIndex(this,toVisibleIndex,targetLocation);if(fromIndex>=0){var column=this._columns[fromIndex];if(toVisibleIndex=(0,utils_type.Kn)(toVisibleIndex)?toVisibleIndex.columnIndex:toVisibleIndex,targetGroupIndex=toIndex>=0?this._columns[toIndex].groupIndex:-1,(0,utils_type.$K)(column.groupIndex)&&"group"===sourceLocation&&(targetGroupIndex>column.groupIndex&&targetGroupIndex--,"group"!==targetLocation?options.groupIndex=void 0:(prevGroupIndex=column.groupIndex,delete column.groupIndex,updateColumnGroupIndexes(this))),"group"===targetLocation)options.groupIndex=function(that,column,groupIndex){var i,groupColumns=that.getGroupColumns();if(groupIndex>=0)for(i=0;i<groupColumns.length;i++)groupColumns[i].groupIndex>=groupIndex&&groupColumns[i].groupIndex++;else for(groupIndex=0,i=0;i<groupColumns.length;i++)groupIndex=Math.max(groupIndex,groupColumns[i].groupIndex+1);return groupIndex}(this,0,targetGroupIndex),column.groupIndex=prevGroupIndex;else if(toVisibleIndex>=0){var targetColumn=this._columns[toIndex];targetColumn&&column.ownerBand===targetColumn.ownerBand?isColumnFixed(this,column)^isColumnFixed(this,targetColumn)?options.visibleIndex=MAX_SAFE_INTEGER:options.visibleIndex=targetColumn.visibleIndex:options.visibleIndex=MAX_SAFE_INTEGER}var isVisible="columnChooser"!==targetLocation;column.visible!==isVisible&&(options.visible=isVisible),this.columnOption(column.index,options)}},changeSortOrder:function(columnIndex,sortOrder){var options={},sortingOptions=this.option("sorting"),sortingMode=sortingOptions&&sortingOptions.mode,needResetSorting="single"===sortingMode||!sortOrder,allowSorting="single"===sortingMode||"multiple"===sortingMode,column=this._columns[columnIndex];allowSorting&&column&&column.allowSorting&&(needResetSorting&&!(0,utils_type.$K)(column.groupIndex)&&(0,iterator.S6)(this._columns,(function(index){index!==columnIndex&&this.sortOrder&&((0,utils_type.$K)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)})),isSortOrderValid(sortOrder)?column.sortOrder!==sortOrder&&(options.sortOrder=sortOrder):"none"===sortOrder?column.sortOrder&&(options.sortIndex=void 0,options.sortOrder=void 0):function(column){if("ctrl"===sortOrder){if(!("sortOrder"in column)||!("sortIndex"in column))return!1;options.sortOrder=void 0,options.sortIndex=void 0}else(0,utils_type.$K)(column.groupIndex)||(0,utils_type.$K)(column.sortIndex)?options.sortOrder="desc"===column.sortOrder?"asc":"desc":options.sortOrder="asc"}(column)),this.columnOption(column.index,options)},getSortDataSourceParameters:function(useLocalSelector){var sortColumns=[],sort=[];return(0,iterator.S6)(this._columns,(function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,utils_type.$K)(this.sortIndex)&&!(0,utils_type.$K)(this.groupIndex)&&(sortColumns[this.sortIndex]=this)})),(0,iterator.S6)(sortColumns,(function(){if(isSortOrderValid(this&&this.sortOrder)){var sortItem={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||useLocalSelector&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(sortItem.compare=this.sortingMethod.bind(this)),sort.push(sortItem)}})),sort.length>0?sort:null},getGroupDataSourceParameters:function(useLocalSelector){var group=[];return(0,iterator.S6)(this.getGroupColumns(),(function(){var selector=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||useLocalSelector&&this.selector||this.dataField||this.calculateCellValue;if(selector){var groupItem={selector,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(groupItem.compare=this.sortingMethod.bind(this)),group.push(groupItem)}})),group.length>0?group:null},refresh:function(updateNewLookupsOnly){var deferreds=[];return(0,iterator.S6)(this._columns,(function(){var lookup=this.lookup;if(lookup&&!this.calculateDisplayValue){if(updateNewLookupsOnly&&lookup.valueMap)return;lookup.update&&deferreds.push(lookup.update())}})),utils_deferred.gx.apply(renderer.Z,deferreds).done(resetColumnsCache.bind(null,this))},_updateColumnOptions:function(column,columnIndex){column.selector=column.selector||function(data){return column.calculateCellValue(data)},this._reinitAfterLookupChanges&&this._previousColumns?(column.selector.columnIndex=columnIndex,column.selector.originalCallback=this._previousColumns[columnIndex].selector.originalCallback):(column.selector.columnIndex=columnIndex,column.selector.originalCallback=column.selector),(0,iterator.S6)(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(function(_,calculateCallbackName){var calculateCallback=column[calculateCallbackName];if((0,utils_type.mf)(calculateCallback))if(calculateCallback.originalCallback)column[calculateCallbackName].context.column=column;else{var context={column};column[calculateCallbackName]=function(data){return calculateCallback.call(context.column,data)},column[calculateCallbackName].originalCallback=calculateCallback,column[calculateCallbackName].columnIndex=columnIndex,column[calculateCallbackName].context=context}})),(0,utils_type.HD)(column.calculateDisplayValue)&&(column.displayField=column.calculateDisplayValue,column.calculateDisplayValue=(0,data.vb)(column.displayField)),column.calculateDisplayValue&&(column.displayValueMap=column.displayValueMap||{}),updateSerializers(column,column.dataType);var lookup=column.lookup;lookup&&updateSerializers(lookup,lookup.dataType);var dataType=lookup?lookup.dataType:column.dataType;dataType&&(column.alignment=column.alignment||function(dataType,isRTL){switch(dataType){case"number":return"right";case"boolean":return"center";default:return(0,utils_position.q)(isRTL)}}(dataType,this.option("rtlEnabled")),column.format=column.format||ui_grid_core_utils.getFormatByDataType(dataType),column.customizeText=column.customizeText||getCustomizeTextByDataType(dataType),column.defaultFilterOperations=column.defaultFilterOperations||!lookup&&DATATYPE_OPERATIONS[dataType]||[],(0,utils_type.$K)(column.filterOperations)||setFilterOperationsAsDefaultValues(column),column.defaultFilterOperation=column.filterOperations&&column.filterOperations[0]||"=",column.showEditorAlways=(0,utils_type.$K)(column.showEditorAlways)?column.showEditorAlways:"boolean"===dataType&&!column.cellTemplate&&!column.lookup)},updateColumnDataTypes:function(dataSource){var that=this,dateSerializationFormat=that.option("dateSerializationFormat"),firstItems=that._getFirstItems(dataSource),isColumnDataTypesUpdated=!1;return(0,iterator.S6)(that._columns,(function(index,column){var i,value,dataType,lookupDataType,valueDataType,lookup=column.lookup;if(ui_grid_core_utils.isDateType(column.dataType)&&void 0===column.serializationFormat&&(column.serializationFormat=dateSerializationFormat),lookup&&ui_grid_core_utils.isDateType(lookup.dataType)&&void 0===column.serializationFormat&&(lookup.serializationFormat=dateSerializationFormat),column.calculateCellValue&&firstItems.length){if(!column.dataType||lookup&&!lookup.dataType){for(i=0;i<firstItems.length;i++)value=column.calculateCellValue(firstItems[i]),column.dataType||(valueDataType=getValueDataType(value),(dataType=dataType||valueDataType)&&valueDataType&&dataType!==valueDataType&&(dataType="string")),lookup&&!lookup.dataType&&(valueDataType=getValueDataType(ui_grid_core_utils.getDisplayValue(column,value,firstItems[i])),(lookupDataType=lookupDataType||valueDataType)&&valueDataType&&lookupDataType!==valueDataType&&(lookupDataType="string"));(dataType||lookupDataType)&&(dataType&&(column.dataType=dataType),lookup&&lookupDataType&&(lookup.dataType=lookupDataType),isColumnDataTypesUpdated=!0)}if(void 0===column.serializationFormat||lookup&&void 0===lookup.serializationFormat)for(i=0;i<firstItems.length;i++)value=column.calculateCellValue(firstItems[i],!0),void 0===column.serializationFormat&&(column.serializationFormat=getSerializationFormat(column.dataType,value)),lookup&&void 0===lookup.serializationFormat&&(lookup.serializationFormat=getSerializationFormat(lookup.dataType,lookup.calculateCellValue(value,!0)))}that._updateColumnOptions(column,index)})),isColumnDataTypesUpdated},_customizeColumns:function(columns){var customizeColumns=this.option("customizeColumns");customizeColumns&&(columns.some((function(column){return(0,utils_type.Kn)(column.ownerBand)}))&&updateIndexes(this),customizeColumns(columns),assignColumns(this,createColumnsFromOptions(this,columns)))},updateColumns:function(dataSource,forceApplying,isApplyingUserState){if(forceApplying||this.updateSortingGrouping(dataSource),!dataSource||dataSource.isLoaded()){var sortParameters=dataSource?dataSource.sort()||[]:this.getSortDataSourceParameters(),groupParameters=dataSource?dataSource.group()||[]:this.getGroupDataSourceParameters(),filterParameters=null==dataSource?void 0:dataSource.lastLoadOptions().filter;isApplyingUserState||this._customizeColumns(this._columns),updateIndexes(this);var columns=this._columns;return(0,utils_deferred.gx)(this.refresh(!0)).always((()=>{this._columns===columns&&(this._updateChanges(dataSource,{sorting:sortParameters,grouping:groupParameters,filtering:filterParameters}),fireColumnsChanged(this))}))}},_updateChanges:function(dataSource,parameters){dataSource&&(this.updateColumnDataTypes(dataSource),this._dataSourceApplied=!0),ui_grid_core_utils.equalSortParameters(parameters.sorting,this.getSortDataSourceParameters())||updateColumnChanges(this,"sorting"),ui_grid_core_utils.equalSortParameters(parameters.grouping,this.getGroupDataSourceParameters())||updateColumnChanges(this,"grouping");var dataController=this.getController("data");dataController&&!ui_grid_core_utils.equalFilterParameters(parameters.filtering,dataController.getCombinedFilter())&&updateColumnChanges(this,"filtering"),updateColumnChanges(this,"columns")},updateSortingGrouping:function(dataSource,fromDataSource){var sortParameters,isColumnsChanged,that=this,updateSortGroupParameterIndexes=function(columns,sortParameters,indexParameterName){(0,iterator.S6)(columns,(function(index,column){if(delete column[indexParameterName],sortParameters)for(var i=0;i<sortParameters.length;i++){var selector=sortParameters[i].selector,isExpanded=sortParameters[i].isExpanded;if(selector===column.dataField||selector===column.name||selector===column.selector||selector===column.calculateCellValue||selector===column.calculateGroupValue||selector===column.calculateDisplayValue){column.sortOrder=fromDataSource?"sortOrder"in column?column.sortOrder:sortParameters[i].desc?"desc":"asc":column.sortOrder||(sortParameters[i].desc?"desc":"asc"),void 0!==isExpanded&&(column.autoExpandGroup=isExpanded),column[indexParameterName]=i;break}}}))};if(dataSource){sortParameters=ui_grid_core_utils.normalizeSortingInfo(dataSource.sort());var groupParameters=ui_grid_core_utils.normalizeSortingInfo(dataSource.group()),columnsGroupParameters=that.getGroupDataSourceParameters(),columnsSortParameters=that.getSortDataSourceParameters(),groupingChanged=!ui_grid_core_utils.equalSortParameters(groupParameters,columnsGroupParameters,!0),groupExpandingChanged=!groupingChanged&&!ui_grid_core_utils.equalSortParameters(groupParameters,columnsGroupParameters);that._columns.length||((0,iterator.S6)(groupParameters,(function(index,group){that._columns.push(group.selector)})),(0,iterator.S6)(sortParameters,(function(index,sort){(0,utils_type.mf)(sort.selector)||that._columns.push(sort.selector)})),assignColumns(that,createColumnsFromOptions(that,that._columns))),!fromDataSource&&(columnsGroupParameters||that._hasUserState)||!groupingChanged&&!groupExpandingChanged||(updateSortGroupParameterIndexes(that._columns,groupParameters,"groupIndex"),fromDataSource&&(groupingChanged&&updateColumnChanges(that,"grouping"),groupExpandingChanged&&updateColumnChanges(that,"groupExpanding"),isColumnsChanged=!0)),!fromDataSource&&(columnsSortParameters||that._hasUserState)||ui_grid_core_utils.equalSortParameters(sortParameters,columnsSortParameters)||(updateSortGroupParameterIndexes(that._columns,sortParameters,"sortIndex"),fromDataSource&&(updateColumnChanges(that,"sorting"),isColumnsChanged=!0)),isColumnsChanged&&fireColumnsChanged(that)}},updateFilter:function(filter,remoteFiltering,columnIndex,filterValue){if(!Array.isArray(filter))return filter;if(columnIndex=void 0!==(filter=(0,extend.l)([],filter)).columnIndex?filter.columnIndex:columnIndex,filterValue=void 0!==filter.filterValue?filter.filterValue:filterValue,(0,utils_type.HD)(filter[0])&&"!"!==filter[0]){var column=this.columnOption(filter[0]);remoteFiltering?(0,config.Z)().forceIsoDateParsing&&column&&column.serializeValue&&filter.length>1&&(filter[filter.length-1]=column.serializeValue(filter[filter.length-1],"filter")):column&&column.selector&&(filter[0]=column.selector,filter[0].columnIndex=column.index)}else(0,utils_type.mf)(filter[0])&&(filter[0].columnIndex=columnIndex,filter[0].filterValue=filterValue,filter[0].selectedFilterOperation=filter.selectedFilterOperation);for(var i=0;i<filter.length;i++)filter[i]=this.updateFilter(filter[i],remoteFiltering,columnIndex,filterValue);return filter},columnCount:function(){return this._columns?this._columns.length:0},columnOption:function(identifier,option,value,notFireEvent){var that=this,columns=that._columns.concat(that._commandColumns),column=findColumn(columns,identifier);if(column){if(1===arguments.length)return(0,extend.l)({},column);if((0,utils_type.HD)(option)){if(2===arguments.length)return columnOptionCore(that,column,option);columnOptionCore(that,column,option,value,notFireEvent)}else(0,utils_type.Kn)(option)&&(0,iterator.S6)(option,(function(optionName,value){columnOptionCore(that,column,optionName,value,notFireEvent)}));fireColumnsChanged(that)}},clearSorting:function(){var columnCount=this.columnCount();this.beginUpdate();for(var i=0;i<columnCount;i++)this.columnOption(i,"sortOrder",void 0),delete findColumn(this._columns,i).sortOrder;this.endUpdate()},clearGrouping:function(){var columnCount=this.columnCount();this.beginUpdate();for(var i=0;i<columnCount;i++)this.columnOption(i,"groupIndex",void 0);this.endUpdate()},getVisibleIndex:function(index,rowIndex){for(var columns=this.getVisibleColumns(rowIndex),i=columns.length-1;i>=0;i--)if(columns[i].index===index)return i;return-1},getVisibleIndexByColumn:function(column,rowIndex){var visibleColumns=this.getVisibleColumns(rowIndex),visibleColumn=visibleColumns.filter((col=>col.index===column.index&&col.command===column.command))[0];return visibleColumns.indexOf(visibleColumn)},getVisibleColumnIndex:function(id,rowIndex){var index=this.columnOption(id,"index");return this.getVisibleIndex(index,rowIndex)},addColumn:function(options){var column=createColumn(this,options),index=this._columns.length;this._columns.push(column),column.isBand&&(this._columns=createColumnsFromOptions(this,this._columns),column=this._columns[index]),column.added=options,updateIndexes(this,column),this.updateColumns(this._dataSource),this._checkColumns()},deleteColumn:function(id){var columns,column=this.columnOption(id);if(column&&column.index>=0){if((columns=this._columns).forEach((column=>{(0,utils_type.$K)(column.ownerBand)&&(column.ownerBand=columns[column.ownerBand])})),this._columns.splice(column.index,1),column.isBand){var childIndexes=this.getChildrenByBandColumn(column.index).map((column=>column.index));this._columns=this._columns.filter((column=>childIndexes.indexOf(column.index)<0))}updateIndexes(this),this.updateColumns(this._dataSource)}},addCommandColumn:function(options){var commandColumn=this._commandColumns.filter((column=>column.command===options.command))[0];commandColumn||(commandColumn=options,this._commandColumns.push(commandColumn))},getUserState:function(){var i,columns=this._columns,result=[];function handleStateField(index,value){void 0!==columns[i][value]&&(result[i][value]=columns[i][value])}for(i=0;i<columns.length;i++)result[i]={},(0,iterator.S6)(USER_STATE_FIELD_NAMES,handleStateField);return result},setName:function(column){column.name=column.name||column.dataField||column.type},setUserState:function(state){var dataSource=this._dataSource,ignoreColumnOptionNames=this.option("stateStoring.ignoreColumnOptionNames");if(null==state||state.forEach(this.setName),!ignoreColumnOptionNames){ignoreColumnOptionNames=[];var commonColumnSettings=this.getCommonSettings();this.option("columnChooser.enabled")||ignoreColumnOptionNames.push("visible"),"none"===this.option("sorting.mode")&&ignoreColumnOptionNames.push("sortIndex","sortOrder"),commonColumnSettings.allowGrouping||ignoreColumnOptionNames.push("groupIndex"),commonColumnSettings.allowFixing||ignoreColumnOptionNames.push("fixed","fixedPosition"),commonColumnSettings.allowResizing||ignoreColumnOptionNames.push("width","visibleWidth");var isFilterPanelHidden=!this.option("filterPanel.visible");!this.option("filterRow.visible")&&isFilterPanelHidden&&ignoreColumnOptionNames.push("filterValue","selectedFilterOperation"),!this.option("headerFilter.visible")&&isFilterPanelHidden&&ignoreColumnOptionNames.push("filterValues","filterType")}this._columnsUserState=state,this._ignoreColumnOptionNames=ignoreColumnOptionNames,this._hasUserState=!!state,updateColumnChanges(this,"filtering"),this.init(!0),dataSource&&(dataSource.sort(this.getSortDataSourceParameters()),dataSource.group(this.getGroupDataSourceParameters()))},_checkColumns:function(){var usedNames={},hasEditableColumnWithoutName=!1,duplicatedNames=[];this._columns.forEach((column=>{var _column$columns,name=column.name,isBand=null===(_column$columns=column.columns)||void 0===_column$columns?void 0:_column$columns.length,isEditable=column.allowEditing&&(column.dataField||column.setCellValue)&&!isBand;name?(usedNames[name]&&duplicatedNames.push('"'.concat(name,'"')),usedNames[name]=!0):isEditable&&(hasEditableColumnWithoutName=!0)})),duplicatedNames.length&&ui_errors.Z.log("E1059",duplicatedNames.join(", ")),hasEditableColumnWithoutName&&ui_errors.Z.log("E1060")},_createCalculatedColumnOptions:function(columnOptions,bandColumn){var calculatedColumnOptions={},dataField=columnOptions.dataField;if((Array.isArray(columnOptions.columns)&&columnOptions.columns.length||columnOptions.isBand)&&(calculatedColumnOptions.isBand=!0,dataField=null),dataField){if((0,utils_type.HD)(dataField)){var getter=(0,data.vb)(dataField);calculatedColumnOptions={caption:(0,inflector.GK)(dataField),calculateCellValue:function(data,skipDeserialization){var value=getter(data);return this.deserializeValue&&!skipDeserialization?this.deserializeValue(value):value},setCellValue:defaultSetCellValue,parseValue:function(text){var result,parsedValue;return"number"===this.dataType?(0,utils_type.HD)(text)&&this.format?result=function(text,format){var parsedValue=number.Z.parse(text);if((0,utils_type.kE)(parsedValue)){var formattedValue=number.Z.format(parsedValue,format),formattedValueWithDefaultFormat=number.Z.format(parsedValue,"decimal");if(formattedValue===text||formattedValueWithDefaultFormat===text)return parsedValue}}(text.trim(),this.format):(0,utils_type.$K)(text)&&(0,utils_type.kE)(text)&&(result=Number(text)):"boolean"===this.dataType?text===this.trueText?result=!0:text===this.falseText&&(result=!1):ui_grid_core_utils.isDateType(this.dataType)?(parsedValue=localization_date.parse(text,this.format))&&(result=parsedValue):result=text,result}}}calculatedColumnOptions.allowFiltering=!0}else calculatedColumnOptions.allowFiltering=!!columnOptions.calculateFilterExpression;return calculatedColumnOptions.calculateFilterExpression=function(){return filtering.defaultCalculateFilterExpression.apply(this,arguments)},calculatedColumnOptions.defaultFilterOperation="=",calculatedColumnOptions.createFilterExpression=function(filterValue,selectedFilterOperation){var result;return this.calculateFilterExpression&&(result=this.calculateFilterExpression.apply(this,arguments)),(0,utils_type.mf)(result)&&(result=[result,"=",!0]),result&&(result.columnIndex=this.index,result.filterValue=filterValue,result.selectedFilterOperation=selectedFilterOperation),result},dataField&&(0,utils_type.HD)(dataField)||(0,extend.l)(!0,calculatedColumnOptions,{allowSorting:!1,allowGrouping:!1,calculateCellValue:function(){return null}}),bandColumn&&(calculatedColumnOptions.allowFixing=!1),columnOptions.dataType&&(calculatedColumnOptions.userDataType=columnOptions.dataType),columnOptions.selectedFilterOperation&&!("defaultSelectedFilterOperation"in calculatedColumnOptions)&&(calculatedColumnOptions.defaultSelectedFilterOperation=columnOptions.selectedFilterOperation),columnOptions.lookup&&(calculatedColumnOptions.lookup={calculateCellValue:function(value,skipDeserialization){return this.valueExpr&&(value=this.valueMap&&this.valueMap[value]),this.deserializeValue&&!skipDeserialization?this.deserializeValue(value):value},updateValueMap:function(){if(this.valueMap={},this.items)for(var calculateValue=(0,data.vb)(this.valueExpr),calculateDisplayValue=(0,data.vb)(this.displayExpr),i=0;i<this.items.length;i++){var item=this.items[i],displayValue=calculateDisplayValue(item);this.valueMap[calculateValue(item)]=displayValue,this.dataType=this.dataType||getValueDataType(displayValue)}},update:function(){var that=this,dataSource=that.dataSource;if(dataSource)if((0,utils_type.mf)(dataSource)&&!variable_wrapper.default.isWrapped(dataSource)&&(dataSource=dataSource({})),(0,utils_type.PO)(dataSource)||dataSource instanceof abstract_store.Z||Array.isArray(dataSource)){if(that.valueExpr){var dataSourceOptions=(0,data_source_utils.aN)(dataSource);return dataSourceOptions.paginate=!1,(dataSource=new data_source.o(dataSourceOptions)).load().done((function(data){that.items=data,that.updateValueMap&&that.updateValueMap()}))}}else ui_errors.Z.log("E1016");else that.updateValueMap&&that.updateValueMap()}}),calculatedColumnOptions.resizedCallbacks=(0,callbacks.Z)(),columnOptions.resized&&calculatedColumnOptions.resizedCallbacks.add(columnOptions.resized.bind(columnOptions)),(0,iterator.S6)(calculatedColumnOptions,(function(optionName){if((0,utils_type.mf)(calculatedColumnOptions[optionName])&&0!==optionName.indexOf("default")){var defaultOptionName="default"+optionName.charAt(0).toUpperCase()+optionName.substr(1);calculatedColumnOptions[defaultOptionName]=calculatedColumnOptions[optionName]}})),calculatedColumnOptions},getRowCount:function(){var that,rowCount,columnParentByIndex;return this._rowCount=this._rowCount||(rowCount=1,columnParentByIndex=(that=this).getBandColumnsCache().columnParentByIndex,that._columns.forEach((function(column){var parents=getParentBandColumns(column.index,columnParentByIndex),invisibleParents=parents.filter((function(column){return!column.visible}));column.visible&&!invisibleParents.length&&(rowCount=Math.max(rowCount,parents.length+1))})),rowCount),this._rowCount},getRowIndex:function(columnIndex,alwaysGetRowIndex){var column=this._columns[columnIndex],bandColumnsCache=this.getBandColumnsCache();return column&&(alwaysGetRowIndex||column.visible&&!column.command&&!(0,utils_type.$K)(column.groupIndex))?getParentBandColumns(columnIndex,bandColumnsCache.columnParentByIndex).length:0},getChildrenByBandColumn:function(bandColumnIndex,onlyVisibleDirectChildren){var bandColumnsCache=this.getBandColumnsCache(),result=_getChildrenByBandColumn(bandColumnIndex,bandColumnsCache.columnChildrenByIndex,!onlyVisibleDirectChildren);return onlyVisibleDirectChildren?result.filter((function(column){return column.visible&&!column.command})).sort((function(column1,column2){return column1.visibleIndex-column2.visibleIndex})):result},isParentBandColumn:function(columnIndex,bandColumnIndex){var result=!1,column=this._columns[columnIndex],bandColumnsCache=this.getBandColumnsCache(),parentBandColumns=column&&getParentBandColumns(columnIndex,bandColumnsCache.columnParentByIndex);return parentBandColumns&&(0,iterator.S6)(parentBandColumns,(function(_,bandColumn){if(bandColumn.index===bandColumnIndex)return result=!0,!1})),result},isParentColumnVisible:function(columnIndex){var result=!0,bandColumnsCache=this.getBandColumnsCache(),bandColumns=columnIndex>=0&&getParentBandColumns(columnIndex,bandColumnsCache.columnParentByIndex);return bandColumns&&(0,iterator.S6)(bandColumns,(function(_,bandColumn){return result=result&&bandColumn.visible})),result},getColumnId:function(column){return column.command&&"groupExpand"===column.type?isCustomCommandColumn(this,column)?"type:"+column.type:"command:"+column.command:column.index},getCustomizeTextByDataType,getHeaderContentAlignment:function(columnAlignment){return this.option("rtlEnabled")?"left"===columnAlignment?"right":"left":columnAlignment}};return members}())}};const ColumnsController=columnsControllerModule.controllers.columns.inherit({_getFirstItems(dataSourceAdapter){return this.callBase(dataSourceAdapter).map((node=>node.data))},getFirstDataColumnIndex(){const visibleColumns=this.getVisibleColumns(),visibleColumnsLength=visibleColumns.length;let firstDataColumnIndex=0;for(let i=0;i<=visibleColumnsLength-1;i++)if(!(0,utils_type.$K)(visibleColumns[i].command)){firstDataColumnIndex=visibleColumns[i].index;break}return firstDataColumnIndex}});module_core.registerModule("columns",{defaultOptions:columnsControllerModule.defaultOptions,controllers:{columns:ColumnsController}});var array_store=__webpack_require__("./node_modules/devextreme/esm/data/array_store.js"),custom_store=__webpack_require__("./node_modules/devextreme/esm/data/custom_store.js"),data_helper=__webpack_require__("./node_modules/devextreme/esm/data_helper.js"),array_compare=__webpack_require__("./node_modules/devextreme/esm/core/utils/array_compare.js"),dataControllerModule={defaultOptions:function(){return{loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}},controllers:{data:ui_grid_core_modules.Controller.inherit(data_helper.Z).inherit(function(){var changePaging=function(that,optionName,value){var dataSource=that._dataSource;if(dataSource){if(void 0!==value){if(that._getPagingOptionValue(optionName)!==value){"pageSize"===optionName&&dataSource.pageIndex(0),dataSource[optionName](value),that._skipProcessingPagingChange=!0,that.option("paging."+optionName,value),that._skipProcessingPagingChange=!1;var pageIndex=dataSource.pageIndex();return that._isPaging="pageIndex"===optionName,dataSource["pageIndex"===optionName?"load":"reload"]().done((()=>{that._isPaging=!1,that.pageChanged.fire(pageIndex)}))}return(0,utils_deferred.BH)().resolve().promise()}return dataSource[optionName]()}return 0},members={init:function(){var that=this;that._items=[],that._cachedProcessedItems=null,that._columnsController=that.getController("columns"),that._isPaging=!1,that._currentOperationTypes=null,that._dataChangedHandler=e=>{that._currentOperationTypes=this._dataSource.operationTypes(),that._handleDataChanged(e),that._currentOperationTypes=null},that._columnsChangedHandler=that._handleColumnsChanged.bind(that),that._loadingChangedHandler=that._handleLoadingChanged.bind(that),that._loadErrorHandler=that._handleLoadError.bind(that),that._customizeStoreLoadOptionsHandler=that._handleCustomizeStoreLoadOptions.bind(that),that._changingHandler=that._handleChanging.bind(that),that._dataPushedHandler=that._handleDataPushed.bind(that),that._columnsController.columnsChanged.add(that._columnsChangedHandler),that._isLoading=!1,that._isCustomLoading=!1,that._repaintChangesOnly=void 0,that._changes=[],that.createAction("onDataErrorOccurred"),that.dataErrorOccurred.add((function(error){return that.executeAction("onDataErrorOccurred",{error})})),that._refreshDataSource()},_getPagingOptionValue:function(optionName){return this._dataSource[optionName]()},callbackNames:function(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]},callbackFlags:function(name){if("dataErrorOccurred"===name)return{stopOnFalse:!0}},publicMethods:function(){return["beginCustomLoading","endCustomLoading","refresh","filter","clearFilter","getCombinedFilter","keyOf","byKey","getDataByKeys","pageIndex","pageSize","pageCount","totalCount","_disposeDataSource","getKeyByRowIndex","getRowIndexByKey","getDataSource","getVisibleRows","repaintRows"]},reset:function(){this._columnsController.reset(),this._items=[],this._refreshDataSource()},_handleDataSourceChange(args){if(args.value===args.previousValue||this.option("columns")&&Array.isArray(args.value)&&Array.isArray(args.previousValue)){if(args.value!==args.previousValue){var store=this.store();store&&(store._array=args.value)}return this.needToRefreshOnDataSourceChange(args)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1},needToRefreshOnDataSourceChange:function(args){return!0},optionChanged:function(args){var dataSource,changedPagingOptions,that=this;function handled(){args.handled=!0}if("dataSource"===args.name&&args.name===args.fullName&&this._handleDataSourceChange(args))handled();else switch(args.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":handled();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":handled(),that.reset();break;case"paging":if((dataSource=that.dataSource())&&(changedPagingOptions=that._setPagingOptions(dataSource))){var pageIndex=dataSource.pageIndex();this._isPaging=changedPagingOptions.isPageIndexChanged,dataSource.load().done((()=>{this._isPaging=!1,that.pageChanged.fire(pageIndex)}))}handled();break;case"rtlEnabled":that.reset();break;case"columns":(dataSource=that.dataSource())&&dataSource.isLoading()&&args.name===args.fullName&&(this._useSortingGroupingFromColumns=!0,dataSource.load());break;default:that.callBase(args)}},isReady:function(){return!this._isLoading},getDataSource:function(){return this._dataSource&&this._dataSource._dataSource},getCombinedFilter:function(returnDataField){return this.combinedFilter(void 0,returnDataField)},combinedFilter:function(filter,returnDataField){var dataSource=this._dataSource,columnsController=this._columnsController;if(dataSource){void 0===filter&&(filter=dataSource.filter());var additionalFilter=this._calculateAdditionalFilter();additionalFilter&&(columnsController.isDataSourceApplied()||columnsController.isAllDataTypesDefined())&&(filter=ui_grid_core_utils.combineFilters([additionalFilter,filter])),filter=columnsController.updateFilter(filter,returnDataField||dataSource.remoteOperations().filtering)}return filter},waitReady:function(){return this._updateLockCount?(this._readyDeferred=new utils_deferred.BH,this._readyDeferred):(0,utils_deferred.gx)()},_endUpdateCore:function(){var changes=this._changes;if(changes.length){this._changes=[];var repaintChangesOnly=changes.every((change=>change.repaintChangesOnly));this.updateItems(1===changes.length?changes[0]:{repaintChangesOnly})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)},_handleCustomizeStoreLoadOptions:function(e){var _storeLoadOptions$fil,columnsController=this._columnsController,dataSource=this._dataSource,storeLoadOptions=e.storeLoadOptions;e.isCustomLoading&&!storeLoadOptions.isLoadingAll||(storeLoadOptions.filter=this.combinedFilter(storeLoadOptions.filter),1===(null===(_storeLoadOptions$fil=storeLoadOptions.filter)||void 0===_storeLoadOptions$fil?void 0:_storeLoadOptions$fil.length)&&"!"===storeLoadOptions.filter[0]&&(e.data=[],e.extra=e.extra||{},e.extra.totalCount=0),columnsController.isDataSourceApplied()||columnsController.updateColumnDataTypes(dataSource),this._columnsUpdating=!0,columnsController.updateSortingGrouping(dataSource,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,storeLoadOptions.sort=columnsController.getSortDataSourceParameters(),storeLoadOptions.group=columnsController.getGroupDataSourceParameters(),dataSource.sort(storeLoadOptions.sort),dataSource.group(storeLoadOptions.group),storeLoadOptions.sort=columnsController.getSortDataSourceParameters(!dataSource.remoteOperations().sorting),e.group=columnsController.getGroupDataSourceParameters(!dataSource.remoteOperations().grouping))},_handleColumnsChanged:function(e){var filterValue,filterValues,filterApplied,that=this,changeTypes=e.changeTypes,optionNames=e.optionNames;if(changeTypes.sorting||changeTypes.grouping)that._dataSource&&!that._columnsUpdating&&(that._dataSource.group(that._columnsController.getGroupDataSourceParameters()),that._dataSource.sort(that._columnsController.getSortDataSourceParameters()),that.reload());else if(changeTypes.columns&&(filterValues=that._columnsController.columnOption(e.columnIndex,"filterValues"),(optionNames.filterValues||optionNames.filterType&&Array.isArray(filterValues)||optionNames.filterValue||optionNames.selectedFilterOperation||optionNames.allowFiltering)&&(filterValue=that._columnsController.columnOption(e.columnIndex,"filterValue"),(Array.isArray(filterValues)||void 0===e.columnIndex||(0,utils_type.$K)(filterValue)||!optionNames.selectedFilterOperation||optionNames.filterValue)&&(that._applyFilter(),filterApplied=!0)),that._needApplyFilter||ui_grid_core_utils.checkChanges(optionNames,["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"])||that._columnsController.columnsChanged.add((function updateItemsHandler(change){var _change$changeTypes;that._columnsController.columnsChanged.remove(updateItemsHandler),that.updateItems({repaintChangesOnly:!1,virtualColumnsScrolling:null==change||null===(_change$changeTypes=change.changeTypes)||void 0===_change$changeTypes?void 0:_change$changeTypes.virtualColumnsScrolling})})),(0,utils_type.$K)(optionNames.visible))){var column=that._columnsController.columnOption(e.columnIndex);column&&((0,utils_type.$K)(column.filterValue)||(0,utils_type.$K)(column.filterValues))&&(that._applyFilter(),filterApplied=!0)}!filterApplied&&changeTypes.filtering&&that.reload()},_handleDataChanged:function(e){var that=this,dataSource=that._dataSource,columnsController=that._columnsController,isAsyncDataSourceApplying=!1;this._useSortingGroupingFromColumns=!1,dataSource&&!that._isDataSourceApplying&&(that._isDataSourceApplying=!0,(0,utils_deferred.gx)(that._columnsController.applyDataSource(dataSource)).done((function(){that._isLoading&&that._handleLoadingChanged(!1),isAsyncDataSourceApplying&&e&&e.isDelayed&&(e.isDelayed=!1),that._isDataSourceApplying=!1;var additionalFilter,needApplyFilter=that._needApplyFilter;that._needApplyFilter=!1,needApplyFilter&&!that._isAllDataTypesDefined&&((additionalFilter=that._calculateAdditionalFilter())&&additionalFilter.length)?(ui_errors.Z.log("W1005",that.component.NAME),that._applyFilter()):that.updateItems(e,!0)})).fail((function(){that._isDataSourceApplying=!1})),that._isDataSourceApplying&&(isAsyncDataSourceApplying=!0,that._handleLoadingChanged(!0)),that._needApplyFilter=!that._columnsController.isDataSourceApplied(),that._isAllDataTypesDefined=columnsController.isAllDataTypesDefined())},_handleLoadingChanged:function(isLoading){this._isLoading=isLoading,this._fireLoadingChanged()},_handleLoadError:function(e){this.dataErrorOccurred.fire(e)},_handleDataPushed:function(changes){this.pushed.fire(changes)},fireError:function(){this.dataErrorOccurred.fire(ui_errors.Z.Error.apply(ui_errors.Z,arguments))},_setPagingOptions:function(dataSource){var pageIndex=this.option("paging.pageIndex"),pageSize=this.option("paging.pageSize"),pagingEnabled=this.option("paging.enabled"),scrollingMode=this.option("scrolling.mode"),appendMode="infinite"===scrollingMode,paginate=pagingEnabled||"virtual"===scrollingMode||appendMode,isPaginateChanged=!1,isPageSizeChanged=!1,isPageIndexChanged=!1;return dataSource.requireTotalCount(!appendMode),void 0!==pagingEnabled&&dataSource.paginate()!==paginate&&(dataSource.paginate(paginate),isPaginateChanged=!0),void 0!==pageSize&&dataSource.pageSize()!==pageSize&&(dataSource.pageSize(pageSize),isPageSizeChanged=!0),void 0!==pageIndex&&dataSource.pageIndex()!==pageIndex&&(dataSource.pageIndex(pageIndex),isPageIndexChanged=!0),!!(isPaginateChanged||isPageSizeChanged||isPageIndexChanged)&&{isPaginateChanged,isPageSizeChanged,isPageIndexChanged}},_getSpecificDataSourceOption:function(){var dataSource=this.option("dataSource");return Array.isArray(dataSource)?{store:{type:"array",data:dataSource,key:this.option("keyExpr")}}:dataSource},_initDataSource:function(){var oldDataSource=this._dataSource;this.callBase();var dataSource=this._dataSource;if(this._useSortingGroupingFromColumns=!0,this._cachedProcessedItems=null,dataSource){var changedPagingOptions=this._setPagingOptions(dataSource);this._isPaging=null==changedPagingOptions?void 0:changedPagingOptions.isPageIndexChanged,this.setDataSource(dataSource)}else oldDataSource&&this.updateItems()},_loadDataSource:function(){var that=this,dataSource=that._dataSource,result=new utils_deferred.BH;return(0,utils_deferred.gx)(this._columnsController.refresh(!0)).always((function(){dataSource?dataSource.load().done((function(){that._isPaging=!1,result.resolve.apply(result,arguments)})).fail(result.reject):result.resolve()})),result.promise()},_beforeProcessItems:function(items){return items.slice(0)},getRowIndexDelta:function(){return 0},getDataIndex:function(change){var visibleItems=this._items,lastVisibleItem="append"===change.changeType&&visibleItems.length>0?visibleItems[visibleItems.length-1]:null;return(0,utils_type.$K)(null==lastVisibleItem?void 0:lastVisibleItem.dataIndex)?lastVisibleItem.dataIndex+1:0},_processItems:function(items,change){var that=this,rowIndexDelta=that.getRowIndexDelta(),changeType=change.changeType,options={visibleColumns:that._columnsController.getVisibleColumns(null,"loadingAll"===changeType),dataIndex:this.getDataIndex(change)},result=[];return(0,iterator.S6)(items,(function(index,item){(0,utils_type.$K)(item)&&(options.rowIndex=index-rowIndexDelta,item=that._processItem(item,options),result.push(item))})),result},_processItem:function(item,options){return item=this._generateDataItem(item,options),(item=this._processDataItem(item,options)).dataIndex=options.dataIndex++,item},_generateDataItem:function(data){return{rowType:"data",data,key:this.keyOf(data)}},_processDataItem:function(dataItem,options){return dataItem.values=this.generateDataValues(dataItem.data,options.visibleColumns),dataItem},generateDataValues:function(data,columns,isModified){for(var value,values=[],i=0;i<columns.length;i++){var column=columns[i];value=isModified?void 0:null,column.command||(column.calculateCellValue?value=column.calculateCellValue(data):column.dataField&&(value=data[column.dataField])),values.push(value)}return values},_applyChange:function(change){"update"===change.changeType?this._applyChangeUpdate(change):this.items().length&&change.repaintChangesOnly&&"refresh"===change.changeType?this._applyChangesOnly(change):"refresh"===change.changeType&&this._applyChangeFull(change)},_applyChangeFull:function(change){this._items=change.items.slice(0)},_getRowIndices:function(change){var rowIndices=change.rowIndices.slice(0),rowIndexDelta=this.getRowIndexDelta();rowIndices.sort((function(a,b){return a-b}));for(var i=0;i<rowIndices.length;i++){var correctedRowIndex=rowIndices[i];change.allowInvisibleRowIndices&&(correctedRowIndex+=rowIndexDelta),correctedRowIndex<0&&(rowIndices.splice(i,1),i--)}return rowIndices},_applyChangeUpdate:function(change){var changeType,that=this,items=change.items,rowIndices=that._getRowIndices(change),rowIndexDelta=that.getRowIndexDelta(),repaintChangesOnly=that.option("repaintChangesOnly"),prevIndex=-1,rowIndexCorrection=0;change.items=[],change.rowIndices=[],change.columnIndices=[],change.changeTypes=[];var equalItems=function(item1,item2,strict){var result=item1&&item2&&(0,common.bY)(item1.key,item2.key);return result&&strict&&(result=item1.rowType===item2.rowType&&("detail"!==item2.rowType||item1.isEditing===item2.isEditing)),result};(0,iterator.S6)(rowIndices,(function(index,rowIndex){var columnIndices;if(prevIndex!==(rowIndex+=rowIndexCorrection+rowIndexDelta)){prevIndex=rowIndex;var oldItem=that._items[rowIndex],oldNextItem=that._items[rowIndex+1],newItem=items[rowIndex],newNextItem=items[rowIndex+1],strict=equalItems(oldItem,oldNextItem)||equalItems(newItem,newNextItem);if(newItem&&(newItem.rowIndex=rowIndex,change.items.push(newItem)),oldItem&&newItem&&equalItems(oldItem,newItem,strict))changeType="update",that._items[rowIndex]=newItem,oldItem.visible!==newItem.visible?change.items.splice(-1,1,{visible:newItem.visible}):repaintChangesOnly&&!change.isFullUpdate&&(columnIndices=that._partialUpdateRow(oldItem,newItem,rowIndex-rowIndexDelta));else if(newItem&&!oldItem||newNextItem&&equalItems(oldItem,newNextItem,strict))changeType="insert",that._items.splice(rowIndex,0,newItem),rowIndexCorrection++;else if(oldItem&&!newItem||oldNextItem&&equalItems(newItem,oldNextItem,strict))changeType="remove",that._items.splice(rowIndex,1),rowIndexCorrection--,prevIndex=-1;else{if(!newItem)return;changeType="update",that._items[rowIndex]=newItem}change.rowIndices.push(rowIndex-rowIndexDelta),change.changeTypes.push(changeType),change.columnIndices.push(columnIndices)}}))},_isCellChanged:function(oldRow,newRow,visibleRowIndex,columnIndex,isLiveUpdate){if(JSON.stringify(oldRow.values[columnIndex])!==JSON.stringify(newRow.values[columnIndex]))return!0;function isCellModified(row,columnIndex){return!!row.modifiedValues&&void 0!==row.modifiedValues[columnIndex]}return isCellModified(oldRow,columnIndex)!==isCellModified(newRow,columnIndex)},_getChangedColumnIndices:function(oldItem,newItem,visibleRowIndex,isLiveUpdate){var columnIndices;if(oldItem.rowType===newItem.rowType){if("group"!==newItem.rowType&&"groupFooter"!==newItem.rowType&&(columnIndices=[],"detail"!==newItem.rowType))for(var columnIndex=0;columnIndex<oldItem.values.length;columnIndex++)this._isCellChanged(oldItem,newItem,visibleRowIndex,columnIndex,isLiveUpdate)&&columnIndices.push(columnIndex);"group"===newItem.rowType&&newItem.isExpanded===oldItem.isExpanded&&oldItem.cells&&(columnIndices=oldItem.cells.map(((cell,index)=>{var _cell$column;return"groupExpand"!==(null===(_cell$column=cell.column)||void 0===_cell$column?void 0:_cell$column.type)?index:-1})).filter((index=>index>=0)))}return columnIndices},_partialUpdateRow:function(oldItem,newItem,visibleRowIndex,isLiveUpdate){var _changedColumnIndices,changedColumnIndices=this._getChangedColumnIndices(oldItem,newItem,visibleRowIndex,isLiveUpdate);return null!==(_changedColumnIndices=changedColumnIndices)&&void 0!==_changedColumnIndices&&_changedColumnIndices.length&&this.option("dataRowTemplate")&&(changedColumnIndices=void 0),changedColumnIndices&&(oldItem.cells&&oldItem.cells.forEach((function(cell,columnIndex){!(changedColumnIndices.indexOf(columnIndex)>=0)&&cell&&cell.update&&cell.update(newItem)})),newItem.update=oldItem.update,newItem.watch=oldItem.watch,newItem.cells=oldItem.cells,isLiveUpdate&&(newItem.oldValues=oldItem.values),oldItem.update&&oldItem.update(newItem)),changedColumnIndices},_isItemEquals:function(item1,item2){if(JSON.stringify(item1.values)!==JSON.stringify(item2.values))return!1;if(["modified","isNewRow","removed","isEditing"].some((field=>item1[field]!==item2[field])))return!1;if("group"===item1.rowType||"groupFooter"===item1.rowType){var _item1$data,_item2$data,_item1$data2,_item2$data2,expandedMatch=item1.isExpanded===item2.isExpanded,summaryCellsMatch=JSON.stringify(item1.summaryCells)===JSON.stringify(item2.summaryCells),continuationMatch=(null===(_item1$data=item1.data)||void 0===_item1$data?void 0:_item1$data.isContinuation)===(null===(_item2$data=item2.data)||void 0===_item2$data?void 0:_item2$data.isContinuation)&&(null===(_item1$data2=item1.data)||void 0===_item1$data2?void 0:_item1$data2.isContinuationOnNextPage)===(null===(_item2$data2=item2.data)||void 0===_item2$data2?void 0:_item2$data2.isContinuationOnNextPage);if(!expandedMatch||!summaryCellsMatch||!continuationMatch)return!1}return!0},_applyChangesOnly:function(change){var _change$isLiveUpdate,rowIndices=[],columnIndices=[],changeTypes=[],items=[],newIndexByKey={},isLiveUpdate=null===(_change$isLiveUpdate=null==change?void 0:change.isLiveUpdate)||void 0===_change$isLiveUpdate||_change$isLiveUpdate;function getRowKey(row){if(row)return row.rowType+","+JSON.stringify(row.key)}var currentItems=this._items,oldItems=currentItems.slice();change.items.forEach((function(item,index){var key=getRowKey(item);newIndexByKey[key]=index,item.rowIndex=index}));var result=(0,array_compare.h)(oldItems,change.items,getRowKey,((item1,item2)=>!!this._isItemEquals(item1,item2)&&(item1.cells&&(item1.update&&item1.update(item2),item1.cells.forEach((function(cell){cell&&cell.update&&cell.update(item2,!0)}))),!0)));result?(result.forEach((change=>{switch(change.type){case"update":var index=change.index,newItem=change.data,oldItem=change.oldItem,changedColumnIndices=this._partialUpdateRow(oldItem,newItem,index,isLiveUpdate);rowIndices.push(index),changeTypes.push("update"),items.push(newItem),currentItems[index]=newItem,columnIndices.push(changedColumnIndices);break;case"insert":rowIndices.push(change.index),changeTypes.push("insert"),items.push(change.data),columnIndices.push(void 0),currentItems.splice(change.index,0,change.data);break;case"remove":rowIndices.push(change.index),changeTypes.push("remove"),currentItems.splice(change.index,1),items.push(change.oldItem),columnIndices.push(void 0)}})),change.repaintChangesOnly=!0,change.changeType="update",change.rowIndices=rowIndices,change.columnIndices=columnIndices,change.changeTypes=changeTypes,change.items=items,oldItems.length&&(change.isLiveUpdate=!0),this._correctRowIndices((rowIndex=>{var oldRowIndexOffset=this._rowIndexOffset||0,rowIndexOffset=this.getRowIndexOffset(),key=getRowKey(oldItems[rowIndex-oldRowIndexOffset]),newVisibleRowIndex=newIndexByKey[key];return newVisibleRowIndex>=0?newVisibleRowIndex+rowIndexOffset-rowIndex:0}))):this._applyChangeFull(change)},_correctRowIndices:common.ZT,_afterProcessItems:function(items){return items},_updateItemsCore:function(change){var items,dataSource=this._dataSource,changeType=change.changeType||"refresh";if(change.changeType=changeType,dataSource){var cachedProcessedItems=this._cachedProcessedItems;change.useProcessedItemsCache&&cachedProcessedItems?items=cachedProcessedItems:(items=change.items||dataSource.items(),items=this._beforeProcessItems(items),items=this._processItems(items,change),this._cachedProcessedItems=items),items=this._afterProcessItems(items,change),change.items=items;var oldItems=this._items.length===items.length&&this._items;this._applyChange(change);var rowIndexDelta=this.getRowIndexDelta();(0,iterator.S6)(this._items,((index,item)=>{item.rowIndex=index-rowIndexDelta,oldItems&&(item.cells=oldItems[index].cells||[]);var newItem=items[index];newItem&&(item.loadIndex=newItem.loadIndex)})),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]},_handleChanging:function(e){var rows=this.getVisibleRows();this.dataSource()&&e.changes.forEach((function(change){if("insert"===change.type&&change.index>=0){for(var dataIndex=0,i=0;i<change.index;i++){var row=rows[i];!row||"data"!==row.rowType&&"group"!==row.rowType||dataIndex++}change.index=dataIndex}}))},updateItems:function(change,isDataChanged){var _change$repaintChange;if(change=change||{},void 0!==this._repaintChangesOnly)change.repaintChangesOnly=null!==(_change$repaintChange=change.repaintChangesOnly)&&void 0!==_change$repaintChange?_change$repaintChange:this._repaintChangesOnly,change.needUpdateDimensions=change.needUpdateDimensions||this._needUpdateDimensions;else if(change.changes)change.repaintChangesOnly=this.option("repaintChangesOnly");else if(isDataChanged){var operationTypes=this.dataSource().operationTypes();change.repaintChangesOnly=operationTypes&&!operationTypes.grouping&&!operationTypes.filtering&&this.option("repaintChangesOnly"),change.isDataChanged=!0,operationTypes&&(operationTypes.reload||operationTypes.paging||operationTypes.groupExpanding)&&(change.needUpdateDimensions=!0)}!this._updateLockCount||change.cancel?(this._updateItemsCore(change),change.cancel||this._fireChanged(change)):this._changes.push(change)},loadingOperationTypes:function(){var dataSource=this.dataSource();return dataSource&&dataSource.loadingOperationTypes()||{}},_fireChanged:function(change){this._currentOperationTypes&&(change.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),(0,common.g0)((()=>{this.changed.fire(change)}))},isLoading:function(){return this._isLoading||this._isCustomLoading},_fireLoadingChanged:function(){this.loadingChanged.fire(this.isLoading(),this._loadingText)},_calculateAdditionalFilter:function(){return null},_applyFilter:function(){var dataSource=this._dataSource;if(dataSource)return dataSource.pageIndex(0),this._isFilterApplying=!0,this.reload().done((()=>{this._isFilterApplying&&this.pageChanged.fire()}))},resetFilterApplying:function(){this._isFilterApplying=!1},filter:function(filterExpr){var dataSource=this._dataSource,filter=dataSource&&dataSource.filter();if(0===arguments.length)return filter;filterExpr=arguments.length>1?Array.prototype.slice.call(arguments,0):filterExpr,ui_grid_core_utils.equalFilterParameters(filter,filterExpr)||(dataSource&&dataSource.filter(filterExpr),this._applyFilter())},clearFilter:function(filterName){var columnsController=this._columnsController,clearColumnOption=function(optionName){for(var columnCount=columnsController.columnCount(),index=0;index<columnCount;index++)columnsController.columnOption(index,optionName,void 0)};if(this.component.beginUpdate(),arguments.length>0)switch(filterName){case"dataSource":this.filter(null);break;case"search":this.searchByText("");break;case"header":clearColumnOption("filterValues");break;case"row":clearColumnOption("filterValue")}else this.filter(null),this.searchByText(""),clearColumnOption("filterValue"),clearColumnOption("bufferedFilterValue"),clearColumnOption("filterValues");this.component.endUpdate()},_fireDataSourceChanged:function(){var that=this;that.changed.add((function changedHandler(){that.changed.remove(changedHandler),that.dataSourceChanged.fire()}))},_getDataSourceAdapter:common.ZT,_createDataSourceAdapterCore:function(dataSource,remoteOperations){var dataSourceAdapter=this._getDataSourceAdapter().create(this.component);return dataSourceAdapter.init(dataSource,remoteOperations),dataSourceAdapter},isLocalStore:function(store){return(store=store||this.store())instanceof array_store.Z},isCustomStore:function(store){return(store=store||this.store())instanceof custom_store.Z},_createDataSourceAdapter:function(dataSource){var remoteOperations=this.option("remoteOperations"),store=dataSource.store(),enabledRemoteOperations={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return remoteOperations&&remoteOperations.groupPaging&&(remoteOperations=(0,extend.l)({},enabledRemoteOperations,remoteOperations)),"auto"===remoteOperations&&(remoteOperations=this.isLocalStore(store)||this.isCustomStore(store)?{}:{filtering:!0,sorting:!0,paging:!0}),!0===remoteOperations&&(remoteOperations=enabledRemoteOperations),this._createDataSourceAdapterCore(dataSource,remoteOperations)},setDataSource:function(dataSource){var oldDataSource=this._dataSource;!dataSource&&oldDataSource&&(oldDataSource.cancelAll(),oldDataSource.changed.remove(this._dataChangedHandler),oldDataSource.loadingChanged.remove(this._loadingChangedHandler),oldDataSource.loadError.remove(this._loadErrorHandler),oldDataSource.customizeStoreLoadOptions.remove(this._customizeStoreLoadOptionsHandler),oldDataSource.changing.remove(this._changingHandler),oldDataSource.pushed.remove(this._dataPushedHandler),oldDataSource.dispose(this._isSharedDataSource)),dataSource&&(dataSource=this._createDataSourceAdapter(dataSource)),this._dataSource=dataSource,dataSource&&(this._fireDataSourceChanged(),this._isLoading=!dataSource.isLoaded(),this._needApplyFilter=!0,this._isAllDataTypesDefined=this._columnsController.isAllDataTypesDefined(),dataSource.changed.add(this._dataChangedHandler),dataSource.loadingChanged.add(this._loadingChangedHandler),dataSource.loadError.add(this._loadErrorHandler),dataSource.customizeStoreLoadOptions.add(this._customizeStoreLoadOptionsHandler),dataSource.changing.add(this._changingHandler),dataSource.pushed.add(this._dataPushedHandler))},items:function(){return this._items},isEmpty:function(){return!this.items().length},pageCount:function(){return this._dataSource?this._dataSource.pageCount():1},dataSource:function(){return this._dataSource},store:function(){var dataSource=this._dataSource;return dataSource&&dataSource.store()},loadAll:function(data){var that=this,d=new utils_deferred.BH,dataSource=that._dataSource;if(dataSource)if(data){var options={data,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:that.getCombinedFilter(),group:dataSource.group(),sort:dataSource.sort()}};dataSource._handleDataLoaded(options),(0,utils_deferred.gx)(options.data).done((function(data){data=that._beforeProcessItems(data),d.resolve(that._processItems(data,{changeType:"loadingAll"}),options.extra&&options.extra.summary)})).fail(d.reject)}else if(dataSource.isLoading())d.reject();else{var loadOptions=(0,extend.l)({},dataSource.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});dataSource.load(loadOptions).done((function(items,extra){items=that._beforeProcessItems(items),items=that._processItems(items,{changeType:"loadingAll"}),d.resolve(items,extra&&extra.summary)})).fail(d.reject)}else d.resolve([]);return d},getKeyByRowIndex:function(rowIndex,byLoaded){var item=this.items(byLoaded)[rowIndex];if(item)return item.key},getRowIndexByKey:function(key,byLoaded){return ui_grid_core_utils.getIndexByKey(key,this.items(byLoaded))},keyOf:function(data){var store=this.store();if(store)return store.keyOf(data)},byKey:function(key){var result,store=this.store(),rowIndex=this.getRowIndexByKey(key);if(store)return rowIndex>=0&&(result=(new utils_deferred.BH).resolve(this.items()[rowIndex].data)),result||store.byKey(key)},key:function(){var store=this.store();if(store)return store.key()},getRowIndexOffset:function(){return 0},getDataByKeys:function(rowKeys){var that=this,result=new utils_deferred.BH,deferreds=[],data=[];return(0,iterator.S6)(rowKeys,(function(index,key){deferreds.push(that.byKey(key).done((function(keyData){data[index]=keyData})))})),utils_deferred.gx.apply(renderer.Z,deferreds).always((function(){result.resolve(data)})),result},pageIndex:function(value){return changePaging(this,"pageIndex",value)},pageSize:function(value){return changePaging(this,"pageSize",value)},beginCustomLoading:function(messageText){this._isCustomLoading=!0,this._loadingText=messageText||"",this._fireLoadingChanged()},endCustomLoading:function(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()},refresh:function(options){!0===options?options={reload:!0,changesOnly:!0}:options||(options={lookup:!0,selection:!0,reload:!0});var that=this,dataSource=that.getDataSource(),changesOnly=options.changesOnly,d=new utils_deferred.BH,customizeLoadResult=function(){that._repaintChangesOnly=!!changesOnly};return(0,utils_deferred.gx)(!options.lookup||that._columnsController.refresh()).always((function(){options.load||options.reload?(dataSource&&dataSource.on("customizeLoadResult",customizeLoadResult),(0,utils_deferred.gx)(that.reload(options.reload,changesOnly)).always((function(){dataSource&&dataSource.off("customizeLoadResult",customizeLoadResult),that._repaintChangesOnly=void 0})).done(d.resolve).fail(d.reject)):(that.updateItems({repaintChangesOnly:options.changesOnly}),d.resolve())})),d.promise()},getVisibleRows:function(){return this.items()},_disposeDataSource:function(){this.setDataSource(null)},dispose:function(){this._disposeDataSource(),this.callBase.apply(this,arguments)},repaintRows:function(rowIndexes,changesOnly){((rowIndexes=Array.isArray(rowIndexes)?rowIndexes:[rowIndexes]).length>1||(0,utils_type.$K)(rowIndexes[0]))&&this.updateItems({changeType:"update",rowIndices:rowIndexes,isFullUpdate:!changesOnly})},skipProcessingPagingChange:function(fullName){return this._skipProcessingPagingChange&&("paging.pageIndex"===fullName||"paging.pageSize"===fullName)},getUserState:function(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}},getCachedStoreData:function(){return this._dataSource&&this._dataSource.getCachedStoreData()},isLastPageLoaded:function(){return this.pageIndex()===this.pageCount()-1}};return ui_grid_core_utils.proxyMethod(members,"load"),ui_grid_core_utils.proxyMethod(members,"reload"),ui_grid_core_utils.proxyMethod(members,"push"),ui_grid_core_utils.proxyMethod(members,"itemsCount",0),ui_grid_core_utils.proxyMethod(members,"totalItemsCount",0),ui_grid_core_utils.proxyMethod(members,"hasKnownLastPage",!0),ui_grid_core_utils.proxyMethod(members,"isLoaded",!0),ui_grid_core_utils.proxyMethod(members,"totalCount",0),members}())}},array_utils=__webpack_require__("./node_modules/devextreme/esm/data/array_utils.js"),data_query=__webpack_require__("./node_modules/devextreme/esm/data/query.js"),store_helper=__webpack_require__("./node_modules/devextreme/esm/data/store_helper.js");const ui_grid_core_data_source_adapter=ui_grid_core_modules.Controller.inherit(function(){function cloneItems(items,groupCount){if(items&&(items=items.slice(0),groupCount))for(var i=0;i<items.length;i++)items[i]=(0,extend.l)({key:items[i].key},items[i]),items[i].items=cloneItems(items[i].items,groupCount-1);return items}function calculateOperationTypes(loadOptions,lastLoadOptions,isFullReload){var operationTypes={reload:!0,fullReload:!0};return lastLoadOptions&&((operationTypes={sorting:!ui_grid_core_utils.equalSortParameters(loadOptions.sort,lastLoadOptions.sort),grouping:!ui_grid_core_utils.equalSortParameters(loadOptions.group,lastLoadOptions.group,!0),groupExpanding:!ui_grid_core_utils.equalSortParameters(loadOptions.group,lastLoadOptions.group)||lastLoadOptions.groupExpand,filtering:!ui_grid_core_utils.equalFilterParameters(loadOptions.filter,lastLoadOptions.filter),pageIndex:loadOptions.pageIndex!==lastLoadOptions.pageIndex,skip:loadOptions.skip!==lastLoadOptions.skip,take:loadOptions.take!==lastLoadOptions.take,pageSize:loadOptions.pageSize!==lastLoadOptions.pageSize,fullReload:isFullReload,reload:!1,paging:!1}).reload=isFullReload||operationTypes.sorting||operationTypes.grouping||operationTypes.filtering,operationTypes.paging=operationTypes.pageIndex||operationTypes.pageSize||operationTypes.take),operationTypes}function getPageDataFromCache(options,updatePaging){var groupCount=ui_grid_core_utils.normalizeSortingInfo(options.group||options.storeLoadOptions.group||options.loadOptions.group).length,items=[];if(fillItemsFromCache(items,options,groupCount))return items;updatePaging&&function(cacheItemsFromBegin,options,groupCount){var cacheItemBeginCount=cacheItemsFromBegin.length,{storeLoadOptions}=options;if(void 0!==storeLoadOptions.skip&&storeLoadOptions.take&&!groupCount){var cacheItemsFromEnd=[];fillItemsFromCache(cacheItemsFromEnd,options,groupCount,!0);var _options$skip2,_options$take2,cacheItemEndCount=cacheItemsFromEnd.length;if(cacheItemBeginCount||cacheItemEndCount)options.skip=null!==(_options$skip2=options.skip)&&void 0!==_options$skip2?_options$skip2:storeLoadOptions.skip,options.take=null!==(_options$take2=options.take)&&void 0!==_options$take2?_options$take2:storeLoadOptions.take;cacheItemBeginCount&&(storeLoadOptions.skip+=cacheItemBeginCount,storeLoadOptions.take-=cacheItemBeginCount,options.cachedDataPartBegin=cacheItemsFromBegin),cacheItemEndCount&&(storeLoadOptions.take-=cacheItemEndCount,options.cachedDataPartEnd=cacheItemsFromEnd.reverse())}}(items,options,groupCount)}function fillItemsFromCache(items,options,groupCount,fromEnd){var _ref,_options$take,_options$cachedData,{storeLoadOptions}=options,take=null!==(_ref=null!==(_options$take=options.take)&&void 0!==_options$take?_options$take:storeLoadOptions.take)&&void 0!==_ref?_ref:0,cachedItems=null===(_options$cachedData=options.cachedData)||void 0===_options$cachedData?void 0:_options$cachedData.items;if(take&&cachedItems){for(var _ref2,_options$skip,skip=null!==(_ref2=null!==(_options$skip=options.skip)&&void 0!==_options$skip?_options$skip:storeLoadOptions.skip)&&void 0!==_ref2?_ref2:0,i=0;i<take;i++){var localIndex=fromEnd?take-1-i:i,cacheItemIndex=localIndex+skip,cacheItem=cachedItems[cacheItemIndex];if(void 0===cacheItem&&cacheItemIndex in cachedItems)return!0;var item=getItemFromCache(options,cacheItem,groupCount,localIndex,take);if(!item)return!1;items.push(item)}return!0}return!1}function getItemFromCache(options,cacheItem,groupCount,index,take){return groupCount&&cacheItem?function getGroupItemFromCache(cacheItem,groupCount,skips,takes){if(groupCount&&cacheItem){var result=(0,esm_extends.Z)({},cacheItem),skip=skips[0]||0,take=takes[0],items=cacheItem.items;if(items){if(void 0===take&&!items[skip])return;result.items=[],skips.length&&(result.isContinuation=!0),takes.length&&(result.isContinuationOnNextPage=!0);for(var i=0;void 0===take?items[i+skip]:i<take;i++){var isLast=i+1===take,item=getGroupItemFromCache(items[i+skip],groupCount-1,0===i?skips.slice(1):[],isLast?takes.slice(1):[]);if(void 0===item)return;result.items.push(item)}}return result}return cacheItem}(cacheItem,groupCount,0===index&&options.skips||[],index===take-1&&options.takes||[]):cacheItem}function getCacheItem(cacheItem,loadedItem,groupCount,skips){if(groupCount&&loadedItem){var result=(0,esm_extends.Z)({},loadedItem);delete result.isContinuation,delete result.isContinuationOnNextPage;var skip=skips[0]||0;return loadedItem.items&&(result.items=(null==cacheItem?void 0:cacheItem.items)||{},loadedItem.items.forEach(((item,index)=>{var globalIndex=index+skip,childSkips=0===index?skips.slice(1):[];result.items[globalIndex]=getCacheItem(result.items[globalIndex],item,groupCount-1,childSkips)}))),result}return loadedItem}var members={init:function(dataSource,remoteOperations){var that=this;that._dataSource=dataSource,that._remoteOperations=remoteOperations||{},that._isLastPage=!dataSource.isLastPage(),that._hasLastPage=!1,that._currentTotalCount=0,that._cachedData={items:{}},that._lastOperationTypes={},that._eventsStrategy=dataSource._eventsStrategy,that._totalCountCorrection=0,that._isLoadingAll=!1,that.changed=(0,callbacks.Z)(),that.loadingChanged=(0,callbacks.Z)(),that.loadError=(0,callbacks.Z)(),that.customizeStoreLoadOptions=(0,callbacks.Z)(),that.changing=(0,callbacks.Z)(),that.pushed=(0,callbacks.Z)(),that._dataChangedHandler=that._handleDataChanged.bind(that),that._customizeStoreLoadOptionsHandler=that._handleCustomizeStoreLoadOptions.bind(that),that._dataLoadedHandler=that._handleDataLoaded.bind(that),that._loadingChangedHandler=that._handleLoadingChanged.bind(that),that._loadErrorHandler=that._handleLoadError.bind(that),that._pushHandler=that._handlePush.bind(that),that._changingHandler=that._handleChanging.bind(that),dataSource.on("changed",that._dataChangedHandler),dataSource.on("customizeStoreLoadOptions",that._customizeStoreLoadOptionsHandler),dataSource.on("customizeLoadResult",that._dataLoadedHandler),dataSource.on("loadingChanged",that._loadingChangedHandler),dataSource.on("loadError",that._loadErrorHandler),dataSource.on("changing",that._changingHandler),dataSource.store().on("beforePush",that._pushHandler),(0,iterator.S6)(dataSource,(function(memberName,member){!that[memberName]&&(0,utils_type.mf)(member)&&(that[memberName]=function(){return this._dataSource[memberName].apply(this._dataSource,arguments)})}))},remoteOperations:function(){return this._remoteOperations},dispose:function(isSharedDataSource){var dataSource=this._dataSource,store=dataSource.store();dataSource.off("changed",this._dataChangedHandler),dataSource.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),dataSource.off("customizeLoadResult",this._dataLoadedHandler),dataSource.off("loadingChanged",this._loadingChangedHandler),dataSource.off("loadError",this._loadErrorHandler),dataSource.off("changing",this._changingHandler),store&&store.off("beforePush",this._pushHandler),isSharedDataSource||dataSource.dispose()},refresh:function(options,operationTypes){var dataSource=this._dataSource;operationTypes.reload&&(this.resetCurrentTotalCount(),this._isLastPage=!dataSource.paginate(),this._hasLastPage=this._isLastPage)},resetCurrentTotalCount:function(){this._currentTotalCount=0,this._totalCountCorrection=0},resetCache:function(){this._cachedStoreData=void 0,this._cachedPagingData=void 0},resetPagesCache:function(){this._cachedData={items:{}}},_needClearStoreDataCache:function(){var remoteOperations=this.remoteOperations(),operationTypes=calculateOperationTypes(this._lastLoadOptions||{},{});return!Object.keys(remoteOperations).every((operationName=>!operationTypes[operationName]||!remoteOperations[operationName]))},push:function(changes,fromStore){var store=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&(0,array_utils.ii)({keyInfo:store,data:this._cachedStoreData,changes}),fromStore||this._applyBatch(changes),this.pushed.fire(changes)},getDataIndexGetter:function(){if(!this._dataIndexGetter){var indexByKey,storeData,store=this.store();this._dataIndexGetter=data=>{var isCacheUpdated=storeData&&storeData!==this._cachedStoreData;if(!indexByKey||isCacheUpdated){storeData=this._cachedStoreData||[],indexByKey={};for(var i=0;i<storeData.length;i++)indexByKey[(0,common.k3)(store.keyOf(storeData[i]))]=i}return indexByKey[(0,common.k3)(store.keyOf(data))]}}return this._dataIndexGetter},_getKeyInfo:function(){return this.store()},_needToCopyDataObject:()=>!0,_applyBatch:function(changes,fromStore){var keyInfo=this._getKeyInfo(),dataSource=this._dataSource,groupCount=ui_grid_core_utils.normalizeSortingInfo(this.group()).length,isReshapeMode="reshape"===this.option("editing.refreshMode"),isVirtualMode="virtual"===this.option("scrolling.mode");changes=changes.filter((function(change){return!dataSource.paginate()||"insert"!==change.type||void 0!==change.index}));var getItemCount=()=>groupCount?this.itemsCount():this.items().length,oldItemCount=getItemCount();(0,array_utils.ii)({keyInfo,data:this._items,changes,groupCount,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(0,array_utils.ii)({keyInfo,data:dataSource.items(),changes,groupCount,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(this._currentTotalCount>0||(fromStore||!isReshapeMode)&&isVirtualMode)&&(this._totalCountCorrection+=getItemCount()-oldItemCount),changes.splice(0,changes.length)},_handlePush:function(_ref5){var{changes}=_ref5;this.push(changes,!0)},_handleChanging:function(e){this.changing.fire(e),this._applyBatch(e.changes,!0)},_needCleanCacheByOperation:function(operationType,remoteOperations){var operationTypesByOrder=["filtering","sorting","paging"],operationTypeIndex=operationTypesByOrder.indexOf(operationType);return(operationTypeIndex>=0?operationTypesByOrder.slice(operationTypeIndex):[operationType]).some((operationType=>remoteOperations[operationType]))},_customizeRemoteOperations:function(options,operationTypes){var cachedStoreData=this._cachedStoreData,cachedPagingData=this._cachedPagingData,cachedData=this._cachedData;(options.storeLoadOptions.filter&&!options.remoteOperations.filtering||options.storeLoadOptions.sort&&!options.remoteOperations.sorting)&&(options.remoteOperations={filtering:options.remoteOperations.filtering,summary:options.remoteOperations.summary}),operationTypes.fullReload?(cachedStoreData=void 0,cachedPagingData=void 0,cachedData={items:{}}):(operationTypes.reload?(cachedPagingData=void 0,cachedData={items:{}}):operationTypes.groupExpanding&&(cachedData={items:{}}),(0,iterator.S6)(operationTypes,((operationType,value)=>{value&&this._needCleanCacheByOperation(operationType,options.remoteOperations)&&(cachedStoreData=void 0,cachedPagingData=void 0)}))),cachedPagingData&&(options.remoteOperations.paging=!1),options.cachedStoreData=cachedStoreData,options.cachedPagingData=cachedPagingData,options.cachedData=cachedData,options.isCustomLoading||(this._cachedStoreData=cachedStoreData,this._cachedPagingData=cachedPagingData,this._cachedData=cachedData)},_handleCustomizeStoreLoadOptions(options){var _options$data;this._handleDataLoading(options),0!==(null===(_options$data=options.data)||void 0===_options$data?void 0:_options$data.length)&&(options.data=getPageDataFromCache(options,!0)||options.cachedStoreData)},_handleDataLoading:function(options){var dataSource=this._dataSource,lastLoadOptions=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(options),options.delay=this.option("loadingTimeout"),options.originalStoreLoadOptions=options.storeLoadOptions,options.remoteOperations=(0,extend.l)({},this.remoteOperations());var isFullReload=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(options.delay=void 0);var loadOptions=(0,extend.l)({pageIndex:this.pageIndex(),pageSize:this.pageSize()},options.storeLoadOptions),operationTypes=calculateOperationTypes(loadOptions,lastLoadOptions,isFullReload);if(this._customizeRemoteOperations(options,operationTypes),!options.isCustomLoading){var isRefreshing=this._isRefreshing;options.pageIndex=dataSource.pageIndex(),options.lastLoadOptions=loadOptions,options.operationTypes=operationTypes,this._loadingOperationTypes=operationTypes,this._isRefreshing=!0,(0,utils_deferred.gx)(isRefreshing||this._isRefreshed||this.refresh(options,operationTypes)).done((()=>{this._lastOperationId===options.operationId&&(this._isRefreshed=!0,this.load().always((()=>{this._isRefreshed=!1})))})).fail((()=>{dataSource.cancel(options.operationId)})).always((()=>{this._isRefreshing=!1})),dataSource.cancel(this._lastOperationId),this._lastOperationId=options.operationId,this._isRefreshing&&dataSource.cancel(this._lastOperationId)}this._handleDataLoadingCore(options)},_handleDataLoadingCore:function(options){var remoteOperations=options.remoteOperations;options.loadOptions={};var cachedExtra=options.cachedData.extra,localLoadOptionNames={filter:!remoteOperations.filtering,sort:!remoteOperations.sorting,group:!remoteOperations.grouping,summary:!remoteOperations.summary,skip:!remoteOperations.paging,take:!remoteOperations.paging,requireTotalCount:cachedExtra&&"totalCount"in cachedExtra||!remoteOperations.paging};(0,iterator.S6)(options.storeLoadOptions,(function(optionName,optionValue){localLoadOptionNames[optionName]&&(options.loadOptions[optionName]=optionValue,delete options.storeLoadOptions[optionName])})),cachedExtra&&(options.extra=cachedExtra)},_handleDataLoaded:function(options){var loadOptions=options.loadOptions,localPaging=options.remoteOperations&&!options.remoteOperations.paging,cachedData=options.cachedData,storeLoadOptions=options.storeLoadOptions,needCache=!1!==this.option("cacheEnabled")&&storeLoadOptions,needPageCache=needCache&&!options.isCustomLoading&&cachedData&&(!localPaging||storeLoadOptions.group),needPagingCache=needCache&&localPaging,needStoreCache=needPagingCache&&!options.isCustomLoading;if(loadOptions){localPaging&&(options.skip=loadOptions.skip,options.take=loadOptions.take,delete loadOptions.skip,delete loadOptions.take),loadOptions.group&&(loadOptions.group=options.group||loadOptions.group);var _options$extra$totalC,_options$extra,groupCount=ui_grid_core_utils.normalizeSortingInfo(options.group||storeLoadOptions.group||loadOptions.group).length;if(options.cachedDataPartBegin&&(options.data=options.cachedDataPartBegin.concat(options.data)),options.cachedDataPartEnd&&(options.data=options.data.concat(options.cachedDataPartEnd)),!needPageCache||!getPageDataFromCache(options))needPagingCache&&options.cachedPagingData?options.data=cloneItems(options.cachedPagingData,groupCount):(needStoreCache&&(this._cachedStoreData?options.mergeStoreLoadData&&(options.data=this._cachedStoreData=this._cachedStoreData.concat(options.data)):this._cachedStoreData=cloneItems(options.data,ui_grid_core_utils.normalizeSortingInfo(storeLoadOptions.group).length)),new array_store.Z(options.data).load(loadOptions).done((data=>{options.data=data,needStoreCache&&(this._cachedPagingData=cloneItems(options.data,groupCount))})).fail((error=>{options.data=(new utils_deferred.BH).reject(error)}))),loadOptions.requireTotalCount&&localPaging&&(options.extra=(0,utils_type.PO)(options.extra)?options.extra:{},options.extra.totalCount=options.data.length),options.extra&&options.extra.totalCount>=0&&(!1===storeLoadOptions.requireTotalCount||!1===loadOptions.requireTotalCount)&&(options.extra.totalCount=-1),!loadOptions.data&&(storeLoadOptions.requireTotalCount||(null!==(_options$extra$totalC=null===(_options$extra=options.extra)||void 0===_options$extra?void 0:_options$extra.totalCount)&&void 0!==_options$extra$totalC?_options$extra$totalC:-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(options),needPageCache&&(cachedData.extra=cachedData.extra||(0,extend.l)({},options.extra),(0,utils_deferred.gx)(options.data).done((data=>{!function(options,data,groupCount){for(var _ref3,_options$skip3,_ref4,_options$take3,{storeLoadOptions}=options,skip=null!==(_ref3=null!==(_options$skip3=options.skip)&&void 0!==_options$skip3?_options$skip3:storeLoadOptions.skip)&&void 0!==_ref3?_ref3:0,take=null!==(_ref4=null!==(_options$take3=options.take)&&void 0!==_options$take3?_options$take3:storeLoadOptions.take)&&void 0!==_ref4?_ref4:0,i=0;i<take;i++){var globalIndex=i+skip,cacheItems=options.cachedData.items,skips=0===i&&options.skips||[];cacheItems[globalIndex]=getCacheItem(cacheItems[globalIndex],data[i],groupCount,skips)}}(options,data,groupCount)})));(0,utils_deferred.gx)(options.data).done((()=>{options.lastLoadOptions&&(this._lastLoadOptions=options.lastLoadOptions,Object.keys(options.operationTypes).forEach((operationType=>{this._lastOperationTypes[operationType]=this._lastOperationTypes[operationType]||options.operationTypes[operationType]})))})),options.storeLoadOptions=options.originalStoreLoadOptions}else this._dataSource.cancel(options.operationId)},_handleDataLoadedCore:function(options){options.remoteOperations&&!options.remoteOperations.paging&&Array.isArray(options.data)&&(void 0!==options.skip&&(options.data=options.data.slice(options.skip)),void 0!==options.take&&(options.data=options.data.slice(0,options.take)))},_handleLoadingChanged:function(isLoading){this.loadingChanged.fire(isLoading)},_handleLoadError:function(error){this.loadError.fire(error),this.changed.fire({changeType:"loadError",error})},_loadPageSize:function(){return this.pageSize()},_handleDataChanged:function(args){var currentTotalCount,dataSource=this._dataSource,isLoading=!1,isDataLoading=!args||(0,utils_type.$K)(args.changeType),itemsCount=this.itemsCount();isDataLoading&&(this._isLastPage=!itemsCount||!this._loadPageSize()||itemsCount<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),dataSource.totalCount()>=0?dataSource.pageIndex()>=this.pageCount()&&(dataSource.pageIndex(this.pageCount()-1),this.pageIndex(dataSource.pageIndex()),this.resetPagesCache(),dataSource.load(),isLoading=!0):isDataLoading&&((currentTotalCount=dataSource.pageIndex()*this.pageSize()+itemsCount)>this._currentTotalCount&&(this._currentTotalCount=currentTotalCount,0!==dataSource.pageIndex()&&this.option("scrolling.legacyMode")||(this._totalCountCorrection=0)),0===itemsCount&&dataSource.pageIndex()>=this.pageCount()&&(dataSource.pageIndex(this.pageCount()-1),"infinite"!==this.option("scrolling.mode")&&(dataSource.load(),isLoading=!0))),isLoading||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(args),this.component._optionCache=void 0)},_scheduleCustomLoadCallbacks:function(deferred){var that=this;that._isCustomLoading=!0,deferred.always((function(){that._isCustomLoading=!1}))},loadingOperationTypes:function(){return this._loadingOperationTypes},operationTypes:function(){return this._operationTypes},lastLoadOptions:function(){return this._lastLoadOptions||{}},isLastPage:function(){return this._isLastPage},_dataSourceTotalCount:function(){return this._dataSource.totalCount()},totalCount:function(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)},totalCountCorrection:function(){return this._totalCountCorrection},itemsCount:function(){return this._dataSource.items().length},totalItemsCount:function(){return this.totalCount()},pageSize:function(){var dataSource=this._dataSource;return arguments.length||dataSource.paginate()?dataSource.pageSize.apply(dataSource,arguments):0},pageCount:function(){var count=this.totalItemsCount()-this._totalCountCorrection,pageSize=this.pageSize();return pageSize&&count>0?Math.max(1,Math.ceil(count/pageSize)):1},hasKnownLastPage:function(){return this._hasLastPage||this._dataSource.totalCount()>=0},loadFromStore:function(loadOptions,store){var dataSource=this._dataSource,d=new utils_deferred.BH;if(dataSource)return(store=store||dataSource.store()).load(loadOptions).done((function(data,extra){data&&!Array.isArray(data)&&Array.isArray(data.data)&&(extra=data,data=data.data),d.resolve(data,extra)})).fail(d.reject),d},isCustomLoading:function(){return!!this._isCustomLoading},load:function(options){var action,timeout,that=this,dataSource=that._dataSource,d=new utils_deferred.BH;if(options){var store=dataSource.store(),dataSourceLoadOptions=dataSource.loadOptions(),loadResult={storeLoadOptions:options,isCustomLoading:!0};return(0,iterator.S6)(store._customLoadOptions()||[],(function(_,optionName){optionName in loadResult.storeLoadOptions||(loadResult.storeLoadOptions[optionName]=dataSourceLoadOptions[optionName])})),this._isLoadingAll=options.isLoadingAll,that._scheduleCustomLoadCallbacks(d),dataSource._scheduleLoadCallbacks(d),that._handleCustomizeStoreLoadOptions(loadResult),action=function(){if(!dataSource.store())return d.reject("canceled");(0,utils_deferred.gx)(loadResult.data||that.loadFromStore(loadResult.storeLoadOptions)).done((function(data,extra){loadResult.data=data,loadResult.extra=extra||{},that._handleDataLoaded(loadResult),options.requireTotalCount&&void 0===loadResult.extra.totalCount&&(loadResult.extra.totalCount=store.totalCount(loadResult.storeLoadOptions)),(0,utils_deferred.gx)(loadResult.data,loadResult.extra.totalCount).done((function(data,totalCount){loadResult.extra.totalCount=totalCount,d.resolve(data,loadResult.extra)})).fail(d.reject)})).fail(d.reject)},timeout=that.option("loadingTimeout"),(0,utils_type.$K)(timeout)?(0,common.Wi)(action,timeout):action(),d.fail((function(){that._eventsStrategy.fireEvent("loadError",arguments)})).always((()=>{this._isLoadingAll=!1})).promise()}return dataSource.load()},reload:function(full){return full?this._dataSource.reload():this._dataSource.load()},getCachedStoreData:function(){return this._cachedStoreData}};return members}()),{queryByOptions}=store_helper.default,isFullBranchFilterMode=that=>"fullBranch"===that.option("filterMode");let DataSourceAdapterTreeList=ui_grid_core_data_source_adapter.inherit({_createKeyGetter(){const keyExpr=this.getKeyExpr();return(0,data.vb)(keyExpr)},_createKeySetter(){const keyExpr=this.getKeyExpr();return(0,utils_type.mf)(keyExpr)?keyExpr:(0,data.OM)(keyExpr)},createParentIdGetter(){return(0,data.vb)(this.option("parentIdExpr"))},createParentIdSetter(){const parentIdExpr=this.option("parentIdExpr");return(0,utils_type.mf)(parentIdExpr)?parentIdExpr:(0,data.OM)(parentIdExpr)},_createItemsGetter(){return(0,data.vb)(this.option("itemsExpr"))},_createHasItemsGetter(){const hasItemsExpr=this.option("hasItemsExpr");return hasItemsExpr&&(0,data.vb)(hasItemsExpr)},_createHasItemsSetter(){const hasItemsExpr=this.option("hasItemsExpr");return(0,utils_type.mf)(hasItemsExpr)?hasItemsExpr:hasItemsExpr&&(0,data.OM)(hasItemsExpr)},_updateIndexByKeyObject(items){const that=this;that._indexByKey={},(0,iterator.S6)(items,((index,item)=>{that._indexByKey[item.key]=index}))},_calculateHasItems(node,options){const that=this,{parentIds}=options.storeLoadOptions;let hasItems;const isFullBranch=isFullBranchFilterMode(that);return that._hasItemsGetter&&(parentIds||!options.storeLoadOptions.filter||isFullBranch)&&(hasItems=that._hasItemsGetter(node.data)),void 0===hasItems&&(hasItems=!(that._isChildrenLoaded[node.key]||!options.remoteOperations.filtering||!parentIds&&!isFullBranch)||(options.loadOptions.filter&&!options.remoteOperations.filtering&&isFullBranch?node.children.length:node.hasChildren)),!!hasItems},_fillVisibleItemsByNodes(nodes,options,result){for(let i=0;i<nodes.length;i++)nodes[i].visible&&result.push(nodes[i]),(this.isRowExpanded(nodes[i].key,options)||!nodes[i].visible)&&nodes[i].hasChildren&&nodes[i].children.length&&this._fillVisibleItemsByNodes(nodes[i].children,options,result)},_convertItemToNode(item,rootValue,nodeByKey){const key=this._keyGetter(item);let parentId=this._parentIdGetter(item);parentId=(0,utils_type.$K)(parentId)?parentId:rootValue;const parentNode=nodeByKey[parentId]=nodeByKey[parentId]||{key:parentId,children:[]},node=nodeByKey[key]=nodeByKey[key]||{key,children:[]};return node.data=item,node.parent=parentNode,node},_createNodesByItems(items,visibleItems){const that=this,rootValue=that.option("rootValue"),visibleByKey={},nodeByKey=that._nodeByKey={};let i;if(visibleItems)for(i=0;i<visibleItems.length;i++)visibleByKey[this._keyGetter(visibleItems[i])]=!0;for(i=0;i<items.length;i++){const node=that._convertItemToNode(items[i],rootValue,nodeByKey);if(void 0===node.key)return;node.visible=!visibleItems||!!visibleByKey[node.key],node.parent&&node.parent.children.push(node)}const rootNode=nodeByKey[rootValue]||{key:rootValue,children:[]};return rootNode.level=-1,rootNode},_convertDataToPlainStructure(data,parentId,result){let key;if(this._itemsGetter&&!data.isConverted){result=result||[];for(let i=0;i<data.length;i++){const item=(0,array_utils.FL)(data[i]);key=this._keyGetter(item),void 0===key&&(key=result.length+1,this._keySetter(item,key)),this._parentIdSetter(item,void 0===parentId?this.option("rootValue"):parentId),result.push(item);const childItems=this._itemsGetter(item);if(childItems&&childItems.length){this._convertDataToPlainStructure(childItems,key,result);const itemsExpr=this.option("itemsExpr");(0,utils_type.mf)(itemsExpr)||delete item[itemsExpr]}}return result.isConverted=!0,result}return data},_createIdFilter(field,keys){const parentIdFilters=[];for(let i=0;i<keys.length;i++)parentIdFilters.push([field,"=",keys[i]]);return ui_grid_core_utils.combineFilters(parentIdFilters,"or")},_customizeRemoteOperations(options,operationTypes){this.callBase.apply(this,arguments),options.remoteOperations.paging=!1;let expandVisibleNodes=!1;this.option("autoExpandAll")&&(options.remoteOperations.sorting=!1,options.remoteOperations.filtering=!1,this._lastLoadOptions&&(!operationTypes.filtering||options.storeLoadOptions.filter)||options.isCustomLoading||(expandVisibleNodes=!0)),options.isCustomLoading||(this._isReload=this._isReload||operationTypes.reload,options.cachedStoreData||(this._isChildrenLoaded={},this._isReload&&(this._nodeByKey={})),this.option("expandNodesOnFiltering")&&(operationTypes.filtering||this._isReload&&options.storeLoadOptions.filter)&&(options.storeLoadOptions.filter?expandVisibleNodes=!0:options.collapseVisibleNodes=!0)),options.expandVisibleNodes=expandVisibleNodes},_getParentIdsToLoad(parentIds){const parentIdsToLoad=[];for(let i=0;i<parentIds.length;i++){const node=this.getNodeByKey(parentIds[i]);(!node||node.hasChildren&&!node.children.length)&&parentIdsToLoad.push(parentIds[i])}return parentIdsToLoad},_handleCustomizeStoreLoadOptions(options){const rootValue=this.option("rootValue"),parentIdExpr=this.option("parentIdExpr");let{parentIds}=options.storeLoadOptions;if(parentIds&&(options.isCustomLoading=!1),this.callBase.apply(this,arguments),options.remoteOperations.filtering&&!options.isCustomLoading&&(isFullBranchFilterMode(this)&&options.cachedStoreData||!options.storeLoadOptions.filter)){const expandedRowKeys=options.collapseVisibleNodes?[]:this.option("expandedRowKeys");parentIds=[rootValue].concat(expandedRowKeys).concat(parentIds||[]);const parentIdsToLoad=options.data?this._getParentIdsToLoad(parentIds):parentIds;parentIdsToLoad.length&&(options.cachedPagingData=void 0,options.data=void 0,options.mergeStoreLoadData=!0,options.delay=this.option("loadingTimeout")),options.storeLoadOptions.parentIds=parentIdsToLoad,options.storeLoadOptions.filter=this._createIdFilter(parentIdExpr,parentIdsToLoad)}},_generateInfoToLoad(data,needChildren){const that=this;let key;const keyMap={},resultKeyMap={},resultKeys=[],rootValue=that.option("rootValue");let i;for(i=0;i<data.length;i++)key=needChildren?that._parentIdGetter(data[i]):that._keyGetter(data[i]),keyMap[key]=!0;for(i=0;i<data.length;i++){key=needChildren?that._keyGetter(data[i]):that._parentIdGetter(data[i]);const needToLoad=needChildren?that.isRowExpanded(key):key!==rootValue;keyMap[key]||resultKeyMap[key]||!needToLoad||(resultKeyMap[key]=!0,resultKeys.push(key))}return{keyMap:resultKeyMap,keys:resultKeys}},_loadParentsOrChildren(data,options,needChildren){const that=this;let filter,needLocalFiltering;const{keys,keyMap}=that._generateInfoToLoad(data,needChildren),d=new utils_deferred.BH,isRemoteFiltering=options.remoteOperations.filtering,maxFilterLengthInRequest=that.option("maxFilterLengthInRequest");let loadOptions=isRemoteFiltering?options.storeLoadOptions:options.loadOptions;function concatLoadedData(loadedData){return isRemoteFiltering&&(that._cachedStoreData=that._cachedStoreData.concat(loadedData)),data.concat(loadedData)}if(!keys.length)return d.resolve(data);let cachedNodes=keys.map((id=>this.getNodeByKey(id))).filter((node=>node&&node.data));if(cachedNodes.length===keys.length&&(needChildren&&(cachedNodes=cachedNodes.reduce(((result,node)=>result.concat(node.children)),[])),cachedNodes.length))return that._loadParentsOrChildren(concatLoadedData(cachedNodes.map((node=>node.data))),options,needChildren);const keyExpr=needChildren?that.option("parentIdExpr"):that.getKeyExpr();filter=that._createIdFilter(keyExpr,keys);encodeURI(JSON.stringify(filter)).length>maxFilterLengthInRequest&&(filter=function(itemData){return keyMap[needChildren?that._parentIdGetter(itemData):that._keyGetter(itemData)]},needLocalFiltering=isRemoteFiltering),loadOptions=(0,extend.l)({},loadOptions,{filter:needLocalFiltering?null:filter});const store=options.fullData?new array_store.Z(options.fullData):that._dataSource.store();return that.loadFromStore(loadOptions,store).done((loadedData=>{loadedData.length?(needLocalFiltering&&(loadedData=(0,data_query.Z)(loadedData).filter(filter).toArray()),that._loadParentsOrChildren(concatLoadedData(loadedData),options,needChildren).done(d.resolve).fail(d.reject)):d.resolve(data)})).fail(d.reject),d},_loadParents(data,options){return this._loadParentsOrChildren(data,options)},_loadChildrenIfNeed(data,options){return isFullBranchFilterMode(this)?this._loadParentsOrChildren(data,options,!0):(0,utils_deferred.gx)(data)},_updateHasItemsMap(options){const{parentIds}=options.storeLoadOptions;if(parentIds)for(let i=0;i<parentIds.length;i++)this._isChildrenLoaded[parentIds[i]]=!0},_getKeyInfo:()=>({key:()=>"key",keyOf:data=>data.key}),_processChanges(changes){let processedChanges=[];return changes.forEach((change=>{"insert"===change.type?processedChanges=processedChanges.concat(this._applyInsert(change)):"remove"===change.type?processedChanges=processedChanges.concat(this._applyRemove(change)):"update"===change.type&&processedChanges.push({type:change.type,key:change.key,data:{data:change.data}})})),processedChanges},_handleChanging(e){this.callBase.apply(this,arguments),e.postProcessChanges=changes=>{const changesToProcess=changes.filter((item=>"update"===item.type));return this._processChanges(changesToProcess)}},_applyBatch(changes){const processedChanges=this._processChanges(changes);this.callBase(processedChanges)},_setHasItems(node,value){const hasItemsSetter=this._hasItemsSetter;node.hasChildren=value,hasItemsSetter&&node.data&&hasItemsSetter(node.data,value)},_applyInsert(change){const that=this,baseChanges=[],parentId=that.parentKeyOf(change.data),parentNode=that.getNodeByKey(parentId);if(parentNode){const rootValue=that.option("rootValue"),node=that._convertItemToNode(change.data,rootValue,that._nodeByKey);if(node.hasChildren=!1,node.level=parentNode.level+1,node.visible=!0,parentNode.children.push(node),that._isChildrenLoaded[node.key]=!0,that._setHasItems(parentNode,!0),(!parentNode.parent||that.isRowExpanded(parentNode.key))&&void 0!==change.index){let index=that.items().indexOf(parentNode)+1;index+=change.index>=0?Math.min(change.index,parentNode.children.length):parentNode.children.length,baseChanges.push({type:change.type,data:node,index})}}return baseChanges},_needToCopyDataObject:()=>!1,_applyRemove(change){let baseChanges=[];const node=this.getNodeByKey(change.key),parentNode=node&&node.parent;if(parentNode){const index=parentNode.children.indexOf(node);index>=0&&(parentNode.children.splice(index,1),parentNode.children.length||this._setHasItems(parentNode,!1),baseChanges.push(change),baseChanges=baseChanges.concat(this.getChildNodeKeys(change.key).map((key=>({type:change.type,key})))))}return baseChanges},_handleDataLoaded(options){const data=options.data=this._convertDataToPlainStructure(options.data);!options.remoteOperations.filtering&&options.loadOptions.filter&&(options.fullData=queryByOptions((0,data_query.Z)(options.data),{sort:options.loadOptions&&options.loadOptions.sort}).toArray()),this._updateHasItemsMap(options),this.callBase(options),data.isConverted&&this._cachedStoreData&&(this._cachedStoreData.isConverted=!0)},_fillNodes(nodes,options,expandedRowKeys,level){const isFullBranch=isFullBranchFilterMode(this);level=level||0;for(let i=0;i<nodes.length;i++){const node=nodes[i];let needToExpand=!1;this._fillNodes(nodes[i].children,options,expandedRowKeys,level+1),node.level=level,node.hasChildren=this._calculateHasItems(node,options),node.visible&&node.hasChildren&&(isFullBranch?node.children.filter((node=>node.visible)).length?needToExpand=!0:node.children.length&&module_core.foreachNodes(node.children,(node=>{node.visible=!0})):needToExpand=!0,options.expandVisibleNodes&&needToExpand&&expandedRowKeys.push(node.key)),(node.visible||node.hasChildren)&&(node.parent.hasChildren=!0)}},_processTreeStructure(options,visibleItems){let{data}=options;const{parentIds}=options.storeLoadOptions,expandedRowKeys=[];if(parentIds&&parentIds.length||this._isReload){if(options.fullData&&options.fullData.length>options.data.length&&(data=options.fullData,visibleItems=visibleItems||options.data),this._rootNode=this._createNodesByItems(data,visibleItems),!this._rootNode)return void(options.data=(new utils_deferred.BH).reject(ui_errors.Z.Error("E1046",this.getKeyExpr())));this._fillNodes(this._rootNode.children,options,expandedRowKeys),this._isNodesInitializing=!0,(options.collapseVisibleNodes||expandedRowKeys.length)&&this.option("expandedRowKeys",expandedRowKeys),this._isReload=!1,this.executeAction("onNodesInitialized",{root:this._rootNode}),this._isNodesInitializing=!1}const resultData=[];this._fillVisibleItemsByNodes(this._rootNode.children,options,resultData),options.data=resultData,this._totalItemsCount=resultData.length},_handleDataLoadedCore(options){const that=this,{data}=options,{callBase}=that,filter=options.storeLoadOptions.filter||options.loadOptions.filter,filterMode=that.option("filterMode");let visibleItems;const{parentIds}=options.storeLoadOptions,needLoadParents=filter&&(!parentIds||!parentIds.length)&&"standard"!==filterMode;if(!options.isCustomLoading){if(needLoadParents){const d=options.data=new utils_deferred.BH;return"matchOnly"===filterMode&&(visibleItems=data),that._loadParents(data,options).done((data=>{that._loadChildrenIfNeed(data,options).done((data=>{options.data=data,that._processTreeStructure(options,visibleItems),callBase.call(that,options),d.resolve(options.data)}))})).fail(d.reject)}that._processTreeStructure(options)}that.callBase(options)},_handlePush({changes}){this._dataSource._reshapeOnPush&&!!changes.length&&(this._isReload=!0),changes.forEach((change=>{var _a;null!==(_a=change.index)&&void 0!==_a||(change.index=-1)})),this.callBase.apply(this,arguments)},init(dataSource,remoteOperations){this.callBase.apply(this,arguments);const dataStructure=this.option("dataStructure");this._keyGetter=this._createKeyGetter(),this._parentIdGetter=this.createParentIdGetter(),this._hasItemsGetter=this._createHasItemsGetter(),this._hasItemsSetter=this._createHasItemsSetter(),"tree"===dataStructure&&(this._itemsGetter=this._createItemsGetter(),this._keySetter=this._createKeySetter(),this._parentIdSetter=this.createParentIdSetter()),this._nodeByKey={},this._isChildrenLoaded={},this._totalItemsCount=0,this.createAction("onNodesInitialized")},getKeyExpr(){const store=this.store(),key=store&&store.key(),keyExpr=this.option("keyExpr");if((0,utils_type.$K)(key)&&(0,utils_type.$K)(keyExpr)&&!(0,common.bY)(key,keyExpr))throw ui_errors.Z.Error("E1044");return key||keyExpr||"id"},keyOf(data){return this._keyGetter&&this._keyGetter(data)},parentKeyOf(data){return this._parentIdGetter&&this._parentIdGetter(data)},getRootNode(){return this._rootNode},totalItemsCount(){return this._totalItemsCount+this._totalCountCorrection},isRowExpanded(key,cache){if(cache){let{isExpandedByKey}=cache;return isExpandedByKey||(isExpandedByKey=cache.isExpandedByKey={},this.option("expandedRowKeys").forEach((key=>{isExpandedByKey[key]=!0}))),!!isExpandedByKey[key]}return ui_grid_core_utils.getIndexByKey(key,this.option("expandedRowKeys"),null)>=0},_changeRowExpandCore(key){const expandedRowKeys=this.option("expandedRowKeys").slice(),indexExpandedNodeKey=ui_grid_core_utils.getIndexByKey(key,expandedRowKeys,null);indexExpandedNodeKey<0?expandedRowKeys.push(key):expandedRowKeys.splice(indexExpandedNodeKey,1),this.option("expandedRowKeys",expandedRowKeys)},changeRowExpand(key){return this._changeRowExpandCore(key),this._isNodesInitializing?(new utils_deferred.BH).resolve():this.load()},getNodeByKey(key){if(this._nodeByKey)return this._nodeByKey[key]},getNodeLeafKeys(){const that=this,result=[];return(that._rootNode?[that._rootNode.key]:[]).forEach((key=>{const node=that.getNodeByKey(key);node&&module_core.foreachNodes([node],(childNode=>{!childNode.children.length&&result.push(childNode.key)}))})),result},getChildNodeKeys(parentKey){const node=this.getNodeByKey(parentKey),childrenKeys=[];return node&&module_core.foreachNodes(node.children,(childNode=>{childrenKeys.push(childNode.key)})),childrenKeys},loadDescendants(keys,childrenOnly){const that=this,d=new utils_deferred.BH,remoteOperations=that.remoteOperations();if(keys=(0,utils_type.$K)(keys)?Array.isArray(keys)?keys:[keys]:that.getNodeLeafKeys(),!remoteOperations.filtering||!keys.length)return d.resolve();const loadOptions=that._dataSource._createStoreLoadOptions();return loadOptions.parentIds=keys,that.load(loadOptions).done((()=>{if(!childrenOnly){const childKeys=function(that,keys){const childKeys=[];return keys.forEach((key=>{const node=that.getNodeByKey(key);node&&node.children.forEach((child=>{childKeys.push(child.key)}))})),childKeys}(that,keys);if(childKeys.length)return void that.loadDescendants(childKeys,childrenOnly).done(d.resolve).fail(d.reject)}d.resolve()})).fail(d.reject),d.promise()},forEachNode(){let callback,nodes=[];if(1===arguments.length){callback=arguments[0];const rootNode=this.getRootNode();nodes=rootNode&&rootNode.children||[]}else 2===arguments.length&&(callback=arguments[1],nodes=arguments[0],nodes=Array.isArray(nodes)?nodes:[nodes]);module_core.foreachNodes(nodes,callback)}});const data_source_adapter_module={extend(extender){DataSourceAdapterTreeList=DataSourceAdapterTreeList.inherit(extender)},create:component=>new DataSourceAdapterTreeList(component)},DataController=dataControllerModule.controllers.data.inherit({_getDataSourceAdapter:()=>data_source_adapter_module,_getNodeLevel(node){let level=-1;for(;node.parent;)node.visible&&level++,node=node.parent;return level},_generateDataItem(node,options){return{rowType:"data",node,key:node.key,data:node.data,isExpanded:this.isRowExpanded(node.key,options),level:this._getNodeLevel(node)}},_loadOnOptionChange(){this._dataSource.load()},_isItemEquals(item1,item2){return!!this.callBase.apply(this,arguments)&&((!item1.node||!item2.node||item1.node.hasChildren===item2.node.hasChildren)&&(item1.level===item2.level&&item1.isExpanded===item2.isExpanded))},init(){this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed"),this.callBase.apply(this,arguments)},keyOf(data){const dataSource=this._dataSource;if(dataSource)return dataSource.keyOf(data)},key(){const dataSource=this._dataSource;if(dataSource)return dataSource.getKeyExpr()},publicMethods(){return this.callBase().concat(["expandRow","collapseRow","isRowExpanded","getRootNode","getNodeByKey","loadDescendants","forEachNode"])},changeRowExpand(key){if(this._dataSource){const args={key},isExpanded=this.isRowExpanded(key);if(this.executeAction(isExpanded?"onRowCollapsing":"onRowExpanding",args),!args.cancel)return this._dataSource.changeRowExpand(key).done((()=>{this.executeAction(isExpanded?"onRowCollapsed":"onRowExpanded",args)}))}return(new utils_deferred.BH).resolve()},isRowExpanded(key,cache){return this._dataSource&&this._dataSource.isRowExpanded(key,cache)},expandRow(key){return this.isRowExpanded(key)?(new utils_deferred.BH).resolve():this.changeRowExpand(key)},collapseRow(key){return this.isRowExpanded(key)?this.changeRowExpand(key):(new utils_deferred.BH).resolve()},getRootNode(){return this._dataSource&&this._dataSource.getRootNode()},optionChanged(args){switch(args.name){case"rootValue":case"parentIdExpr":case"itemsExpr":case"filterMode":case"expandNodesOnFiltering":case"autoExpandAll":case"hasItemsExpr":case"dataStructure":this._columnsController.reset(),this._items=[],this._refreshDataSource(),args.handled=!0;break;case"expandedRowKeys":case"onNodesInitialized":!this._dataSource||this._dataSource._isNodesInitializing||(0,common.bY)(args.value,args.previousValue)||this._loadOnOptionChange(),args.handled=!0;break;case"maxFilterLengthInRequest":args.handled=!0;break;default:this.callBase(args)}},getNodeByKey(key){if(this._dataSource)return this._dataSource.getNodeByKey(key)},getChildNodeKeys(parentKey){if(this._dataSource)return this._dataSource.getChildNodeKeys(parentKey)},loadDescendants(keys,childrenOnly){if(this._dataSource)return this._dataSource.loadDescendants(keys,childrenOnly)},forEachNode(){this._dataSource.forEachNode.apply(this,arguments)}});module_core.registerModule("data",{defaultOptions:()=>(0,extend.l)({},dataControllerModule.defaultOptions(),{itemsExpr:"items",parentIdExpr:"parentId",rootValue:0,dataStructure:"plain",expandedRowKeys:[],filterMode:"withAncestors",expandNodesOnFiltering:!0,autoExpandAll:!1,onNodesInitialized:null,maxFilterLengthInRequest:1500,paging:{enabled:!1}}),controllers:{data:DataController}});const ui_grid_core_sorting_mixin={_applyColumnState:function(options){var ariaSortState,$sortIndicator,sortingMode=this.option("sorting.mode"),rootElement=options.rootElement,column=options.column,$indicatorsContainer=this._getIndicatorContainer(rootElement);if("sort"===options.name){rootElement.find(".dx-sort").remove(),!$indicatorsContainer.children().length&&$indicatorsContainer.remove();var isSortingAllowed="none"!==sortingMode&&column.allowSorting;if(!(0,utils_type.$K)(column.groupIndex)&&(isSortingAllowed||(0,utils_type.$K)(column.sortOrder)))ariaSortState="asc"===column.sortOrder?"ascending":"descending",$sortIndicator=this.callBase(options).toggleClass("dx-sort-up","asc"===column.sortOrder).toggleClass("dx-sort-down","desc"===column.sortOrder),this.getController&&!!this.getController("columns").columnOption("sortIndex:1")&&this.option("sorting.showSortIndexes")&&column.sortIndex>=0&&((0,renderer.Z)("<span>").addClass("dx-sort-index-icon").text(column.sortIndex+1).appendTo($sortIndicator),$sortIndicator.addClass("dx-sort-index")),isSortingAllowed&&options.rootElement.addClass(this.addWidgetPrefix("action"));return(0,utils_type.$K)(column.sortOrder)?this.setAria("sort",ariaSortState,rootElement):this.setAria("sort","none",rootElement),$sortIndicator}return this.callBase(options)},_getIndicatorClassName:function(name){return"sort"===name?"dx-sort":"sortIndex"===name?"dx-sort-index-icon":this.callBase(name)},_renderIndicator:function(options){var column=options.column,$container=options.container,$indicator=options.indicator;if("sort"===options.name){var rtlEnabled=this.option("rtlEnabled");if((0,utils_type.$K)(column.sortOrder)||$indicator&&$indicator.addClass("dx-sort-none"),$container.children().length&&(!rtlEnabled&&"left"===options.columnAlignment||rtlEnabled&&"right"===options.columnAlignment))return void $container.prepend($indicator)}this.callBase(options)},_updateIndicator:function($cell,column,indicatorName){if("sort"!==indicatorName||!(0,utils_type.$K)(column.groupIndex))return this.callBase.apply(this,arguments)},_getIndicatorElements:function($cell,returnAll){var $indicatorElements=this.callBase($cell);return returnAll?$indicatorElements:$indicatorElements&&$indicatorElements.not(".dx-sort-none")}},sortingModule={defaultOptions:()=>({sorting:{mode:"single",ascendingText:message.Z.format("dxDataGrid-sortingAscendingText"),descendingText:message.Z.format("dxDataGrid-sortingDescendingText"),clearText:message.Z.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:(0,extend.l)({},ui_grid_core_sorting_mixin,{_createRow(row){const $row=this.callBase(row);return"header"===row.rowType&&events_engine.Z.on($row,(0,events_utils.V4)(click.u,"dxDataGridColumnHeadersView"),"td",this.createAction((e=>{this._processHeaderAction(e.event,$row)}))),$row},_processHeaderAction(event,$row){if((0,renderer.Z)(event.currentTarget).parent().get(0)!==$row.get(0))return;const that=this;let keyName=null;const $cellElementFromEvent=(0,renderer.Z)(event.currentTarget),rowIndex=$cellElementFromEvent.parent().index();let columnIndex=-1;[].slice.call(that.getCellElements(rowIndex)).some((($cellElement,index)=>{if($cellElement===$cellElementFromEvent.get(0))return columnIndex=index,!0}));const column=that._columnsController.getVisibleColumns(rowIndex)[columnIndex],editingController=that.getController("editing"),editingMode=that.option("editing.mode");!(editingController&&editingController.isEditing()&&("batch"===editingMode||"cell"===editingMode))&&that._isSortableElement((0,renderer.Z)(event.target))&&(!column||(0,utils_type.$K)(column.groupIndex)||column.command||(event.shiftKey?keyName="shift":(0,events_utils.j1)(event)&&(keyName="ctrl"),setTimeout((()=>{that._columnsController.changeSortOrder(column.index,keyName)}))))},_renderCellContent($cell,options){const that=this,{column}=options;column.command||"header"!==options.rowType||that._applyColumnState({name:"sort",rootElement:$cell,column,showColumnLines:that.option("showColumnLines")}),this.callBase.apply(this,arguments)},_columnOptionChanged(e){const{changeTypes}=e;1===changeTypes.length&&changeTypes.sorting?this._updateIndicators("sort"):this.callBase(e)},optionChanged(args){const that=this;if("sorting"===args.name)that._invalidate(),args.handled=!0;else that.callBase(args)}}),headerPanel:(0,extend.l)({},ui_grid_core_sorting_mixin,{_createGroupPanelItem($rootElement,groupColumn){const that=this,$item=that.callBase(...arguments);return events_engine.Z.on($item,(0,events_utils.V4)(click.u,"dxDataGridHeaderPanel"),that.createAction((()=>{that._processGroupItemAction(groupColumn.index)}))),that._applyColumnState({name:"sort",rootElement:$item,column:{alignment:that.option("rtlEnabled")?"right":"left",allowSorting:groupColumn.allowSorting,sortOrder:"desc"===groupColumn.sortOrder?"desc":"asc"},showColumnLines:!0}),$item},_processGroupItemAction(groupColumnIndex){setTimeout((()=>this.getController("columns").changeSortOrder(groupColumnIndex)))},optionChanged(args){const that=this;if("sorting"===args.name)that._invalidate(),args.handled=!0;else that.callBase(args)}})}}};module_core.registerModule("sorting",sortingModule);var ui_scrollable=__webpack_require__("./node_modules/devextreme/esm/ui/scroll_view/ui.scrollable.js"),remove=__webpack_require__("./node_modules/devextreme/esm/events/remove.js");function getMaxHorizontalScrollOffset(scrollable){return scrollable?Math.round(scrollable.scrollWidth()-scrollable.clientWidth()):0}function isGroupRow(_ref){var{rowType,column}=_ref;return"group"===rowType&&(0,utils_type.$K)(column.groupIndex)&&!column.showWhenGrouped&&!column.command}var rowsModule={defaultOptions:function(){return{hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:message.Z.format("Loading"),width:200,height:90,showIndicator:!0,indicatorSrc:"",showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:message.Z.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}},views:{rowsView:ColumnsView.inherit(function(){var defaultCellTemplate=function($container,options){var isDataTextEmpty=(0,string.xb)(options.text)&&"data"===options.rowType,text=options.text,container=$container.get(0);isDataTextEmpty?ui_grid_core_utils.setEmptyText($container):options.column.encodeHtml?container.textContent=text:container.innerHTML=text},members={_getDefaultTemplate:function(column){return"empty"===column.command?function(container){container.html("&nbsp;")}:defaultCellTemplate},_getDefaultGroupTemplate:function(column){var summaryTexts=this.option("summary.texts");return function($container,options){var data=options.data,text=options.column.caption+": "+options.text,container=$container.get(0);options.summaryItems&&options.summaryItems.length&&(text+=" "+ui_grid_core_utils.getGroupRowSummaryText(options.summaryItems,summaryTexts)),data&&(options.groupContinuedMessage&&options.groupContinuesMessage?text+=" ("+options.groupContinuedMessage+". "+options.groupContinuesMessage+")":options.groupContinuesMessage?text+=" ("+options.groupContinuesMessage+")":options.groupContinuedMessage&&(text+=" ("+options.groupContinuedMessage+")")),column.encodeHtml?container.textContent=text:container.innerHTML=text}},_update:function(){},_updateCell:function($cell,options){isGroupRow(options)&&$cell.addClass("dx-group-cell"),this.callBase.apply(this,arguments)},_getCellTemplate:function(options){var column=options.column;return isGroupRow(options)?column.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultGroupTemplate(column)}:("data"===options.rowType||column.command)&&column.cellTemplate?column.cellTemplate:{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(column)}},_createRow:function(row){var $row=this.callBase.apply(this,arguments);if(row){var isGroup="group"===row.rowType,isDataRow="data"===row.rowType;if(isDataRow&&$row.addClass("dx-data-row"),isDataRow&&this.option("showRowLines")&&$row.addClass("dx-row-lines"),this.option("showColumnLines")&&$row.addClass("dx-column-lines"),!1===row.visible&&$row.hide(),isGroup){$row.addClass("dx-group-row");var isRowExpanded=row.isExpanded;this.setAria("role","row",$row),this.setAria("expanded",(0,utils_type.$K)(isRowExpanded)&&isRowExpanded.toString(),$row)}}return $row},_rowPrepared:function($row,rowOptions,row){"data"===rowOptions.rowType&&(this.option("rowAlternationEnabled")&&(this._isAltRow(row)&&$row.addClass("dx-row-alt"),rowOptions.watch&&rowOptions.watch((()=>this._isAltRow(row)),(value=>{$row.toggleClass("dx-row-alt",value)}))),this._setAriaRowIndex(rowOptions,$row),rowOptions.watch&&rowOptions.watch((()=>rowOptions.rowIndex),(()=>this._setAriaRowIndex(rowOptions,$row)))),this.callBase.apply(this,arguments)},_setAriaRowIndex:function(row,$row){var component=this.component,isPagerMode="standard"===component.option("scrolling.mode")&&!ui_grid_core_utils.isVirtualRowRendering(component),rowIndex=row.rowIndex+1;isPagerMode?rowIndex=component.pageIndex()*component.pageSize()+rowIndex:rowIndex+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",rowIndex,$row)},_afterRowPrepared:function(e){var arg=e.args[0],dataController=this._dataController,row=dataController.getVisibleRows()[arg.rowIndex],watch=this.option("integrationOptions.watchMethod");if(arg.data&&"data"===arg.rowType&&!arg.isNewRow&&this.option("twoWayBindingEnabled")&&watch&&row){var dispose=watch((()=>dataController.generateDataValues(arg.data,arg.columns)),(()=>{dataController.repaintRows([row.rowIndex],this.option("repaintChangesOnly"))}),{deep:!0,skipImmediate:!0});events_engine.Z.on(arg.rowElement,remove.x,dispose)}},_renderScrollable:function(force){var $element=this.element();if($element.children().length||$element.append("<div>"),!force&&this._loadPanel||this._renderLoadPanel($element,$element.parent(),this._dataController.isLocalStore()),(force||!this.getScrollable())&&this._dataController.isLoaded()){for(var columns=this.getColumns(),allColumnsHasWidth=!0,i=0;i<columns.length;i++)if(!columns[i].width&&!columns[i].minWidth){allColumnsHasWidth=!1;break}(this.option("columnAutoWidth")||this._hasHeight||allColumnsHasWidth||this._columnsController._isColumnFixing())&&this._renderScrollableCore($element)}},_handleScroll:function(e){var rtlEnabled=this.option("rtlEnabled"),isNativeScrolling=e.component.option("useNative");this._scrollTop=e.scrollOffset.top,this._scrollLeft=e.scrollOffset.left;var scrollLeft=e.scrollOffset.left;rtlEnabled&&(this._scrollRight=getMaxHorizontalScrollOffset(e.component)-this._scrollLeft,isNativeScrolling&&(scrollLeft=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire((0,esm_extends.Z)({},e.scrollOffset,{left:scrollLeft}),this.name)},_renderScrollableCore:function($element){var dxScrollableOptions=this._createScrollableOptions(),scrollHandler=this._handleScroll.bind(this);dxScrollableOptions.onScroll=scrollHandler,this._scrollable=this._createComponent($element,ui_scrollable.Z,dxScrollableOptions),this._scrollableContainer=this._scrollable&&(0,renderer.Z)(this._scrollable.container())},_renderLoadPanel:ui_grid_core_utils.renderLoadPanel,_renderContent:function(contentElement,tableElement){return contentElement.empty().append(tableElement),this._findContentElement()},_updateContent:function(newTableElement,change,isFixedTableRendering){return this._contentChanges.push({newTableElement,change,isFixedTableRendering}),this.waitAsyncTemplates().done((()=>{var contentChanges=this._contentChanges;this._contentChanges=[],contentChanges.forEach((_ref2=>{var{newTableElement,change,isFixedTableRendering}=_ref2,tableElement=this.getTableElement(isFixedTableRendering),contentElement=this._findContentElement(isFixedTableRendering),changeType=null==change?void 0:change.changeType,executors=[],highlightChanges=this.option("highlightChanges"),rowInsertedClass=this.addWidgetPrefix("row-inserted-animation");if("update"===changeType)(0,iterator.S6)(change.rowIndices,((index,rowIndex)=>{var _change$changeTypes,$newRowElement=this._getRowElements(newTableElement).eq(index),dataChangeType=null===(_change$changeTypes=change.changeTypes)||void 0===_change$changeTypes?void 0:_change$changeTypes[index],item=change.items&&change.items[index];executors.push((()=>{var $rowElements=this._getRowElements(tableElement),$rowElement=$rowElements.eq(rowIndex);switch(dataChangeType){case"update":if(item){var _change$columnIndices,columnIndices=null===(_change$columnIndices=change.columnIndices)||void 0===_change$columnIndices?void 0:_change$columnIndices[index];(0,utils_type.$K)(item.visible)&&item.visible!==$rowElement.is(":visible")?$rowElement.toggle(item.visible):columnIndices?this._updateCells($rowElement,$newRowElement,columnIndices):$rowElement.replaceWith($newRowElement)}break;case"insert":if($rowElements.length)$rowElement.length?$newRowElement.insertBefore($rowElement):$newRowElement.insertAfter($rowElements.last());else if(tableElement){var target=$newRowElement.is("tbody")?tableElement:tableElement.children("tbody");$newRowElement.prependTo(target)}highlightChanges&&change.isLiveUpdate&&$newRowElement.addClass(rowInsertedClass);break;case"remove":$rowElement.remove()}}))})),(0,iterator.S6)(executors,(function(){this()})),newTableElement.remove();else this.setTableElement(newTableElement,isFixedTableRendering),contentElement.addClass(this.addWidgetPrefix("content")),this._renderContent(contentElement,newTableElement,isFixedTableRendering)}))})).fail((()=>{this._contentChanges=[]}))},_createEmptyRow:function(className,isFixed,height){var $cell,$row=this._createRow(),columns=isFixed?this.getFixedColumns():this.getColumns();$row.addClass(className).toggleClass("dx-column-lines",this.option("showColumnLines"));for(var i=0;i<columns.length;i++)$cell=this._createCell({column:columns[i],rowType:"freeSpace",columnIndex:i,columns}),(0,utils_type.kE)(height)&&$cell.css("height",height),$row.append($cell);return this.setAria("role","presentation",$row),$row},_appendEmptyRow:function($table,$emptyRow,location){var $tBodies=this._getBodies($table),isTableContainer=!$tBodies.length||$emptyRow.is("tbody"),$container=isTableContainer?$table:$tBodies;if("top"===location){if($container.first().prepend($emptyRow),isTableContainer){var $colgroup=$container.children("colgroup");$container.prepend($colgroup)}}else $container.last().append($emptyRow)},_renderFreeSpaceRow:function($tableElement,change){var $freeSpaceRowElement=this._createEmptyRow("dx-freespace-row");$freeSpaceRowElement=this._wrapRowIfNeed($tableElement,$freeSpaceRowElement,"refresh"===(null==change?void 0:change.changeType)),this._appendEmptyRow($tableElement,$freeSpaceRowElement)},_checkRowKeys:function(options){var that=this,rows=that._getRows(options),keyExpr=that._dataController.store()&&that._dataController.store().key();keyExpr&&rows.some((function(row){if("data"===row.rowType&&void 0===row.key)return that._dataController.fireError("E1046",keyExpr),!0}))},_needUpdateRowHeight:function(itemsCount){return itemsCount>0&&!this._rowHeight},_getRowsHeight:function($tableElement){return($tableElement=$tableElement||this._tableElement).children("tbody").children().not(".dx-virtual-row").not(".dx-freespace-row").toArray().reduce((function(sum,row){return sum+(0,utils_position.l)(row).height}),0)},_updateRowHeight:function(){var $tableElement=this.getTableElement(),itemsCount=this._dataController.items().length;if($tableElement&&this._needUpdateRowHeight(itemsCount)){var rowsHeight=this._getRowsHeight($tableElement);this._rowHeight=rowsHeight/itemsCount}},_findContentElement:function(){var $content=this.element(),scrollable=this.getScrollable();if($content)return scrollable&&($content=(0,renderer.Z)(scrollable.content())),$content.children().first()},_getRowElements:function(tableElement){var $rows=this.callBase(tableElement);return $rows&&$rows.not(".dx-freespace-row")},_getFreeSpaceRowElements:function($table){var tableElements=$table||this.getTableElements();return tableElements&&tableElements.children("tbody").children(".dx-freespace-row")},_getNoDataText:function(){return this.option("noDataText")},_rowClick:function(e){var item=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowClick",(0,extend.l)({evaluate:function(expr){return(0,data.vb)(expr)(item.data)}},e,item))},_rowDblClick:function(e){var item=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowDblClick",(0,extend.l)({},e,item))},_getColumnsCountBeforeGroups:function(columns){for(var i=0;i<columns.length;i++)if("groupExpand"===columns[i].type)return i;return 0},_getGroupCellOptions:function(options){var columnsCountBeforeGroups=this._getColumnsCountBeforeGroups(options.columns),columnIndex=(options.row.groupIndex||0)+columnsCountBeforeGroups;return{columnIndex,colspan:options.columns.length-columnIndex-1}},_needWrapRow:function(){return this.callBase.apply(this,arguments)||!!this.option("dataRowTemplate")},_renderCells:function($row,options){"group"===options.row.rowType?this._renderGroupedCells($row,options):options.row.values&&this.callBase($row,options)},_renderGroupedCells:function($row,options){for(var expandColumn,isExpanded,row=options.row,columns=options.columns,rowIndex=row.rowIndex,groupCellOptions=this._getGroupCellOptions(options),i=0;i<=groupCellOptions.columnIndex;i++)i===groupCellOptions.columnIndex&&columns[i].allowCollapsing&&"infinite"!==options.scrollingMode?(isExpanded=!!row.isExpanded,expandColumn=columns[i]):(isExpanded=null,expandColumn={command:"expand",cssClass:columns[i].cssClass}),this._needRenderCell(i,options.columnIndices)&&this._renderCell($row,{value:isExpanded,row,rowIndex,column:expandColumn,columnIndex:i,columnIndices:options.columnIndices,change:options.change});var groupColumnAlignment=(0,utils_position.q)(this.option("rtlEnabled")),groupColumn=(0,extend.l)({},columns[groupCellOptions.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:groupColumnAlignment});groupCellOptions.colspan>1&&(groupColumn.colspan=groupCellOptions.colspan),this._needRenderCell(groupCellOptions.columnIndex+1,options.columnIndices)&&this._renderCell($row,{value:row.values[row.groupIndex],row,rowIndex,column:groupColumn,columnIndex:groupCellOptions.columnIndex+1,columnIndices:options.columnIndices,change:options.change})},_renderRows:function($table,options){var scrollingMode=this.option("scrolling.mode");this.callBase($table,(0,extend.l)({scrollingMode},options)),this._checkRowKeys(options.change),this._renderFreeSpaceRow($table,options.change),this._hasHeight||this.updateFreeSpaceRowHeight($table)},_renderDataRowByTemplate($table,options,dataRowTemplate){var row=options.row,rowOptions=(0,extend.l)({columns:options.columns},row),$tbody=this._createRow(row,"tbody");$tbody.appendTo($table),this.renderTemplate($tbody,dataRowTemplate,rowOptions,!0,options.change),this._rowPrepared($tbody,rowOptions,options.row)},_renderRow:function($table,options){var row=options.row,rowTemplate=this.option().rowTemplate,dataRowTemplate=this.option("dataRowTemplate");"data"===row.rowType&&dataRowTemplate?this._renderDataRowByTemplate($table,options,dataRowTemplate):"data"!==row.rowType&&"group"!==row.rowType||(0,utils_type.$K)(row.groupIndex)||!rowTemplate?this.callBase($table,options):this.renderTemplate($table,rowTemplate,(0,extend.l)({columns:options.columns},row),!0)},_renderTable:function(options){var that=this,$table=that.callBase(options);return(0,utils_type.$K)(that.getTableElement())?that._renderScrollable():(that.setTableElement($table),that._renderScrollable(!0),that.resizeCompleted.add((function resizeCompletedHandler(){var scrollableInstance=that.getScrollable();scrollableInstance&&that.element().closest((0,utils_window.Jj)().document).length&&(that.resizeCompleted.remove(resizeCompletedHandler),scrollableInstance._visibilityChanged(!0))}))),$table},_createTable:function(){var $table=this.callBase.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&$table.appendTo(this.component.$element()),$table},_renderCore:function(change){var $element=this.element();$element.addClass(this.addWidgetPrefix("rowsview")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),$element.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",$element);var $table=this._renderTable({change}),deferred=this._updateContent($table,change);return this.callBase(change),this._lastColumnWidths=null,deferred},_getRows:function(change){return change&&change.items||this._dataController.items()},_getCellOptions:function(options){var column=options.column,row=options.row,data=row.data,summaryCells=row&&row.summaryCells,value=options.value,displayValue=ui_grid_core_utils.getDisplayValue(column,value,data,row.rowType),parameters=this.callBase(options);if(parameters.value=value,parameters.oldValue=options.oldValue,parameters.displayValue=displayValue,parameters.row=row,parameters.key=row.key,parameters.data=data,parameters.rowType=row.rowType,parameters.values=row.values,parameters.text=column.command?"":ui_grid_core_utils.formatValue(displayValue,column),parameters.rowIndex=row.rowIndex,parameters.summaryItems=summaryCells&&summaryCells[options.columnIndex],parameters.resized=column.resizedCallbacks,(0,utils_type.$K)(column.groupIndex)&&!column.command){var groupingTextsOptions=this.option("grouping.texts"),scrollingMode=this.option("scrolling.mode");"virtual"!==scrollingMode&&"infinite"!==scrollingMode&&(parameters.groupContinuesMessage=data&&data.isContinuationOnNextPage&&groupingTextsOptions&&groupingTextsOptions.groupContinuesMessage,parameters.groupContinuedMessage=data&&data.isContinuation&&groupingTextsOptions&&groupingTextsOptions.groupContinuedMessage)}return parameters},_setRowsOpacityCore:function($rows,visibleColumns,columnIndex,value){var columnsController=this._columnsController,columns=columnsController.getColumns(),column=columns&&columns[columnIndex],columnID=column&&column.isBand&&column.index;(0,iterator.S6)($rows,(function(rowIndex,row){if(!(0,renderer.Z)(row).hasClass("dx-group-row"))for(var i=0;i<visibleColumns.length&&(!((0,utils_type.kE)(columnID)&&columnsController.isParentBandColumn(visibleColumns[i].index,columnID)||visibleColumns[i].index===columnIndex)||($rows.eq(rowIndex).children().eq(i).css({opacity:value}),(0,utils_type.kE)(columnID)));i++);}))},_getDevicePixelRatio:function(){return(0,utils_window.Jj)().devicePixelRatio},renderNoDataText:ui_grid_core_utils.renderNoDataText,getCellOptions:function(rowIndex,columnIdentifier){var cellOptions,column,rowOptions=this._dataController.items()[rowIndex];return rowOptions&&(column=(0,utils_type.HD)(columnIdentifier)?this._columnsController.columnOption(columnIdentifier):this._columnsController.getVisibleColumns()[columnIdentifier])&&(cellOptions=this._getCellOptions({value:column.calculateCellValue(rowOptions.data),rowIndex:rowOptions.rowIndex,row:rowOptions,column})),cellOptions},getRow:function(index){if(index>=0){var rows=this._getRowElements();if(rows.length>index)return(0,renderer.Z)(rows[index])}},updateFreeSpaceRowHeight:function($table){var dataController=this._dataController,itemCount=dataController.items(!0).length,contentElement=this._findContentElement(),freeSpaceRowElements=this._getFreeSpaceRowElements($table);if(freeSpaceRowElements&&contentElement&&dataController.totalCount()>=0){var isFreeSpaceRowVisible=!1;if(itemCount>0)if(this._hasHeight)freeSpaceRowElements.hide(),(0,common.Su)((()=>{var scrollbarWidth=this.getScrollbarWidth(!0),elementHeightWithoutScrollbar=(0,size.Cr)(this.element())-scrollbarWidth,showFreeSpaceRow=elementHeightWithoutScrollbar-(0,size.zp)(contentElement)>0,rowsHeight=this._getRowsHeight(contentElement.children().first()),$tableElement=$table||this.getTableElements(),resultHeight=elementHeightWithoutScrollbar-rowsHeight-Math.ceil(parseFloat($tableElement.css("borderTopWidth")))-this._getHeightCorrection();showFreeSpaceRow&&(0,common.g0)((()=>{freeSpaceRowElements.css("height",resultHeight),isFreeSpaceRowVisible=!0,freeSpaceRowElements.show()})),(0,common.g0)((()=>this._updateLastRowBorder(isFreeSpaceRowVisible)))}));else{var freeSpaceRowCount=dataController.pageSize()-itemCount,scrollingMode=this.option("scrolling.mode");freeSpaceRowCount>0&&dataController.pageCount()>1&&"virtual"!==scrollingMode&&"infinite"!==scrollingMode&&((0,style.QQ)(freeSpaceRowElements,freeSpaceRowCount*this._rowHeight),isFreeSpaceRowVisible=!0),!isFreeSpaceRowVisible&&$table?(0,style.QQ)(freeSpaceRowElements,0):freeSpaceRowElements.toggle(isFreeSpaceRowVisible),this._updateLastRowBorder(isFreeSpaceRowVisible)}else freeSpaceRowElements.css("height",0),freeSpaceRowElements.show(),this._updateLastRowBorder(!0)}},_getHeightCorrection:function(){var isZoomedWebkit=browser.Z.webkit&&this._getDevicePixelRatio()>=2,isChromeLatest=browser.Z.chrome&&browser.Z.version>=91,hasExtraBorderTop=browser.Z.mozilla&&browser.Z.version>=70&&!this.option("showRowLines");return isZoomedWebkit||hasExtraBorderTop||isChromeLatest?1:0},_columnOptionChanged:function(e){var optionNames=e.optionNames;e.changeTypes.grouping||(optionNames.width||optionNames.visibleWidth)&&(this.callBase(e),this._fireColumnResizedCallbacks())},getScrollable:function(){return this._scrollable},init:function(){var that=this,dataController=that.getController("data");that.callBase(),that._editorFactoryController=that.getController("editorFactory"),that._rowHeight=0,that._scrollTop=0,that._scrollLeft=-1,that._scrollRight=0,that._hasHeight=!1,that._contentChanges=[],dataController.loadingChanged.add((function(isLoading,messageText){that.setLoading(isLoading,messageText)})),dataController.dataSourceChanged.add((()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})}))},_handleDataChanged:function(change){switch(change.changeType){case"refresh":case"prepend":case"append":case"update":this.render(null,change);break;default:this._update(change)}},publicMethods:function(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]},contentWidth:function(){return(0,size.dz)(this.element())-this.getScrollbarWidth()},getScrollbarWidth:function(isHorizontal){var scrollable,scrollableContainer=this._scrollableContainer&&this._scrollableContainer.get(0),scrollbarWidth=0;return scrollableContainer&&(isHorizontal?(scrollbarWidth=scrollableContainer.clientHeight?scrollableContainer.offsetHeight-scrollableContainer.clientHeight:0,scrollbarWidth+=(this,(scrollable=this.getScrollable())?Math.ceil(parseFloat((0,renderer.Z)(scrollable.content()).css("paddingBottom"))):0)):scrollbarWidth=scrollableContainer.clientWidth?scrollableContainer.offsetWidth-scrollableContainer.clientWidth:0),scrollbarWidth>0?scrollbarWidth:0},_fireColumnResizedCallbacks:function(){for(var lastColumnWidths=this._lastColumnWidths||[],columnWidths=[],columns=this.getColumns(),i=0;i<columns.length;i++)columnWidths[i]=columns[i].visibleWidth,columns[i].resizedCallbacks&&!(0,utils_type.$K)(columns[i].groupIndex)&&lastColumnWidths[i]!==columnWidths[i]&&columns[i].resizedCallbacks.fire(columnWidths[i]);this._lastColumnWidths=columnWidths},_updateLastRowBorder:function(isFreeSpaceRowVisible){this.option("showBorders")&&this.option("showRowLines")&&!isFreeSpaceRowVisible?this.element().addClass("dx-last-row-border"):this.element().removeClass("dx-last-row-border")},_updateScrollable:function(){var scrollable=ui_scrollable.Z.getInstance(this.element());scrollable&&(scrollable.update(),!scrollable.option("useNative")&&null!=scrollable&&scrollable.isRenovated()||this._updateHorizontalScrollPosition())},_updateHorizontalScrollPosition:function(){var scrollable=this.getScrollable(),scrollLeft=scrollable&&scrollable.scrollOffset().left;if(this.option("rtlEnabled")){var maxHorizontalScrollOffset=getMaxHorizontalScrollOffset(scrollable);maxHorizontalScrollOffset-scrollLeft!==this._scrollRight&&(this._scrollLeft=maxHorizontalScrollOffset-this._scrollRight)}this._scrollLeft>=0&&scrollLeft!==this._scrollLeft&&scrollable.scrollTo({x:this._scrollLeft})},_resizeCore:function(){var that=this;that._fireColumnResizedCallbacks(),that._updateRowHeight(),(0,common.g0)((function(){that._renderScrollable(),that.renderNoDataText(),that.updateFreeSpaceRowHeight(),(0,common.Su)((function(){that._updateScrollable()}))}))},scrollTo:function(location){var $element=this.element(),dxScrollable=$element&&ui_scrollable.Z.getInstance($element);dxScrollable&&dxScrollable.scrollTo(location)},height:function(_height){var $element=this.element();if(0===arguments.length)return $element?(0,size.zp)($element,!0):0;(0,utils_type.$K)(_height)&&$element&&(this.hasHeight("auto"!==_height),(0,style.QQ)($element,_height))},hasHeight:function(_hasHeight){if(0===arguments.length)return!!this._hasHeight;this._hasHeight=_hasHeight},setLoading:function(isLoading,messageText){var loadPanel=this._loadPanel,dataController=this._dataController,loadPanelOptions=this.option("loadPanel")||{},animation=dataController.isLoaded()?loadPanelOptions.animation:null,$element=this.element();if((0,utils_window.Ym)()&&(!loadPanel&&void 0!==messageText&&dataController.isLocalStore()&&"auto"===loadPanelOptions.enabled&&$element&&(this._renderLoadPanel($element,$element.parent()),loadPanel=this._loadPanel),loadPanel)){var visibilityOptions={message:messageText||loadPanelOptions.text,animation,visible:isLoading};isLoading&&(visibilityOptions.position=ui_grid_core_utils.calculateLoadPanelPosition($element)),clearTimeout(this._hideLoadingTimeoutID),loadPanel.option("visible")&&!isLoading?this._hideLoadingTimeoutID=setTimeout((function(){loadPanel.option(visibilityOptions)}),200):loadPanel.option(visibilityOptions)}},setRowsOpacity:function(columnIndex,value){var $rows=this._getRowElements().not(".dx-group-row")||[];this._setRowsOpacityCore($rows,this.getColumns(),columnIndex,value)},_getCellElementsCore:function(rowIndex){var $cells=this.callBase.apply(this,arguments);if($cells){var groupCellIndex=$cells.filter(".dx-group-cell").index();if(groupCellIndex>=0&&$cells.length>groupCellIndex+1)return $cells.slice(0,groupCellIndex+1)}return $cells},_getBoundaryVisibleItemIndex:function(isTop,isFloor){var itemIndex=0,prevOffset=0,offset=0,viewportBoundary=this._scrollTop,$contentElement=this._findContentElement(),contentElementOffsetTop=$contentElement&&$contentElement.offset().top,items=this.getController("data").items(),tableElement=this.getTableElement();if(items.length&&tableElement){var rowElements=this._getRowElements(tableElement).filter(":visible");if(!isTop)viewportBoundary+=(0,size.zp)(this._hasHeight?this.element():(0,utils_window.Jj)());for(itemIndex=0;itemIndex<items.length;itemIndex++){prevOffset=offset;var $rowElement=(0,renderer.Z)(rowElements).eq(itemIndex);if($rowElement.length&&(offset=$rowElement.offset(),(offset=(isTop?offset.top:offset.top+(0,size.zp)($rowElement))-contentElementOffsetTop)>viewportBoundary)){itemIndex&&(isFloor||2*viewportBoundary<Math.round(offset+prevOffset))&&itemIndex--;break}}itemIndex&&itemIndex===items.length&&itemIndex--}return itemIndex},getTopVisibleItemIndex:function(isFloor){return this._getBoundaryVisibleItemIndex(!0,isFloor)},getBottomVisibleItemIndex:function(isFloor){return this._getBoundaryVisibleItemIndex(!1,isFloor)},getTopVisibleRowData:function(){var itemIndex=this.getTopVisibleItemIndex(),items=this._dataController.items();if(items[itemIndex])return items[itemIndex].data},_scrollToElement:function($element,offset){var scrollable=this.getScrollable();scrollable&&scrollable.scrollToElement($element,offset)},optionChanged:function(args){switch(this.callBase(args),args.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":this._invalidate(!0,!0),args.handled=!0;break;case"scrolling":this._rowHeight=null,this._tableElement=null,args.handled=!0;break;case"rtlEnabled":this._rowHeight=null,this._tableElement=null;break;case"loadPanel":this._tableElement=null,this._invalidate(!0,"loadPanel.enabled"!==args.fullName),args.handled=!0;break;case"noDataText":this.renderNoDataText(),args.handled=!0}},dispose:function(){this.callBase(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()},setScrollerSpacing:function(){},_restoreErrorRow:function(){}};return members}())}};const RowsView=rowsModule.views.rowsView.inherit(function(){const createIcon=function(hasIcon,isExpanded){const $iconElement=(0,renderer.Z)("<div>").addClass("dx-treelist-empty-space");return hasIcon&&$iconElement.toggleClass("dx-treelist-expanded",isExpanded).toggleClass("dx-treelist-collapsed",!isExpanded).append((0,renderer.Z)("<span>")),$iconElement};return{_renderIconContainer($container,options){const $iconContainer=(0,renderer.Z)("<div>").addClass("dx-treelist-icon-container").appendTo($container);return options.watch&&options.watch((()=>[options.row.level,options.row.isExpanded,options.row.node.hasChildren]),(()=>{$iconContainer.empty(),this._renderIcons($iconContainer,options)})),$container.addClass("dx-treelist-cell-expandable"),this._renderIcons($iconContainer,options)},_renderIcons($iconContainer,options){const{row}=options,{level}=row;for(let i=0;i<=level;i++)$iconContainer.append(createIcon(i===level&&row.node.hasChildren,row.isExpanded));return $iconContainer},_renderCellCommandContent(container,model){return this._renderIconContainer(container,model),!0},_processTemplate(template,options){var _a;const that=this;let resultTemplate;const renderingTemplate=this.callBase(template),firstDataColumnIndex=that._columnsController.getFirstDataColumnIndex();return resultTemplate=renderingTemplate&&(null===(_a=options.column)||void 0===_a?void 0:_a.index)===firstDataColumnIndex?{render(options){const $container=options.container;that._renderCellCommandContent($container,options.model)&&(options.container=function($container){return(0,renderer.Z)("<div>").addClass("dx-treelist-text-content").appendTo($container)}($container)),renderingTemplate.render(options)}}:renderingTemplate,resultTemplate},_updateCell($cell,options){$cell=$cell.hasClass("dx-treelist-text-content")?$cell.parent():$cell,this.callBase($cell,options)},_rowClick(e){const dataController=this._dataController,$targetElement=(0,renderer.Z)(e.event.target),isExpandIcon=this.isExpandIcon($targetElement),item=dataController&&dataController.items()[e.rowIndex];isExpandIcon&&item&&dataController.changeRowExpand(item.key),this.callBase(e)},_createRow(row){const node=row&&row.node,$rowElement=this.callBase.apply(this,arguments);return node&&(this.setAria("level",row.level+1,$rowElement),node.hasChildren&&this.setAria("expanded",row.isExpanded,$rowElement)),$rowElement},isExpandIcon:$targetElement=>!!$targetElement.closest(".dx-treelist-expanded, .dx-treelist-collapsed").length}}());module_core.registerModule("rows",{defaultOptions:rowsModule.defaultOptions,views:{rowsView:RowsView}});var guid=__webpack_require__("./node_modules/devextreme/esm/core/guid.js"),dom=__webpack_require__("./node_modules/devextreme/esm/core/utils/dom.js"),fx=__webpack_require__("./node_modules/devextreme/esm/animation/fx.js"),animation_position=__webpack_require__("./node_modules/devextreme/esm/animation/position.js"),devices=__webpack_require__("./node_modules/devextreme/esm/core/devices.js"),ui_overlay=__webpack_require__("./node_modules/devextreme/esm/ui/overlay/ui.overlay.js"),utils_ink_ripple=__webpack_require__("./node_modules/devextreme/esm/ui/widget/utils.ink_ripple.js"),ui_hierarchical_collection_widget=__webpack_require__("./node_modules/devextreme/esm/ui/hierarchical_collection/ui.hierarchical_collection_widget.js"),ui_collection_widget_edit_strategy_plain=__webpack_require__("./node_modules/devextreme/esm/ui/collection/ui.collection_widget.edit.strategy.plain.js");class MenuBaseEditStrategy extends ui_collection_widget_edit_strategy_plain.Z{_getPlainItems(){return(0,iterator.UI)(this._collectionWidget.option("items"),(function getMenuItems(item){return item.items?[item].concat((0,iterator.UI)(item.items,getMenuItems)):item}))}_stringifyItem(item){return JSON.stringify(item,((key,value)=>"template"===key?this._getTemplateString(value):value))}_getTemplateString(template){return"object"==typeof template?(0,renderer.Z)(template).text():template.toString()}}const ui_menu_base_edit_strategy=MenuBaseEditStrategy;var item=__webpack_require__("./node_modules/devextreme/esm/ui/collection/item.js"),ITEM_CLASS="dx-menu-item",DX_ITEM_CONTENT_CLASS=ITEM_CLASS+"-content",DX_MENU_SELECTED_ITEM_CLASS=ITEM_CLASS+"-selected",DX_MENU_ITEM_WRAPPER_CLASS=ITEM_CLASS+"-wrapper",DX_MENU_ITEM_EXPANDED_CLASS=ITEM_CLASS+"-expanded",DX_ITEM_HAS_TEXT=ITEM_CLASS+"-has-text",DX_ITEM_HAS_ICON=ITEM_CLASS+"-has-icon",DX_ITEM_HAS_SUBMENU=ITEM_CLASS+"-has-submenu",DX_MENU_ITEM_POPOUT_CLASS=ITEM_CLASS+"-popout",DX_MENU_ITEM_CAPTION_CLASS=ITEM_CLASS+"-text",DEFAULT_DELAY={show:50,hide:300};class MenuBase extends ui_hierarchical_collection_widget.Z{_getDefaultOptions(){return(0,extend.l)(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return ITEM_CLASS}_setAriaSelected(){}_selectedItemClass(){return DX_MENU_SELECTED_ITEM_CLASS}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return(0,extend.l)(super._supportedKeys(),{space:()=>{var $item=(0,renderer.Z)(this.option("focusedElement"));$item.length&&this._isSelectionEnabled()&&this.selectItem($item[0])},pageUp:common.ZT,pageDown:common.ZT})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=".".concat(ITEM_CLASS),super._init(),this._renderSelectedItem(),this._initActions()}_getTextContainer(itemData){var itemText=itemData.text,$itemContainer=(0,renderer.Z)("<span>").addClass(DX_MENU_ITEM_CAPTION_CLASS),itemContent=(0,utils_type.PO)(itemData)?itemText:String(itemData);return itemText&&$itemContainer.text(itemContent)}_getPopoutContainer(itemData){var $popOutContainer,items=itemData.items;if(items&&items.length){var $popOutImage=(0,renderer.Z)("<div>").addClass(DX_MENU_ITEM_POPOUT_CLASS);$popOutContainer=(0,renderer.Z)("<span>").addClass("dx-menu-item-popout-container").append($popOutImage)}return $popOutContainer}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(selectedItem){if(selectedItem){var nodeToSelect=this._dataAdapter.getNodeByItem(selectedItem);this._dataAdapter.toggleSelection(nodeToSelect.internalFields.key,!0)}}_renderSelectedItem(){var selectedKeys=this._dataAdapter.getSelectedNodesKeys(),selectedKey=selectedKeys.length&&selectedKeys[0],selectedItem=this.option("selectedItem");if(selectedKey){var node=this._dataAdapter.getNodeByKey(selectedKey);!1!==node.selectable&&(selectedItem?selectedItem!==node.internalFields.item&&(this._dataAdapter.toggleSelection(selectedKey,!1),this._selectByItem(selectedItem)):this.option("selectedItem",node.internalFields.item))}else this._selectByItem(selectedItem)}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=(0,utils_ink_ripple.sY)()}_toggleActiveState($element,value,e){if(super._toggleActiveState.apply(this,arguments),this._inkRipple){var config={element:$element,event:e};value?this._inkRipple.showWave(config):this._inkRipple.hideWave(config)}}_getShowSubmenuMode(){var optionValue=this.option("showSubmenuMode");return optionValue=(0,utils_type.Kn)(optionValue)?optionValue.name:optionValue,this._isDesktopDevice()?optionValue:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===devices.Z.real().deviceType}_initEditStrategy(){var Strategy=ui_menu_base_edit_strategy;this._editStrategy=new Strategy(this)}_addCustomCssClass($element){$element.addClass(this.option("cssClass"))}_itemWrapperSelector(){return".".concat(DX_MENU_ITEM_WRAPPER_CLASS)}_hoverStartHandler(e){var $itemElement=this._getItemElementByEventArgs(e);$itemElement&&!this._isItemDisabled($itemElement)&&(e.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,$itemElement),this._getSubmenuDelay("show"))))}_getAvailableItems($itemElements){return super._getAvailableItems($itemElements).filter((function(){return"hidden"!==(0,renderer.Z)(this).css("visibility")}))}_isItemDisabled($item){return this._disabledGetter($item.data(this._itemDataKey()))}_showSubmenu($itemElement){this._addExpandedClass($itemElement)}_addExpandedClass(itemElement){(0,renderer.Z)(itemElement).addClass(DX_MENU_ITEM_EXPANDED_CLASS)}_getSubmenuDelay(action){var{delay}=this.option("showSubmenuMode");return(0,utils_type.$K)(delay)?(0,utils_type.Kn)(delay)?delay[action]:delay:DEFAULT_DELAY[action]}_getItemElementByEventArgs(eventArgs){var $target=(0,renderer.Z)(eventArgs.target);if($target.hasClass(this._itemClass())||$target.get(0)===eventArgs.currentTarget)return $target;for(;!$target.hasClass(this._itemClass());)if(($target=$target.parent()).hasClass("dx-submenu"))return null;return $target}_hoverEndHandler(){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(node){return node&&node.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(nodes,submenuContainer){if(nodes.length){this.hasIcons=!1;var $nodeContainer=this._renderContainer(this.$element(),submenuContainer),firstVisibleIndex=-1,nextGroupFirstIndex=-1;(0,iterator.S6)(nodes,((index,node)=>{var isVisibleNode=!1!==node.visible;isVisibleNode&&firstVisibleIndex<0&&(firstVisibleIndex=index),firstVisibleIndex<index&&(node.beginGroup||index===nextGroupFirstIndex)&&(nextGroupFirstIndex=isVisibleNode?index:index+1),index===nextGroupFirstIndex&&firstVisibleIndex<index&&this._renderSeparator($nodeContainer),this._renderItem(index,node,$nodeContainer)})),this.hasIcons||$nodeContainer.addClass("dx-menu-no-icons")}}_renderContainer($wrapper){var $container=(0,renderer.Z)("<ul>");return this.setAria("role","none",$container),$container.appendTo($wrapper).addClass("dx-menu-items-container")}_createDOMElement($nodeContainer){var $node=(0,renderer.Z)("<li>");return this.setAria("role","none",$node),$node.appendTo($nodeContainer).addClass(DX_MENU_ITEM_WRAPPER_CLASS)}_renderItem(index,node,$nodeContainer,$nodeElement){var items=this.option("items"),$node=$nodeElement||this._createDOMElement($nodeContainer);items[index+1]&&items[index+1].beginGroup&&$node.addClass("dx-menu-last-group-item");var $itemFrame=super._renderItem(index,node.internalFields.item,$node);node.internalFields.item===this.option("selectedItem")&&$itemFrame.addClass(DX_MENU_SELECTED_ITEM_CLASS),$itemFrame.attr("tabIndex",-1),this._hasSubmenu(node)&&this.setAria("haspopup","true",$itemFrame)}_renderItemFrame(index,itemData,$itemContainer){var $itemFrame=$itemContainer.children(".".concat(ITEM_CLASS));return $itemFrame.length?$itemFrame:super._renderItemFrame.apply(this,arguments)}_refreshItem($item,item){var node=this._dataAdapter.getNodeByItem(item),index=$item.data(this._itemIndexKey()),$nodeContainer=$item.closest("ul"),$nodeElement=$item.closest("li");this._renderItem(index,node,$nodeContainer,$nodeElement)}_addContentClasses(itemData,$itemFrame){var hasText=!!itemData.text&&!!itemData.text.length,hasIcon=!!itemData.icon,hasSubmenu=!!itemData.items&&!!itemData.items.length;$itemFrame.toggleClass(DX_ITEM_HAS_TEXT,hasText),$itemFrame.toggleClass(DX_ITEM_HAS_ICON,hasIcon),this.hasIcons||(this.hasIcons=hasIcon),$itemFrame.toggleClass(DX_ITEM_HAS_SUBMENU,hasSubmenu)}_getItemContent($itemFrame){var $itemContent=super._getItemContent($itemFrame);return $itemContent.length||($itemContent=$itemFrame.children(".".concat(DX_ITEM_CONTENT_CLASS))),$itemContent}_postprocessRenderItem(args){var $itemElement=(0,renderer.Z)(args.itemElement),selectedIndex=this._dataAdapter.getSelectedNodesKeys();selectedIndex.length&&this._selectedGetter(args.itemData)&&this._isItemSelectable(args.itemData)?this._dataAdapter.getNodeByItem(args.itemData).internalFields.key===selectedIndex[0]?($itemElement.addClass(this._selectedItemClass()),this._setAriaSelected($itemElement,"true")):this._setAriaSelected($itemElement,"false"):this._setAriaSelected($itemElement,"false")}_isItemSelectable(item){return!1!==item.selectable}_renderSeparator($itemsContainer){(0,renderer.Z)("<li>").appendTo($itemsContainer).addClass("dx-menu-separator")}_itemClickHandler(e){if(!e._skipHandling){var itemClickActionHandler=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(e,"onItemClick",{},{afterExecute:itemClickActionHandler.bind(this)}),e._skipHandling=!0}}_updateSubmenuVisibilityOnClick(actionArgs){this._updateSelectedItemOnClick(actionArgs),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(actionArgs.args[0].itemElement)}_updateSelectedItemOnClick(actionArgs){var args=actionArgs.args?actionArgs.args[0]:actionArgs;if(this._isItemSelectionAllowed(args.itemData)){var selectedItemKey=this._dataAdapter.getSelectedNodesKeys(),selectedNode=selectedItemKey.length&&this._dataAdapter.getNodeByKey(selectedItemKey[0]);selectedNode&&this._toggleItemSelection(selectedNode,!1),selectedNode&&selectedNode.internalFields.item===args.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(args.itemData)}}_isItemSelectionAllowed(item){var isSelectionByClickEnabled=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&isSelectionByClickEnabled&&this._isItemSelectable(item)&&!this._itemsGetter(item)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,common.C$)()}_optionChanged(args){switch(args.name){case"showSubmenuMode":break;case"selectedItem":var node=this._dataAdapter.getNodeByItem(args.value),selectedKey=this._dataAdapter.getSelectedNodesKeys()[0];if(node&&node.internalFields.key!==selectedKey){if(!1===node.selectable)break;selectedKey&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(selectedKey),!1),this._toggleItemSelection(node,!0),this._updateSelectedItems()}break;case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(args)}}_toggleItemSelection(node,value){var itemElement=this._getElementByItem(node.internalFields.item);itemElement&&(0,renderer.Z)(itemElement).toggleClass(DX_MENU_SELECTED_ITEM_CLASS),this._dataAdapter.toggleSelection(node.internalFields.key,value)}_getElementByItem(itemData){var result;return(0,iterator.S6)(this._itemElements(),((_,itemElement)=>(0,renderer.Z)(itemElement).data(this._itemDataKey())!==itemData||(result=itemElement,!1))),result}_updateSelectedItems(oldSelection,newSelection){(oldSelection||newSelection)&&this._fireSelectionChangeEvent(newSelection,oldSelection)}_fireSelectionChangeEvent(addedSelection,removedSelection){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[addedSelection],removedItems:[removedSelection]})}selectItem(itemElement){var itemData=itemElement.nodeType?this._getItemData(itemElement):itemElement,selectedKey=this._dataAdapter.getSelectedNodesKeys()[0],selectedItem=this.option("selectedItem"),node=this._dataAdapter.getNodeByItem(itemData);node.internalFields.key!==selectedKey&&(selectedKey&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(selectedKey),!1),this._toggleItemSelection(node,!0),this._updateSelectedItems(selectedItem,itemData),this._setOptionWithoutOptionChange("selectedItem",itemData))}unselectItem(itemElement){var itemData=itemElement.nodeType?this._getItemData(itemElement):itemElement,node=this._dataAdapter.getNodeByItem(itemData),selectedItem=this.option("selectedItem");node.internalFields.selected&&(this._toggleItemSelection(node,!1),this._updateSelectedItems(selectedItem,null),this._setOptionWithoutOptionChange("selectedItem",null))}}MenuBase.ItemClass=item.Z;const ui_menu_base=MenuBase;var contextmenu=__webpack_require__("./node_modules/devextreme/esm/events/contextmenu.js"),hold=__webpack_require__("./node_modules/devextreme/esm/events/hold.js"),ACTIONS=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],LOCAL_SUBMENU_DIRECTIONS=["up","down","first","last"],ui_context_menu_window=(0,utils_window.Jj)();class ContextMenu extends ui_menu_base{getShowEvent(showEventOption){var result=null;return(0,utils_type.Kn)(showEventOption)?null!==showEventOption.name&&(result=showEventOption.name||"dxcontextmenu"):result=showEventOption,result}getShowDelay(showEventOption){return(0,utils_type.Kn)(showEventOption)&&showEventOption.delay}_getDefaultOptions(){return(0,extend.l)(super._getDefaultOptions(),{showEvent:"dxcontextmenu",hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,utils_window.Ym)(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,extend.l)(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},(0,iterator.S6)(ACTIONS,((index,action)=>{this._actions[action]=this._createActionByOption(action)||common.ZT}))}_setOptionsByReference(){super._setOptionsByReference(),(0,extend.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():(0,renderer.Z)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return(0,extend.l)(super._supportedKeys(),{space:()=>{var $item=(0,renderer.Z)(this.option("focusedElement"));this.hide(),$item.length&&this._isSelectionEnabled()&&this.selectItem($item[0])},escape:this.hide})}_getActiveItem(){var $availableItems=this._getAvailableItems(),$focusedItem=$availableItems.filter(".".concat("dx-state-focused")),$hoveredItem=$availableItems.filter(".".concat("dx-state-hover"));return $hoveredItem.closest(".".concat("dx-menu-items-container")).find(".".concat("dx-menu-item")).index($focusedItem)>=0?$focusedItem:$hoveredItem.length?$hoveredItem:super._getActiveItem()}_moveFocus(location){var $newTarget,$items=this._getItemsByLocation(location),$oldTarget=this._getActiveItem(!0),$hoveredItem=this.itemsContainer().find(".".concat("dx-state-hover")),$activeItemHighlighted=!(!(0,renderer.Z)(this.option("focusedElement")).length&&!$hoveredItem.length);switch(location){case"up":$newTarget=$activeItemHighlighted?this._prevItem($items):$oldTarget,this._setFocusedElement($newTarget),$oldTarget.is($items.first())&&this._actions.onLeftFirstItem($oldTarget);break;case"down":$newTarget=$activeItemHighlighted?this._nextItem($items):$oldTarget,this._setFocusedElement($newTarget),$oldTarget.is($items.last())&&this._actions.onLeftLastItem($oldTarget);break;case"right":$newTarget=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler($items,location),this._setFocusedElement($newTarget);break;case"left":$newTarget=this.option("rtlEnabled")?this._expandSubmenuHandler($items,location):this._hideSubmenuHandler(),this._setFocusedElement($newTarget);break;case"first":$newTarget=$items.first(),this._setFocusedElement($newTarget);break;case"last":$newTarget=$items.last(),this._setFocusedElement($newTarget);break;default:return super._moveFocus(location)}}_setFocusedElement($element){$element&&0!==$element.length&&this.option("focusedElement",(0,core_element.u)($element))}_getItemsByLocation(location){var $items,$activeItem=this._getActiveItem(!0);return LOCAL_SUBMENU_DIRECTIONS.includes(location)&&($items=$activeItem.closest(".".concat("dx-menu-items-container")).children().children()),$items=this._getAvailableItems($items)}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,utils_type.$K)(this._overlay)){var $target=this._overlay.$content();super._refreshActiveDescendant($target)}}_hideSubmenuHandler(){var $curItem=this._getActiveItem(!0),$parentItem=$curItem.parents(".".concat("dx-menu-item-expanded")).first();return $parentItem.length?(this._hideSubmenusOnSameLevel($parentItem),this._hideSubmenu($curItem.closest(".".concat("dx-submenu"))),$parentItem):(this._actions.onCloseRootSubmenu($curItem),$curItem)}_expandSubmenuHandler($items,location){var $curItem=this._getActiveItem(!0),itemData=this._getItemData($curItem),node=this._dataAdapter.getNodeByItem(itemData),isItemHasSubmenu=this._hasSubmenu(node),$submenu=$curItem.children(".".concat("dx-submenu"));if(isItemHasSubmenu&&!$curItem.hasClass("dx-state-disabled"))return $submenu.length&&"hidden"!==$submenu.css("visibility")||this._showSubmenu($curItem),this._nextItem(this._getItemsByLocation(location));this._actions.onExpandLastSubmenu($curItem)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(!this._overlay){var overlayOptions=this._getOverlayOptions();this._overlay=this._createComponent((0,renderer.Z)("<div>").appendTo(this._$element),ui_overlay.Z,overlayOptions);var $overlayContent=this._overlay.$content();$overlayContent.addClass("dx-context-menu"),this._addCustomCssClass($overlayContent),this._addPlatformDependentClass($overlayContent),this._attachContextMenuEvent()}}preventShowingDefaultContextMenuAboveOverlay(){var $itemContainer=this._itemContainer(),eventName=(0,events_utils.V4)(contextmenu.u,this.NAME);events_engine.Z.off($itemContainer,eventName,".".concat("dx-submenu")),events_engine.Z.on($itemContainer,eventName,".".concat("dx-submenu"),(e=>{e.stopPropagation(),e.preventDefault(),events_engine.Z.off($itemContainer,eventName,".".concat("dx-submenu"))}).bind(this))}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass($element){devices.Z.current().phone&&$element.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(target){var showEvent=this.getShowEvent(this.option("showEvent"));if(showEvent){var eventName=(0,events_utils.V4)(showEvent,this.NAME);this._showContextMenuEventHandler?events_engine.Z.off(dom_adapter.Z.getDocument(),eventName,target,this._showContextMenuEventHandler):events_engine.Z.off((0,renderer.Z)(target),eventName)}}_attachShowContextMenuEvents(){var target=this._getTarget(),showEvent=this.getShowEvent(this.option("showEvent"));if(showEvent){var eventName=(0,events_utils.V4)(showEvent,this.NAME),contextMenuAction=this._createAction((e=>{var delay=this.getShowDelay(this.option("showEvent"));delay?setTimeout((()=>this._show(e.event)),delay):this._show(e.event)}),{validatingTargetName:"target"}),handler=e=>contextMenuAction({event:e,target:(0,renderer.Z)(e.currentTarget)});contextMenuAction=this._createAction(contextMenuAction),(0,utils_type.ZU)(target)||target.nodeType||(0,utils_type.FJ)(target)?(this._showContextMenuEventHandler=void 0,events_engine.Z.on(target,eventName,handler)):(this._showContextMenuEventHandler=handler,events_engine.Z.on(dom_adapter.Z.getDocument(),eventName,target,this._showContextMenuEventHandler))}}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer($wrapper,submenuContainer){var $holder=submenuContainer||this._itemContainer();($wrapper=(0,renderer.Z)("<div>")).appendTo($holder).addClass("dx-submenu").css("visibility",submenuContainer?"hidden":"visible"),$wrapper.parent().hasClass("dx-overlay-content")||this._addCustomCssClass($wrapper);var $itemsContainer=super._renderContainer($wrapper);return submenuContainer?$itemsContainer:this.option("width")?$itemsContainer.css("minWidth",this.option("width")):this.option("height")?$itemsContainer.css("minHeight",this.option("height")):$itemsContainer}_renderSubmenuItems(node,$itemFrame){this._renderItems(this._getChildNodes(node),$itemFrame),this._actions.onSubmenuCreated({itemElement:(0,core_element.u)($itemFrame),itemData:node.internalFields.item,submenuElement:(0,core_element.u)($itemFrame.children(".".concat("dx-submenu")))})}_getOverlayOptions(){var position=this.option("position");return{focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:e=>this._hideOnOutsideClickHandler(e),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:position.at,my:position.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:ui_context_menu_window}}_overlayShownActionHandler(arg){this._actions.onShown(arg)}_overlayHidingActionHandler(arg){this._actions.onHiding(arg),arg.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(arg){this._actions.onHidden(arg)}_shouldHideOnOutsideClick(e){var{closeOnOutsideClick,hideOnOutsideClick}=this.option();return(0,utils_type.mf)(hideOnOutsideClick)?hideOnOutsideClick(e):(0,utils_type.mf)(closeOnOutsideClick)?closeOnOutsideClick(e):hideOnOutsideClick||closeOnOutsideClick}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if(dom_adapter.Z.isDocument(e.target))return!0;var $activeItemContainer=this._getActiveItemsContainer(e.target),$itemContainers=this._getItemsContainers(),$clickedItem=this._searchActiveItem(e.target),$rootItem=this.$element().parents(".".concat("dx-menu-item")),isRootItemClicked=$clickedItem[0]===$rootItem[0]&&$clickedItem.length&&$rootItem.length;return!(this._isIncludeOverlay($activeItemContainer,$itemContainers)&&$clickedItem.length)&&!isRootItemClicked||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus($clickedItem),!1)}_getActiveItemsContainer(target){return(0,renderer.Z)(target).closest(".".concat("dx-menu-items-container"))}_getItemsContainers(){return this._overlay.$content().find(".".concat("dx-menu-items-container"))}_searchActiveItem(target){return(0,renderer.Z)(target).closest(".".concat("dx-menu-item")).eq(0)}_isIncludeOverlay($activeOverlay,$allOverlays){var isSame=!1;return(0,iterator.S6)($allOverlays,((index,$overlay)=>{$activeOverlay.is($overlay)&&!isSame&&(isSame=!0)})),isSame}_hideAllShownChildSubmenus($clickedItem){var $submenuElements=$clickedItem.find(".".concat("dx-submenu")),shownSubmenus=(0,extend.l)([],this._shownSubmenus);$submenuElements.length>0&&(0,iterator.S6)(shownSubmenus,((index,$submenu)=>{var $context=this._searchActiveItem($submenu.context).parent();$context.parent().is($clickedItem.parent().parent())&&!$context.is($clickedItem.parent())&&this._hideSubmenu($submenu)}))}_showSubmenu($item){var node=this._dataAdapter.getNodeByItem(this._getItemData($item));if(this._hideSubmenusOnSameLevel($item),this._hasSubmenu(node)){var $submenu=$item.children(".".concat("dx-submenu")),isSubmenuRendered=$submenu.length;super._showSubmenu($item),isSubmenuRendered||this._renderSubmenuItems(node,$item),this._isSubmenuVisible($submenu)||this._drawSubmenu($item)}}_hideSubmenusOnSameLevel($item){var $expandedItems=$item.parent(".".concat("dx-menu-item-wrapper")).siblings().find(".".concat("dx-menu-item-expanded"));$expandedItems.length&&($expandedItems.removeClass("dx-menu-item-expanded"),this._hideSubmenu($expandedItems.find(".".concat("dx-submenu"))))}_hideSubmenuGroup($submenu){this._isSubmenuVisible($submenu)&&this._hideSubmenuCore($submenu)}_isSubmenuVisible($submenu){return"visible"===$submenu.css("visibility")}_drawSubmenu($itemElement){var animation=this.option("animation")?this.option("animation").show:{},$submenu=$itemElement.children(".".concat("dx-submenu")),submenuPosition=this._getSubmenuPosition($itemElement);this._overlay&&this._overlay.option("visible")&&((0,utils_type.$K)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes($submenu)||this._shownSubmenus.push($submenu),animation&&fx.Z.stop($submenu),animation_position.Z.setup($submenu,submenuPosition),animation&&((0,utils_type.PO)(animation.to)&&(animation.to.position=submenuPosition),this._animate($submenu,animation)),$submenu.css("visibility","visible"))}_animate($container,options){fx.Z.animate($container,options)}_getSubmenuPosition($rootItem){var submenuDirection=this.option("submenuDirection").toLowerCase(),position={collision:"flip",of:$rootItem.parent(".".concat("dx-menu-item-wrapper")),offset:{h:0,v:-1}};switch(submenuDirection){case"left":position.at="left top",position.my="right top";break;case"right":position.at="right top",position.my="left top";break;default:this.option("rtlEnabled")?(position.at="left top",position.my="right top"):(position.at="right top",position.my="left top")}return position}_updateSubmenuVisibilityOnClick(actionArgs){if(actionArgs.args.length){var itemData=actionArgs.args[0].itemData,node=this._dataAdapter.getNodeByItem(itemData);if(node){var $itemElement=(0,renderer.Z)(actionArgs.args[0].itemElement),$submenu=$itemElement.find(".".concat("dx-submenu"));if(this._hasSubmenu(node)&&!$submenu.length&&(this._renderSubmenuItems(node,$itemElement),$submenu=$itemElement.find(".".concat("dx-submenu"))),$itemElement.context!==$submenu.context||"visible"!==$submenu.css("visibility")){this._updateSelectedItemOnClick(actionArgs);var notCloseMenuOnItemClick=itemData&&!1===itemData.closeMenuOnClick;if(itemData&&!itemData.disabled&&!notCloseMenuOnItemClick)if(0===$submenu.length){var $prevSubmenu=(0,renderer.Z)($itemElement.parents(".".concat("dx-submenu"))[0]);this._hideSubmenu($prevSubmenu),!actionArgs.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is($submenu)&&this._hideSubmenu($submenu),this._showSubmenu($itemElement)}}}}_hideSubmenu($curSubmenu){var shownSubmenus=(0,extend.l)([],this._shownSubmenus);(0,iterator.S6)(shownSubmenus,((index,$submenu)=>{($curSubmenu.is($submenu)||(0,dom.r3)($curSubmenu[0],$submenu[0]))&&($submenu.parent().removeClass("dx-menu-item-expanded"),this._hideSubmenuCore($submenu))}))}_hideSubmenuCore($submenu){var index=this._shownSubmenus.indexOf($submenu),animation=this.option("animation")?this.option("animation").hide:null;index>=0&&this._shownSubmenus.splice(index,1),this._stopAnimate($submenu),animation&&this._animate($submenu,animation),$submenu.css("visibility","hidden")}_stopAnimate($container){fx.Z.stop($container,!0)}_hideAllShownSubmenus(){var shownSubmenus=(0,extend.l)([],this._shownSubmenus);this._overlay.$content().find(".".concat("dx-menu-item-expanded")).removeClass("dx-menu-item-expanded"),(0,iterator.S6)(shownSubmenus,((_,$submenu)=>{this._hideSubmenu($submenu)}))}_visibilityChanged(visible){visible&&this._renderContentImpl()}_optionChanged(args){if(ACTIONS.includes(args.name))this._initActions();else switch(args.name){case"visible":this._renderVisibility(args.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":args.previousValue&&this._detachShowContextMenuEvents(args.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(args)}}_renderVisibility(showing){return showing?this._show():this._hide()}_toggleVisibility(){}_show(event){var args={jQEvent:event},promise=(new utils_deferred.BH).reject().promise();if(this._actions.onShowing(args),args.cancel)return promise;var _event$originalEvent,position=this._positionContextMenu(event);position&&(this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes())),this._setOptionWithoutOptionChange("visible",!0),this._overlay.option("position",position),promise=this._overlay.show(),event&&event.stopPropagation(),this._setAriaAttributes(),(null==event||null===(_event$originalEvent=event.originalEvent)||void 0===_event$originalEvent?void 0:_event$originalEvent.type)===hold.Z.name&&this.preventShowingDefaultContextMenuAboveOverlay());return promise}_setAriaAttributes(){this._overlayContentId="dx-".concat(new guid.Z),this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||(0,renderer.Z)(dom_adapter.Z.getDocument())}_getContextMenuPosition(){return(0,extend.l)({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(jQEvent){var position=this._getContextMenuPosition(),isInitialPosition=this._isInitialOptionValue("position"),positioningAction=this._createActionByOption("onPositioning");jQEvent&&jQEvent.preventDefault&&isInitialPosition&&(position.of=jQEvent);var actionArgs={position,event:jQEvent};return positioningAction(actionArgs),actionArgs.cancel?position=null:actionArgs.event&&(actionArgs.event.cancel=!0,jQEvent.preventDefault()),position}_refresh(){if((0,utils_window.Ym)())if(this._overlay){var lastPosition=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",lastPosition)}else super._refresh();else super._refresh()}_hide(){var promise;return this._overlay&&(promise=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),promise||(new utils_deferred.BH).reject().promise()}toggle(showing){var visible=this.option("visible");return showing=void 0===showing?!visible:showing,this._renderVisibility(showing)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}(0,component_registrator.Z)("dxContextMenu",ContextMenu);const context_menu=ContextMenu,viewName={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},VIEW_NAMES=["columnHeadersView","rowsView","footerView","headerPanel"],contextMenuModule={defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:modules.ViewController.inherit({init(){this.createAction("onContextMenuPreparing")},getContextMenuItems(dxEvent){if(!dxEvent)return!1;const that=this,$targetElement=(0,renderer.Z)(dxEvent.target);let $element,$targetRowElement,$targetCellElement,menuItems;return(0,iterator.S6)(VIEW_NAMES,(function(){var _a,_b;const view=that.getView(this);if($element=view&&view.element(),$element&&($element.is($targetElement)||$element.find($targetElement).length)){$targetCellElement=$targetElement.closest(".dx-row > td, .dx-row > tr"),$targetRowElement=$targetCellElement.parent();const rowIndex=view.getRowIndex($targetRowElement),columnIndex=$targetCellElement[0]&&$targetCellElement[0].cellIndex,rowOptions=$targetRowElement.data("options"),options={event:dxEvent,targetElement:(0,core_element.u)($targetElement),target:viewName[this],rowIndex,row:view._getRows()[rowIndex],columnIndex,column:null===(_b=null===(_a=null==rowOptions?void 0:rowOptions.cells)||void 0===_a?void 0:_a[columnIndex])||void 0===_b?void 0:_b.column};if(options.items=view.getContextMenuItems&&view.getContextMenuItems(options),that.executeAction("onContextMenuPreparing",options),that._contextMenuPrepared(options),menuItems=options.items,menuItems)return!1}})),menuItems},_contextMenuPrepared:common.ZT})},views:{contextMenuView:modules.View.inherit({_renderCore(){const that=this,$element=that.element().addClass("dx-context-menu");this.setAria("role","presentation",$element),this._createComponent($element,context_menu,{onPositioning(actionArgs){const{event}=actionArgs,contextMenuInstance=actionArgs.component,items=that.getController("contextMenu").getContextMenuItems(event);items?(contextMenuInstance.option("items",items),event.stopPropagation()):actionArgs.cancel=!0},onItemClick(params){params.itemData.onItemClick&&params.itemData.onItemClick(params)},cssClass:that.getWidgetContainerClass(),target:that.component.$element()})}})}};module_core.registerModule("contextMenu",contextMenuModule);const ErrorHandlingController=modules.ViewController.inherit({init(){this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")},_createErrorRow(error,$tableElements){const that=this;let $errorRow,$closeButton;const $errorMessage=this._renderErrorMessage(error);return $tableElements?($errorRow=(0,renderer.Z)("<tr>").addClass("dx-error-row"),$closeButton=(0,renderer.Z)("<div>").addClass("dx-closebutton").addClass(that.addWidgetPrefix("action")),events_engine.Z.on($closeButton,click.u,that.createAction((args=>{const e=args.event;let $errorRow;const errorRowIndex=(0,renderer.Z)(e.currentTarget).closest(".dx-error-row").index();e.stopPropagation(),(0,iterator.S6)($tableElements,((_,tableElement)=>{$errorRow=(0,renderer.Z)(tableElement).children("tbody").children("tr").eq(errorRowIndex),that.removeErrorRow($errorRow)})),that.getController("resizing")&&that.getController("resizing").fireContentReadyAction()}))),(0,renderer.Z)("<td>").attr({colSpan:that.getController("columns").getVisibleColumns().length,role:"presentation"}).prepend($closeButton).append($errorMessage).appendTo($errorRow),$errorRow):$errorMessage},_renderErrorMessage(error){const message=error.url?error.message.replace(error.url,""):error.message||error,$message=(0,renderer.Z)("<div>").addClass("dx-error-message").text(message);return error.url&&(0,renderer.Z)("<a>").attr("href",error.url).text(error.url).appendTo($message),$message},renderErrorRow(error,rowIndex,$popupContent){const that=this;let $errorMessageElement,$firstErrorRow;if($popupContent)return $popupContent.find(".dx-error-message").remove(),$errorMessageElement=that._createErrorRow(error),$popupContent.prepend($errorMessageElement),$errorMessageElement;const viewElement=rowIndex>=0||!that._columnHeadersView.isVisible()?that._rowsView:that._columnHeadersView,$tableElements=viewElement.getTableElements();(0,iterator.S6)($tableElements,((_,tableElement)=>{if($errorMessageElement=that._createErrorRow(error,$tableElements),$firstErrorRow=$firstErrorRow||$errorMessageElement,rowIndex>=0){const $row=viewElement._getRowElements((0,renderer.Z)(tableElement)).eq(rowIndex);that.removeErrorRow($row.next()),$errorMessageElement.insertAfter($row)}else{const $tbody=(0,renderer.Z)(tableElement).children("tbody"),rowElements=$tbody.children("tr");that._columnHeadersView.isVisible()?(that.removeErrorRow(rowElements.last()),(0,renderer.Z)(tableElement).append($errorMessageElement)):(that.removeErrorRow(rowElements.first()),$tbody.first().prepend($errorMessageElement))}}));const resizingController=that.getController("resizing");return resizingController&&resizingController.fireContentReadyAction(),$firstErrorRow},removeErrorRow($row){if(!$row){const $columnHeaders=this._columnHeadersView&&this._columnHeadersView.element();if(!($row=$columnHeaders&&$columnHeaders.find(".dx-error-row"))||!$row.length){const $rowsViewElement=this._rowsView.element();$row=$rowsViewElement&&$rowsViewElement.find(".dx-error-row")}}$row&&$row.hasClass("dx-error-row")&&$row.remove()},optionChanged(args){const that=this;if("errorRowEnabled"===args.name)args.handled=!0;else that.callBase(args)}}),errorHandlingModule={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:ErrorHandlingController},extenders:{controllers:{data:{init(){const that=this,errorHandlingController=that.getController("errorHandling");that.callBase(),that.dataErrorOccurred.add(((error,$popupContent)=>{that.option("errorRowEnabled")&&errorHandlingController.renderErrorRow(error,void 0,$popupContent)})),that.changed.add((e=>{if(e&&"loadError"===e.changeType)return;const errorHandlingController=that.getController("errorHandling"),editingController=that.getController("editing");editingController&&!editingController.hasChanges()&&errorHandlingController&&errorHandlingController.removeErrorRow()}))}}}}};module_core.registerModule("errorHandling",errorHandlingModule);var ui_grid_core_grid_view_VIEW_NAMES=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],isPercentWidth=function(width){return(0,utils_type.HD)(width)&&"%"===width.slice(-1)},calculateFreeWidth=function(that,widths){var contentWidth=that._rowsView.contentWidth();return contentWidth-that._getTotalWidth(widths,contentWidth)},ui_grid_core_grid_view_restoreFocus=function(focusedElement,selectionRange){!function hiddenFocus(element){isHiddenFocusing=!0,element.focus(),isHiddenFocusing=!1}(focusedElement),ui_grid_core_utils.setSelectionRange(focusedElement,selectionRange)},resizingControllerMembers={_initPostRenderHandlers:function(){var dataController=this._dataController;this._refreshSizesHandler||(this._refreshSizesHandler=e=>{dataController.changed.remove(this._refreshSizesHandler),this._refreshSizes(e)},dataController.changed.add((()=>{dataController.changed.add(this._refreshSizesHandler)})))},_refreshSizes:function(e){var resizeDeferred,that=this,changeType=e&&e.changeType,isDelayed=e&&e.isDelayed,items=that._dataController.items();if(e&&"refresh"!==changeType&&"prepend"!==changeType&&"append"!==changeType){if("update"===changeType){var _e$changeTypes;if(0===(null===(_e$changeTypes=e.changeTypes)||void 0===_e$changeTypes?void 0:_e$changeTypes.length))return;!(items.length>1||"insert"!==e.changeTypes[0])||0===items.length&&"remove"===e.changeTypes[0]||e.needUpdateDimensions?resizeDeferred=that.resize():(resizeDeferred=new utils_deferred.BH,this._waitAsyncTemplates().done((()=>{(0,common.Su)((()=>(0,common.g0)((()=>(0,common.Su)((()=>{that._setScrollerSpacing(),that._rowsView.resize(),resizeDeferred.resolve()}))))))})).fail(resizeDeferred.reject))}}else isDelayed||(resizeDeferred=that.resize());changeType&&"updateSelection"!==changeType&&"updateFocusedRow"!==changeType&&"pageIndex"!==changeType&&!isDelayed&&(0,utils_deferred.gx)(resizeDeferred).done((function(){that._setAriaRowColCount(),that.fireContentReadyAction()}))},fireContentReadyAction:function(){this.component._fireContentReadyAction()},_setAriaRowColCount:function(){var component=this.component;component.setAria({rowCount:this._dataController.totalItemsCount(),colCount:component.columnCount()},component.$element().children(".dx-gridbase-container"))},_getBestFitWidths:function(){var _widths,rowsView=this._rowsView,columnHeadersView=this._columnHeadersView,widths=rowsView.getColumnWidths();if(null===(_widths=widths)||void 0===_widths||!_widths.length){var _rowsView$getTableEle,headersTableElement=columnHeadersView.getTableElement();columnHeadersView.setTableElement(null===(_rowsView$getTableEle=rowsView.getTableElement())||void 0===_rowsView$getTableEle?void 0:_rowsView$getTableEle.children(".dx-header")),widths=columnHeadersView.getColumnWidths(),columnHeadersView.setTableElement(headersTableElement)}return widths},_setVisibleWidths:function(visibleColumns,widths){var columnsController=this._columnsController;columnsController.beginUpdate(),(0,iterator.S6)(visibleColumns,(function(index,column){var columnId=columnsController.getColumnId(column);columnsController.columnOption(columnId,"visibleWidth",widths[index])})),columnsController.endUpdate()},_toggleBestFitModeForView:function(view,className,isBestFit){if(view&&view.isVisible()){var $rowsTables=this._rowsView.getTableElements(),$viewTables=view.getTableElements();(0,iterator.S6)($rowsTables,((index,tableElement)=>{var $tableBody,$rowsTable=(0,renderer.Z)(tableElement),$viewTable=$viewTables.eq(index);$viewTable&&$viewTable.length&&(($tableBody=isBestFit?$viewTable.children("tbody").appendTo($rowsTable):$rowsTable.children("."+className).appendTo($viewTable)).toggleClass(className,isBestFit),$tableBody.toggleClass(this.addWidgetPrefix("best-fit"),isBestFit))}))}},_toggleBestFitMode:function(isBestFit){var $rowsTable=this._rowsView.getTableElement(),$rowsFixedTable=this._rowsView.getTableElements().eq(1);$rowsTable&&($rowsTable.css("tableLayout",isBestFit?"auto":"fixed"),$rowsTable.children("colgroup").css("display",isBestFit?"none":""),(0,iterator.S6)($rowsFixedTable.find("tr.dx-group-row"),((idx,item)=>{(0,renderer.Z)(item).css("display",isBestFit?"none":"")})),$rowsFixedTable.toggleClass(this.addWidgetPrefix("table-fixed"),!isBestFit),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",isBestFit),this._toggleBestFitModeForView(this._footerView,"dx-footer",isBestFit),this._needStretch()&&($rowsTable.get(0).style.width=isBestFit?"auto":""))},_toggleContentMinHeight:function(value){var scrollable=this._rowsView.getScrollable(),$contentElement=this._rowsView._findContentElement();!1===(null==scrollable?void 0:scrollable.option("useNative"))&&$contentElement.css({minHeight:value?ui_grid_core_utils.getContentHeightLimit(browser.Z):""})},_synchronizeColumns:function(){var resetBestFitMode,focusedElement,selectionRange,columnsController=this._columnsController,visibleColumns=columnsController.getVisibleColumns(),columnAutoWidth=this.option("columnAutoWidth"),wordWrapEnabled=this.option("wordWrapEnabled"),needBestFit=this._needBestFit(),hasMinWidth=!1,isColumnWidthsCorrected=!1,resultWidths=[];!needBestFit&&(0,iterator.S6)(visibleColumns,(function(index,column){if("auto"===column.width)return needBestFit=!0,!1})),(0,iterator.S6)(visibleColumns,(function(index,column){if(column.minWidth)return hasMinWidth=!0,!1})),this._setVisibleWidths(visibleColumns,[]);var $element=this.component.$element();needBestFit&&(focusedElement=dom_adapter.Z.getActiveElement($element.get(0)),selectionRange=ui_grid_core_utils.getSelectionRange(focusedElement),this._toggleBestFitMode(!0),resetBestFitMode=!0),this._toggleContentMinHeight(wordWrapEnabled),$element&&$element.get(0)&&this._maxWidth&&(delete this._maxWidth,$element[0].style.maxWidth=""),(0,common.Su)((()=>{var expandColumnWidth;(needBestFit?(resultWidths=this._getBestFitWidths(),(0,iterator.S6)(visibleColumns,(function(index,column){var columnId=columnsController.getColumnId(column);columnsController.columnOption(columnId,"bestFitWidth",resultWidths[index],!0)}))):hasMinWidth&&(resultWidths=this._getBestFitWidths()),(0,iterator.S6)(visibleColumns,(function(index){var width=this.width;"auto"!==width&&((0,utils_type.$K)(width)?resultWidths[index]=(0,utils_type.kE)(width)||function(width){return(0,utils_type.HD)(width)&&"px"===width.slice(-2)}(width)?parseFloat(width):width:columnAutoWidth||(resultWidths[index]=void 0))})),resetBestFitMode)&&(this._toggleBestFitMode(!1),resetBestFitMode=!1,focusedElement&&focusedElement!==dom_adapter.Z.getActiveElement()&&((0,utils_position.l)(focusedElement).bottom<0||ui_grid_core_grid_view_restoreFocus(focusedElement,selectionRange)));isColumnWidthsCorrected=this._correctColumnWidths(resultWidths,visibleColumns),columnAutoWidth&&((0,iterator.S6)(visibleColumns,(function(index,column){"groupExpand"===column.type&&(expandColumnWidth=resultWidths[index])})),(0,iterator.S6)(visibleColumns,(function(index,column){"groupExpand"===column.type&&expandColumnWidth&&(resultWidths[index]=expandColumnWidth)})),this._needStretch()&&this._processStretch(resultWidths,visibleColumns)),(0,common.g0)((()=>{(needBestFit||isColumnWidthsCorrected)&&this._setVisibleWidths(visibleColumns,resultWidths),wordWrapEnabled&&this._toggleContentMinHeight(!1)}))}))},_needBestFit:function(){return this.option("columnAutoWidth")},_needStretch:function(){return this._columnsController.getVisibleColumns().some((c=>"auto"===c.width&&!c.command))},_getAverageColumnsWidth:function(resultWidths){return calculateFreeWidth(this,resultWidths)/resultWidths.filter((function(width){return void 0===width})).length},_correctColumnWidths:function(resultWidths,visibleColumns){var i,that=this,hasPercentWidth=!1,hasAutoWidth=!1,isColumnWidthsCorrected=!1,$element=that.component.$element(),hasWidth=that._hasWidth,_loop=function(){var index=i,column=visibleColumns[index],isHiddenColumn="adaptiveHidden"===resultWidths[index],width=resultWidths[index],minWidth=column.minWidth;if(minWidth)if(void 0===width){var averageColumnsWidth=that._getAverageColumnsWidth(resultWidths);width=averageColumnsWidth}else if(isPercentWidth(width)){var freeWidth=function(that,columnIndex,currentMinWidth,widths){return calculateFreeWidth(that,widths.map((function(width,index){return index===columnIndex?currentMinWidth:width})))}(that,index,minWidth,resultWidths);freeWidth<0&&(width=-1)}var realColumnWidth=that._getRealColumnWidth(index,resultWidths.map((function(columnWidth,columnIndex){return index===columnIndex?width:columnWidth})));minWidth&&!isHiddenColumn&&realColumnWidth<minWidth&&(resultWidths[index]=minWidth,isColumnWidthsCorrected=!0,i=-1),(0,utils_type.$K)(column.width)||(hasAutoWidth=!0),isPercentWidth(column.width)&&(hasPercentWidth=!0)};for(i=0;i<visibleColumns.length;i++)_loop();if(!hasAutoWidth&&resultWidths.length){var $rowsViewElement=that._rowsView.element(),contentWidth=that._rowsView.contentWidth(),scrollbarWidth=that._rowsView.getScrollbarWidth(),totalWidth=that._getTotalWidth(resultWidths,contentWidth);if(totalWidth<contentWidth){var lastColumnIndex=ui_grid_core_utils.getLastResizableColumnIndex(visibleColumns,resultWidths);if(lastColumnIndex>=0&&(resultWidths[lastColumnIndex]="auto",isColumnWidthsCorrected=!0,!1===hasWidth&&!hasPercentWidth)){var borderWidth=that.option("showBorders")?Math.ceil((0,size.Y_)($rowsViewElement)-(0,size.Xt)($rowsViewElement)):0;that._maxWidth=totalWidth+scrollbarWidth+borderWidth,$element.css("maxWidth",that._maxWidth)}}}return isColumnWidthsCorrected},_processStretch:function(resultSizes,visibleColumns){var groupSize=this._rowsView.contentWidth(),tableSize=this._getTotalWidth(resultSizes,groupSize),unusedIndexes={length:0};if(resultSizes.length){(0,iterator.S6)(visibleColumns,(function(index){(this.width||"adaptiveHidden"===resultSizes[index])&&(unusedIndexes[index]=!0,unusedIndexes.length++)}));var diff=groupSize-tableSize,diffElement=Math.floor(diff/(resultSizes.length-unusedIndexes.length)),onePixelElementsCount=diff-diffElement*(resultSizes.length-unusedIndexes.length);if(diff>=0)for(var i=0;i<resultSizes.length;i++)unusedIndexes[i]||(resultSizes[i]+=diffElement,onePixelElementsCount>0&&(onePixelElementsCount<1?(resultSizes[i]+=onePixelElementsCount,onePixelElementsCount=0):(resultSizes[i]++,onePixelElementsCount--)))}},_getRealColumnWidth:function(columnIndex,columnWidths,groupWidth){var ratio=1,width=columnWidths[columnIndex];if(!isPercentWidth(width))return parseFloat(width);var percentTotalWidth=columnWidths.reduce(((sum,width,index)=>isPercentWidth(width)?sum+parseFloat(width):sum),0),pixelTotalWidth=columnWidths.reduce(((sum,width)=>!width||"adaptiveHidden"===width||isPercentWidth(width)?sum:sum+parseFloat(width)),0),freeSpace=(groupWidth=groupWidth||this._rowsView.contentWidth())-pixelTotalWidth,percentTotalWidthInPixel=percentTotalWidth*groupWidth/100;return pixelTotalWidth>0&&percentTotalWidthInPixel+pixelTotalWidth>=groupWidth&&(ratio=percentTotalWidthInPixel>freeSpace?freeSpace/percentTotalWidthInPixel:1),parseFloat(width)*groupWidth*ratio/100},_getTotalWidth:function(widths,groupWidth){for(var result=0,i=0;i<widths.length;i++){var width=widths[i];width&&"adaptiveHidden"!==width&&(result+=this._getRealColumnWidth(i,widths,groupWidth))}return Math.ceil(result)},_getGroupElement:function(){return this.component.$element().children().get(0)},updateSize:function(rootElement){var $rootElement=(0,renderer.Z)(rootElement),importantMarginClass=this.addWidgetPrefix("important-margin");if(void 0===this._hasHeight&&$rootElement&&$rootElement.is(":visible")&&(0,size.dz)($rootElement)){var $groupElement=$rootElement.children("."+this.getWidgetContainerClass());$groupElement.length&&$groupElement.detach(),this._hasHeight=!!(0,size.Cr)($rootElement);var width=(0,size.dz)($rootElement);$rootElement.addClass(importantMarginClass),this._hasWidth=(0,size.dz)($rootElement)===width,$rootElement.removeClass(importantMarginClass),$groupElement.length&&$groupElement.appendTo($rootElement)}},publicMethods:function(){return["resize","updateDimensions"]},_waitAsyncTemplates:function(){var _this$_columnHeadersV,_this$_rowsView,_this$_footerView;return(0,utils_deferred.gx)(null===(_this$_columnHeadersV=this._columnHeadersView)||void 0===_this$_columnHeadersV?void 0:_this$_columnHeadersV.waitAsyncTemplates(),null===(_this$_rowsView=this._rowsView)||void 0===_this$_rowsView?void 0:_this$_rowsView.waitAsyncTemplates(),null===(_this$_footerView=this._footerView)||void 0===_this$_footerView?void 0:_this$_footerView.waitAsyncTemplates())},resize:function(){if(!this.component._requireResize){var d=new utils_deferred.BH;return this._waitAsyncTemplates().done((()=>{(0,utils_deferred.gx)(this.updateDimensions()).done(d.resolve).fail(d.reject)})).fail(d.reject),d.promise()}},updateDimensions:function(checkSize){var that=this;if(that._initPostRenderHandlers(),that._checkSize(checkSize)){var prevResult=that._resizeDeferred,result=that._resizeDeferred=new utils_deferred.BH;return(0,utils_deferred.gx)(prevResult).always((function(){(0,common.g0)((function(){that._dataController.isLoaded()&&that._synchronizeColumns(),that._resetGroupElementHeight(),(0,common.Su)((function(){(0,common.g0)((function(){(0,common.Su)((function(){that._updateDimensionsCore()}))}))}))})).done(result.resolve).fail(result.reject)})),result.promise()}},_resetGroupElementHeight:function(){var groupElement=this._getGroupElement(),scrollable=this._rowsView.getScrollable();!groupElement||!groupElement.style.height||scrollable&&scrollable.scrollTop()||(groupElement.style.height="")},_checkSize:function(checkSize){var $rootElement=this.component.$element();return!(checkSize&&(this._lastWidth===(0,size.dz)($rootElement)&&this._lastHeight===(0,size.Cr)($rootElement)&&this._devicePixelRatio===(0,utils_window.Jj)().devicePixelRatio||!$rootElement.is(":visible")))},_setScrollerSpacingCore:function(){var that=this,vScrollbarWidth=that._rowsView.getScrollbarWidth(),hScrollbarWidth=that._rowsView.getScrollbarWidth(!0);(0,common.g0)((function(){that._columnHeadersView&&that._columnHeadersView.setScrollerSpacing(vScrollbarWidth),that._footerView&&that._footerView.setScrollerSpacing(vScrollbarWidth),that._rowsView.setScrollerSpacing(vScrollbarWidth,hScrollbarWidth)}))},_setScrollerSpacing:function(){var scrollable=this._rowsView.getScrollable(),isNativeScrolling=!0===this.option("scrolling.useNative");!scrollable||isNativeScrolling?(0,common.g0)((()=>{(0,common.Su)((()=>{this._setScrollerSpacingCore()}))})):this._setScrollerSpacingCore()},_updateDimensionsCore:function(){var that=this,dataController=that._dataController,editorFactory=that.getController("editorFactory"),rowsView=that._rowsView,$rootElement=that.component.$element(),groupElement=this._getGroupElement(),rootElementHeight=(0,size.Cr)($rootElement),height=that.option("height")||$rootElement.get(0).style.height,isHeightSpecified=!!height&&"auto"!==height,maxHeight=parseInt($rootElement.css("maxHeight")),maxHeightHappened=maxHeight&&rootElementHeight>=maxHeight,isMaxHeightApplied=groupElement&&groupElement.scrollHeight===groupElement.offsetHeight;that.updateSize($rootElement),(0,common.g0)((function(){var hasHeight=that._hasHeight||!!maxHeight||isHeightSpecified;rowsView.hasHeight(hasHeight),maxHeightHappened&&!isMaxHeightApplied&&(0,renderer.Z)(groupElement).css("height",maxHeight),dataController.isLoaded()?(0,common.Su)((function(){that._updateLastSizes($rootElement),that._setScrollerSpacing(),(0,iterator.S6)(ui_grid_core_grid_view_VIEW_NAMES,(function(index,viewName){var view=that.getView(viewName);view&&view.resize()})),editorFactory&&editorFactory.resize()})):rowsView.setLoading(dataController.isLoading())}))},_updateLastSizes:function($rootElement){this._lastWidth=(0,size.dz)($rootElement),this._lastHeight=(0,size.Cr)($rootElement),this._devicePixelRatio=(0,utils_window.Jj)().devicePixelRatio},optionChanged:function(args){switch(args.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":return void(args.handled=!0);default:this.callBase(args)}},init:function(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView")}},ResizingController=ui_grid_core_modules.ViewController.inherit(resizingControllerMembers),SynchronizeScrollingController=ui_grid_core_modules.ViewController.inherit({_scrollChangedHandler:function(views,pos,viewName){for(var j=0;j<views.length;j++)views[j]&&views[j].name!==viewName&&views[j].scrollTo({left:pos.left,top:pos.top})},init:function(){for(var views=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")],i=0;i<views.length;i++){var view=views[i];view&&view.scrollChanged.add(this._scrollChangedHandler.bind(this,views))}}}),GridView=ui_grid_core_modules.View.inherit({_endUpdateCore:function(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())},_getWidgetAriaLabel:function(){return"dxDataGrid-ariaDataGrid"},init:function(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")},getView:function(name){return this.component._views[name]},element:function(){return this._groupElement},optionChanged:function(args){(0,utils_type.$K)(this._groupElement)&&"showBorders"===args.name?(this._groupElement.toggleClass(this.addWidgetPrefix("borders"),!!args.value),args.handled=!0):this.callBase(args)},_renderViews:function($groupElement){var that=this;(0,iterator.S6)(ui_grid_core_grid_view_VIEW_NAMES,(function(index,viewName){var view=that.getView(viewName);view&&view.render($groupElement)}))},_getTableRoleName:function(){return"grid"},render:function($rootElement){var isFirstRender=!this._groupElement,$groupElement=this._groupElement||(0,renderer.Z)("<div>").addClass(this.getWidgetContainerClass());$groupElement.addClass("dx-gridbase-container"),$groupElement.toggleClass(this.addWidgetPrefix("borders"),!!this.option("showBorders")),this.setAria("role","presentation",$rootElement),this.component.setAria({role:this._getTableRoleName(),label:message.Z.format(this._getWidgetAriaLabel())},$groupElement),this._rootElement=$rootElement||this._rootElement,isFirstRender&&(this._groupElement=$groupElement,(0,utils_window.Ym)()&&this.getController("resizing").updateSize($rootElement),$groupElement.appendTo($rootElement)),this._renderViews($groupElement)},update:function(){var $rootElement=this._rootElement,$groupElement=this._groupElement,resizingController=this.getController("resizing");$rootElement&&$groupElement&&(resizingController.resize(),this._dataController.isLoaded()&&this._resizingController.fireContentReadyAction())}}),gridViewModule={defaultOptions:function(){return{showBorders:!1,renderAsync:!1}},controllers:{resizing:ResizingController,synchronizeScrolling:SynchronizeScrollingController},views:{gridView:GridView},VIEW_NAMES:ui_grid_core_grid_view_VIEW_NAMES};const module_grid_view_GridView=gridViewModule.views.gridView.inherit({_getWidgetAriaLabel:()=>"dxTreeList-ariaTreeList",_getTableRoleName:()=>"treegrid"});module_core.registerModule("gridView",{defaultOptions:gridViewModule.defaultOptions,controllers:gridViewModule.controllers,views:{gridView:module_grid_view_GridView},extenders:{controllers:{resizing:{_toggleBestFitMode(isBestFit){this.callBase(isBestFit);this._rowsView.getTableElement().find(".dx-treelist-cell-expandable").toggleClass(this.addWidgetPrefix("best-fit"),isBestFit)}}}}});var toolbar=__webpack_require__("./node_modules/devextreme/esm/ui/toolbar.js"),DEFAULT_TOOLBAR_ITEM_NAMES=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"],members={_getToolbarItems:function(){return[]},_getButtonContainer:function(){return(0,renderer.Z)("<div>").addClass(this.addWidgetPrefix("toolbar-button"))},_getToolbarButtonClass:function(specificClass){var secondClass=specificClass?" "+specificClass:"";return this.addWidgetPrefix("toolbar-button")+secondClass},_getToolbarOptions:function(){var userToolbarOptions=this.option("toolbar"),options={toolbarOptions:{items:this._getToolbarItems(),visible:null==userToolbarOptions?void 0:userToolbarOptions.visible,disabled:null==userToolbarOptions?void 0:userToolbarOptions.disabled,onItemRendered:function(e){var itemRenderedCallback=e.itemData.onItemRendered;itemRenderedCallback&&itemRenderedCallback(e)}}},userItems=null==userToolbarOptions?void 0:userToolbarOptions.items;if(options.toolbarOptions.items=this._normalizeToolbarItems(options.toolbarOptions.items,userItems),this.executeAction("onToolbarPreparing",options),options.toolbarOptions&&!(0,utils_type.$K)(options.toolbarOptions.visible)){var toolbarItems=options.toolbarOptions.items;options.toolbarOptions.visible=!(null==toolbarItems||!toolbarItems.length)}return options.toolbarOptions},_normalizeToolbarItems:function(defaultItems,userItems){defaultItems.forEach((button=>{if(!DEFAULT_TOOLBAR_ITEM_NAMES.includes(button.name))throw new Error("Default toolbar item '".concat(button.name,"' is not added to DEFAULT_TOOLBAR_ITEM_NAMES"))}));var defaultProps={location:"after"},isArray=Array.isArray(userItems);if(!(0,utils_type.$K)(userItems))return defaultItems;isArray||(userItems=[userItems]);var defaultButtonsByNames={};defaultItems.forEach((button=>{defaultButtonsByNames[button.name]=button}));var normalizedItems=userItems.map((button=>((0,utils_type.HD)(button)&&(button={name:button}),(0,utils_type.$K)(button.name)&&((0,utils_type.$K)(defaultButtonsByNames[button.name])?button=(0,extend.l)(!0,{},defaultButtonsByNames[button.name],button):DEFAULT_TOOLBAR_ITEM_NAMES.includes(button.name)&&(button=(0,esm_extends.Z)({},button,{visible:!1}))),(0,extend.l)(!0,{},defaultProps,button))));return isArray?normalizedItems:normalizedItems[0]},_renderCore:function(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{var $headerPanel=this.element();$headerPanel.addClass(this.addWidgetPrefix("header-panel"));var label=message.Z.format(this.component.NAME+"-ariaToolbar"),$toolbar=(0,renderer.Z)("<div>").attr("aria-label",label).appendTo($headerPanel);this._toolbar=this._createComponent($toolbar,toolbar.Z,this._toolbarOptions)}},_columnOptionChanged:common.ZT,_handleDataChanged:function(){this._requireReady&&this.render()},init:function(){this.callBase(),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})},render:function(){this._toolbarOptions=this._getToolbarOptions(),this.callBase.apply(this,arguments)},setToolbarItemDisabled:function(name,optionValue){var toolbarInstance=this._toolbar;if(toolbarInstance){var items=toolbarInstance.option("items")||[],itemIndex=items.indexOf(items.filter((function(item){return item.name===name}))[0]);if(itemIndex>=0){var itemOptionPrefix="items["+itemIndex+"]";toolbarInstance.option(itemOptionPrefix+".options")?toolbarInstance.option(itemOptionPrefix+".options.disabled",optionValue):toolbarInstance.option(itemOptionPrefix+".disabled",optionValue)}}},updateToolbarDimensions:function(){var _this$_toolbar;null===(_this$_toolbar=this._toolbar)||void 0===_this$_toolbar||_this$_toolbar.updateDimensions()},getHeaderPanel:function(){return this.element()},getHeight:function(){return this.getElementHeight()},optionChanged:function(args){if("onToolbarPreparing"===args.name&&(this._invalidate(),args.handled=!0),"toolbar"===args.name&&(args.handled=!0,this._toolbar)){var parts=(0,data.Zw)(args.fullName),optionName=args.fullName.replace(/^toolbar\./,"");if(1===parts.length){var toolbarOptions=this._getToolbarOptions();this._toolbar.option(toolbarOptions)}else if("items"===parts[1])if(2===parts.length){var _toolbarOptions=this._getToolbarOptions();this._toolbar.option("items",_toolbarOptions.items)}else if(3===parts.length){var normalizedItem=this._normalizeToolbarItems(this._getToolbarItems(),args.value);this._toolbar.option(optionName,normalizedItem)}else parts.length>=4&&this._toolbar.option(optionName,args.value);else this._toolbar.option(optionName,args.value)}this.callBase(args)},isVisible:function(){return!(!this._toolbarOptions||!this._toolbarOptions.visible)},allowDragging:common.ZT},headerPanelModule={defaultOptions:function(){return{}},views:{headerPanel:ColumnsView.inherit(members)},extenders:{controllers:{resizing:{_updateDimensionsCore:function(){this.callBase.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}}}}};module_core.registerModule("headerPanel",headerPanelModule);const{callModuleItemsMethod:module_widget_base_callModuleItemsMethod}=module_core;module_core.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","editingRowBased","editingFormBased","editingCellBased","editing","grouping","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);const module_widget_base_TreeList=ui_widget.default.inherit({_activeStateUnit:".dx-row",_getDefaultOptions(){const result=this.callBase();return(0,iterator.S6)(module_core.modules,(function(){(0,utils_type.mf)(this.defaultOptions)&&(0,extend.l)(!0,result,this.defaultOptions())})),result},_defaultOptionsRules(){return this.callBase().concat([{device:()=>(0,themes.x2)(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0}}}])},_init(){this.callBase(),module_core.processModules(this,module_core),module_widget_base_callModuleItemsMethod(this,"init")},_clean:common.ZT,_optionChanged(args){const that=this;module_widget_base_callModuleItemsMethod(that,"optionChanged",[args]),args.handled||that.callBase(args)},_dimensionChanged(){this.updateDimensions(!0)},_visibilityChanged(visible){visible&&this.updateDimensions()},_initMarkup(){this.callBase.apply(this,arguments),this.$element().addClass("dx-treelist"),this.getView("gridView").render(this.$element())},_renderContentImpl(){this.getView("gridView").update()},_renderContent(){const that=this;(0,common.g0)((()=>{that._renderContentImpl()}))},_dispose(){this.callBase(),module_widget_base_callModuleItemsMethod(this,"dispose")},isReady(){return this.getController("data").isReady()},beginUpdate(){this.callBase(),module_widget_base_callModuleItemsMethod(this,"beginUpdate")},endUpdate(){module_widget_base_callModuleItemsMethod(this,"endUpdate"),this.callBase()},getController(name){return this._controllers[name]},getView(name){return this._views[name]},focus(element){this.callBase(),(0,utils_type.$K)(element)&&this.getController("keyboardNavigation").focus(element)}});module_widget_base_TreeList.registerModule=module_core.registerModule.bind(module_core),(0,component_registrator.Z)("dxTreeList",module_widget_base_TreeList);const module_widget_base=module_widget_base_TreeList;var utils_storage=__webpack_require__("./node_modules/devextreme/esm/core/utils/storage.js");const DATE_REGEX=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,parseDates=function(state){state&&(0,iterator.S6)(state,((key,value)=>{if((0,utils_type.PO)(value)||Array.isArray(value))parseDates(value);else if("string"==typeof value){const date=DATE_REGEX.exec(value);date&&(state[key]=new Date(Date.UTC(+date[1],+date[2]-1,+date[3],+date[4],+date[5],+date[6])))}}))},StateStoringController=modules.ViewController.inherit(function(){const getStorage=function(options){const storage="sessionStorage"===options.type?(0,utils_storage.y)():(0,utils_window.Jj)().localStorage;if(!storage)throw new Error("E1007");return storage},getUniqueStorageKey=function(options){return(0,utils_type.$K)(options.storageKey)?options.storageKey:"storage"};return{_loadState(){const options=this.option("stateStoring");if("custom"===options.type)return options.customLoad&&options.customLoad();try{return JSON.parse(getStorage(options).getItem(getUniqueStorageKey(options)))}catch(e){ui_errors.Z.log(e.message)}},_saveState(state){const options=this.option("stateStoring");if("custom"!==options.type)try{getStorage(options).setItem(getUniqueStorageKey(options),JSON.stringify(state))}catch(e){ui_errors.Z.log(e.message)}else options.customSave&&options.customSave(state)},publicMethods:()=>["state"],isEnabled(){return this.option("stateStoring.enabled")},init(){const that=this;return that._state={},that._isLoaded=!1,that._isLoading=!1,that._windowUnloadHandler=function(){void 0!==that._savingTimeoutID&&that._saveState(that.state())},events_engine.Z.on((0,utils_window.Jj)(),"unload",that._windowUnloadHandler),that},isLoaded(){return this._isLoaded},isLoading(){return this._isLoading},load(){this._isLoading=!0;const loadResult=(0,utils_deferred.p4)(this._loadState());return loadResult.always((()=>{this._isLoaded=!0,this._isLoading=!1})).done((state=>{null===state||(0,utils_type.Qr)(state)||this.state(state)})),loadResult},state(state){const that=this;if(!arguments.length)return(0,extend.l)(!0,{},that._state);that._state=(0,extend.l)({},state),parseDates(that._state)},save(){const that=this;clearTimeout(that._savingTimeoutID),that._savingTimeoutID=setTimeout((()=>{that._saveState(that.state()),that._savingTimeoutID=void 0}),that.option("stateStoring.savingTimeout"))},optionChanged(args){const that=this;if("stateStoring"===args.name)that.isEnabled()&&!that.isLoading()&&that.load(),args.handled=!0;else that.callBase(args)},dispose(){clearTimeout(this._savingTimeoutID),events_engine.Z.off((0,utils_window.Jj)(),"unload",this._windowUnloadHandler)}}}()),processLoadState=that=>{const columnsController=that.getController("columns"),selectionController=that.getController("selection"),exportController=that.getController("export"),dataController=that.getController("data");columnsController&&columnsController.columnsChanged.add((()=>{that.updateState({columns:columnsController.getUserState()})})),selectionController&&selectionController.selectionChanged.add((e=>{that.updateState({selectedRowKeys:e.selectedRowKeys,selectionFilter:e.selectionFilter})})),dataController&&(that._initialPageSize=that.option("paging.pageSize"),that._initialFilterValue=that.option("filterValue"),dataController.changed.add((()=>{const state=(that=>{const pagerView=that.getView("pagerView"),dataController=that.getController("data"),state={allowedPageSizes:pagerView?pagerView.getPageSizes():void 0,filterPanel:{filterEnabled:that.option("filterPanel.filterEnabled")},filterValue:that.option("filterValue"),focusedRowKey:that.option("focusedRowEnabled")?that.option("focusedRowKey"):void 0};return(0,extend.l)(state,dataController.getUserState())})(that);that.updateState(state)}))),exportController&&exportController.selectionOnlyChanged.add((()=>{that.updateState({exportSelectionOnly:exportController.selectionOnly()})}))},stateStoringModule={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:{StateStoringController}.StateStoringController},extenders:{views:{rowsView:{init(){const that=this,dataController=that.getController("data");that.callBase(),dataController.stateLoaded.add((()=>{if(dataController.isLoaded()&&!dataController.getDataSource()){that.setLoading(!1),that.renderNoDataText();const columnHeadersView=that.component.getView("columnHeadersView");columnHeadersView&&columnHeadersView.render(),that.component._fireContentReadyAction()}}))}}},controllers:{stateStoring:{init(){this.callBase.apply(this,arguments),processLoadState(this)},isLoading(){return this.callBase()||this.getController("data").isStateLoading()},state(state){const result=this.callBase.apply(this,arguments);return void 0!==state&&this.applyState((0,extend.l)(!0,{},state)),result},updateState(state){if(this.isEnabled()){const oldState=this.state(),newState=(0,extend.l)({},oldState,state),oldStateHash=(0,common.k3)(oldState),newStateHash=(0,common.k3)(newState);(0,common.bY)(oldStateHash,newStateHash)||(state=(0,extend.l)(!0,{},state),(0,extend.l)(this._state,state),this.save())}else(0,extend.l)(this._state,state)},applyState(state){var _a;const{allowedPageSizes}=state,{searchText}=state,{selectedRowKeys}=state,{selectionFilter}=state,exportController=this.getController("export"),columnsController=this.getController("columns"),dataController=this.getController("data"),scrollingMode=this.option("scrolling.mode"),isVirtualScrollingMode="virtual"===scrollingMode||"infinite"===scrollingMode,showPageSizeSelector=!0===this.option("pager.visible")&&this.option("pager.showPageSizeSelector"),hasHeight=null===(_a=this.getView("rowsView"))||void 0===_a?void 0:_a.hasHeight();this.component.beginUpdate(),columnsController&&columnsController.setUserState(state.columns),exportController&&exportController.selectionOnly(state.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",selectedRowKeys||[]),this.option("selectionFilter",selectionFilter),allowedPageSizes&&"auto"===this.option("pager.allowedPageSizes")&&(this.option("pager").allowedPageSizes=allowedPageSizes),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",state.focusedRowKey||null)),this.component.endUpdate(),this.option("searchPanel.text",searchText||""),this.option("filterValue",((that,state)=>{const filterSyncController=that.getController("filterSync"),columnsController=that.getController("columns"),hasFilterState=state.columns||void 0!==state.filterValue;return filterSyncController?hasFilterState?state.filterValue||filterSyncController.getFilterValueFromColumns(state.columns):that._initialFilterValue||filterSyncController.getFilterValueFromColumns(columnsController.getColumns()):null})(this,state)),this.option("filterPanel.filterEnabled",!state.filterPanel||state.filterPanel.filterEnabled),this.option("paging.pageIndex",(!isVirtualScrollingMode||hasHeight)&&state.pageIndex||0),this.option("paging.pageSize",isVirtualScrollingMode&&!showPageSizeSelector||!(0,utils_type.$K)(state.pageSize)?this._initialPageSize:state.pageSize),dataController&&dataController.reset()}},columns:{_shouldReturnVisibleColumns(){const result=this.callBase.apply(this,arguments),stateStoringController=this.getController("stateStoring");return result&&(!stateStoringController.isEnabled()||stateStoringController.isLoaded())}},data:{callbackNames(){return this.callBase().concat(["stateLoaded"])},_refreshDataSource(){const{callBase}=this,stateStoringController=this.getController("stateStoring");if(stateStoringController.isEnabled()&&!stateStoringController.isLoaded()){clearTimeout(this._restoreStateTimeoutID);const deferred=new utils_deferred.BH;return this._restoreStateTimeoutID=setTimeout((()=>{stateStoringController.load().always((()=>{this._restoreStateTimeoutID=null})).done((()=>{callBase.call(this),this.stateLoaded.fire(),deferred.resolve()})).fail((error=>{this.stateLoaded.fire(),this._handleLoadError(error||"Unknown error"),deferred.reject()}))})),deferred.promise()}this.isStateLoading()||callBase.call(this)},isLoading(){const stateStoringController=this.getController("stateStoring");return this.callBase()||stateStoringController.isLoading()},isStateLoading(){return(0,utils_type.$K)(this._restoreStateTimeoutID)},isLoaded(){return this.callBase()&&!this.isStateLoading()},dispose(){clearTimeout(this._restoreStateTimeoutID),this.callBase()}},selection:{_fireSelectionChanged(options){const stateStoringController=this.getController("stateStoring"),isDeferredSelection=this.option("selection.deferred");stateStoringController.isLoading()&&isDeferredSelection||this.callBase.apply(this,arguments)}}}}},origApplyState=stateStoringModule.extenders.controllers.stateStoring.applyState;module_core.registerModule("stateStoring",(0,extend.l)(!0,{},stateStoringModule,{extenders:{controllers:{stateStoring:{applyState(state){origApplyState.apply(this,arguments),this.option("expandedRowKeys",state.expandedRowKeys?state.expandedRowKeys.slice():[])}},data:{getUserState(){const state=this.callBase.apply(this,arguments);return this.option("autoExpandAll")||(state.expandedRowKeys=this.option("expandedRowKeys")),state}}}}}));var tree_view=__webpack_require__("./node_modules/devextreme/esm/ui/tree_view.js"),ui_popup=__webpack_require__("./node_modules/devextreme/esm/ui/popup/ui.popup.js"),ui_button=__webpack_require__("./node_modules/devextreme/esm/ui/button.js"),processItems=function(that,chooserColumns){var items=[],isSelectMode="select"===that.option("columnChooser.mode");return chooserColumns.length&&(0,iterator.S6)(chooserColumns,(function(index,column){var item={text:column.caption,cssClass:column.cssClass,allowHiding:column.allowHiding,expanded:!0,id:column.index,disabled:!1,disableCheckBox:!1===column.allowHiding,parentId:(0,utils_type.$K)(column.ownerBand)?column.ownerBand:null};isSelectMode&&(item.selected=column.visible),items.push(item)})),items},columnChooserControllerMembers={renderShowColumnChooserButton:function($element){var $columnChooserButton,that=this,columnChooserButtonClass=that.addWidgetPrefix("column-chooser-button"),columnChooserEnabled=that.option("columnChooser.enabled"),$showColumnChooserButton=$element.find("."+columnChooserButtonClass);columnChooserEnabled?$showColumnChooserButton.length?$showColumnChooserButton.show():($columnChooserButton=(0,renderer.Z)("<div>").addClass(columnChooserButtonClass).appendTo($element),that._createComponent($columnChooserButton,ui_button.Z,{icon:"column-chooser",onClick:function(){that.getView("columnChooserView").showColumnChooser()},hint:that.option("columnChooser.title"),integrationOptions:{}})):$showColumnChooserButton.hide()},getPosition:function(){var rowsView=this.getView("rowsView");return{my:"right bottom",at:"right bottom",of:rowsView&&rowsView.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}},ColumnChooserController=ui_grid_core_modules.ViewController.inherit(columnChooserControllerMembers),columnChooserMembers={_resizeCore:common.ZT,_isWinDevice:function(){return!!devices.Z.real().win},_updateList:function(change){var items,$popupContent=this._popupContainer.$content(),isSelectMode="select"===this.option("columnChooser.mode"),columnChooserList=this._columnChooserList,chooserColumns=this._columnsController.getChooserColumns(isSelectMode);if(this._popupContainer.setAria({role:"dialog",label:message.Z.format("dxDataGrid-columnChooserTitle")}),isSelectMode&&columnChooserList&&change&&"selection"===change.changeType){items=processItems(this,chooserColumns);for(var i=0;i<items.length;i++){var selected=items[i].selected,id=items[i].id;id===change.columnIndex&&(selected?columnChooserList.selectItem(id,selected):columnChooserList.unselectItem(id,selected))}}else isSelectMode&&columnChooserList&&"full"!==change||(this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix("column-chooser-mode-drag"),!isSelectMode).toggleClass(this.addWidgetPrefix("column-chooser-mode-select"),isSelectMode),items=processItems(this,chooserColumns),this._renderTreeView($popupContent,items))},_initializePopupContainer:function(){var that=this,columnChooserClass=that.addWidgetPrefix("column-chooser"),$element=that.element().addClass(columnChooserClass),columnChooserOptions=that.option("columnChooser"),themeName=(0,themes.Vk)(),isGenericTheme=(0,themes.OD)(themeName),isMaterial=(0,themes.x2)(themeName),dxPopupOptions={visible:!1,shading:!1,showCloseButton:!1,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:columnChooserClass},toolbarItems:[{text:columnChooserOptions.title,toolbar:"top",location:isGenericTheme||isMaterial?"before":"center"}],position:that.getController("columnChooser").getPosition(),width:columnChooserOptions.width,height:columnChooserOptions.height,rtlEnabled:that.option("rtlEnabled"),onHidden:function(){that._isWinDevice()&&(0,renderer.Z)("body").removeClass(that.addWidgetPrefix("notouch-action"))},container:columnChooserOptions.container};isGenericTheme||isMaterial?(0,extend.l)(dxPopupOptions,{showCloseButton:!0}):dxPopupOptions.toolbarItems[dxPopupOptions.toolbarItems.length]={shortcut:"cancel"},(0,utils_type.$K)(this._popupContainer)?this._popupContainer.option(dxPopupOptions):(that._popupContainer=that._createComponent($element,ui_popup.Z,dxPopupOptions),that._popupContainer.on("optionChanged",(function(args){"visible"===args.name&&that.renderCompleted.fire()})))},_renderCore:function(change){this._popupContainer&&this._updateList(change)},_renderTreeView:function($container,items){var that=this,columnChooser=this.option("columnChooser"),isSelectMode="select"===columnChooser.mode,treeViewConfig={items,dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:columnChooser.allowSearch,searchTimeout:columnChooser.searchTimeout,onItemRendered:function(e){if(e.itemData.disableCheckBox){var $checkBox,$treeViewNode=(0,renderer.Z)(e.itemElement).closest(".dx-treeview-node");if($treeViewNode.length&&($checkBox=$treeViewNode.find(".dx-checkbox")).length){var checkBoxInstance=$checkBox.data("dxCheckBox");checkBoxInstance&&checkBoxInstance.option("disabled",!0)}}}},scrollableInstance=$container.find(".dx-scrollable").data("dxScrollable"),scrollTop=scrollableInstance&&scrollableInstance.scrollTop();isSelectMode&&!this._columnsController.isBandColumnsUsed()&&$container.addClass(this.addWidgetPrefix("column-chooser-plain")),treeViewConfig.onContentReady=function(e){(0,common.Su)((function(){if(scrollTop){var scrollable=(0,renderer.Z)(e.element).find(".dx-scrollable").data("dxScrollable");scrollable&&scrollable.scrollTo({y:scrollTop})}that.renderCompleted.fire()}))},this._isWinDevice()&&(treeViewConfig.useNativeScrolling=!1),(0,extend.l)(treeViewConfig,isSelectMode?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList?(treeViewConfig.searchEnabled||(treeViewConfig.searchValue=""),this._columnChooserList.option(treeViewConfig)):(this._columnChooserList=this._createComponent($container,tree_view.Z,treeViewConfig),$container.addClass(this.addWidgetPrefix("column-chooser-list")))},_prepareDragModeConfig:function(){return{noDataText:this.option("columnChooser").emptyPanelText,activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,itemTemplate:function(data,index,item){(0,renderer.Z)(item).text(data.text).parent().addClass(data.cssClass).addClass("dx-column-chooser-item")}}},_prepareSelectModeConfig:function(){var that=this;return{selectNodesRecursive:!1,showCheckBoxesMode:"normal",onItemSelectionChanged:function(e){var visibleColumns=that._columnsController.getVisibleColumns().filter((function(item){return!item.command}));1===visibleColumns.length&&!e.itemData.selected?e.component.selectItem(e.itemElement):setTimeout((function(){that._columnsController.columnOption(e.itemData.id,"visible",e.itemData.selected)}),300)}}},_columnOptionChanged:function(e){var changeTypes=e.changeTypes,optionNames=e.optionNames,isSelectMode="select"===this.option("columnChooser.mode");if(this.callBase(e),isSelectMode){var needPartialRender=optionNames.visible&&1===optionNames.length&&void 0!==e.columnIndex,needFullRender=optionNames.showInColumnChooser||optionNames.caption||optionNames.visible||changeTypes.columns&&optionNames.all;needPartialRender?this.render(null,{changeType:"selection",columnIndex:e.columnIndex}):needFullRender&&this.render(null,"full")}},optionChanged:function(args){if("columnChooser"===args.name)this._initializePopupContainer(),this.render(null,"full");else this.callBase(args)},getColumnElements:function(){var $node,result=[],isSelectMode="select"===this.option("columnChooser.mode"),chooserColumns=this._columnsController.getChooserColumns(isSelectMode),$content=this._popupContainer&&this._popupContainer.$content(),$nodes=$content&&$content.find(".dx-treeview-node");return $nodes&&chooserColumns.forEach((function(column){var item=($node=$nodes.filter("[data-item-id = '"+column.index+"']")).length?$node.children(".dx-column-chooser-item").get(0):null;result.push(item)})),(0,renderer.Z)(result)},getName:function(){return"columnChooser"},getColumns:function(){return this._columnsController.getChooserColumns()},allowDragging:function(column,sourceLocation){var columnVisible=column&&column.allowHiding&&("columnChooser"!==sourceLocation||!column.visible&&this._columnsController.isParentColumnVisible(column.index));return this.isColumnChooserVisible()&&columnVisible},getBoundingRect:function(){var container=this._popupContainer&&this._popupContainer.$overlayContent();if(container&&container.is(":visible")){var offset=container.offset();return{left:offset.left,top:offset.top,right:offset.left+(0,size.Y_)(container),bottom:offset.top+(0,size.zp)(container)}}return null},showColumnChooser:function(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show(),this._isWinDevice()&&(0,renderer.Z)("body").addClass(this.addWidgetPrefix("notouch-action"))},hideColumnChooser:function(){this._popupContainer&&this._popupContainer.hide()},isColumnChooserVisible:function(){var popupContainer=this._popupContainer;return popupContainer&&popupContainer.option("visible")},publicMethods:function(){return["showColumnChooser","hideColumnChooser"]}},columnChooserModule={defaultOptions:function(){return{columnChooser:{enabled:!1,allowSearch:!1,searchTimeout:500,mode:"dragAndDrop",width:250,height:260,title:message.Z.format("dxDataGrid-columnChooserTitle"),emptyPanelText:message.Z.format("dxDataGrid-columnChooserEmptyText"),container:void 0}}},controllers:{columnChooser:ColumnChooserController},views:{columnChooserView:ColumnsView.inherit(columnChooserMembers)},extenders:{views:{headerPanel:{_getToolbarItems:function(){var items=this.callBase();return this._appendColumnChooserItem(items)},_appendColumnChooserItem:function(items){var that=this;if(that.option("columnChooser.enabled")){var hintText=that.option("columnChooser.title"),toolbarItem={widget:"dxButton",options:{icon:"column-chooser",onClick:function(){that.component.getView("columnChooserView").showColumnChooser()},hint:hintText,text:hintText,onInitialized:function(e){(0,renderer.Z)(e.element).addClass(that._getToolbarButtonClass(that.addWidgetPrefix("column-chooser-button")))},elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40};items.push(toolbarItem)}return items},optionChanged:function(args){if("columnChooser"===args.name)this._invalidate(),args.handled=!0;else this.callBase(args)},isVisible:function(){var columnChooserEnabled=this.option("columnChooser.enabled");return this.callBase()||columnChooserEnabled}}},controllers:{columns:{allowMoveColumn:function(fromVisibleIndex,toVisibleIndex,sourceLocation,targetLocation){return!("select"===this.option("columnChooser.mode")&&"columnChooser"===targetLocation)&&this.callBase(fromVisibleIndex,toVisibleIndex,sourceLocation,targetLocation)}}}}};module_core.registerModule("columnChooser",columnChooserModule);const masterDetailModule={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:{_getExpandColumnsCore(){const expandColumns=this.callBase();return this.option("masterDetail.enabled")&&expandColumns.push({type:"detailExpand",cellTemplate:module_utils.getExpandCellTemplate()}),expandColumns}},data:function(){const initMasterDetail=function(that){that._expandedItems=[],that._isExpandAll=that.option("masterDetail.autoExpandAll")};return{init(){initMasterDetail(this),this.callBase()},expandAll(groupIndex){const that=this;groupIndex<0?(that._isExpandAll=!0,that._expandedItems=[],that.updateItems()):that.callBase.apply(that,arguments)},collapseAll(groupIndex){const that=this;groupIndex<0?(that._isExpandAll=!1,that._expandedItems=[],that.updateItems()):that.callBase.apply(that,arguments)},isRowExpanded(key){const that=this,expandIndex=module_utils.getIndexByKey(key,that._expandedItems);return Array.isArray(key)?that.callBase.apply(that,arguments):!!(that._isExpandAll^(expandIndex>=0&&that._expandedItems[expandIndex].visible))},_getRowIndicesForExpand(key){const rowIndex=this.getRowIndexByKey(key);return[rowIndex,rowIndex+1]},_changeRowExpandCore(key){const that=this;let result;if(Array.isArray(key))result=that.callBase.apply(that,arguments);else{const expandIndex=module_utils.getIndexByKey(key,that._expandedItems);if(expandIndex>=0){const{visible}=that._expandedItems[expandIndex];that._expandedItems[expandIndex].visible=!visible}else that._expandedItems.push({key,visible:!0});that.updateItems({changeType:"update",rowIndices:that._getRowIndicesForExpand(key)}),result=(new utils_deferred.BH).resolve()}return result},_processDataItem(data,options){const dataItem=this.callBase.apply(this,arguments);return dataItem.isExpanded=this.isRowExpanded(dataItem.key),void 0===options.detailColumnIndex&&(options.detailColumnIndex=-1,(0,iterator.S6)(options.visibleColumns,((index,column)=>{if("expand"===column.command&&!(0,utils_type.$K)(column.groupIndex))return options.detailColumnIndex=index,!1}))),options.detailColumnIndex>=0&&(dataItem.values[options.detailColumnIndex]=dataItem.isExpanded),dataItem},_processItems(items,change){const that=this,{changeType}=change,result=[];return items=that.callBase.apply(that,arguments),"loadingAll"===changeType?items:("refresh"===changeType&&(that._expandedItems=(0,common.h3)(that._expandedItems,(item=>item.visible))),(0,iterator.S6)(items,((index,item)=>{result.push(item);const expandIndex=module_utils.getIndexByKey(item.key,that._expandedItems);"data"===item.rowType&&(item.isExpanded||expandIndex>=0)&&!item.isNewRow&&result.push({visible:item.isExpanded,rowType:"detail",key:item.key,data:item.data,values:[]})})),result)},optionChanged(args){const that=this;let isEnabledChanged,isAutoExpandAllChanged;if("masterDetail"===args.name){switch(args.name="dataSource",args.fullName){case"masterDetail":{const value=args.value||{},previousValue=args.previousValue||{};isEnabledChanged=value.enabled!==previousValue.enabled,isAutoExpandAllChanged=value.autoExpandAll!==previousValue.autoExpandAll;break}case"masterDetail.template":initMasterDetail(that);break;case"masterDetail.enabled":isEnabledChanged=!0;break;case"masterDetail.autoExpandAll":isAutoExpandAllChanged=!0}(isEnabledChanged||isAutoExpandAllChanged)&&initMasterDetail(that)}that.callBase(args)}}}(),resizing:{fireContentReadyAction(){this.callBase.apply(this,arguments),this._updateParentDataGrids(this.component.$element())},_updateParentDataGrids($element){const $masterDetailRow=$element.closest(".dx-master-detail-row");$masterDetailRow.length&&(0,utils_deferred.gx)(this._updateMasterDataGrid($masterDetailRow,$element)).done((()=>{this._updateParentDataGrids($masterDetailRow.parent())}))},_updateMasterDataGrid($masterDetailRow,$detailElement){const masterRowOptions=(0,renderer.Z)($masterDetailRow).data("options"),masterDataGrid=(0,renderer.Z)($masterDetailRow).closest("."+this.getWidgetContainerClass()).parent().data("dxDataGrid");if(masterRowOptions&&masterDataGrid)return this._updateMasterDataGridCore(masterDataGrid,masterRowOptions)},_updateMasterDataGridCore(masterDataGrid,masterRowOptions){const d=(0,utils_deferred.BH)();if(masterDataGrid.getView("rowsView").isFixedColumns())this._updateFixedMasterDetailGrids(masterDataGrid,masterRowOptions.rowIndex,(0,renderer.Z)(masterRowOptions.rowElement)).done(d.resolve);else{if(!0===masterDataGrid.option("scrolling.useNative"))return void masterDataGrid.updateDimensions().done((()=>d.resolve(!0)));const scrollable=masterDataGrid.getScrollable();scrollable?null==scrollable||scrollable.update().done((()=>d.resolve())):d.resolve()}return d.promise()},_updateFixedMasterDetailGrids(masterDataGrid,masterRowIndex,$detailElement){const d=(0,utils_deferred.BH)(),$rows=(0,renderer.Z)(masterDataGrid.getRowElement(masterRowIndex)),$tables=(0,renderer.Z)(masterDataGrid.getView("rowsView").getTableElements()),rowsNotEqual=2===(null==$rows?void 0:$rows.length)&&(0,size.Cr)($rows.eq(0))!==(0,size.Cr)($rows.eq(1)),tablesNotEqual=2===(null==$tables?void 0:$tables.length)&&(0,size.Cr)($tables.eq(0))!==(0,size.Cr)($tables.eq(1));if(rowsNotEqual||tablesNotEqual){const detailElementWidth=(0,size.dz)($detailElement);return masterDataGrid.updateDimensions().done((()=>{const isDetailHorizontalScrollCanBeShown=this.option("columnAutoWidth")&&!0===masterDataGrid.option("scrolling.useNative"),isDetailGridWidthChanged=isDetailHorizontalScrollCanBeShown&&detailElementWidth!==(0,size.dz)($detailElement);isDetailHorizontalScrollCanBeShown&&isDetailGridWidthChanged?this.updateDimensions().done((()=>d.resolve(!0))):d.resolve(!0)})),d.promise()}return(0,utils_deferred.BH)().resolve()},_toggleBestFitMode(isBestFit){if(this.callBase.apply(this,arguments),this.option("masterDetail.template")){const $rowsTable=this._rowsView.getTableElement();$rowsTable&&$rowsTable.find(".dx-master-detail-cell").css("maxWidth",isBestFit?0:"")}}}},views:{rowsView:{_getCellTemplate(options){const that=this,{column}=options,editingController=that.getController("editing"),isEditRow=editingController&&editingController.isEditRow(options.rowIndex);let template;return template="detail"!==column.command||isEditRow?that.callBase.apply(that,arguments):that.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:that._getDefaultTemplate(column)},template},_isDetailRow:row=>row&&row.rowType&&0===row.rowType.indexOf("detail"),_createRow(row){const $row=this.callBase.apply(this,arguments);return row&&this._isDetailRow(row)&&(this.option("showRowLines")&&$row.addClass("dx-row-lines"),$row.addClass("dx-master-detail-row"),(0,utils_type.$K)(row.visible)&&$row.toggle(row.visible)),$row},_renderCells($row,options){const{row}=options;let $detailCell;const visibleColumns=this._columnsController.getVisibleColumns();row.rowType&&this._isDetailRow(row)?this._needRenderCell(0,options.columnIndices)&&($detailCell=this._renderCell($row,{value:null,row,rowIndex:row.rowIndex,column:{command:"detail"},columnIndex:0,change:options.change}),$detailCell.addClass("dx-cell-focus-disabled").addClass("dx-master-detail-cell").attr("colSpan",visibleColumns.length)):this.callBase.apply(this,arguments)}}}}};module_core.registerModule("masterDetail",(0,extend.l)(!0,{},masterDetailModule,{extenders:{controllers:{data:{isRowExpanded(){return this.callBase.apply(this,arguments)},_processItems(){return this.callBase.apply(this,arguments)},_processDataItem(){return this.callBase.apply(this,arguments)}}}}}));var text_box=__webpack_require__("./node_modules/devextreme/esm/ui/text_box.js"),getRealSeparatorIndex=function(str){for(var quoteBalance=0,separatorCount=0,i=0;i<str.length;++i)if("'"===str[i]&&quoteBalance++,"."===str[i]&&(++separatorCount,quoteBalance%2==0))return{occurrence:separatorCount,index:i};return{occurrence:1,index:-1}},getNthOccurrence=function(str,c,n){for(var i=-1;n--&&i++<str.length;)i=str.indexOf(c,i);return i},splitByIndex=function(str,index){return-1===index?[str]:[str.slice(0,index),str.slice(index+1)]},getCaretBoundaries=function(text,format){if("string"==typeof format){var signParts=format.split(";"),sign=number.Z.getSign(text,format);signParts[1]=signParts[1]||"-"+signParts[0],format=(format=signParts[sign<0?1:0]).replace(/'([^']*)'/g,(str=>str.split("").map((()=>" ")).join("").substr(2)));var prefixStubLength=/^[^#0.,]*/.exec(format)[0].length,postfixStubLength=/[^#0.,]*$/.exec(format)[0].length;return{start:prefixStubLength,end:text.length-postfixStubLength}}return{start:0,end:text.length}},_getDigitCountBeforeIndex=function(index,text){var decimalSeparator=number.Z.getDecimalSeparator(),regExp=new RegExp("[^0-9"+(0,common.hr)(decimalSeparator)+"]","g");return text.slice(0,index).replace(regExp,"").length},_reverseText=function(text){return text.split("").reverse().join("")},_getDigitPositionByIndex=function(digitIndex,text){if(!digitIndex)return-1;for(var regExp=/[0-9]/g,counter=1,index=null,result=regExp.exec(text);result;){if(index=result.index,counter>=digitIndex)return index;counter++,result=regExp.exec(text)}return null===index?text.length:index},getCaretWithOffset=function(caret,offset){return void 0===caret.start&&(caret={start:caret,end:caret}),{start:caret.start+offset,end:caret.end+offset}};function getCaretInBoundaries(caret,text,format){caret=getCaretWithOffset(caret,0);var boundaries=getCaretBoundaries(text,format);return{start:(0,math.n$)(caret.start,boundaries.start,boundaries.end),end:(0,math.n$)(caret.end,boundaries.start,boundaries.end)}}var ldml_number=__webpack_require__("./node_modules/devextreme/esm/localization/ldml/number.js"),ui_text_editor=__webpack_require__("./node_modules/devextreme/esm/ui/text_box/ui.text_editor.js"),texteditor_button_collection_button=__webpack_require__("./node_modules/devextreme/esm/ui/text_box/texteditor_button_collection/button.js"),emitter_feedback=__webpack_require__("./node_modules/devextreme/esm/events/core/emitter.feedback.js"),POINTERUP_EVENT_NAME=(0,events_utils.V4)(pointer.Z.up,"dxNumberBox"),POINTERCANCEL_EVENT_NAME=(0,events_utils.V4)(pointer.Z.cancel,"dxNumberBox");const number_box_spin=ui_widget.default.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup:function(){this.callBase();var direction="dx-numberbox-spin-"+this.option("direction");this.$element().addClass("dx-numberbox-spin-button").addClass(direction),this._spinIcon=(0,renderer.Z)("<div>").addClass(direction+"-icon").appendTo(this.$element())},_render:function(){this.callBase();var eventName=(0,events_utils.V4)(pointer.Z.down,this.NAME),$element=this.$element();events_engine.Z.off($element,eventName),events_engine.Z.on($element,eventName,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler:function(e){e.preventDefault(),this._clearTimer(),events_engine.Z.on(this.$element(),hold.Z.name,function(){this._feedBackDeferred=new utils_deferred.BH,(0,emitter_feedback.dR)(this._feedBackDeferred),this._spinChangeHandler({event:e}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:e})}.bind(this));var document=dom_adapter.Z.getDocument();events_engine.Z.on(document,POINTERUP_EVENT_NAME,this._clearTimer.bind(this)),events_engine.Z.on(document,POINTERCANCEL_EVENT_NAME,this._clearTimer.bind(this)),this._spinChangeHandler({event:e})},_dispose:function(){this._clearTimer(),this.callBase()},_clearTimer:function(){events_engine.Z.off(this.$element(),hold.Z.name);var document=dom_adapter.Z.getDocument();events_engine.Z.off(document,POINTERUP_EVENT_NAME),events_engine.Z.off(document,POINTERCANCEL_EVENT_NAME),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged:function(args){switch(args.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(args)}}});class SpinButtons extends texteditor_button_collection_button.Z{_attachEvents(instance,$spinContainer){var{editor}=this,eventName=(0,events_utils.V4)(pointer.Z.down,editor.NAME),$spinContainerChildren=$spinContainer.children(),pointerDownAction=editor._createAction((e=>editor._spinButtonsPointerDownHandler(e)));events_engine.Z.off($spinContainer,eventName),events_engine.Z.on($spinContainer,eventName,(e=>pointerDownAction({event:e}))),number_box_spin.getInstance($spinContainerChildren.eq(0)).option("onChange",(e=>editor._spinUpChangeHandler(e))),number_box_spin.getInstance($spinContainerChildren.eq(1)).option("onChange",(e=>editor._spinDownChangeHandler(e)))}_create(){var{editor}=this,$spinContainer=(0,renderer.Z)("<div>").addClass("dx-numberbox-spin-container"),$spinUp=(0,renderer.Z)("<div>").appendTo($spinContainer),$spinDown=(0,renderer.Z)("<div>").appendTo($spinContainer),options=this._getOptions();return this._addToContainer($spinContainer),editor._createComponent($spinUp,number_box_spin,(0,extend.l)({direction:"up"},options)),editor._createComponent($spinDown,number_box_spin,(0,extend.l)({direction:"down"},options)),this._legacyRender(editor.$element(),this._isTouchFriendly(),options.visible),{instance:$spinContainer,$element:$spinContainer}}_getOptions(){var{editor}=this;return{visible:this._isVisible(),disabled:editor.option("disabled")}}_isVisible(){var{editor}=this;return super._isVisible()&&editor.option("showSpinButtons")}_isTouchFriendly(){var{editor}=this;return editor.option("showSpinButtons")&&editor.option("useLargeSpinButtons")}_legacyRender($editor,isTouchFriendly,isVisible){$editor.toggleClass("dx-numberbox-spin-touch-friendly",isTouchFriendly),$editor.toggleClass("dx-numberbox-spin",isVisible)}update(){if(super.update()){var{editor,instance}=this,$editor=editor.$element(),isVisible=this._isVisible(),isTouchFriendly=this._isTouchFriendly(),$spinButtons=instance.children(),spinUp=number_box_spin.getInstance($spinButtons.eq(0)),spinDown=number_box_spin.getInstance($spinButtons.eq(1)),options=this._getOptions();spinUp.option(options),spinDown.option(options),this._legacyRender($editor,isTouchFriendly,isVisible)}}}var number_box_base_math=Math,FIREFOX_CONTROL_KEYS=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],NumberBoxBase=ui_text_editor.Z.inherit({_supportedKeys:function(){return(0,extend.l)(this.callBase(),{upArrow:function(e){(0,events_utils.j1)(e)||(e.preventDefault(),e.stopPropagation(),this._spinUpChangeHandler(e))},downArrow:function(e){(0,events_utils.j1)(e)||(e.preventDefault(),e.stopPropagation(),this._spinDownChangeHandler(e))},enter:function(){}})},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:message.Z.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:function(){return!1},_getDefaultButtons:function(){return this.callBase().concat([{name:"spins",Ctor:SpinButtons}])},_isSupportInputMode:function(){var version=parseFloat(browser.Z.version);return browser.Z.chrome&&version>=66||browser.Z.safari&&version>=12},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return devices.Z.real().generic&&!devices.Z.isSimulator()},options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==devices.Z.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup:function(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes:function(){var attributes=this.callBase();return attributes.inputmode="decimal",attributes},_renderContentImpl:function(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement:function(){this._$submitElement=(0,renderer.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(value){this._getSubmitElement().val((0,common.FH)(value))},_getSubmitElement:function(){return this._$submitElement},_keyPressHandler:function(e){this.callBase(e);var char=(0,events_utils.qK)(e);if(!/[\d.,eE\-+]/.test(char)){var keyName=(0,events_utils.EV)(e);if((0,events_utils.j1)(e)||keyName&&FIREFOX_CONTROL_KEYS.includes(keyName))return;return e.preventDefault(),!1}this._keyPressed=!0},_onMouseWheel:function(dxEvent){dxEvent.delta>0?this._spinValueChange(1,dxEvent):this._spinValueChange(-1,dxEvent)},_renderValue:function(){var inputValue=this._input().val(),value=this.option("value");inputValue.length&&Number(inputValue)===value||(this._forceValueRender(),this._toggleEmptinessEventHandler());var valueText=(0,utils_type.$K)(value)?null:message.Z.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,common.IS)(value,""),valuetext:valueText}),this.option("text",this._input().val()),this._updateButtons(),(new utils_deferred.BH).resolve()},_forceValueRender:function(){var value=this.option("value"),number=Number(value),formattedValue=isNaN(number)?"":this._applyDisplayValueFormatter(value);this._renderDisplayText(formattedValue)},_applyDisplayValueFormatter:function(value){return this.option("displayValueFormatter")(value)},_renderProps:function(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,common.IS)(this.option("min"),""),valuemax:(0,common.IS)(this.option("max"),"")})},_spinButtonsPointerDownHandler:function(){var $input=this._input();this.option("useLargeSpinButtons")||dom_adapter.Z.getActiveElement()===$input[0]||events_engine.Z.trigger($input,"focus")},_spinUpChangeHandler:function(e){this.option("readOnly")||this._spinValueChange(1,e.event||e)},_spinDownChangeHandler:function(e){this.option("readOnly")||this._spinValueChange(-1,e.event||e)},_spinValueChange:function(sign,dxEvent){var step=parseFloat(this.option("step"));if(0!==step){var value=parseFloat(this._normalizeInputValue())||0;value=this._correctRounding(value,step*sign);var min=this.option("min"),max=this.option("max");(0,utils_type.$K)(min)&&(value=Math.max(min,value)),(0,utils_type.$K)(max)&&(value=Math.min(max,value)),this._saveValueChangeEvent(dxEvent),this.option("value",value)}},_correctRounding:function(value,step){var regex=/[,.](.*)/,isFloatValue=regex.test(value),isFloatStep=regex.test(step);if(isFloatValue||isFloatStep){var valueAccuracy=isFloatValue?regex.exec(value)[0].length:0,stepAccuracy=isFloatStep?regex.exec(step)[0].length:0,accuracy=number_box_base_math.max(valueAccuracy,stepAccuracy);return value=this._round(value+step,accuracy)}return value+step},_round:function(value,precision){precision=precision||0;var multiplier=Math.pow(10,precision);return value*=multiplier,value=Math.round(value)/multiplier},_renderValueChangeEvent:function(){this.callBase();var forceValueChangeEvent=(0,events_utils.V4)("focusout","NumberBoxForceValueChange");events_engine.Z.off(this.element(),forceValueChangeEvent),events_engine.Z.on(this.element(),forceValueChangeEvent,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue:function(){if("number"!==this.option("mode")){var $input=this._input(),formattedValue=this._applyDisplayValueFormatter(this.option("value"));$input.val(null),$input.val(formattedValue)}},_valueChangeEventHandler:function(e){var $input=this._input(),inputValue=this._normalizeText(),value=this._parseValue(inputValue),valueHasDigits="."!==inputValue&&"-"!==inputValue;!this._isValueValid()||this._validateValue(value)?(valueHasDigits&&this.callBase(e,isNaN(value)?null:value),this._applyValueBoundaries(inputValue,value),this.validationRequest.fire({value,editor:this})):$input.val(this._applyDisplayValueFormatter(value))},_applyValueBoundaries:function(inputValue,parsedValue){var isValueIncomplete=this._isValueIncomplete(inputValue),isValueCorrect=this._isValueInRange(inputValue);isValueIncomplete||isValueCorrect||null===parsedValue||Number(inputValue)!==parsedValue&&this._input().val(this._applyDisplayValueFormatter(parsedValue))},_replaceCommaWithPoint:function(value){return value.replace(",",".")},_inputIsInvalid:function(){var isNumberMode="number"===this.option("mode"),validityState=this._input().get(0).validity;return isNumberMode&&validityState&&validityState.badInput},_renderDisplayText:function(text){this._inputIsInvalid()||this.callBase(text)},_isValueIncomplete:function(value){return/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(value)},_isValueInRange:function(value){return(0,math.Z2)(value,this.option("min"),this.option("max"))},_isNumber:function(value){return null!==this._parseValue(value)},_validateValue:function(value){var inputValue=this._normalizeText(),isValueValid=this._isValueValid(),isValid=!0,isNumber=this._isNumber(inputValue);return isNaN(Number(value))&&(isValid=!1),!value&&isValueValid?isValid=!0:isNumber||isValueValid||(isValid=!1),this.option({isValid,validationError:isValid?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),isValid},_normalizeInputValue:function(){return this._parseValue(this._normalizeText())},_normalizeText:function(){var value=this._input().val().trim();return this._replaceCommaWithPoint(value)},_parseValue:function(value){var number=parseFloat(value);return isNaN(number)?null:(0,math.n$)(number,this.option("min"),this.option("max"))},_clearValue:function(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},reset:function(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged:function(args){switch(args.name){case"value":this._validateValue(args.value),this._setSubmitValue(args.value),this.callBase(args),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(args)}}});var NumberBoxMask=NumberBoxBase.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:function(key){return"del"===key},_supportedKeys:function(){return this._useMaskBehavior()?(0,extend.l)(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex:function(text){var decimalSeparator=number.Z.getDecimalSeparator(),realSeparatorOccurrenceIndex=getRealSeparatorIndex(this.option("format")).occurrence;return getNthOccurrence(text,decimalSeparator,realSeparatorOccurrenceIndex)},_focusInHandler:function(e){this._preventNestedFocusEvent(e)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0;var caret=this._caret();if(caret.start===caret.end&&this._useMaskBehavior()){var text=this._getInputVal(),decimalSeparatorIndex=this._getTextSeparatorIndex(text);decimalSeparatorIndex>=0?this._caret({start:decimalSeparatorIndex,end:decimalSeparatorIndex}):this._moveCaretToBoundaryEventHandler(-1,e)}}.bind(this),0)),this.callBase(e)},_focusOutHandler:function(e){var shouldHandleEvent=!this._preventNestedFocusEvent(e);shouldHandleEvent&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(e),shouldHandleEvent&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(inputValue){var format=this._getFormatPattern(),value=this.option("value");return(this._format(value,format)||"")!==inputValue},_updateFormattedValue:function(){var inputValue=this._getInputVal();this._hasValueBeenChanged(inputValue)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&events_engine.Z.trigger(this._input(),"change"))},_arrowHandler:function(step,e){if(this._useMaskBehavior()){var text=this._getInputVal(),format=this._getFormatPattern(),nextCaret=getCaretWithOffset(this._caret(),step);(function(caret,text,format){var boundaries=getCaretInBoundaries(caret=getCaretWithOffset(caret,0),text,format);return caret.start>=boundaries.start&&caret.end<=boundaries.end})(nextCaret,text,format)||(nextCaret=1===step?nextCaret.end:nextCaret.start,e.preventDefault(),this._caret(getCaretInBoundaries(nextCaret,text,format)))}},_moveCaretToBoundary:function(direction){var boundaries=getCaretBoundaries(this._getInputVal(),this._getFormatPattern()),newCaret=getCaretWithOffset(1===direction?boundaries.start:boundaries.end,0);this._caret(newCaret)},_moveCaretToBoundaryEventHandler:function(direction,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(direction),e&&e.preventDefault())},_shouldMoveCaret:function(text,caret){var decimalSeparator=number.Z.getDecimalSeparator(),isDecimalSeparatorNext=text.charAt(caret.end)===decimalSeparator;return(this._lastKey===decimalSeparator||"."===this._lastKey||","===this._lastKey)&&isDecimalSeparatorNext},_getInputVal:function(){return number.Z.convertDigits(this._input().val(),!0)},_keyboardHandler:function(e){if(this.clearCaretTimeout(),this._lastKey=number.Z.convertDigits((0,events_utils.qK)(e),!0),this._lastKeyName=(0,events_utils.EV)(e),!this._shouldHandleKey(e.originalEvent))return this.callBase(e);var normalizedText=this._getInputVal(),caret=this._caret(),enteredChar="minus"===this._lastKeyName?"":this._lastKey,newValue=this._tryParse(normalizedText,caret,enteredChar);return this._shouldMoveCaret(normalizedText,caret)&&(this._moveCaret(1),e.originalEvent.preventDefault()),void 0===newValue?"minus"!==this._lastKeyName&&e.originalEvent.preventDefault():this._parsedValue=newValue,this.callBase(e)},_keyPressHandler:function(e){this._useMaskBehavior()||this.callBase(e)},_removeHandler:function(e){var caret=this._caret(),text=this._getInputVal(),start=caret.start,end=caret.end;this._lastKey=(0,events_utils.qK)(e),this._lastKeyName=(0,events_utils.EV)(e);var isDeleteKey=this._isDeleteKey(this._lastKeyName),isBackspaceKey=!isDeleteKey;if(start===end){if(!(isBackspaceKey&&start>0||isDeleteKey&&start<text.length))return void e.preventDefault();isDeleteKey&&end++,isBackspaceKey&&start--}var char=text.slice(start,end);if(this._isStub(char))return this._moveCaret(isDeleteKey?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(e),this._setTextByParsedValue()),void e.preventDefault();var decimalSeparator=number.Z.getDecimalSeparator();if(char!==decimalSeparator){if(end-start<text.length)if(this._replaceSelectedText(text,{start,end},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);var valueAfterRemoving=this._tryParse(text,{start,end},"");void 0===valueAfterRemoving?e.preventDefault():this._parsedValue=valueAfterRemoving}else{var decimalSeparatorIndex=text.indexOf(decimalSeparator);this._isNonStubAfter(decimalSeparatorIndex+1)&&(this._moveCaret(isDeleteKey?1:-1),e.preventDefault())}},_isPercentFormat:function(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse:function(text,format){var formatOption=this.option("format"),isCustomParser=(0,utils_type.mf)(formatOption.parser),parser=isCustomParser?formatOption.parser:number.Z.parse,integerPartStartIndex=0;if(!isCustomParser){var formatPointIndex=getRealSeparatorIndex(format).index,textPointIndex=this._getTextSeparatorIndex(text),formatIntegerPartLength=-1!==formatPointIndex?formatPointIndex:format.length,textIntegerPartLength=-1!==textPointIndex?textPointIndex:text.length;textIntegerPartLength>formatIntegerPartLength&&-1===format.indexOf("#")&&(integerPartStartIndex=textIntegerPartLength-formatIntegerPartLength)}return parser(text=text.substr(integerPartStartIndex),format)},_format:function(value,format){var formatOption=this.option("format"),customFormatter=(null==formatOption?void 0:formatOption.formatter)||formatOption,formatter=(0,utils_type.mf)(customFormatter)?customFormatter:number.Z.format;return null===value?"":formatter(value,format)},_getFormatPattern:function(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat:function(){var format=this.option("format"),isCustomParser=(0,utils_type.mf)(null==format?void 0:format.parser),isLDMLPattern=(0,utils_type.HD)(format)&&(format.indexOf("0")>=0||format.indexOf("#")>=0),isExponentialFormat="exponential"===format||"exponential"===(null==format?void 0:format.type),shouldUseFormatAsIs=isCustomParser||isLDMLPattern||isExponentialFormat;this._currentFormat=shouldUseFormatAsIs?format:(0,ldml_number.y)((value=>{var text=this._format(value,format);return number.Z.convertDigits(text,!0)}))},_getFormatForSign:function(text){var format=this._getFormatPattern();if((0,utils_type.HD)(format)){var signParts=format.split(";"),sign=number.Z.getSign(text,format);return signParts[1]=signParts[1]||"-"+signParts[0],sign<0?signParts[1]:signParts[0]}return number.Z.getSign(text)<0?"-":""},_removeStubs:function(text,excludeComma){var format=this._getFormatForSign(text),thousandsSeparator=number.Z.getThousandsSeparator(),stubs=this._getStubs(format),result=text;if(stubs.length){var prefixStubs=stubs[0],postfixRegex=new RegExp("("+(0,common.hr)(stubs[1]||"")+")$","g"),decoratorsRegex=new RegExp("[-"+(0,common.hr)(excludeComma?"":thousandsSeparator)+"]","g");result=result.replace(prefixStubs,"").replace(postfixRegex,"").replace(decoratorsRegex,"")}return result},_getStubs:function(format){var regExpResult=/[^']([#0.,]+)/g.exec(format),pattern=regExpResult&&regExpResult[0].trim();return format.split(pattern).map((function(stub){return stub.replace(/'/g,"")}))},_truncateToPrecision:function(value,maxPrecision){if((0,utils_type.$K)(value)){var strValue=value.toString(),decimalSeparatorIndex=strValue.indexOf(".");if(strValue&&decimalSeparatorIndex>-1){var parsedValue=parseFloat(strValue.substr(0,decimalSeparatorIndex+maxPrecision+1));return isNaN(parsedValue)?value:parsedValue}}return value},_tryParse:function(text,selection,char){var editedText=this._replaceSelectedText(text,selection,char),format=this._getFormatPattern(),isTextSelected=selection.start!==selection.end,parsedValue=this._getParsedValue(editedText,format),maxPrecision=!format.parser&&this._getPrecisionLimits(editedText).max,isValueChanged=parsedValue!==this._parsedValue,isDecimalPointRestricted=char===number.Z.getDecimalSeparator()&&0===maxPrecision,isUselessCharRestricted=!isTextSelected&&!isValueChanged&&"-"!==char&&!this._isValueIncomplete(editedText)&&this._isStub(char);if(!isDecimalPointRestricted&&!isUselessCharRestricted&&(""===this._removeStubs(editedText)&&(parsedValue=Math.abs(0*this._parsedValue)),!isNaN(parsedValue))){var rawValue,precision,value=null===parsedValue?this._parsedValue:parsedValue;return parsedValue=maxPrecision?this._truncateToPrecision(value,maxPrecision):parsedValue,!format.parser&&this._isPercentFormat()?(precision=maxPrecision,(rawValue=parsedValue)&&(0,math.zB)(rawValue/100,precision)):parsedValue}},_getParsedValue:function(text,format){var sign=number.Z.getSign(text,(null==format?void 0:format.formatter)||format),textWithoutStubs=this._removeStubs(text,!0),parsedValue=this._parse(textWithoutStubs,format),parsedValueSign=parsedValue<0?-1:1;return(0,utils_type.kE)(parsedValue)&&sign!==parsedValueSign?sign*parsedValue:parsedValue},_isValueIncomplete:function(text){if(!this._useMaskBehavior())return this.callBase(text);var caret=this._caret(),point=number.Z.getDecimalSeparator(),pointIndex=this._getTextSeparatorIndex(text),isCaretOnFloat=pointIndex>=0&&pointIndex<caret.start,textParts=this._removeStubs(text,!0).split(point);if(!isCaretOnFloat||2!==textParts.length)return!1;var floatLength=textParts[1].length,isCustomParser=!!this._getFormatPattern().parser,precision=!isCustomParser&&this._getPrecisionLimits(this._getFormatPattern(),text),isPrecisionInRange=!!isCustomParser||(0,math.Z2)(floatLength,precision.min,precision.max),endsWithZero="0"===textParts[1].charAt(floatLength-1);return isPrecisionInRange&&(endsWithZero||!floatLength)},_isValueInRange:function(value){var min=(0,common.IS)(this.option("min"),-1/0),max=(0,common.IS)(this.option("max"),1/0);return(0,math.Z2)(value,min,max)},_setInputText:function(text){var normalizedText=number.Z.convertDigits(text,!0),newCaret=function(text,formatted,caret,format){caret=getCaretWithOffset(caret,0);var point=number.Z.getDecimalSeparator(),isSeparatorBasedText=function isSeparatorBasedString(text){return 1===text.length&&!!text.match(/^[,.][0-9]*$/g)}(text),realSeparatorOccurrenceIndex=getRealSeparatorIndex(format).occurrence,pointPosition=isSeparatorBasedText?0:getNthOccurrence(text,point,realSeparatorOccurrenceIndex),newPointPosition=getNthOccurrence(formatted,point,realSeparatorOccurrenceIndex),textParts=splitByIndex(text,pointPosition),formattedParts=splitByIndex(formatted,newPointPosition);if(-1!==pointPosition&&caret.start>pointPosition){var relativeIndex=caret.start-pointPosition-1,digitsBefore=_getDigitCountBeforeIndex(relativeIndex,textParts[1]);return getCaretInBoundaries(formattedParts[1]?newPointPosition+1+_getDigitPositionByIndex(digitsBefore,formattedParts[1])+1:formatted.length,formatted,format)}var formattedIntPart=function(text){return text.replace(/[^0-9e]+$/,"")}(formattedParts[0]),positionFromEnd=textParts[0].length-caret.start,digitsFromEnd=_getDigitCountBeforeIndex(positionFromEnd,_reverseText(textParts[0])),newPositionFromEnd=_getDigitPositionByIndex(digitsFromEnd,_reverseText(formattedIntPart));return getCaretInBoundaries(formattedIntPart.length-(newPositionFromEnd+1),formatted,format)}(this._getInputVal(),normalizedText,this._caret(),this._getFormatPattern());this._input().val(text),this._toggleEmptinessEventHandler(),this._formattedValue=text,this._focusOutOccurs||this._caret(newCaret)},_useMaskBehavior:function(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType:function(){var isNumberType="number"===this.option("mode"),isDesktop="desktop"===devices.Z.real().deviceType;this._useMaskBehavior()&&isNumberType?this._setInputType(isDesktop||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:function(str){return(0,utils_type.HD)(str)&&1===str.length},_moveCaret:function(offset){if(offset){var adjustedCaret=getCaretInBoundaries(getCaretWithOffset(this._caret(),offset),this._getInputVal(),this._getFormatPattern());this._caret(adjustedCaret)}},_shouldHandleKey:function(e){var keyName=(0,events_utils.EV)(e),isSpecialChar=(0,events_utils.j1)(e)||e.altKey||e.shiftKey||!this._isChar(keyName),isMinusKey="minus"===keyName;return this._useMaskBehavior()&&!isSpecialChar&&!isMinusKey},_renderInput:function(){this.callBase(),this._renderFormatter()},_renderFormatter:function(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents:function(){events_engine.Z.off(this._input(),".dxNumberFormatter")},_isInputFromPaste:function(e){var inputType=e.originalEvent&&e.originalEvent.inputType;return(0,utils_type.$K)(inputType)?"insertFromPaste"===inputType:this._isValuePasted},_attachFormatterEvents:function(){var $input=this._input();events_engine.Z.on($input,(0,events_utils.V4)("input","dxNumberFormatter"),function(e){this._formatValue(e),this._isValuePasted=!1}.bind(this)),events_engine.Z.on($input,(0,events_utils.V4)("dxclick","dxNumberFormatter"),function(){this._caretTimeout||(this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0,this._caret(getCaretInBoundaries(this._caret(),this._getInputVal(),this._getFormatPattern()))}.bind(this),0))}.bind(this)),events_engine.Z.on($input,"dxdblclick",function(){this.clearCaretTimeout()}.bind(this))},clearCaretTimeout:function(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue:function(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter:function(index){var text=this._getInputVal().slice(index);return text&&!this._isStub(text,!0)},_isStub:function(str,isString){var escapedDecimalSeparator=(0,common.hr)(number.Z.getDecimalSeparator());return new RegExp("^[^0-9"+escapedDecimalSeparator+"]+$","g").test(str)&&(isString||this._isChar(str))},_parseValue:function(text){return this._useMaskBehavior()?this._parsedValue:this.callBase(text)},_getPrecisionLimits:function(text){var currentFormat=this._getFormatForSign(text),realSeparatorIndex=getRealSeparatorIndex(currentFormat).index,floatPart=(splitByIndex(currentFormat,realSeparatorIndex)[1]||"").replace(/[^#0]/g,"");return{min:floatPart.replace(/^(0*)#*/,"$1").length,max:floatPart.length}},_revertSign:function(e){if(this._useMaskBehavior()){var caret=this._caret();if(caret.start!==caret.end){if("minus"===(0,events_utils.EV)(e))return void this._applyRevertedSign(e,caret,!0);this._caret(getCaretInBoundaries(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(e,caret)}},_applyRevertedSign:function(e,caret,preserveSelectedText){var newValue=-1*(0,common.IS)(this._parsedValue,null);if((this._isValueInRange(newValue)||0===newValue)&&(this._parsedValue=newValue,preserveSelectedText)){var format=this._getFormatPattern(),previousText=this._getInputVal();this._setTextByParsedValue(),e.preventDefault();var currentText=this._getInputVal(),offset=function(previousText,newText,format){var previousBoundaries=getCaretBoundaries(previousText,format);return getCaretBoundaries(newText,format).start-previousBoundaries.start}(previousText,currentText,format),caretInBoundaries=getCaretInBoundaries(caret=getCaretWithOffset(caret,offset),currentText,format);this._caret(caretInBoundaries)}},_removeMinusFromText:function(text,caret){return"minus"===this._lastKeyName&&"-"===text.charAt(caret.start-1)?this._replaceSelectedText(text,{start:caret.start-1,end:caret.start},""):text},_setTextByParsedValue:function(){var format=this._getFormatPattern(),parsed=this._parseValue(),formatted=this._format(parsed,format)||"";this._setInputText(formatted)},_formatValue:function(e){var normalizedText=this._getInputVal(),caret=this._caret(),textWithoutMinus=this._removeMinusFromText(normalizedText,caret),wasMinusRemoved=textWithoutMinus!==normalizedText;if(normalizedText=textWithoutMinus,!this._isInputFromPaste(e)&&this._isValueIncomplete(textWithoutMinus))return this._formattedValue=normalizedText,void(wasMinusRemoved&&this._setTextByParsedValue());if(number.Z.convertDigits(this._formattedValue,!0)!==normalizedText){var value=this._tryParse(normalizedText,caret,"");(0,utils_type.$K)(value)&&(this._parsedValue=value)}this._setTextByParsedValue()},_renderDisplayText:function(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue:function(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue:function(){var inputValue=this._getInputVal();this._parsedValue=this._tryParse(inputValue,this._caret())},_adjustParsedValue:function(){if(this._useMaskBehavior()){var parsedValue=this._removeStubs(this._getInputVal())?this._parseValue():null;(0,utils_type.kE)(parsedValue)?this._parsedValue=(0,math.n$)(parsedValue,this.option("min"),this.option("max")):this._parsedValue=parsedValue}},_valueChangeEventHandler:function(e){if(!this._useMaskBehavior())return this.callBase(e);var caret=this._caret();this._saveValueChangeEvent(e),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),caret&&this._caret(caret)},_optionChanged:function(args){switch(args.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(args);break;default:this.callBase(args)}},_clearCache:function(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean:function(){this._clearCache(),this.callBase()}});const number_box_mask=NumberBoxMask;(0,component_registrator.Z)("dxNumberBox",number_box_mask);const ui_number_box=number_box_mask;var check_box=__webpack_require__("./node_modules/devextreme/esm/ui/check_box.js"),selectors=__webpack_require__("./node_modules/devextreme/esm/ui/widget/selectors.js");class DropDownButton extends texteditor_button_collection_button.Z{constructor(name,editor,options){super(name,editor,options),this.currentTemplate=null}_attachEvents(instance){var{editor}=this;instance.option("onClick",(e=>{!editor.option("openOnFieldClick")&&editor._openHandler(e)})),events_engine.Z.on(instance.$element(),"mousedown",(e=>{editor.$element().is(".dx-state-focused")&&e.preventDefault()}))}_create(){var{editor}=this,$element=(0,renderer.Z)("<div>"),options=this._getOptions();this._addToContainer($element);var instance=editor._createComponent($element,ui_button.Z,(0,extend.l)({},options,{elementAttr:{"aria-label":message.Z.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(editor.$element(),$element,options.visible),{$element,instance}}_getOptions(){var{editor}=this,visible=this._isVisible(),options={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:editor.option("readOnly"),visible};return this._addTemplate(options),options}_isVisible(){var{editor}=this;return super._isVisible()&&editor.option("showDropDownButton")}_legacyRender($editor,$element,isVisible){$editor.toggleClass("dx-dropdowneditor-button-visible",isVisible),$element&&$element.removeClass("dx-button").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(options){this._isSameTemplate()||(options.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){var{editor,instance}=this,$editor=editor.$element(),options=this._getOptions();null==instance||instance.option(options),this._legacyRender($editor,null==instance?void 0:instance.$element(),options.visible)}}}var function_template=__webpack_require__("./node_modules/devextreme/esm/core/templates/function_template.js"),getElementWidth=function($element){if((0,utils_window.Ym)())return(0,size.Y_)($element)},getSizeValue=function(size){return null===size&&(size=void 0),"function"==typeof size&&(size=size()),size},translator=__webpack_require__("./node_modules/devextreme/esm/animation/translator.js"),isIOs="ios"===devices.Z.current().platform,DropDownEditor=text_box.Z.inherit({_supportedKeys:function(){return(0,extend.l)({},this.callBase(),{tab:function(e){if(this.option("opened"))if("instantly"!==this.option("applyValueMode")){var $focusableElement=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();$focusableElement&&(events_engine.Z.trigger($focusableElement,"focus"),$focusableElement.select()),e.preventDefault()}else this.close()},escape:function(e){return this.option("opened")&&e.preventDefault(),this.close(),!0},upArrow:function(e){return!(!(0,events_utils.j1)(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey))||(this.close(),!1)},downArrow:function(e){return!(!(0,events_utils.j1)(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey))||(this._validatedOpening(),!1)},enter:function(e){return this.option("opened")&&(e.preventDefault(),this._valueChangeEventHandler(e)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:DropDownButton}])},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:message.Z.format("OK"),cancelButtonText:message.Z.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(isRtlEnabled){var position=(0,utils_position.q)(isRtlEnabled);return{offset:{h:0,v:-1},my:position+" top",at:position+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(_device){return"generic"===_device.platform},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find(".dx-dropdowneditor-input-wrapper").first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(isRtlEnabled){var{my,at}=this._getDefaultPopupPosition(isRtlEnabled),currentPosition=this.option("popupPosition");this.option("popupPosition",(0,extend.l)({},currentPosition,{my,at}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner((0,renderer.Z)("<div>").addClass("dx-dropdowneditor-input-wrapper")).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var fieldTemplate=this._getFieldTemplate();fieldTemplate&&this._renderTemplatedField(fieldTemplate,this._fieldRenderData())},_renderPlaceholder:function(){!!this._getFieldTemplate()||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_renderTemplatedField:function(fieldTemplate,data){var _this$_fieldRenderQue;this._fieldRenderQueueLength=(null!==(_this$_fieldRenderQue=this._fieldRenderQueueLength)&&void 0!==_this$_fieldRenderQue?_this$_fieldRenderQue:0)+1;var isFocused=(0,selectors.si)(this._input()),$container=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),$container.empty();var $templateWrapper=(0,renderer.Z)("<div>").addClass("dx-dropdowneditor-field-template-wrapper").appendTo($container);fieldTemplate.render({model:data,container:(0,core_element.u)($templateWrapper),onRendered:()=>{if(this._fieldRenderQueueLength--,0===this._fieldRenderQueueLength){var $input=this._input();if(!$input.length)throw ui_errors.Z.Error("E1010");this._integrateInput(),isFocused&&events_engine.Z.trigger($input,"focus")}}}),this._attachWrapperContent($container)},_detachWrapperContent(){var _this$_$submitElement,_this$_$beforeButtons,_this$_$afterButtonsC;this.option("useHiddenSubmitElement")&&(null===(_this$_$submitElement=this._$submitElement)||void 0===_this$_$submitElement||_this$_$submitElement.detach());var beforeButtonsContainerParent=null===(_this$_$beforeButtons=this._$beforeButtonsContainer)||void 0===_this$_$beforeButtons?void 0:_this$_$beforeButtons[0].parentNode,afterButtonsContainerParent=null===(_this$_$afterButtonsC=this._$afterButtonsContainer)||void 0===_this$_$afterButtonsC?void 0:_this$_$afterButtonsC[0].parentNode;null==beforeButtonsContainerParent||beforeButtonsContainerParent.removeChild(this._$beforeButtonsContainer[0]),null==afterButtonsContainerParent||afterButtonsContainerParent.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent($container){var _this$_$submitElement2,useHiddenSubmitElement=this.option("useHiddenSubmitElement");$container.prepend(this._$beforeButtonsContainer),useHiddenSubmitElement&&(null===(_this$_$submitElement2=this._$submitElement)||void 0===_this$_$submitElement2||_this$_$submitElement2.appendTo($container)),$container.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){events_engine.Z.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new function_template.k((function(options){var $icon=(0,renderer.Z)("<div>").addClass("dx-dropdowneditor-icon");(0,renderer.Z)(options.container).append($icon)}))}),this.callBase()},_renderOpenHandler:function(){var $inputWrapper=this._inputWrapper(),eventName=(0,events_utils.V4)(click.u,this.NAME),openOnFieldClick=this.option("openOnFieldClick");events_engine.Z.off($inputWrapper,eventName),events_engine.Z.on($inputWrapper,eventName,this._getInputClickHandler(openOnFieldClick)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",openOnFieldClick),openOnFieldClick&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){isIOs&&(this._detachFocusOutEvents(),events_engine.Z.on(this._inputWrapper(),(0,events_utils.V4)("focusout",this.NAME),(event=>{var newTarget=event.relatedTarget,popupWrapper=this.content?(0,renderer.Z)(this.content()).closest(".dx-dropdowneditor-overlay"):this._$popup;newTarget&&this.option("opened")&&(0===(0,renderer.Z)(newTarget).closest(".dx-dropdowneditor-overlay",popupWrapper).length&&this.close())})))},_detachFocusOutEvents:function(){isIOs&&events_engine.Z.off(this._inputWrapper(),(0,events_utils.V4)("focusout",this.NAME))},_getInputClickHandler:function(openOnFieldClick){return openOnFieldClick?e=>{this._executeOpenAction(e)}:e=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(e){this._openOnFieldClickAction({event:e})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,selectors.si)(this._input())&&(this._resetCaretPosition(),events_engine.Z.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var ignoreEditable=arguments.length>0&&void 0!==arguments[0]&&arguments[0],inputElement=this._input().get(0);if(inputElement){var{value}=inputElement,caretPosition=(0,utils_type.$K)(value)&&(ignoreEditable||this._isEditable())?value.length:0;this._caret({start:caretPosition,end:caretPosition},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(isVisible){this._focusInput()&&(this.option("readOnly")||(isVisible=arguments.length?isVisible:!this.option("opened"),this.option("opened",isVisible)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){var opened=this.option("opened");opened&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",opened),this._setPopupOption("visible",opened);var arias={expanded:opened,controls:this._getControlsAria()};this.setAria(arias),this.setAria("owns",opened?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=(0,renderer.Z)("<div>").addClass("dx-dropdowneditor-overlay").appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:common.ZT,_renderPopup:function(){var popupConfig=(0,extend.l)(this._popupConfig(),this._options.cache("dropDownOptions"));delete popupConfig.closeOnOutsideClick,popupConfig.elementAttr&&!Object.keys(popupConfig.elementAttr).length&&delete popupConfig.elementAttr,this._popup=this._createComponent(this._$popup,ui_popup.Z,popupConfig),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_setPopupContentId($popupContent){this._popupContentId="dx-"+new guid.Z,this.setAria("id",this._popupContentId,$popupContent)},_contentReadyHandler:common.ZT,_popupConfig:function(){return{onInitialized:this._popupInitializedHandler(),position:(0,extend.l)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>getElementWidth(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_wrapperClassExternal:"dx-dropdowneditor-overlay"}},_popupInitializedHandler:function(){return this.option("onPopupInitialized")?e=>{this._popupInitializedAction({popup:e.component})}:null},_dimensionChanged:function(){!(0,utils_window.Ym)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth:function(){void 0===getSizeValue(this.option("dropDownOptions.width"))&&this._setPopupOption("width",(()=>getElementWidth(this.$element())))},_popupPositionedHandler:function(e){var _e$position,_e$position$v,{labelMode,stylingMode}=this.option();if(this._popup){var $popupOverlayContent=this._popup.$overlayContent(),isOverlayFlipped=null===(_e$position=e.position)||void 0===_e$position||null===(_e$position$v=_e$position.v)||void 0===_e$position$v?void 0:_e$position$v.flip,shouldIndentForLabel="hidden"!==labelMode&&"outlined"===stylingMode;if(e.position&&$popupOverlayContent.toggleClass("dx-dropdowneditor-overlay-flipped",isOverlayFlipped),isOverlayFlipped&&shouldIndentForLabel&&this._label.isVisible()){var $label=this._label.$element();(0,translator.pB)($popupOverlayContent,{top:(0,translator.jt)($popupOverlayContent).top-parseInt($label.css("fontSize"))})}}},_popupShowingHandler:common.ZT,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var _this$_validationMess;this._openAction(),null===(_this$_validationMess=this._validationMessage)||void 0===_this$_validationMess||_this$_validationMess.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var _this$_validationMess2;this._closeAction(),null===(_this$_validationMess2=this._validationMessage)||void 0===_this$_validationMess2||_this$_validationMess2.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){var validationMessagePosition=this.option("validationMessagePosition");if("auto"!==validationMessagePosition)return validationMessagePosition;var positionSide="bottom";if(this._popup&&this._popup.option("visible")){var{top:myTop}=animation_position.Z.setup(this.$element()),{top:popupTop}=animation_position.Z.setup(this._popup.$content());positionSide=myTop+this.option("popupPosition").offset.v>popupTop?"bottom":"top"}return positionSide},_closeOutsideDropDownHandler:function(_ref){var{target}=_ref,$target=(0,renderer.Z)(target),dropDownButton=this.getButton("dropDown"),$dropDownButton=dropDownButton&&dropDownButton.$element(),isInputClicked=!!$target.closest(this.$element()).length,isDropDownButtonClicked=!!$target.closest($dropDownButton).length;return!isInputClicked&&!isDropDownButtonClicked},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(optionName,value){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-done.dx-button")},_getLastPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-cancel.dx-button")},_popupElementTabHandler:function(e){var $element=(0,renderer.Z)(e.currentTarget);(e.shiftKey&&$element.is(this._getFirstPopupElement())||!e.shiftKey&&$element.is(this._getLastPopupElement()))&&(events_engine.Z.trigger(this._input(),"focus"),e.preventDefault())},_popupElementEscHandler:function(){events_engine.Z.trigger(this._input(),"focus"),this.close()},_popupButtonInitializedHandler:function(e){e.component.registerKeyHandler("tab",this._popupElementTabHandler.bind(this)),e.component.registerKeyHandler("escape",this._popupElementEscHandler.bind(this))},_popupToolbarItemsConfig:function(){var buttonsConfig=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}}];return this._applyButtonsLocation(buttonsConfig)},_applyButtonsLocation:function(buttonsConfig){var buttonsLocation=this.option("buttonsLocation"),resultConfig=buttonsConfig;if("default"!==buttonsLocation){var position=(0,common.Um)(buttonsLocation);(0,iterator.S6)(resultConfig,(function(_,element){(0,extend.l)(element,{toolbar:position[0],location:position[1]})}))}return resultConfig},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(args){var options=ui_widget.default.getOptionsFromContainer(args);this._setPopupOption(options);var optionsKeys=Object.keys(options);-1===optionsKeys.indexOf("width")&&-1===optionsKeys.indexOf("height")||this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,renderer.Z)("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(args){var _this$_popup;switch(args.name){case"width":case"height":this.callBase(args),null===(_this$_popup=this._popup)||void 0===_this$_popup||_this$_popup.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":(0,utils_type.$K)(args.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(args),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":(0,utils_window.Ym)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(args.value),this.callBase(args);break;default:this.callBase(args)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return(0,core_element.u)(this._input())},content:function(){return this._popup?this._popup.content():null}});(0,component_registrator.Z)("dxDropDownEditor",DropDownEditor);const ui_drop_down_editor=DropDownEditor;var list_light=__webpack_require__("./node_modules/devextreme/esm/ui/list_light.js"),ui_data_expression=__webpack_require__("./node_modules/devextreme/esm/ui/editor/ui.data_expression.js"),child_default_template=__webpack_require__("./node_modules/devextreme/esm/core/templates/child_default_template.js"),grouped_data_converter_mixin=__webpack_require__("./node_modules/devextreme/esm/ui/shared/grouped_data_converter_mixin.js"),ui_drop_down_list_window=(0,utils_window.Jj)(),SEARCH_MODES=["startswith","contains","endwith","notcontains"],useCompositionEvents="android"!==devices.Z.real().platform,DropDownList=ui_drop_down_editor.inherit({_supportedKeys:function(){var parent=this.callBase();return(0,extend.l)({},parent,{tab:function(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);var $focusedItem=(0,renderer.Z)(this._list.option("focusedElement"));$focusedItem.length&&this._setSelectedElement($focusedItem)}parent.tab.apply(this,arguments)},space:common.ZT,home:common.ZT,end:common.ZT})},_allowSelectItemByTab:function(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement:function($element){var value=this._valueGetter(this._list._getItemData($element));this._setValue(value)},_setValue:function(value){this.option("value",value)},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),(0,extend.l)(ui_data_expression.Z._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:message.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:common.ZT,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),(0,extend.l)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var items=this.option().items;items&&!items.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new child_default_template.s("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(e){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(value,start,end){return value>end?start:value<start?end:value},_items:function(){var items=this._getPlainItems(!this._list&&this._dataSource.items());return new data_query.Z(items).filter("disabled","<>",!0).toArray()},_calcNextItem:function(step){var items=this._items();return items[this._fitIntoRange(this._getSelectedIndex()+step,0,items.length-1)]},_getSelectedIndex:function(){var items=this._items(),selectedItem=this.option("selectedItem"),result=-1;return(0,iterator.S6)(items,function(index,item){if(this._isValueEquals(item,selectedItem))return result=index,!1}.bind(this)),result},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var $popupContent=this._popup.$content();events_engine.Z.off($popupContent,"mouseup"),events_engine.Z.on($popupContent,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var customContainer=this.option("dropDownOptions.container"),$container=customContainer&&(0,renderer.Z)(customContainer);if($container&&$container.length&&!(0,utils_type.FJ)($container.get(0))){var $containerWithParents=[].slice.call($container.parents());$containerWithParents.unshift($container.get(0)),(0,iterator.S6)($containerWithParents,function(i,parent){return parent!==(0,renderer.Z)("body").get(0)&&("hidden"===ui_drop_down_list_window.getComputedStyle(parent).overflowY?(this._$customBoundaryContainer=(0,renderer.Z)(parent),!1):void 0)}.bind(this))}},_popupWrapperClass:function(){return"dx-dropdownlist-popup-wrapper"},_renderInputValue:function(){var value=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(value,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,value))},_loadInputValue:function(value,callback){return this._loadItem(value).always(callback)},_getItemFromPlain:function(value,cache){var plainItems,selectedItem;return cache&&"object"!=typeof value&&(cache.itemByValue||(cache.itemByValue={},(plainItems=this._getPlainItems()).forEach((function(item){cache.itemByValue[this._valueGetter(item)]=item}),this)),selectedItem=cache.itemByValue[value]),selectedItem||(plainItems=this._getPlainItems(),selectedItem=(0,common.h3)(plainItems,function(item){return this._isValueEquals(this._valueGetter(item),value)}.bind(this))[0]),selectedItem},_loadItem:function(value,cache){var selectedItem=this._getItemFromPlain(value,cache);return void 0!==selectedItem?(new utils_deferred.BH).resolve(selectedItem).promise():this._loadValue(value)},_getPlainItems:function(items){var plainItems=[];items=items||this.option("items")||this._dataSource.items()||[];for(var i=0;i<items.length;i++)items[i]&&items[i].items?plainItems=plainItems.concat(items[i].items):plainItems.push(items[i]);return plainItems},_updateActiveDescendant(){var _this$_list,opened=this.option("opened"),listFocusedItemId=null===(_this$_list=this._list)||void 0===_this$_list?void 0:_this$_list.getFocusedItemId(),isElementOnDom=(0,renderer.Z)("#".concat(listFocusedItemId)).length>0,activedescendant=opened&&isElementOnDom&&listFocusedItemId;this.setAria({activedescendant:activedescendant||null})},_setSelectedItem:function(item){var displayValue=this._displayValue(item);this.option("selectedItem",(0,common.IS)(item,null)),this.option("displayValue",displayValue)},_displayValue:function(item){return this._displayGetter(item)},_refreshSelected:function(){var cache={};this._listItemElements().each(function(_,itemElement){var $itemElement=(0,renderer.Z)(itemElement),itemValue=this._valueGetter($itemElement.data("dxListItemData"));this._isSelectedValue(itemValue,cache)?this._list.selectItem($itemElement):this._list.unselectItem($itemElement)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){this.option("focusStateEnabled")&&this._list&&this._list.option("focusedElement",null)},_isSelectedValue:function(value){return this._isValueEquals(value,this.option("value"))},_validateSearchMode:function(){var searchMode=this.option("searchMode"),normalizedSearchMode=searchMode.toLowerCase();if(!SEARCH_MODES.includes(normalizedSearchMode))throw ui_errors.Z.Error("E1019",searchMode)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},reset:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(".dx-list-item"):(0,renderer.Z)()},_popupConfig:function(){return(0,extend.l)(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var canListHaveFocus=this._canListHaveFocus();return this.callBase().concat([!canListHaveFocus&&this._list])},_setAriaTargetForList:function(){this._list._getAriaTarget=this._getAriaTarget.bind(this)},_renderList:function(){this._listId="dx-"+(new guid.Z)._value;var $list=this._$list=(0,renderer.Z)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._list=this._createComponent($list,list_light.Z,this._listConfig()),this._refreshList(),this._setAriaTargetForList(),this._list.option("_listAttributes",{role:"combobox"}),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var eventName=(0,events_utils.V4)("mousedown","dxDropDownList");events_engine.Z.off(this._$list,eventName),events_engine.Z.on(this._$list,eventName,(e=>e.preventDefault()))},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return"desktop"===devices.Z.real().deviceType},_listConfig:function(){var options={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(options.tabIndex=null),options},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption:function(optionName,value){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(e){this._listItemClickHandler(e),this._itemClickAction(e)},_listItemClickHandler:common.ZT,_setListDataSource:function(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource:function(){var isMinSearchLengthExceeded=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!isMinSearchLengthExceeded&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return(0,events_utils.V4)("input",this.NAME+"Search")},_getCompositionStartEvent:function(){return(0,events_utils.V4)("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return(0,events_utils.V4)("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return(0,events_utils.V4)("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),events_engine.Z.on(this._input(),this._getSetFocusPolicyEvent(),(()=>{this._setFocusPolicy()})),this._shouldRenderSearchEvent()&&(events_engine.Z.on(this._input(),this._getSearchEvent(),(e=>{this._searchHandler(e)})),useCompositionEvents&&(events_engine.Z.on(this._input(),this._getCompositionStartEvent(),(()=>{this._isTextCompositionInProgress(!0)})),events_engine.Z.on(this._input(),this._getCompositionEndEvent(),(e=>{this._isTextCompositionInProgress(void 0),this._searchHandler(e,this._searchValue())}))))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){events_engine.Z.off(this._input(),this._getSearchEvent()),events_engine.Z.off(this._input(),this._getSetFocusPolicyEvent()),useCompositionEvents&&(events_engine.Z.off(this._input(),this._getCompositionStartEvent()),events_engine.Z.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(value){if(!arguments.length)return this._isTextComposition;this._isTextComposition=value},_searchHandler:function(e,searchValue){if(!this._isTextCompositionInProgress())if(this._isMinSearchLengthExceeded()){var searchTimeout=this.option("searchTimeout");searchTimeout?(this._clearSearchTimer(),this._searchTimer=setTimeout((()=>{this._searchDataSource(searchValue)}),searchTimeout)):this._searchDataSource(searchValue)}else this._searchCanceled()},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var searchValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(searchValue)},_filterDataSource:function(searchValue){this._clearSearchTimer();var dataController=this._dataController;dataController.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),dataController.searchOperation(this.option("searchMode")),dataController.searchValue(searchValue),dataController.load().done(this._dataSourceFiltered.bind(this,searchValue))},_clearFilter:function(){var dataController=this._dataController;dataController.searchValue()&&dataController.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!this.option("readOnly")&&this._searchValue()){var shouldOpenPopup=this._shouldOpenPopup();shouldOpenPopup&&!this._isFocused()||(this.option("opened",shouldOpenPopup),shouldOpenPopup&&(this._updatePopupWidth(),this._updateListDimensions()))}},_dataSourceChangedHandler:function(newItems){0===this._dataController.pageIndex()?this.option().items=newItems:this.option().items=this.option().items.concat(newItems)},_hasItemsToShow:function(){var resultAmount=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!resultAmount)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged:function(){this.callBase(),this._updateListDimensions()},_needPopupRepaint:function(){var dataController=this._dataController,currentPageIndex=dataController.pageIndex(),needRepaint=(0,utils_type.$K)(this._pageIndex)&&currentPageIndex<=this._pageIndex||dataController.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=currentPageIndex,needRepaint},_updateListDimensions:function(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight:function(){var $element=this.$element(),$customBoundaryContainer=this._$customBoundaryContainer,offsetTop=$element.offset().top-($customBoundaryContainer?$customBoundaryContainer.offset().top:0),windowHeight=(0,size.zp)(ui_drop_down_list_window),containerHeight=$customBoundaryContainer?Math.min((0,size.zp)($customBoundaryContainer),windowHeight):windowHeight,maxHeight=Math.max(offsetTop,containerHeight-offsetTop-(0,size.zp)($element));return Math.min(.5*containerHeight,maxHeight)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var value=this.option("value"),submitValue=this._shouldUseDisplayValue(value)?this._displayGetter(value):value;this._getSubmitElement().val(submitValue)},_shouldUseDisplayValue:function(value){return"this"===this.option("valueExpr")&&(0,utils_type.Kn)(value)},_optionChanged:function(args){switch(this._dataExpressionOptionChanged(args),args.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(args.name,args.value),this.callBase(args);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(args.name);break;case"displayValue":this.option("text",args.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":args.previousValue!==args.value&&this._selectionChangedAction({selectedItem:args.value});break;default:this.callBase(args)}}}).include(ui_data_expression.Z,grouped_data_converter_mixin.Z);(0,component_registrator.Z)("dxDropDownList",DropDownList);const ui_drop_down_list=DropDownList;__webpack_require__("./node_modules/devextreme/esm/ui/list/modules/selection.js");var SelectBox=ui_drop_down_list.inherit({_supportedKeys:function(){var that=this,parent=this.callBase(),clearSelectBox=function(e){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(e.preventDefault(),this.reset()),this._savedTextRemoveEvent=e,this._preventSubstitution=!0},searchIfNeeded=function(){that.option("searchEnabled")&&that._valueSubstituted()&&that._searchHandler()};return(0,extend.l)({},parent,{tab:function(){this.option("opened")&&"instantly"===this.option("applyValueMode")&&this._resetCaretPosition(!0),parent.tab&&parent.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow:function(e){if(parent.upArrow&&parent.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(e),!0},downArrow:function(e){if(parent.downArrow&&parent.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(e),!0},leftArrow:function(){searchIfNeeded(),parent.leftArrow&&parent.leftArrow.apply(this,arguments)},rightArrow:function(){searchIfNeeded(),parent.rightArrow&&parent.rightArrow.apply(this,arguments)},home:function(){searchIfNeeded(),parent.home&&parent.home.apply(this,arguments)},end:function(){searchIfNeeded(),parent.end&&parent.end.apply(this,arguments)},escape:function(){var result=parent.escape&&parent.escape.apply(this,arguments);return this._cancelEditing(),null==result||result},enter:function(e){var isOpened=this.option("opened"),inputText=this._input().val().trim(),isCustomText=inputText&&this._list&&!this._list.option("focusedElement");if(!inputText&&(0,utils_type.$K)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(e),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return e.preventDefault(),isCustomText&&(isOpened&&this._toggleOpenState(),this._valueChangeEventHandler(e)),isOpened;if(parent.enter&&parent.enter.apply(this,arguments))return isOpened}},space:function(e){var isOpened=this.option("opened"),isSearchEnabled=this.option("searchEnabled"),acceptCustomValue=this.option("acceptCustomValue");if(isOpened&&!isSearchEnabled&&!acceptCustomValue)return e.preventDefault(),this._valueChangeEventHandler(e),!0},backspace:clearSelectBox,del:clearSelectBox})},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{placeholder:message.Z.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating:function(e){(0,utils_type.$K)(e.customItem)||(e.customItem=e.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init:function(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup:function(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup:function(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass:function(){return this.callBase()+" dx-selectbox-popup-wrapper"},_setDeprecatedOptions(){this.callBase(),(0,extend.l)(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing:function(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState:function(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement:function(){var _items$indexOf;if(this._searchValue()){var{items,selectedItem}=this.option(),$listItems=this._list._itemElements(),index=null!==(_items$indexOf=null==items?void 0:items.indexOf(selectedItem))&&void 0!==_items$indexOf?_items$indexOf:-1,focusedElement=-1===index||this._isCustomItemSelected()?null:$listItems.eq(index);this._focusListElement(focusedElement)}else this._focusListElement(null)},_renderFocusedElement:function(){if(this._list)if(this._searchValue()&&!this.option("acceptCustomValue")){var focusedElement=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(focusedElement)}else this._focusListElement(null)},_focusListElement:function(element){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,core_element.u)(element)),delete this._preventInputValueRender},_scrollToSelectedItem:function(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler:function(){this.callBase(),this._dataController.paginate()&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue:function(){return this._renderInputValue(),this._setSubmitValue(),(new utils_deferred.BH).resolve()},_renderInputValue:function(){return this.callBase().always(function(){this._renderInputValueAsync()}.bind(this))},_renderInputValueAsync:function(){this._renderTooltip(),this._renderInputValueImpl().always(function(){this._refreshSelected()}.bind(this))},_renderInputValueImpl:function(){return this._renderField(),(new utils_deferred.BH).resolve()},_setNextItem:function(step){var item=this._calcNextItem(step),value=this._valueGetter(item);this._setValue(value)},_setNextValue:function(e){(this._dataController.isLoaded()?(new utils_deferred.BH).resolve():this._dataController.load()).done(function(){var selectedIndex=this._getSelectedIndex(),hasPages=this._dataController.pageSize(),isLastPage=this._dataController.isLastPage(),isLastItem=selectedIndex===this._items().length-1;this._saveValueChangeEvent(e);var step="downArrow"===(0,events_utils.EV)(e)?1:-1;hasPages&&!isLastPage&&isLastItem&&step>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,step))):this._setNextItem(step)}.bind(this))},_setSelectedItem:function(item){var isUnknownItem=!this._isCustomValueAllowed()&&void 0===item;this.callBase(isUnknownItem?null:item),isUnknownItem||this._isEditable()&&!this._isCustomItemSelected()||this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed:function(){return this.option("acceptCustomValue")||this.callBase()},_displayValue:function(item){return item=!(0,utils_type.$K)(item)&&this._isCustomValueAllowed()?this.option("value"):item,this.callBase(item)},_listConfig:function(){var result=(0,extend.l)(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&(0,extend.l)(result,{showSelectionControls:!0,selectionByClick:!0}),result},_listFocusedItemChangeHandler:function(e){if(!this._preventInputValueRender){var list=e.component,focusedElement=(0,renderer.Z)(list.option("focusedElement")),focusedItem=list._getItemData(focusedElement);this._updateField(focusedItem)}},_updateField:function(item){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){var text=this._displayGetter(item);return this.option("text",text),void this._renderDisplayText(text)}this._renderField()},_getSelectionChangeHandler:function(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):common.ZT},_selectionChangeHandler:function(e){(0,iterator.S6)(e.addedItems||[],function(_,addedItem){this._setValue(this._valueGetter(addedItem))}.bind(this))},_getActualSearchValue:function(){return this._dataController.searchValue()},_toggleOpenState:function(isVisible){if(!this.option("disabled")){if((isVisible=arguments.length?isVisible:!this.option("opened"))||this._shouldClearFilter()||this._restoreInputText(!0),this._wasSearch()&&isVisible)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;var searchValue=this._getActualSearchValue();searchValue&&this._wasSearch(!0),this._filterDataSource(searchValue||null)}else this._setListOption("items",[]);isVisible&&this._scrollToSelectedItem(),this.callBase(isVisible)}},_renderTooltip:function(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions:function(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText:function(){var initialSelectedItem=this.option("selectedItem");if(null===initialSelectedItem)return!1;var value=this._displayGetter(initialSelectedItem);return(value?String(value):"")===this._searchValue()},_popupHidingHandler:function(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler:function(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText:function(saveEditingValue){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(function(){var{acceptCustomValue,text,selectedItem:initialSelectedItem}=this.option();acceptCustomValue?saveEditingValue||this._isValueChanging||(this._updateField(null!=initialSelectedItem?initialSelectedItem:this._createCustomItem(text)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always(function(selectedItem){var newSelectedItem=(0,common.IS)(selectedItem,initialSelectedItem);this._setSelectedItem(newSelectedItem),this._updateField(newSelectedItem),this._clearFilter()}.bind(this))}.bind(this))},_valueChangeEventIncludesBlur:function(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent:function(e){return this._preventNestedFocusEvent(e)||this._valueChangeEventIncludesBlur()},_focusOutHandler:function(e){this._isPreventedFocusOutEvent(e)||(this._isOverlayNestedTarget(e.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(e));e.target=this._input().get(0),this.callBase(e)},_cancelSearchIfNeed:function(e){var{searchEnabled}=this.option(),isOverlayTarget=this._isOverlayNestedTarget(null==e?void 0:e.relatedTarget);if(this._wasSearch()&&searchEnabled&&!isOverlayTarget){var _this$_popup,isPopupVisible=null===(_this$_popup=this._popup)||void 0===_this$_popup?void 0:_this$_popup._hideAnimationProcessing;this._clearSearchTimer(),isPopupVisible?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch:function(value){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=value},_isOverlayNestedTarget:function(target){return!!(0,renderer.Z)(target).closest(".".concat("dx-selectbox-popup-wrapper")).length},_clearTextValue:function(){this.option("selectedItem")&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup:function(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused:function(){var activeElement=dom_adapter.Z.getActiveElement(this.element());return this.callBase()&&(0,renderer.Z)(activeElement).closest(this._input()).length>0},_getValueChangeEventOptionName:function(){return"customItemCreateEvent"},_renderValueChangeEvent:function(){this._isEditable()&&this.callBase()},_fieldRenderData:function(){var $listFocused=this._list&&this.option("opened")&&(0,renderer.Z)(this._list.option("focusedElement"));return $listFocused&&$listFocused.length?this._list._getItemData($listFocused):this.option("selectedItem")},_isSelectedValue:function(value){return this._isValueEquals(value,this.option("value"))},_shouldCloseOnItemClick:function(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler:function(e){var previousValue=this._getCurrentValue();this._focusListElement((0,renderer.Z)(e.itemElement)),this._saveValueChangeEvent(e.event),this._completeSelection(this._valueGetter(e.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&previousValue===this._valueGetter(e.itemData)&&this._updateField(e.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter:function(){return this._wasSearch()},_completeSelection:function(value){this._setValue(value)},_loadItem:function(value,cache){var that=this,deferred=new utils_deferred.BH;return this.callBase(value,cache).done(function(item){deferred.resolve(item)}.bind(this)).fail(function(args){if(null==args||!args.shouldSkipCallback){var selectedItem=that.option("selectedItem");that.option("acceptCustomValue")&&value===that._valueGetter(selectedItem)?deferred.resolve(selectedItem):deferred.reject()}}.bind(this)),deferred.promise()},_loadInputValue:function(value,callback){return this._loadItemDeferred=this._loadItem(value).always(callback),this._loadItemDeferred},_isCustomItemSelected:function(){var selectedItem=this.option("selectedItem"),searchValue=this._searchValue(),selectedItemText=this._displayGetter(selectedItem);return!selectedItemText||searchValue!==selectedItemText.toString()},_valueChangeEventHandler:function(e){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(e))},_initCustomItemCreatingAction:function(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem:function(text){var params={text},actionResult=this._customItemCreatingAction(params),item=(0,common.IS)(actionResult,params.customItem);return(0,utils_type.$K)(actionResult)&&errors.Z.log("W0015","onCustomItemCreating","customItem"),item},_customItemAddedHandler:function(e){var searchValue=this._searchValue(),item=this._createCustomItem(searchValue);if(this._saveValueChangeEvent(e),void 0===item)throw this._renderValue(),errors.Z.Error("E0121");(0,utils_type.tI)(item)?(0,utils_deferred.p4)(item).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(item)},_setCustomItem:function(item){this._disposed||(item=item||null,this.option("selectedItem",item),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(item)),this._renderDisplayText(this._displayGetter(item)),this._isValueChanging=!1)},_clearValueHandler:function(e){return this._preventFiltering=!0,this.callBase(e),this._searchCanceled(),!1},_wasSearch:function(value){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=value},_searchHandler:function(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered:function(searchValue){this.callBase(),null!==searchValue&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted:function(){var input=this._input().get(0),currentSearchLength=this._searchValue().length,isAllSelected=0===input.selectionStart&&input.selectionEnd===currentSearchLength,inputHasSelection=input.selectionStart!==input.selectionEnd,isLastSymbolSelected=currentSearchLength===input.selectionEnd;return this._wasSearch()&&inputHasSelection&&!isAllSelected&&isLastSymbolSelected&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered:function(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_renderInputSubstitution:function(){if(this._shouldSubstitutionBeRendered()){var item=this._list&&this._getPlainItems(this._list.option("items"))[0];if(item){var $input=this._input(),valueLength=$input.val().length;if(0!==valueLength){var inputElement=$input.get(0),displayValue=this._displayGetter(item).toString();inputElement.value=displayValue,this._caret({start:valueLength,end:displayValue.length})}}}else delete this._preventSubstitution},_dispose:function(){this._renderInputValueAsync=common.ZT,delete this._loadItemDeferred,this.callBase()},_optionChanged:function(args){switch(args.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(args)}}});(0,component_registrator.Z)("dxSelectBox",SelectBox);const select_box=SelectBox;var newDate,monthGetter=date=>date.getMonth()+1,monthSetter=(date,value)=>{var day=date.getDate(),monthLimits=getLimits("M",date),newValue=(0,math.n$)(parseInt(value),monthLimits.min,monthLimits.max);date.setMonth(newValue-1,1);var{min,max}=getLimits("dM",date),newDay=(0,math.n$)(day,min,max);date.setDate(newDay)},PATTERN_GETTERS={a:date=>date.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:monthGetter,L:monthGetter,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"},ui_date_box_mask_parts_PATTERN_SETTERS=(0,extend.l)({},PATTERN_SETTERS,{a:(date,value)=>{var hours=date.getHours();hours>=12!==!!parseInt(value)&&date.setHours((hours+12)%24)},d:(date,value)=>{value>getLimits("dM",date).max&&date.setMonth(date.getMonth()+1),date.setDate(value)},h:(date,value)=>{var isPM=date.getHours()>=12;date.setHours(+value%12+(isPM?12:0))},M:monthSetter,L:monthSetter,E:(date,value)=>{value<0||date.setDate(date.getDate()-date.getDay()+parseInt(value))},y:(date,value)=>{var currentYear=date.getFullYear(),valueLength=String(value).length,maxLimitLength=String(getLimits("y",date).max).length,newValue=parseInt(String(currentYear).substr(0,maxLimitLength-valueLength)+value);date.setFullYear(newValue)}}),renderDateParts=(text,regExpInfo)=>{for(var result=regExpInfo.regexp.exec(text),start=0,end=0,sections=[],_loop=function(){end=(start=end)+result[i].length;var patternChar,pattern=regExpInfo.patterns[i-1].replace(/^'|'$/g,""),getter=(patternChar=pattern[0],PATTERN_GETTERS[patternChar]||(()=>patternChar));sections.push({index:i-1,isStub:pattern===result[i],caret:{start,end},pattern,text:result[i],limits:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return getLimits(pattern[0],...args)},setter:ui_date_box_mask_parts_PATTERN_SETTERS[pattern[0]]||common.ZT,getter})},i=1;i<result.length;i++)_loop();return sections},getLimits=(pattern,date,forcedPattern)=>{var limits={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(date.getFullYear(),date.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:0,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1}};return limits[forcedPattern||pattern]||limits.getAmPm},DATE_COMPONENTS=["year","day","month","day"],TIME_COMPONENTS=["hours","minutes","seconds","milliseconds"],ui_date_utils_dateUtils={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:864e5,ONE_YEAR:31536e6,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:(newDate=new Date,new Date(newDate.getFullYear()+50,newDate.getMonth(),newDate.getDate(),23,59,59)),FORMATS_INFO:{date:{getStandardPattern:function(){return"yyyy-MM-dd"},components:DATE_COMPONENTS},time:{getStandardPattern:function(){return"HH:mm"},components:TIME_COMPONENTS},datetime:{getStandardPattern:function(){var standardPattern,$input;return($input=(0,renderer.Z)("<input>").attr("type","datetime")).val("2000-01-01T01:01Z"),$input.val()&&(standardPattern="yyyy-MM-ddTHH:mmZ"),standardPattern||(standardPattern="yyyy-MM-ddTHH:mm:ssZ"),ui_date_utils_dateUtils.FORMATS_INFO.datetime.getStandardPattern=function(){return standardPattern},standardPattern},components:[...DATE_COMPONENTS,...TIME_COMPONENTS]},"datetime-local":{getStandardPattern:function(){return"yyyy-MM-ddTHH:mm:ss"},components:[...DATE_COMPONENTS,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat:function(date,type){var pattern=ui_date_utils_dateUtils.FORMATS_INFO[type].getStandardPattern();return date_serialization.serializeDate(date,pattern)},fromStandardDateFormat:function(text){var date=date_serialization.dateParser(text);return(0,utils_type.J_)(date)?date:void 0},getMaxMonthDay:function(year,month){return new Date(year,month+1,0).getDate()},mergeDates:function(oldValue,newValue,format){if(!newValue)return newValue||null;if(!oldValue||isNaN(oldValue.getTime())){var now=new Date(null);oldValue=new Date(now.getFullYear(),now.getMonth(),now.getDate())}var result=new Date(oldValue.valueOf()),formatInfo=ui_date_utils_dateUtils.FORMATS_INFO[format];return(0,iterator.S6)(formatInfo.components,(function(){var componentInfo=ui_date_utils_dateUtils.DATE_COMPONENTS_INFO[this];result[componentInfo.setter](newValue[componentInfo.getter]())})),result},getLongestCaptionIndex:function(captionArray){var i,longestIndex=0,longestCaptionLength=0;for(i=0;i<captionArray.length;++i)captionArray[i].length>longestCaptionLength&&(longestIndex=i,longestCaptionLength=captionArray[i].length);return longestIndex},formatUsesMonthName:function(format){return localization_date.formatUsesMonthName(format)},formatUsesDayName:function(format){return localization_date.formatUsesDayName(format)},getLongestDate:function(format,monthNames,dayNames){var stringFormat=function(format){var formatType=typeof format;return"string"===formatType?"format":"object"===formatType&&void 0!==format.type?format.type:null}(format),month=9;stringFormat&&!ui_date_utils_dateUtils.formatUsesMonthName(stringFormat)||(month=ui_date_utils_dateUtils.getLongestCaptionIndex(monthNames));var longestDate=new Date(1888,month,21,23,59,59,999);if(!stringFormat||ui_date_utils_dateUtils.formatUsesDayName(stringFormat)){var date=longestDate.getDate()-longestDate.getDay()+ui_date_utils_dateUtils.getLongestCaptionIndex(dayNames);longestDate.setDate(date)}return longestDate},normalizeTime:function(date){date.setSeconds(0),date.setMilliseconds(0)}};ui_date_utils_dateUtils.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter:function(value,date){var formatDate=new Date(date.getTime());return formatDate.setFullYear(value),localization_date.format(formatDate,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter:function(value,date){var formatDate=new Date(date.getTime());return formatDate.setDate(value),localization_date.format(formatDate,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:function(value){return localization_date.getMonthNames()[value]},startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:function(value){return localization_date.format(new Date(0,0,0,value),"hour")},startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:function(value){return localization_date.format(new Date(0,0,0,0,value),"minute")},startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:function(value){return localization_date.format(new Date(0,0,0,0,0,value),"second")},startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:function(value){return localization_date.format(new Date(0,0,0,0,0,0,value),"millisecond")},startValue:0,endValue:999}};const ui_date_utils=ui_date_utils_dateUtils;var editor_editor=__webpack_require__("./node_modules/devextreme/esm/ui/editor/editor.js"),swipeable=__webpack_require__("./node_modules/devextreme/esm/events/gesture/swipeable.js");const ui_calendar_navigator=ui_widget.default.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{onClick:null,onCaptionClick:null,text:""})},_init:function(){this.callBase(),this._initActions()},_initActions:function(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")},_initMarkup:function(){this.callBase(),this.$element().addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()},_renderButtons:function(){var that=this,direction=this.option("rtlEnabled")?-1:1;this._prevButton=this._createComponent((0,renderer.Z)("<a>"),ui_button.Z,{focusStateEnabled:!1,icon:"chevronleft",onClick:function(e){that._clickAction({direction:-direction,event:e})},integrationOptions:{}});var $prevButton=this._prevButton.$element().addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,renderer.Z)("<a>"),ui_button.Z,{focusStateEnabled:!1,icon:"chevronright",onClick:function(e){that._clickAction({direction,event:e})},integrationOptions:{}});var $nextButton=this._nextButton.$element().addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,renderer.Z)("<a>").addClass("dx-calendar-caption-button"),ui_button.Z,{focusStateEnabled:!1,onClick:function(e){that._captionClickAction({event:e})},integrationOptions:{}});var $caption=this._caption.$element();this.$element().append($prevButton,$caption,$nextButton)},_renderCaption:function(){this._caption.option("text",this.option("text"))},toggleButton:function(buttonPrefix,value){var button=this["_"+buttonPrefix+"Button"];button&&(button.option("disabled",value),button.$element().toggleClass("dx-calendar-disabled-navigator-link",value))},_optionChanged:function(args){if("text"===args.name)this._renderCaption();else this.callBase(args)}});var{abstract:ui_calendar_base_view_abstract}=ui_widget.default,CALENDAR_DXCLICK_EVENT_NAME=(0,events_utils.V4)(click.u,"dxCalendar"),BaseView=ui_widget.default.inherit({_getViewName:function(){return"base"},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup:function(){this.callBase(),this._renderImpl()},_renderImpl:function(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderEvents()},_createTable:function(){return this._$table=(0,renderer.Z)("<table>"),this.setAria({label:message.Z.format("dxCalendar-ariaWidgetName"),role:"grid"},this._$table),this._$table},_renderBody:function(){this.$body=(0,renderer.Z)("<tbody>").appendTo(this._$table);for(var rowData={cellDate:this._getFirstCellData(),prevCellDate:null},rowIndex=0,rowCount=this.option("rowCount");rowIndex<rowCount;rowIndex++){rowData.row=this._createRow();for(var colIndex=0,colCount=this.option("colCount");colIndex<colCount;colIndex++)this._renderCell(rowData,colIndex);this._renderWeekNumberCell(rowData)}},_createRow:function(){var row=dom_adapter.Z.createElement("tr");return this.setAria("role","row",(0,renderer.Z)(row)),this.$body.get(0).appendChild(row),row},_appendCell:function(row,cell){this._appendMethodName||this._cacheAppendMethodName(),(0,renderer.Z)(row)[this._appendMethodName](cell)},_cacheAppendMethodName:function(rtlEnabled){this._appendMethodName=(null!=rtlEnabled?rtlEnabled:this.option("rtlEnabled"))?"prepend":"append"},_createCell:function(cellDate){var cell=dom_adapter.Z.createElement("td"),$cell=(0,renderer.Z)(cell);return cell.className=this._getClassNameByDate(cellDate),cell.setAttribute("data-value",date_serialization.serializeDate(cellDate,utils_date.getShortDateFormat())),(0,element_data.aT)(cell,"dxDateValueKey",cellDate),this.setAria({role:"gridcell",label:this.getCellAriaLabel(cellDate)},$cell),{cell,$cell}},_renderCell:function(params,cellIndex){var{cellDate,prevCellDate,row}=params;prevCellDate&&utils_date.fixTimezoneGap(prevCellDate,cellDate),params.prevCellDate=cellDate;var{cell,$cell}=this._createCell(cellDate),cellTemplate=this.option("cellTemplate");this._appendCell(row,cell),cellTemplate?cellTemplate.render(this._prepareCellTemplateData(cellDate,cellIndex,$cell)):cell.innerHTML=this._getCellText(cellDate),params.cellDate=this._getNextCellData(cellDate)},_getClassNameByDate:function(cellDate){var className="dx-calendar-cell";return this._isTodayCell(cellDate)&&(className+=" ".concat("dx-calendar-today")),(this._isDateOutOfRange(cellDate)||this.isDateDisabled(cellDate))&&(className+=" ".concat("dx-calendar-empty-cell")),this._isOtherView(cellDate)&&(className+=" ".concat("dx-calendar-other-view")),className},_prepareCellTemplateData:function(cellDate,cellIndex,$cell){var isDateCell=cellDate instanceof Date;return{model:{text:isDateCell?this._getCellText(cellDate):cellDate,date:isDateCell?cellDate:void 0,view:this._getViewName()},container:(0,core_element.u)($cell),index:cellIndex}},_renderEvents:function(){this._createCellClickAction(),events_engine.Z.off(this._$table,CALENDAR_DXCLICK_EVENT_NAME),events_engine.Z.on(this._$table,CALENDAR_DXCLICK_EVENT_NAME,"td:not(.".concat("dx-calendar-week-number-cell",")"),(e=>{(0,renderer.Z)(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellClickAction({event:e,value:(0,renderer.Z)(e.currentTarget).data("dxDateValueKey")})}))},_createCellClickAction:function(){this._cellClickAction=this._createActionByOption("onCellClick")},_createDisabledDatesHandler:function(){var disabledDates=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(disabledDates)?this._getDefaultDisabledDatesHandler(disabledDates):disabledDates||common.ZT},_getDefaultDisabledDatesHandler:function(disabledDates){return common.ZT},_isTodayCell:ui_calendar_base_view_abstract,_isDateOutOfRange:ui_calendar_base_view_abstract,isDateDisabled:function(cellDate){var dateParts={date:cellDate,view:this._getViewName()};return this._disabledDatesHandler(dateParts)},_isOtherView:ui_calendar_base_view_abstract,_getCellText:ui_calendar_base_view_abstract,_getFirstCellData:ui_calendar_base_view_abstract,_getNextCellData:ui_calendar_base_view_abstract,_renderContouredDate:function(contouredDate){if(this.option("focusStateEnabled")){contouredDate=contouredDate||this.option("contouredDate");var $oldContouredCell=this._getContouredCell(),$newContouredCell=this._getCellByDate(contouredDate);$oldContouredCell.removeClass("dx-calendar-contoured-date"),$newContouredCell.addClass("dx-calendar-contoured-date")}},_getContouredCell:function(){return this._$table.find(".".concat("dx-calendar-contoured-date"))},_changeValue:function(cellDate){if(cellDate){var value=this.option("value"),newValue=value?new Date(value):new Date;newValue.setDate(cellDate.getDate()),newValue.setMonth(cellDate.getMonth()),newValue.setFullYear(cellDate.getFullYear()),newValue.setDate(cellDate.getDate()),this.option("value",newValue)}else this.option("value",null)},_renderValue:function(){if(this.option("allowValueSelection")){var value=this.option("value"),selectedCell=this._getCellByDate(value);this._selectedCell&&this._selectedCell.removeClass("dx-calendar-selected-date"),selectedCell.addClass("dx-calendar-selected-date"),this._selectedCell=selectedCell}},getCellAriaLabel:function(date){return this._getCellText(date)},_getFirstAvailableDate:function(){var date=this.option("date"),min=this.option("min");return date=utils_date.getFirstDateView(this._getViewName(),date),new Date(min&&date<min?min:date)},_getCellByDate:ui_calendar_base_view_abstract,isBoundary:ui_calendar_base_view_abstract,_optionChanged:function(args){var{name,value}=args;switch(name){case"value":this._renderValue();break;case"contouredDate":this._renderContouredDate(value);break;case"onCellClick":this._createCellClickAction();break;case"disabledDates":case"cellTemplate":this._invalidate();break;case"rtlEnabled":this._cacheAppendMethodName(value),this.callBase(args);break;case"_todayDate":this._renderBody();break;default:this.callBase(args)}}});const ui_calendar_base_view=BaseView;var Views={month:ui_calendar_base_view.inherit({_getViewName:function(){return"month"},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl:function(){this.callBase(),this._renderHeader()},_renderBody:function(){this.callBase(),this._$table.find(".".concat("dx-calendar-other-view")).addClass("dx-calendar-other-month")},_renderFocusTarget:common.ZT,getCellAriaLabel:function(date){return localization_date.format(date,"longdate")},_renderHeader:function(){var $headerRow=(0,renderer.Z)("<tr>"),$header=(0,renderer.Z)("<thead>").append($headerRow);this._$table.prepend($header);for(var colIndex=0,colCount=this.option("colCount");colIndex<colCount;colIndex++)this._renderHeaderCell(colIndex,$headerRow);this.option("showWeekNumbers")&&this._renderWeekHeaderCell($headerRow)},_renderHeaderCell:function(cellIndex,$headerRow){var{firstDayOfWeek}=this.option(),{full:fullCaption,abbreviated:abbrCaption}=this._getDayCaption(firstDayOfWeek+cellIndex),$cell=(0,renderer.Z)("<th>").attr({scope:"col",abbr:fullCaption}).text(abbrCaption);this._appendCell($headerRow,$cell)},_renderWeekHeaderCell:function($headerRow){var $weekNumberHeaderCell=(0,renderer.Z)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"}).text("#");this.option("rtlEnabled")?$headerRow.append($weekNumberHeaderCell):$headerRow.prepend($weekNumberHeaderCell)},_renderWeekNumberCell:function(rowData){var{showWeekNumbers,rtlEnabled,cellTemplate}=this.option();if(showWeekNumbers){var weekNumber=this._getWeekNumber(rowData.prevCellDate),cell=dom_adapter.Z.createElement("td"),$cell=(0,renderer.Z)(cell);cell.className="dx-calendar-week-number-cell",cellTemplate?cellTemplate.render(this._prepareCellTemplateData(weekNumber,-1,$cell)):cell.innerHTML=weekNumber,rtlEnabled?rowData.row.append(cell):rowData.row.prepend(cell),this.setAria({role:"gridcell",label:"Week ".concat(weekNumber)},$cell)}},_getWeekNumber:function(date){var{weekNumberRule,firstDayOfWeek}=this.option();return"auto"===weekNumberRule?utils_date.getWeekNumber(date,firstDayOfWeek,1===firstDayOfWeek?"firstFourDays":"firstDay"):utils_date.getWeekNumber(date,firstDayOfWeek,weekNumberRule)},getNavigatorCaption:function(){return localization_date.format(this.option("date"),"monthandyear")},_isTodayCell:function(cellDate){var today=this.option("_todayDate")();return utils_date.sameDate(cellDate,today)},_isDateOutOfRange:function(cellDate){var minDate=this.option("min"),maxDate=this.option("max");return!utils_date.dateInRange(cellDate,minDate,maxDate,"date")},_isOtherView:function(cellDate){return cellDate.getMonth()!==this.option("date").getMonth()},_getCellText:function(cellDate){return localization_date.format(cellDate,"d")},_getDayCaption:function(day){var dayIndex=day%this.option("colCount");return{full:localization_date.getDayNames()[dayIndex],abbreviated:localization_date.getDayNames("abbreviated")[dayIndex]}},_getFirstCellData:function(){var{firstDayOfWeek}=this.option(),firstDay=utils_date.getFirstMonthDate(this.option("date")),firstMonthDayOffset=firstDayOfWeek-firstDay.getDay(),daysInWeek=this.option("colCount");return firstMonthDayOffset>=0&&(firstMonthDayOffset-=daysInWeek),firstDay.setDate(firstDay.getDate()+firstMonthDayOffset),firstDay},_getNextCellData:function(date){return(date=new Date(date)).setDate(date.getDate()+1),date},_getCellByDate:function(date){return this._$table.find("td[data-value='".concat(date_serialization.serializeDate(date,utils_date.getShortDateFormat()),"']"))},isBoundary:function(date){return utils_date.sameMonthAndYear(date,this.option("min"))||utils_date.sameMonthAndYear(date,this.option("max"))},_getDefaultDisabledDatesHandler:function(disabledDates){return function(args){var isDisabledDate=disabledDates.some((function(item){return utils_date.sameDate(item,args.date)}));if(isDisabledDate)return!0}}}),year:ui_calendar_base_view.inherit({_getViewName:function(){return"year"},_isTodayCell:function(cellDate){var today=this.option("_todayDate")();return utils_date.sameMonthAndYear(cellDate,today)},_isDateOutOfRange:function(cellDate){return!utils_date.dateInRange(cellDate,utils_date.getFirstMonthDate(this.option("min")),utils_date.getLastMonthDate(this.option("max")))},_isOtherView:function(){return!1},_getCellText:function(cellDate){return localization_date.getMonthNames("abbreviated")[cellDate.getMonth()]},_getFirstCellData:function(){var currentDate=this.option("date"),data=new Date(currentDate);return data.setDate(1),data.setMonth(0),data},_getNextCellData:function(date){return(date=new Date(date)).setMonth(date.getMonth()+1),date},_getCellByDate:function(date){var foundDate=new Date(date);return foundDate.setDate(1),this._$table.find("td[data-value='".concat(date_serialization.serializeDate(foundDate,utils_date.getShortDateFormat()),"']"))},getCellAriaLabel:function(date){return localization_date.format(date,"monthandyear")},getNavigatorCaption:function(){return localization_date.format(this.option("date"),"yyyy")},isBoundary:function(date){return utils_date.sameYear(date,this.option("min"))||utils_date.sameYear(date,this.option("max"))},_renderWeekNumberCell:common.ZT}),decade:ui_calendar_base_view.inherit({_getViewName:function(){return"decade"},_isTodayCell:function(cellDate){var today=this.option("_todayDate")();return utils_date.sameYear(cellDate,today)},_isDateOutOfRange:function(cellDate){var min=this.option("min"),max=this.option("max");return!utils_date.dateInRange(cellDate.getFullYear(),min&&min.getFullYear(),max&&max.getFullYear())},_isOtherView:function(cellDate){var date=new Date(cellDate);return date.setMonth(1),!utils_date.sameDecade(date,this.option("date"))},_getCellText:function(cellDate){return localization_date.format(cellDate,"yyyy")},_getFirstCellData:function(){var year=utils_date.getFirstYearInDecade(this.option("date"))-1;return utils_date.createDateWithFullYear(year,0,1)},_getNextCellData:function(date){return(date=new Date(date)).setFullYear(date.getFullYear()+1),date},getNavigatorCaption:function(){var currentDate=this.option("date"),firstYearInDecade=utils_date.getFirstYearInDecade(currentDate),startDate=new Date(currentDate),endDate=new Date(currentDate);return startDate.setFullYear(firstYearInDecade),endDate.setFullYear(firstYearInDecade+9),localization_date.format(startDate,"yyyy")+"-"+localization_date.format(endDate,"yyyy")},_isValueOnCurrentView:function(currentDate,value){return utils_date.sameDecade(currentDate,value)},_getCellByDate:function(date){var foundDate=new Date(date);return foundDate.setDate(1),foundDate.setMonth(0),this._$table.find("td[data-value='".concat(date_serialization.serializeDate(foundDate,utils_date.getShortDateFormat()),"']"))},isBoundary:function(date){return utils_date.sameDecade(date,this.option("min"))||utils_date.sameDecade(date,this.option("max"))},_renderWeekNumberCell:common.ZT}),century:ui_calendar_base_view.inherit({_getViewName:function(){return"century"},_isTodayCell:function(cellDate){var today=this.option("_todayDate")();return utils_date.sameDecade(cellDate,today)},_isDateOutOfRange:function(cellDate){var decade=utils_date.getFirstYearInDecade(cellDate),minDecade=utils_date.getFirstYearInDecade(this.option("min")),maxDecade=utils_date.getFirstYearInDecade(this.option("max"));return!utils_date.dateInRange(decade,minDecade,maxDecade)},_isOtherView:function(cellDate){var date=new Date(cellDate);return date.setMonth(1),!utils_date.sameCentury(date,this.option("date"))},_getCellText:function(cellDate){var startDate=localization_date.format(cellDate,"yyyy"),endDate=new Date(cellDate);return endDate.setFullYear(endDate.getFullYear()+9),startDate+" - "+localization_date.format(endDate,"yyyy")},_getFirstCellData:function(){var decade=utils_date.getFirstDecadeInCentury(this.option("date"))-10;return utils_date.createDateWithFullYear(decade,0,1)},_getNextCellData:function(date){return(date=new Date(date)).setFullYear(date.getFullYear()+10),date},_getCellByDate:function(date){var foundDate=new Date(date);return foundDate.setDate(1),foundDate.setMonth(0),foundDate.setFullYear(utils_date.getFirstYearInDecade(foundDate)),this._$table.find("td[data-value='".concat(date_serialization.serializeDate(foundDate,utils_date.getShortDateFormat()),"']"))},getNavigatorCaption:function(){var currentDate=this.option("date"),firstDecadeInCentury=utils_date.getFirstDecadeInCentury(currentDate),startDate=new Date(currentDate),endDate=new Date(currentDate);return startDate.setFullYear(firstDecadeInCentury),endDate.setFullYear(firstDecadeInCentury+99),localization_date.format(startDate,"yyyy")+"-"+localization_date.format(endDate,"yyyy")},isBoundary:function(date){return utils_date.sameCentury(date,this.option("min"))||utils_date.sameCentury(date,this.option("max"))},_renderWeekNumberCell:common.ZT})};const ui_calendar_views=Views;var LEVEL_COMPARE_MAP={month:3,year:2,decade:1,century:0},ZOOM_LEVEL_MONTH="month",ZOOM_LEVEL_YEAR="year",ZOOM_LEVEL_DECADE="decade",ZOOM_LEVEL_CENTURY="century";var Calendar=editor_editor.Z.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,zoomLevel:ZOOM_LEVEL_MONTH,maxZoomLevel:ZOOM_LEVEL_MONTH,minZoomLevel:ZOOM_LEVEL_CENTURY,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===devices.Z.real().deviceType&&!devices.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_supportedKeys:function(){return(0,extend.l)(this.callBase(),{rightArrow:function(e){e.preventDefault(),(0,events_utils.j1)(e)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow:function(e){e.preventDefault(),(0,events_utils.j1)(e)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow:function(e){if(e.preventDefault(),(0,events_utils.j1)(e))this._navigateUp();else{if(fx.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow:function(e){if(e.preventDefault(),(0,events_utils.j1)(e))this._navigateDown();else{if(fx.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home:function(e){e.preventDefault();var zoomLevel=this.option("zoomLevel"),currentDate=this.option("currentDate"),min=this._dateOption("min");if(!this._view.isDateDisabled(currentDate)){var date=utils_date.sameView(zoomLevel,currentDate,min)?min:utils_date.getViewFirstCellDate(zoomLevel,currentDate);this._moveToClosestAvailableDate(date)}},end:function(e){e.preventDefault();var zoomLevel=this.option("zoomLevel"),currentDate=this.option("currentDate"),max=this._dateOption("max");if(!this._view.isDateDisabled(currentDate)){var date=utils_date.sameView(zoomLevel,currentDate,max)?max:utils_date.getViewLastCellDate(zoomLevel,currentDate);this._moveToClosestAvailableDate(date)}},pageUp:function(e){e.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown:function(e){e.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:common.ZT,enter:function(e){if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(this.option("currentDate"))){var value=this._updateTimeComponent(this.option("currentDate"));this._dateValue(value,e)}}else this._navigateDown()}})},_getSerializationFormat:function(optionName){var value=this.option(optionName||"value");return this.option("dateSerializationFormat")?this.option("dateSerializationFormat"):(0,utils_type.kE)(value)?"number":(0,utils_type.HD)(value)?date_serialization.getDateSerializationFormat(value):void 0},_convertToDate:function(value,optionName){return date_serialization.deserializeDate(value)},_dateValue:function(value,event){if(event){if("keydown"===event.type){var cellElement=this._view._getContouredCell().get(0);event.target=cellElement}this._saveValueChangeEvent(event)}this._dateOption("value",value)},_dateOption:function(optionName,optionValue){if(1===arguments.length)return this._convertToDate(this.option(optionName),optionName);var serializationFormat=this._getSerializationFormat(optionName);this.option(optionName,date_serialization.serializeDate(optionValue,serializationFormat))},_shiftDate:function(zoomLevel,date,offset,reverse){switch(zoomLevel){case ZOOM_LEVEL_MONTH:date.setDate(date.getDate()+offset*reverse);break;case ZOOM_LEVEL_YEAR:date.setMonth(date.getMonth()+offset*reverse);break;case ZOOM_LEVEL_DECADE:date.setFullYear(date.getFullYear()+offset*reverse);break;case ZOOM_LEVEL_CENTURY:date.setFullYear(date.getFullYear()+10*offset*reverse)}},_moveCurrentDateByOffset:function(offset){var baseDate=this.option("currentDate"),currentDate=new Date(baseDate),zoomLevel=this.option("zoomLevel");this._shiftDate(zoomLevel,currentDate,offset,1);for(var maxDate=this._getMaxDate(),minDate=this._getMinDate(),isDateForwardInNeighborView=this._areDatesInNeighborView(zoomLevel,currentDate,baseDate),isDateForwardInRange=(0,math.Z2)(currentDate,minDate,maxDate)&&isDateForwardInNeighborView,dateForward=new Date(currentDate);isDateForwardInRange;){if(!this._view.isDateDisabled(dateForward)){currentDate=dateForward;break}this._shiftDate(zoomLevel,dateForward,offset,1),isDateForwardInNeighborView=this._areDatesInNeighborView(zoomLevel,dateForward,baseDate),isDateForwardInRange=(0,math.Z2)(dateForward,minDate,maxDate)&&isDateForwardInNeighborView}this._view.isDateDisabled(baseDate)||this._view.isDateDisabled(currentDate)?this._waitRenderView(offset>0?1:-1):this.option("currentDate",currentDate)},_areDatesInSameView(zoomLevel,date1,date2){switch(zoomLevel){case ZOOM_LEVEL_MONTH:return date1.getMonth()===date2.getMonth();case ZOOM_LEVEL_YEAR:return date1.getYear()===date2.getYear();case ZOOM_LEVEL_DECADE:return parseInt(date1.getYear()/10)===parseInt(date2.getYear()/10);case ZOOM_LEVEL_CENTURY:return parseInt(date1.getYear()/100)===parseInt(date2.getYear()/100)}},_areDatesInNeighborView(zoomLevel,date1,date2){switch(zoomLevel){case ZOOM_LEVEL_MONTH:return a=date1.getMonth(),b=date2.getMonth(),abs=Math.abs(a-b),Math.min(abs,12-abs)<=1;case ZOOM_LEVEL_YEAR:return Math.abs(date1.getYear()-date2.getYear())<=1;case ZOOM_LEVEL_DECADE:return Math.abs(date1.getYear()-date2.getYear())<=10;case ZOOM_LEVEL_CENTURY:return Math.abs(date1.getYear()-date2.getYear())<=100}var a,b,abs},_moveToClosestAvailableDate:function(){var isDateForwardInStartView,isDateBackwardInStartView,baseDate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("currentDate"),currentDate=new Date(baseDate),zoomLevel=this.option("zoomLevel"),isCurrentDateAvailable=!this._isDateNotAvailable(currentDate),isDateForwardAvailable=isCurrentDateAvailable,isDateBackwardAvailable=isCurrentDateAvailable,dateForward=new Date(currentDate),dateBackward=new Date(currentDate);do{if(isDateForwardAvailable){currentDate=dateForward;break}if(isDateBackwardAvailable){currentDate=dateBackward;break}this._shiftDate(zoomLevel,dateForward,1,1),this._shiftDate(zoomLevel,dateBackward,1,-1),isDateForwardInStartView=this._areDatesInSameView(zoomLevel,dateForward,baseDate),isDateBackwardInStartView=this._areDatesInSameView(zoomLevel,dateBackward,baseDate),isDateForwardAvailable=isDateForwardInStartView&&!this._isDateNotAvailable(dateForward),isDateBackwardAvailable=isDateBackwardInStartView&&!this._isDateNotAvailable(dateBackward)}while(isDateForwardInStartView||isDateBackwardInStartView);this.option("currentDate",currentDate)},_isDateNotAvailable:function(date){var maxDate=this._getMaxDate(),minDate=this._getMinDate();return!(0,math.Z2)(date,minDate,maxDate)||this._view.isDateDisabled(date)},_init:function(){this.callBase(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_correctZoomLevel:function(){var minZoomLevel=this.option("minZoomLevel"),maxZoomLevel=this.option("maxZoomLevel"),zoomLevel=this.option("zoomLevel");LEVEL_COMPARE_MAP[maxZoomLevel]<LEVEL_COMPARE_MAP[minZoomLevel]||(LEVEL_COMPARE_MAP[zoomLevel]>LEVEL_COMPARE_MAP[maxZoomLevel]?this.option("zoomLevel",maxZoomLevel):LEVEL_COMPARE_MAP[zoomLevel]<LEVEL_COMPARE_MAP[minZoomLevel]&&this.option("zoomLevel",minZoomLevel))},_initCurrentDate:function(){var currentDate=this._getNormalizedDate(this._dateOption("value"))||this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",currentDate)},_getNormalizedDate:function(date){return date=utils_date.normalizeDate(date,this._getMinDate(),this._getMaxDate()),(0,utils_type.$K)(date)?this._getDate(date):date},_initActions:function(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates:function(){this._templateManager.addDefaultTemplates({cell:new function_template.k((function(options){var data=options.model;(0,renderer.Z)(options.container).append((0,renderer.Z)("<span>").text(data&&data.text||String(data)))}))}),this.callBase()},_updateCurrentDate:function(date){if(fx.Z.isAnimating(this._$viewsWrapper)&&fx.Z.stop(this._$viewsWrapper,!0),this._getMinDate()>this._getMaxDate())this.option("currentDate",new Date);else{var normalizedDate=this._getNormalizedDate(date);if(date.getTime()===normalizedDate.getTime()){var offset=this._getViewsOffset(this._view.option("date"),normalizedDate);0!==offset&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(offset=0),this._view&&0!==offset&&!this._suppressNavigation?this._navigate(offset,normalizedDate):(this._renderNavigator(),this._setViewContoured(normalizedDate),this._updateAriaId(normalizedDate))}else this.option("currentDate",new Date(normalizedDate))}},_setViewContoured:function(date){(this.option("skipFocusCheck")||function elementHasFocus(element){return element.hasClass("dx-state-focused")}(this._focusTarget()))&&this._view.option("contouredDate",date)},_getMinDate:function(){return this.min||(this.min=this._dateOption("min")||new Date(1e3,0)),this.min},_getMaxDate:function(){return this.max||(this.max=this._dateOption("max")||new Date(3e3,0)),this.max},_getViewsOffset:function(startDate,endDate){var zoomCorrection,zoomLevel=this.option("zoomLevel");if(zoomLevel===ZOOM_LEVEL_MONTH)return this._getMonthsOffset(startDate,endDate);switch(zoomLevel){case ZOOM_LEVEL_CENTURY:zoomCorrection=100;break;case ZOOM_LEVEL_DECADE:zoomCorrection=10;break;default:zoomCorrection=1}return parseInt(endDate.getFullYear()/zoomCorrection)-parseInt(startDate.getFullYear()/zoomCorrection)},_getMonthsOffset:function(startDate,endDate){return 12*(endDate.getFullYear()-startDate.getFullYear())+(endDate.getMonth()-startDate.getMonth())},_waitRenderView:function(offset){if(!this._alreadyViewRender){this._alreadyViewRender=!0;var date=this._getDateByOffset(offset*this._getRtlCorrection());this._moveToClosestAvailableDate(date),this._waitRenderViewTimeout=setTimeout((()=>{this._alreadyViewRender=!1}))}},_getRtlCorrection:function(){return this.option("rtlEnabled")?-1:1},_getDateByOffset:function(offset,date){var _date,currentDay=(date=this._getDate(null!==(_date=date)&&void 0!==_date?_date:this.option("currentDate"))).getDate(),difference=utils_date.getDifferenceInMonth(this.option("zoomLevel"))*offset;date.setDate(1),date.setMonth(date.getMonth()+difference);var lastDay=utils_date.getLastMonthDate(date).getDate();return date.setDate(currentDay>lastDay?lastDay:currentDay),date},_focusTarget:function(){return this.$element()},_initMarkup:function(){this._renderSubmitElement(),this.callBase();var $element=this.$element();$element.addClass("dx-calendar"),this._renderBody(),$element.append(this.$body),this._renderViews(),this._renderNavigator(),$element.append(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._updateAriaSelected(),this._updateAriaId(),this._moveToClosestAvailableDate()},_render:function(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody:function(){this._$viewsWrapper||(this.$body=(0,renderer.Z)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,renderer.Z)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews:function(){this.$element().addClass("dx-calendar-view-"+this.option("zoomLevel"));var currentDate=this.option("currentDate");if(this._view=this._renderSpecificView(currentDate),(0,utils_window.Ym)()){var beforeDate=this._getDateByOffset(-1,currentDate);this._beforeView=this._isViewAvailable(beforeDate)?this._renderSpecificView(beforeDate):null;var afterDate=this._getDateByOffset(1,currentDate);afterDate.setDate(1),this._afterView=this._isViewAvailable(afterDate)?this._renderSpecificView(afterDate):null}this._translateViews()},_renderSpecificView:function(date){var specificView=ui_calendar_views[this.option("zoomLevel")],$view=(0,renderer.Z)("<div>").appendTo(this._$viewsWrapper),config=this._viewConfig(date);return this._createComponent($view,specificView,config)},_viewConfig:function(date){var _this$option,disabledDates=this.option("disabledDates");return disabledDates=(0,utils_type.mf)(disabledDates)?this._injectComponent(disabledDates.bind(this)):disabledDates,{date,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:null!==(_this$option=this.option("firstDayOfWeek"))&&void 0!==_this$option?_this$option:localization_date.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),value:this._dateOption("value"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")}},_injectComponent:function(func){var that=this;return function(params){return(0,extend.l)(params,{component:that}),func(params)}},_isViewAvailable:function(date){var zoomLevel=this.option("zoomLevel"),min=utils_date.getViewMinBoundaryDate(zoomLevel,this._getMinDate()),max=utils_date.getViewMaxBoundaryDate(zoomLevel,this._getMaxDate());return utils_date.dateInRange(date,min,max)},_translateViews:function(){(0,translator.pB)(this._view.$element(),{left:0,top:0}),this._beforeView&&(0,translator.pB)(this._beforeView.$element(),{left:this._getViewPosition(-1),top:0}),this._afterView&&(0,translator.pB)(this._afterView.$element(),{left:this._getViewPosition(1),top:0})},_getViewPosition:function(coefficient){return 100*coefficient*(this.option("rtlEnabled")?-1:1)+"%"},_cellClickHandler:function(e){var zoomLevel=this.option("zoomLevel"),nextView=utils_date.getViewDown(zoomLevel),isMaxZoomLevel=this._isMaxZoomLevel();if(nextView&&!isMaxZoomLevel)this._navigateDown(e.event.currentTarget);else{var newValue=this._updateTimeComponent(e.value);this._dateValue(newValue,e.event),this._cellClickAction(e)}},_updateTimeComponent:function(date){var result=new Date(date),currentValue=this._dateOption("value");return currentValue&&(result.setHours(currentValue.getHours()),result.setMinutes(currentValue.getMinutes()),result.setSeconds(currentValue.getSeconds()),result.setMilliseconds(currentValue.getMilliseconds())),result},_isMaxZoomLevel:function(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown:function(cell){var zoomLevel=this.option("zoomLevel");if(!this._isMaxZoomLevel()){var nextView=utils_date.getViewDown(zoomLevel);if(nextView){var newCurrentDate=this._view.option("contouredDate")||this._view.option("date");cell&&(newCurrentDate=(0,renderer.Z)(cell).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",newCurrentDate),this.option("zoomLevel",nextView),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))}}},_renderNavigator:function(){this._navigator||(this._navigator=new ui_calendar_navigator((0,renderer.Z)("<div>"),this._navigatorConfig())),this._navigator.option("text",this._view.getNavigatorCaption()),this._updateButtonsVisibility()},_navigatorConfig:function(){return{text:this._view.getNavigatorCaption(),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),rtlEnabled:this.option("rtlEnabled")}},_navigatorClickHandler:function(e){var currentDate=this._getDateByOffset(e.direction,this.option("currentDate"));this._moveToClosestAvailableDate(currentDate)},_navigateUp:function(){var zoomLevel=this.option("zoomLevel"),nextView=utils_date.getViewUp(zoomLevel);nextView&&!this._isMinZoomLevel(zoomLevel)&&(this.option("zoomLevel",nextView),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel:function(zoomLevel){var min=this._getMinDate(),max=this._getMaxDate();return utils_date.sameView(zoomLevel,min,max)||this.option("minZoomLevel")===zoomLevel},_updateButtonsVisibility:function(){this._navigator.toggleButton("next",!(0,utils_type.$K)(this._getRequiredView("next"))),this._navigator.toggleButton("prev",!(0,utils_type.$K)(this._getRequiredView("prev")))},_renderSwipeable:function(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),swipeable.Z,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler:function(e){fx.Z.stop(this._$viewsWrapper,!0),e.event.maxLeftOffset=this._getRequiredView("next")?1:0,e.event.maxRightOffset=this._getRequiredView("prev")?1:0},_getRequiredView:function(name){var view,isRtl=this.option("rtlEnabled");return"next"===name?view=isRtl?this._beforeView:this._afterView:"prev"===name&&(view=isRtl?this._afterView:this._beforeView),view},_swipeUpdateHandler:function(e){var offset=e.event.offset;(0,translator.pB)(this._$viewsWrapper,{left:offset*this._viewWidth(),top:0}),this._updateNavigatorCaption(offset)},_swipeEndHandler:function(e){var targetOffset=e.event.targetOffset,moveOffset=targetOffset?targetOffset/Math.abs(targetOffset):0;if(0!==moveOffset){var date=this._getDateByOffset(-moveOffset*this._getRtlCorrection());this._isDateInInvalidRange(date)&&(date=moveOffset>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",date)}else this._animateWrapper(0,250)},_viewWidth:function(){return this._viewWidthValue||(this._viewWidthValue=(0,size.dz)(this.$element())),this._viewWidthValue},_updateNavigatorCaption:function(offset){offset*=this._getRtlCorrection();var view=this._view;offset>.5&&this._beforeView?view=this._beforeView:offset<-.5&&this._afterView&&(view=this._afterView),this._navigator.option("text",view.getNavigatorCaption())},_isDateInInvalidRange:function(date){if(!this._view.isBoundary(date)){var min=this._getMinDate(),max=this._getMaxDate(),normalizedDate=utils_date.normalizeDate(date,min,max);return normalizedDate===min||normalizedDate===max}},_renderFooter:function(){var showTodayButton=this.option("showTodayButton");if(showTodayButton){var $todayButton=this._createComponent((0,renderer.Z)("<a>"),ui_button.Z,{focusStateEnabled:!1,text:message.Z.format("dxCalendar-todayButtonText"),onClick:function(args){this._toTodayView(args)}.bind(this),integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,renderer.Z)("<div>").addClass("dx-calendar-footer").append($todayButton),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",showTodayButton)},_renderSubmitElement:function(){this._$submitElement=(0,renderer.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(value){var dateValue=this._convertToDate(value);this._getSubmitElement().val(date_serialization.serializeDate(dateValue,"yyyy-MM-dd"))},_getSubmitElement:function(){return this._$submitElement},_animateShowView:function(){return fx.Z.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250).promise()},_popAnimationView:function(view,from,to,duration){return fx.Z.animate(view.$element(),{type:"pop",from:{scale:from,opacity:from},to:{scale:to,opacity:to},duration})},_navigate:function(offset,value){if(0!==offset&&1!==Math.abs(offset)&&this._isViewAvailable(value)){var newView=this._renderSpecificView(value);offset>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=newView):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=newView),this._translateViews()}var endPosition=-this._getRtlCorrection()*(offset>0?1:offset<0?-1:0)*this._viewWidth();this._$viewsWrapper.position().left!==endPosition&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(offset,value):this._animateWrapper(endPosition,250).done(this._wrapperAnimationEndHandler.bind(this,offset,value)))},_animateWrapper:function(to,duration){return fx.Z.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:to},duration})},_getDate:value=>new Date(value),_toTodayView:function(args){this._saveValueChangeEvent(args.event);var today=new Date;this._isMaxZoomLevel()?this._dateOption("value",today):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._dateOption("value",today),this._animateShowView(),this._preventViewChangeAnimation=!1)},_wrapperAnimationEndHandler:function(offset,newDate){this._rearrangeViews(offset),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(newDate),this._updateAriaId(newDate),this._updateAriaSelected()},_rearrangeViews:function(offset){var viewOffset,viewToCreateKey,viewToRemoveKey;if(0!==offset&&(offset<0?(viewOffset=1,viewToCreateKey="_beforeView",viewToRemoveKey="_afterView"):(viewOffset=-1,viewToCreateKey="_afterView",viewToRemoveKey="_beforeView"),this[viewToCreateKey])){var destinationDate=this[viewToCreateKey].option("date");this[viewToRemoveKey]&&this[viewToRemoveKey].$element().remove(),offset===viewOffset?this[viewToRemoveKey]=this._view:(this[viewToRemoveKey]=this._renderSpecificView(this._getDateByOffset(viewOffset,destinationDate)),this._view.$element().remove()),this._view=this[viewToCreateKey];var dateByOffset=this._getDateByOffset(-viewOffset,destinationDate);this[viewToCreateKey]=this._isViewAvailable(dateByOffset)?this._renderSpecificView(dateByOffset):null}},_resetLocation:function(){(0,translator.pB)(this._$viewsWrapper,{left:0,top:0})},_clean:function(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache:function(){delete this._viewWidthValue},_disposeViews:function(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._beforeView,delete this._afterView},_dispose:function(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews:function(){this._disposeViews(),this._renderViews()},_visibilityChanged:function(){this._translateViews()},_focusInHandler:function(){this.callBase.apply(this,arguments),this._view.option("contouredDate",this.option("currentDate"))},_focusOutHandler:function(){this.callBase.apply(this,arguments),this._view.option("contouredDate",null)},_updateViewsValue:function(value){var newValue=value?new Date(value):null;this._view.option("value",newValue),this._beforeView&&this._beforeView.option("value",newValue),this._afterView&&this._afterView.option("value",newValue)},_updateAriaSelected:function(value,previousValue){var _value;value=null!==(_value=value)&&void 0!==_value?_value:this._dateOption("value");var $prevSelectedCell=this._view._getCellByDate(previousValue),$selectedCell=this._view._getCellByDate(value);this.setAria("selected",void 0,$prevSelectedCell),this.setAria("selected",!0,$selectedCell),value&&this.option("currentDate").getTime()===value.getTime()&&this._updateAriaId(value)},_updateAriaId:function(value){var _value2;value=null!==(_value2=value)&&void 0!==_value2?_value2:this.option("currentDate");var ariaId="dx-"+new guid.Z,$newCell=this._view._getCellByDate(value);this.setAria("id",ariaId,$newCell),this.setAria("activedescendant",ariaId),this._onContouredChanged(ariaId)},_suppressingNavigation:function(callback,args){this._suppressNavigation=!0,callback.apply(this,args),delete this._suppressNavigation},_optionChanged:function(args){var value=args.value,previousValue=args.previousValue;switch(args.name){case"width":this.callBase(args),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(previousValue)),this._updateCurrentDate(value);break;case"zoomLevel":this.$element().removeClass("dx-calendar-view-"+previousValue),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":value=this._convertToDate(value),previousValue=this._convertToDate(previousValue),this._updateAriaSelected(value,previousValue),this.option("currentDate",(0,utils_type.$K)(value)?new Date(value):new Date),this._updateViewsValue(value),this._setSubmitValue(value),this.callBase(args);break;case"onCellClick":this._view.option("onCellClick",value);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"skipFocusCheck":break;case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;default:this.callBase(args)}},getContouredDate:function(){return this._view.option("contouredDate")}});(0,component_registrator.Z)("dxCalendar",Calendar);const calendar=Calendar;var ui_date_box_strategy_abstract=core_class.Z.abstract;const ui_date_box_strategy=core_class.Z.inherit({ctor:function(dateBox){this.dateBox=dateBox},widgetOption:function(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget:function(element){element=element||(0,renderer.Z)("<div>"),this._widget=this._createWidget(element),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget:function(element){var widgetName=this._getWidgetName(),widgetOptions=this._getWidgetOptions();return this.dateBox._createComponent(element,widgetName,widgetOptions)},_getWidgetOptions:ui_date_box_strategy_abstract,_getWidgetName:ui_date_box_strategy_abstract,getDefaultOptions:function(){return{mode:"text"}},getDisplayFormat:ui_date_box_strategy_abstract,supportedKeys:common.ZT,getKeyboardListener:common.ZT,customizeButtons:common.ZT,getParsedText:function(text,format){var value=localization_date.parse(text,format);return value||localization_date.parse(text)},renderInputMinMax:common.ZT,renderOpenedState:function(){this._updateValue()},popupConfig:ui_date_box_strategy_abstract,_dimensionChanged:function(){var _this$_getPopup;null===(_this$_getPopup=this._getPopup())||void 0===_this$_getPopup||_this$_getPopup.repaint()},renderPopupContent:function(){var popup=this._getPopup();this._renderWidget();var $popupContent=popup.$content().parent();events_engine.Z.off($popupContent,"mousedown"),events_engine.Z.on($popupContent,"mousedown",this._preventFocusOnPopup.bind(this))},getFirstPopupElement:common.ZT,getLastPopupElement:common.ZT,_preventFocusOnPopup:function(e){e.preventDefault()},_getWidgetContainer:function(){return this._getPopup().$content()},_getPopup:function(){return this.dateBox._popup},popupShowingHandler:common.ZT,popupHiddenHandler:common.ZT,_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:common.ZT,getDefaultDate:function(){return new Date},textChangedHandler:common.ZT,renderValue:function(){this.dateBox.option("opened")&&this._updateValue()},getValue:function(){return this._widget.option("value")},isAdaptivityChanged:function(){return!1},dispose:function(){var popup=this._getPopup();popup&&popup.$content().empty()},dateBoxValue:function(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}});var CalendarStrategy=ui_date_box_strategy.inherit({NAME:"Calendar",getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{todayButtonText:message.Z.format("dxCalendar-todayButtonText")})},supportedKeys:function(){var homeEndHandler=function(e){return!!this.option("opened")&&(e.preventDefault(),!0)};return{rightArrow:function(){if(this.option("opened"))return!0},leftArrow:function(){if(this.option("opened"))return!0},enter:function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){var viewValue=this._getContouredValue(),lastActionElement=this._lastActionElement,shouldCloseDropDown=this._closeDropDownByEnter();return shouldCloseDropDown&&viewValue&&"calendar"===lastActionElement&&this.dateBoxValue(viewValue,e),shouldCloseDropDown&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!shouldCloseDropDown}return!0}this.dateBox._valueChangeEventHandler(e)}.bind(this),home:homeEndHandler,end:homeEndHandler}},getDisplayFormat:function(displayFormat){return displayFormat||"shortdate"},_closeDropDownByEnter:()=>!0,_getWidgetName:function(){return calendar},_getContouredValue:function(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions:function(){var disabledDates=this.dateBox.option("disabledDates");return(0,extend.l)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),tabIndex:null,disabledDates:(0,utils_type.mf)(disabledDates)?this._injectComponent(disabledDates.bind(this.dateBox)):disabledDates,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent:function(func){var that=this;return function(params){return(0,extend.l)(params,{component:that.dateBox}),func(params)}},_refreshActiveDescendant:function(e){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",e.actionValue)},_getTodayButtonConfig(){var buttonsLocation=this.dateBox.option("buttonsLocation"),position="default"===buttonsLocation?["bottom","center"]:(0,common.Um)(buttonsLocation);return{widget:"dxButton",toolbar:position[0],location:"after"===position[1]?"before":position[1],options:{onInitialized:function(e){e.component.registerKeyHandler("escape",this._escapeHandler.bind(this))}.bind(this),onClick:args=>{this._widget._toTodayView(args)},text:this.dateBox.option("todayButtonText"),type:"today"}}},_isCalendarVisible:function(){var{calendarOptions}=this.dateBox.option();return(0,utils_type.Qr)(calendarOptions)||!1!==calendarOptions.visible},_getPopupToolbarItems(toolbarItems){return"useButtons"===this.dateBox.option("applyValueMode")&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...toolbarItems]:toolbarItems},popupConfig:function(_popupConfig){return(0,extend.l)(!0,_popupConfig,{position:{collision:"flipfit flip"},width:"auto"})},_escapeHandler:function(){this.dateBox.close(),this.dateBox.focus()},_valueChangedHandler:function(e){var value=e.value,prevValue=e.previousValue;utils_date.sameDate(value,prevValue)&&utils_date.sameHoursAndMinutes(value,prevValue)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),e.event)},_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler:function(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler:function(e){var dateBox=this.dateBox;"instantly"===dateBox.option("applyValueMode")&&(dateBox.option("opened",!1),this.dateBoxValue(this.getValue(),e.event))}});const ui_date_box_strategy_calendar=CalendarStrategy;var ui_scrollable_old=__webpack_require__("./node_modules/devextreme/esm/ui/scroll_view/ui.scrollable.old.js"),scroll_direction=__webpack_require__("./node_modules/devextreme/esm/renovation/ui/scroll_view/utils/scroll_direction.js");class DateViewRoller extends ui_scrollable_old.Z{_getDefaultOptions(){return(0,extend.l)(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){events_engine.Z.on((0,renderer.Z)(this.container()),"dxmousewheel",(e=>{this._isWheelScrolled=!0}))}_renderContainerClick(){if(this.option("showOnClick")){var eventName=(0,events_utils.V4)(click.u,this.NAME),clickAction=this._createActionByOption("onClick");events_engine.Z.off((0,renderer.Z)(this.container()),eventName),events_engine.Z.on((0,renderer.Z)(this.container()),eventName,(function(e){clickAction({event:e})}))}}_renderItems(){var items=this.option("items")||[],$items=(0,renderer.Z)();(0,renderer.Z)(this.content()).empty(),items.forEach((function(item){$items=$items.add((0,renderer.Z)("<div>").addClass("dx-dateview-item").append(item))})),(0,renderer.Z)(this.content()).append($items),this._$items=$items,this.update()}_renderSelectedItemFrame(){(0,renderer.Z)("<div>").addClass("dx-dateview-item-selected-frame").append((0,renderer.Z)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,renderer.Z)(this.container()))}_renderSelectedValue(selectedIndex){var index=this._fitIndex(null!=selectedIndex?selectedIndex:this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(index)}),this._renderActiveStateItem()}_fitIndex(index){var itemCount=(this.option("items")||[]).length;return index>=itemCount?itemCount-1:index<0?0:index}_getItemPosition(index){return Math.round(this._itemHeight()*index)}_renderItemsClick(){var itemSelector=this._getItemSelector(),eventName=(0,events_utils.V4)(click.u,this.NAME);events_engine.Z.off(this.$element(),eventName,itemSelector),events_engine.Z.on(this.$element(),eventName,itemSelector,this._itemClickHandler.bind(this))}_getItemSelector(){return".dx-dateview-item"}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(itemElement){return this._itemElements().index(itemElement)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){var selectedIndex=this.option("selectedIndex");(0,iterator.S6)(this._$items,(function(index){(0,renderer.Z)(this).toggleClass("dx-dateview-item-selected",selectedIndex===index)}))}_shouldScrollToNeighborItem(){return"desktop"===devices.Z.real().deviceType&&this._isWheelScrolled}_moveTo(targetLocation){var{top,left}=function convertToLocation(location,direction){if((0,utils_type.PO)(location)){var left=(0,common.IS)(location.left,location.x),top=(0,common.IS)(location.top,location.y);return{left:(0,utils_type.$K)(left)?left:void 0,top:(0,utils_type.$K)(top)?top:void 0}}var{isHorizontal,isVertical}=new scroll_direction.I(direction);return{left:isHorizontal&&(0,utils_type.$K)(location)?location:void 0,top:isVertical&&(0,utils_type.$K)(location)?location:void 0}}(targetLocation),location=this.scrollOffset(),delta={x:location.left-left,y:location.top-top};if(this._isVisible()&&(delta.x||delta.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){var that=this;fx.Z.stop((0,renderer.Z)(this.content())),fx.Z.animate((0,renderer.Z)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(delta.y)},complete(){(0,translator.Kx)((0,renderer.Z)(that.content())),that.handleMove({delta})}}),delete this._animation}else this.handleMove({delta})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(index){var itemsCount=this.option("items").length;return Math.max(Math.min(index,itemsCount-1),0)}_isInNullNeighborhood(x){return-.1<=x&&x<=.1}_getSelectedIndexAfterScroll(currentSelectedIndex){var dy=this.scrollOffset().top-currentSelectedIndex*this._itemHeight();if(this._isInNullNeighborhood(dy))return currentSelectedIndex;var direction=dy>0?1:-1;return this._fitSelectedIndexInRange(currentSelectedIndex+direction)}_getNewSelectedIndex(currentSelectedIndex){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(currentSelectedIndex);this._animation=!0;var ratio=this.scrollOffset().top/this._itemHeight();return Math.round(ratio)}_endActionHandler(){var currentSelectedIndex=this.option("selectedIndex"),newSelectedIndex=this._getNewSelectedIndex(currentSelectedIndex);newSelectedIndex===currentSelectedIndex?this._renderSelectedValue(newSelectedIndex):this.option("selectedIndex",newSelectedIndex),this._isWheelScrolled=!1}_itemHeight(){var $item=this._$items.first();return(0,size.Cr)($item)}_toggleActive(state){this.$element().toggleClass("dx-state-active",state)}_isVisible(){return(0,renderer.Z)(this.container()).is(":visible")}_fireSelectedIndexChanged(value,previousValue){this._selectedIndexChanged({value,previousValue,event:void 0})}_visibilityChanged(visible){super._visibilityChanged(visible),this._visibilityChangedHandler(visible)}_visibilityChangedHandler(visible){visible&&(this._visibilityTimer=setTimeout((()=>{this._renderSelectedValue(this.option("selectedIndex"))}))),this.toggleActiveState(!1)}toggleActiveState(state){this.$element().toggleClass("dx-dateviewroller-current",state)}_refreshSelectedIndex(){var selectedIndex=this.option("selectedIndex"),fitIndex=this._fitIndex(selectedIndex);fitIndex===selectedIndex?this._renderActiveStateItem():this.option("selectedIndex",fitIndex)}_optionChanged(args){switch(args.name){case"selectedIndex":this._fireSelectedIndexChanged(args.value,args.previousValue),this._renderSelectedValue(args.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(args)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,component_registrator.Z)("dxDateViewRoller",DateViewRoller);const ui_date_view_roller=DateViewRoller;var TYPE_date="date",ROLLER_TYPE_year="year",ROLLER_TYPE_month="month",ROLLER_TYPE_day="day",ROLLER_TYPE_hours="hours",DateView=editor_editor.Z.inherit({_valueOption:function(){var value=this.option("value"),date=new Date(value);return!value||isNaN(date)?this._getDefaultDate():date},_getDefaultDate:function(){var date=new Date;return this.option("type")===TYPE_date?new Date(date.getFullYear(),date.getMonth(),date.getDate()):date},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{minDate:ui_date_utils.MIN_DATEVIEW_DEFAULT_DATE,maxDate:ui_date_utils.MAX_DATEVIEW_DEFAULT_DATE,type:TYPE_date,value:new Date,applyCompactClass:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(_device){return"desktop"!==_device.deviceType},options:{applyCompactClass:!0}}])},_render:function(){this.callBase(),this.$element().addClass("dx-dateview"),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses:function(currentFormat,previousFormat){this.$element().addClass("dx-dateview-"+currentFormat),previousFormat&&this.$element().removeClass("dx-dateview-"+previousFormat)},_toggleCompactClass:function(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper:function(){return this._$wrapper},_renderContentImpl:function(){this._$wrapper=(0,renderer.Z)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers:function(){this._$rollersContainer||(this._$rollersContainer=(0,renderer.Z)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};var that=this;(0,iterator.S6)(that._rollerConfigs,(function(name){var $roller=(0,renderer.Z)("<div>").appendTo(that._$rollersContainer).addClass("dx-dateviewroller-"+that._rollerConfigs[name].type);that._rollers[that._rollerConfigs[name].type]=that._createComponent($roller,ui_date_view_roller,{items:that._rollerConfigs[name].displayItems,selectedIndex:that._rollerConfigs[name].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart:function(e){var roller=e.component;roller._toggleActive(!0),that._setActiveRoller(that._rollerConfigs[name],roller.option("selectedIndex"))},onEnd:function(e){e.component._toggleActive(!1)},onClick:function(e){var roller=e.component;roller._toggleActive(!0),that._setActiveRoller(that._rollerConfigs[name],roller.option("selectedIndex")),that._setRollerState(that._rollerConfigs[name],roller.option("selectedIndex")),roller._toggleActive(!1)},onSelectedIndexChanged:function(e){var roller=e.component;that._setRollerState(that._rollerConfigs[name],roller.option("selectedIndex"))}})})),that._$rollersContainer.appendTo(that._wrapper())},_createRollerConfigs:function(type){var that=this;type=type||that.option("type"),that._rollerConfigs={},localization_date.getFormatParts(ui_date_utils.FORMATS_MAP[type]).forEach((function(partName){that._createRollerConfig(partName)}))},_createRollerConfig:function(componentName){for(var componentInfo=ui_date_utils.DATE_COMPONENTS_INFO[componentName],valueRange=this._calculateRollerConfigValueRange(componentName),startValue=valueRange.startValue,endValue=valueRange.endValue,formatter=componentInfo.formatter,curDate=this._getCurrentDate(),config={type:componentName,setValue:componentInfo.setter,valueItems:[],displayItems:[],getIndex:function(value){return value[componentInfo.getter]()-startValue}},i=startValue;i<=endValue;i++)config.valueItems.push(i),config.displayItems.push(formatter(i,curDate));config.selectedIndex=config.getIndex(curDate),this._rollerConfigs[componentName]=config},_setActiveRoller:function(currentRoller){var activeRoller=currentRoller&&this._rollers[currentRoller.type];(0,iterator.S6)(this._rollers,(function(){this.toggleActiveState(this===activeRoller)}))},_updateRollersPosition:function(){var that=this;(0,iterator.S6)(this._rollers,(function(type){var correctIndex=that._rollerConfigs[type].getIndex(that._getCurrentDate());this.option("selectedIndex",correctIndex)}))},_setRollerState:function(roller,selectedIndex){if(selectedIndex!==roller.selectedIndex){var rollerValue=roller.valueItems[selectedIndex],setValue=roller.setValue,currentValue=new Date(this._getCurrentDate()),currentDate=currentValue.getDate(),minDate=this.option("minDate"),maxDate=this.option("maxDate");roller.type===ROLLER_TYPE_month?currentDate=Math.min(currentDate,ui_date_utils.getMaxMonthDay(currentValue.getFullYear(),rollerValue)):roller.type===ROLLER_TYPE_year&&(currentDate=Math.min(currentDate,ui_date_utils.getMaxMonthDay(rollerValue,currentValue.getMonth()))),currentValue.setDate(currentDate),currentValue[setValue](rollerValue);var normalizedDate=utils_date.normalizeDate(currentValue,minDate,maxDate);currentValue=ui_date_utils.mergeDates(normalizedDate,currentValue,"time"),currentValue=utils_date.normalizeDate(currentValue,minDate,maxDate),this.option("value",currentValue),roller.selectedIndex=selectedIndex}roller.type===ROLLER_TYPE_year&&this._refreshRollers(),roller.type===ROLLER_TYPE_month&&(this._refreshRoller(ROLLER_TYPE_day),this._refreshRoller(ROLLER_TYPE_hours))},_refreshRoller:function(rollerType){var roller=this._rollers[rollerType];if(roller){this._createRollerConfig(rollerType);var rollerConfig=this._rollerConfigs[rollerType];rollerType!==ROLLER_TYPE_day&&rollerConfig.displayItems.toString()===roller.option("items").toString()||roller.option({items:rollerConfig.displayItems,selectedIndex:rollerConfig.selectedIndex})}},_getCurrentDate:function(){var curDate=this._valueOption(),minDate=this.option("minDate"),maxDate=this.option("maxDate");return utils_date.normalizeDate(curDate,minDate,maxDate)},_calculateRollerConfigValueRange:function(componentName){var curDate=this._getCurrentDate(),minDate=this.option("minDate"),maxDate=this.option("maxDate"),minYear=utils_date.sameYear(curDate,minDate),minMonth=minYear&&curDate.getMonth()===minDate.getMonth(),maxYear=utils_date.sameYear(curDate,maxDate),maxMonth=maxYear&&curDate.getMonth()===maxDate.getMonth(),minHour=minMonth&&curDate.getDate()===minDate.getDate(),maxHour=maxMonth&&curDate.getDate()===maxDate.getDate(),componentInfo=ui_date_utils.DATE_COMPONENTS_INFO[componentName],startValue=componentInfo.startValue,endValue=componentInfo.endValue;return componentName===ROLLER_TYPE_year&&(startValue=minDate.getFullYear(),endValue=maxDate.getFullYear()),componentName===ROLLER_TYPE_month&&(minYear&&(startValue=minDate.getMonth()),maxYear&&(endValue=maxDate.getMonth())),componentName===ROLLER_TYPE_day&&(endValue=ui_date_utils.getMaxMonthDay(curDate.getFullYear(),curDate.getMonth()),minYear&&minMonth&&(startValue=minDate.getDate()),maxYear&&maxMonth&&(endValue=maxDate.getDate())),componentName===ROLLER_TYPE_hours&&(startValue=minHour?minDate.getHours():startValue,endValue=maxHour?maxDate.getHours():endValue),{startValue,endValue}},_refreshRollers:function(){this._refreshRoller(ROLLER_TYPE_month),this._refreshRoller(ROLLER_TYPE_day),this._refreshRoller(ROLLER_TYPE_hours)},_optionChanged:function(args){switch(args.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(args.value,args.previousValue);break;case"visible":this.callBase(args),args.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(args)}},_clean:function(){this.callBase(),delete this._$rollersContainer}});(0,component_registrator.Z)("dxDateView",DateView);const ui_date_view=DateView;var ui_date_box_strategy_date_view_window=(0,utils_window.Jj)(),DateViewStrategy=ui_date_box_strategy.inherit({NAME:"DateView",getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{openOnFieldClick:!0,applyButtonText:message.Z.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat:function(displayFormat){return displayFormat||ui_date_utils.FORMATS_MAP[this.dateBox.option("type")]},popupConfig:function(config){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:config.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device:function(_device){var platform=_device.platform;return"generic"===platform||"ios"===platform},options:{width:"auto",height:"auto"}},{device:function(_device2){var platform=_device2.platform,phone=_device2.phone;return"generic"===platform&&phone},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:ui_date_box_strategy_date_view_window}}}]}},_renderWidget:function(){if((0,support.inputType)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))this._widget&&(this._widget.$element().remove(),this._widget=null);else{var popup=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{var element=(0,renderer.Z)("<div>").appendTo(popup.$content());this._widget=this._createWidget(element)}this._widget.$element().appendTo(this._getWidgetContainer())}},_getWidgetName:function(){return ui_date_view},renderOpenedState:function(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions:function(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*ui_date_utils.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}});const ui_date_box_strategy_date_view=DateViewStrategy;const ui_date_box_strategy_native=ui_date_box_strategy.inherit({NAME:"Native",popupConfig:function(_popupConfig){return(0,extend.l)({},_popupConfig,{width:"auto"})},getParsedText:function(text){return text?"datetime"===this.dateBox.option("type")?new Date(text.replace(/-/g,"/").replace("T"," ").split(".")[0]):ui_date_utils.fromStandardDateFormat(text):null},renderPopupContent:common.ZT,_getWidgetName:common.ZT,_getWidgetOptions:common.ZT,_getDateBoxType:function(){var type=this.dateBox.option("type");return ui_date_utils.SUPPORTED_FORMATS.includes(type)?"datetime"!==type||(0,support.inputType)(type)||(type="datetime-local"):type="date",type},customizeButtons:function(){var dropDownButton=this.dateBox.getButton("dropDown");devices.Z.real().android&&dropDownButton&&dropDownButton.on("click",function(){this.dateBox._input().get(0).click()}.bind(this))},getDefaultOptions:function(){return{mode:this._getDateBoxType()}},getDisplayFormat:function(displayFormat){var type=this._getDateBoxType();return displayFormat||ui_date_utils.FORMATS_MAP[type]},renderInputMinMax:function($input){$input.attr({min:date_serialization.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:date_serialization.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}});var ui_collection_widget_edit=__webpack_require__("./node_modules/devextreme/esm/ui/collection/ui.collection_widget.edit.js"),MINSIZE_MAP={row:"minWidth",col:"minHeight"},MAXSIZE_MAP={row:"maxWidth",col:"maxHeight"},FLEX_JUSTIFY_CONTENT_MAP={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},FLEX_ALIGN_ITEMS_MAP={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},FLEX_DIRECTION_MAP={row:"row",col:"column"},setFlexProp=(element,prop,value)=>{if(value=(0,style.bh)(prop,value),element.style[(0,style.Hj)(prop)]=value,!(0,utils_window.Ym)()){if(""===value||!(0,utils_type.$K)(value))return;var styleExpr=(0,inflector.H0)(prop)+": "+value+";";element.attributes.style?element.attributes.style.value.indexOf(styleExpr)<0&&(element.attributes.style.value+=" "+styleExpr):element.setAttribute("style",styleExpr)}};class BoxItem extends item.Z{_renderVisible(value,oldValue){super._renderVisible(value),(0,utils_type.$K)(oldValue)&&this._options.fireItemStateChangedAction({name:"visible",state:value,oldState:oldValue})}}class LayoutStrategy{constructor($element,option){this._$element=$element,this._option=option}renderBox(){this._$element.css({display:(0,style.gC)("flexDirection")+"flex"}),setFlexProp(this._$element.get(0),"flexDirection",FLEX_DIRECTION_MAP[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){var align=this._option("align");return align in FLEX_JUSTIFY_CONTENT_MAP?FLEX_JUSTIFY_CONTENT_MAP[align]:align}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){var crossAlign=this._option("crossAlign");return crossAlign in FLEX_ALIGN_ITEMS_MAP?FLEX_ALIGN_ITEMS_MAP[crossAlign]:crossAlign}renderItems($items){var flexPropPrefix=(0,style.gC)("flexDirection"),direction=this._option("direction");(0,iterator.S6)($items,(function(){var $item=(0,renderer.Z)(this),item=$item.data("dxBoxItemData");$item.css({display:flexPropPrefix+"flex"}).css(MAXSIZE_MAP[direction],item.maxSize||"none").css(MINSIZE_MAP[direction],item.minSize||"0"),setFlexProp($item.get(0),"flexBasis",item.baseSize||0),setFlexProp($item.get(0),"flexGrow",item.ratio),setFlexProp($item.get(0),"flexShrink",(0,utils_type.$K)(item.shrink)?item.shrink:1),$item.children().each(((_,itemContent)=>{(0,renderer.Z)(itemContent).css({width:"auto",height:"auto",display:(0,style.gC)("flexDirection")+"flex",flexBasis:0}),setFlexProp(itemContent,"flexGrow",1),setFlexProp(itemContent,"flexDirection",(0,renderer.Z)(itemContent)[0].style.flexDirection||"column")}))}))}}class Box extends ui_collection_widget_edit.Z{_getDefaultOptions(){return(0,extend.l)(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return"dxBoxItemData"}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new LayoutStrategy(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue($item,config){this._queue.push({$item,config})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(items){for(super._renderItems(items);this._queueIsNotEmpty();){var item=this._shiftItemFromQueue();this._createComponent(item.$item,Box,(0,extend.l)({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},item.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(args){var $itemNode=args.itemData&&args.itemData.node;return $itemNode?this._renderItemContentByNode(args,$itemNode):super._renderItemContent(args)}_postprocessRenderItem(args){var boxConfig=args.itemData.box;boxConfig&&this._pushItemToQueue(args.itemContent,boxConfig)}_createItemByTemplate(itemTemplate,args){return args.itemData.box?itemTemplate.source?itemTemplate.source():(0,renderer.Z)():super._createItemByTemplate(itemTemplate,args)}_itemOptionChanged(item,property,value,oldValue){"visible"===property&&this._onItemStateChanged({name:property,state:value,oldState:!1!==oldValue}),super._itemOptionChanged(item,property,value)}_optionChanged(args){switch(args.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(args)}}_itemOptions(){var options=super._itemOptions();return options.fireItemStateChangedAction=e=>{this._onItemStateChanged(e)},options}}Box.ItemClass=BoxItem,(0,component_registrator.Z)("dxBox",Box);const box=Box;var rotateArrow=function($arrow,angle,offset){cssRotate($arrow,angle,offset)},cssRotate=function($arrow,angle,offset){$arrow.css("transform","rotate("+angle+"deg) translate(0,"+offset+"px)")},TimeView=editor_editor.Z.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue:function(){return this.option("value")||new Date},_init:function(){this.callBase(),this.$element().addClass("dx-timeview")},_render:function(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox:function(){var $box=(0,renderer.Z)("<div>").appendTo(this.$element()),items=[];this.option("_showClock")&&items.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),items.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent($box,box,{height:"100%",width:"100%",direction:"col",items})},_renderClock:function(_,__,container){this._$hourArrow=(0,renderer.Z)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,renderer.Z)("<div>").addClass("dx-timeview-minutearrow");var $container=(0,renderer.Z)(container);$container.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",$container)},_updateClock:function(){var time=this._getValue(),hourArrowAngle=time.getHours()/12*360+time.getMinutes()/60*30,minuteArrowAngle=time.getMinutes()/60*360;rotateArrow(this._$hourArrow,hourArrowAngle,this.option("_arrowOffset")),rotateArrow(this._$minuteArrow,minuteArrowAngle,this.option("_arrowOffset"))},_getBoxItems:function(is12HourFormat){var items=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,renderer.Z)("<div>").addClass("dx-timeview-time-separator").text(localization_date.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return is12HourFormat&&items.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),items},_renderField:function(){var is12HourFormat=!this.option("use24HourFormat");return this._createHourBox(is12HourFormat),this._createMinuteBox(),is12HourFormat&&this._createFormat12Box(),this._createComponent((0,renderer.Z)("<div>").addClass("dx-timeview-field"),box,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(is12HourFormat)}).$element()},_createHourBox:function(is12HourFormat){(this._hourBox=this._createComponent((0,renderer.Z)("<div>"),ui_number_box,(0,extend.l)({min:-1,max:is12HourFormat?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:opts=>this._keyboardHandler(opts)},this._getNumberBoxConfig()))).setAria("label","hours")},_isPM:function(){return!this.option("use24HourFormat")&&1===this._format12.option("value")},_onHourBoxValueChanged:function(_ref){var{value,component}=_ref,currentValue=this._getValue(),newValue=new Date(currentValue),newHours=this._convertMaxHourToMin(value);component.option("value",newHours),this._isPM()&&(newHours+=12),newValue.setHours(newHours),ui_date_utils.normalizeTime(newValue),this.option("value",newValue)},_convertMaxHourToMin:function(hours){var maxHoursValue=this.option("use24HourFormat")?24:12;return(maxHoursValue+hours)%maxHoursValue},_createMinuteBox:function(){var editor=this._minuteBox=this._createComponent((0,renderer.Z)("<div>"),ui_number_box,(0,extend.l)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:opts=>this._keyboardHandler(opts),onValueChanged:_ref2=>{var{value,component}=_ref2,newMinutes=(60+value)%60;component.option("value",newMinutes);var time=new Date(this._getValue());time.setMinutes(newMinutes),ui_date_utils.normalizeTime(time),this.option("value",time)}},this._getNumberBoxConfig()));editor.setAria("label","minutes")},_createFormat12Box:function(){var periodNames=localization_date.getPeriodNames();(this._format12=this._createComponent((0,renderer.Z)("<div>").addClass("dx-timeview-format12"),select_box,{items:[{value:-1,text:periodNames[0]},{value:1,text:periodNames[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:opts=>this._keyboardHandler(opts),onValueChanged:_ref3=>{var{value}=_ref3,hours=this._getValue().getHours(),time=new Date(this._getValue()),newHours=(hours+12*value)%24;time.setHours(newHours),this.option("value",time)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")})).setAria("label","type")},_refreshFormat12:function(){if(!this.option("use24HourFormat")){var newValue=this._getValue().getHours()>=12?1:-1;this._silentEditorValueUpdate(this._format12,newValue)}},_silentEditorValueUpdate:function(editor,value){editor&&(editor._suppressValueChangeAction(),editor.option("value",value),editor._resumeValueChangeAction())},_getNumberBoxConfig:function(){return{showSpinButtons:!0,displayValueFormatter:function(value){return(value<10?"0":"")+value},stylingMode:this.option("stylingMode")}},_normalizeHours:function(hours){return this.option("use24HourFormat")?hours:hours%12||12},_updateField:function(){var hours=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,hours),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime:function(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged:function(visible){visible&&this._updateTime()},_optionChanged:function(args){switch(args.name){case"value":this._updateTime(),this.callBase(args);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(args)}}});(0,component_registrator.Z)("dxTimeView",TimeView);const ui_time_view=TimeView;var ui_date_box_strategy_calendar_with_time_window=(0,utils_window.Jj)(),CalendarWithTimeStrategy=ui_date_box_strategy_calendar.inherit({NAME:"CalendarWithTime",getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter:function(){return utils_date.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:function(displayFormat){return displayFormat||"shortdateshorttime"},_is24HourFormat:function(){return localization_date.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue:function(){var viewDate=this.callBase();return this._updateDateTime(viewDate)},_renderWidget:function(){this.callBase(),this._timeView=this.dateBox._createComponent((0,renderer.Z)("<div>"),ui_time_view,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")}),this._timeView.registerKeyHandler("escape",this._escapeHandler.bind(this))},renderOpenedState:function(){this.callBase();var popup=this._getPopup();popup&&popup.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(function(){this._getPopup()&&this._getPopup().repaint()}.bind(this),0)},isAdaptivityChanged:function(){var isAdaptiveMode=this._isShrinkView(),currentAdaptiveMode=this._currentAdaptiveMode;return isAdaptiveMode!==currentAdaptiveMode?(this._currentAdaptiveMode=isAdaptiveMode,void 0!==currentAdaptiveMode):this.callBase()},_updateValue:function(preventDefaultValue){var date=this.dateBoxValue();date||preventDefaultValue||(date=new Date,ui_date_utils.normalizeTime(date)),this.callBase(),this._timeView&&(date&&this._timeView.option("value",date),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:function(){return(0,size.dz)(ui_date_box_strategy_calendar_with_time_window)<=573},_isShrinkView:function(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems:function(){var items=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||items.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),items},renderPopupContent:function(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var $popupContent=this._getPopup().$content();this._box=this.dateBox._createComponent((0,renderer.Z)("<div>").appendTo($popupContent),box,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(data,i,element){var $container=(0,renderer.Z)("<div>");switch(data.name){case"calendar":$container.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass("dx-datebox-datetime-time-side"),$container.append(this._timeView.$element()));break;case"time":$container.append(this._timeView.$element()),(0,renderer.Z)(element).addClass("dx-datebox-datetime-time-side")}return $container}.bind(this)}),this._attachTabHandler()},popupConfig:function(_popupConfig){var calendarPopupConfig=this.callBase(_popupConfig);return(0,extend.l)(calendarPopupConfig,{width:"auto"})},getFirstPopupElement:function(){return this._timeView._hourBox.$element().find("input")},_attachTabHandler:function(){var dateBox=this.dateBox;this._timeView._hourBox.registerKeyHandler("tab",(function(e){e.shiftKey&&(e.preventDefault(),dateBox.focus())}))},_preventFocusOnPopup:function(e){(0,renderer.Z)(e.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime:function(date){var time=this._timeView.option("value");return date.setHours(time.getHours(),time.getMinutes(),time.getSeconds(),time.getMilliseconds()),date},getValue:function(){var _this$_widget$option,date=null!==(_this$_widget$option=this._widget.option("value"))&&void 0!==_this$_widget$option?_this$_widget$option:this._widget.getContouredDate();return date=date?new Date(date):new Date,this._updateDateTime(date)},dispose:function(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});const ui_date_box_strategy_calendar_with_time=CalendarWithTimeStrategy;var ui_date_box_strategy_list_window=(0,utils_window.Jj)(),BOUNDARY_VALUES={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},ListStrategy=ui_date_box_strategy.inherit({NAME:"List",supportedKeys:function(){return{tab:function(){var{opened,applyValueMode}=this.option();opened&&"instantly"===applyValueMode&&this.close()},space:common.ZT,home:common.ZT,end:common.ZT}},getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:function(displayFormat){return displayFormat||"shorttime"},popupConfig:function(_popupConfig){return _popupConfig},getValue:function(){var selectedIndex=this._widget.option("selectedIndex");if(-1===selectedIndex)return this.dateBox.option("value");var itemData=this._widgetItems[selectedIndex];return this._getDateByItemData(itemData)},useCurrentDateByDefault:function(){return!0},getDefaultDate:function(){return new Date(null)},popupShowingHandler:function(){this.dateBox._dimensionChanged()},_renderWidget:function(){this.callBase(),this._refreshItems()},_getWidgetName:function(){return list_light.Z},_getWidgetOptions:function(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant:function(e){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",e.actionValue)},_refreshItems:function(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState:function(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose:function(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue:function(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue:function(){var value=this.dateBoxValue(),dateIndex=this._getDateIndex(value);-1===dateIndex?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",dateIndex)},_scrollToSelectedItem:function(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex:function(date){for(var result=-1,i=0,n=this._widgetItems.length;i<n;i++)if(this._areDatesEqual(date,this._widgetItems[i])){result=i;break}return result},_areDatesEqual:function(first,second){return(0,utils_type.J_)(first)&&(0,utils_type.J_)(second)&&first.getHours()===second.getHours()&&first.getMinutes()===second.getMinutes()},_getTimeListItems:function(){var min=this.dateBox.dateOption("min")||this._getBoundaryDate("min"),max=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),value=this.dateBox.dateOption("value")||null,delta=max-min,minutes=min.getMinutes()%this.dateBox.option("interval");return delta<0?[]:(delta>ui_date_utils.ONE_DAY&&(delta=ui_date_utils.ONE_DAY),value-min<ui_date_utils.ONE_DAY||((min=this._getBoundaryDate("min")).setMinutes(minutes),value&&Math.abs(value-max)<ui_date_utils.ONE_DAY&&(delta=(60*max.getHours()+Math.abs(max.getMinutes()-minutes))*ui_date_utils.ONE_MINUTE)),this._getRangeItems(min,new Date(min),delta))},_getRangeItems:function(startValue,currentValue,rangeDuration){for(var rangeItems=[],interval=this.dateBox.option("interval");currentValue-startValue<=rangeDuration;)rangeItems.push(new Date(currentValue)),currentValue.setMinutes(currentValue.getMinutes()+interval);return rangeItems},_getBoundaryDate:function(boundary){var boundaryValue=BOUNDARY_VALUES[boundary],currentValue=new Date((0,common.IS)(this.dateBox.dateOption("value"),0));return new Date(currentValue.getFullYear(),currentValue.getMonth(),currentValue.getDate(),boundaryValue.getHours(),boundaryValue.getMinutes())},_timeListItemTemplate:function(itemData){var displayFormat=this.dateBox.option("displayFormat");return localization_date.format(itemData,this.getDisplayFormat(displayFormat))},_listItemClickHandler:function(e){if("useButtons"!==this.dateBox.option("applyValueMode")){var date=this._getDateByItemData(e.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(date,e.event)}},_getDateByItemData:function(itemData){var date=this.dateBox.option("value"),hours=itemData.getHours(),minutes=itemData.getMinutes(),seconds=itemData.getSeconds(),year=itemData.getFullYear(),month=itemData.getMonth(),day=itemData.getDate();return date?((date=this.dateBox.option("dateSerializationFormat")?date_serialization.deserializeDate(date):new Date(date)).setHours(hours),date.setMinutes(minutes),date.setSeconds(seconds),date.setFullYear(year),date.setMonth(month),date.setDate(day)):date=new Date(year,month,day,hours,minutes,0,0),date},getKeyboardListener:function(){return this._widget},_updatePopupHeight:function(){var dropDownOptionsHeight=getSizeValue(this.dateBox.option("dropDownOptions.height"));if(void 0===dropDownOptionsHeight||"auto"===dropDownOptionsHeight){this.dateBox._setPopupOption("height","auto");var popupHeight=(0,size.zp)(this._widget.$element()),maxHeight=.45*(0,size.Cr)(ui_date_box_strategy_list_window);this.dateBox._setPopupOption("height",Math.min(popupHeight,maxHeight))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText:function(text,format){var value=this.callBase(text,format);return value&&(value=ui_date_utils.mergeDates(value,new Date(null),"date")),value}});const ui_date_box_strategy_list=ListStrategy;var ui_date_box_base_window=(0,utils_window.Jj)(),PICKER_TYPE={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},ui_date_box_base_TYPE={date:"date",datetime:"datetime",time:"time"},STRATEGY_NAME_calendar="Calendar",STRATEGY_NAME_dateView="DateView",STRATEGY_NAME_native="Native",STRATEGY_NAME_calendarWithTime="CalendarWithTime",STRATEGY_NAME_list="List",STRATEGY_CLASSES={Calendar:ui_date_box_strategy_calendar,DateView:ui_date_box_strategy_date_view,Native:ui_date_box_strategy_native,CalendarWithTime:ui_date_box_strategy_calendar_with_time,List:ui_date_box_strategy_list},ui_date_box_base_DateBox=ui_drop_down_editor.inherit({_supportedKeys:function(){return(0,extend.l)(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers:function(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:PICKER_TYPE.calendar,invalidDateMessage:message.Z.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:message.Z.format("validation-range"),applyButtonText:message.Z.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device:function(){var platform=devices.Z.real().platform;return"ios"===platform||"android"===platform},options:{pickerType:PICKER_TYPE.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions:function(options){this._userOptions=(0,extend.l)({},options),this.callBase(options),this._updatePickerOptions()},_updatePickerOptions:function(){var pickerType=this.option("pickerType"),type=this.option("type");pickerType!==PICKER_TYPE.list||type!==ui_date_box_base_TYPE.datetime&&type!==ui_date_box_base_TYPE.date||(pickerType=PICKER_TYPE.calendar),type===ui_date_box_base_TYPE.time&&pickerType===PICKER_TYPE.calendar&&(pickerType=PICKER_TYPE.list),this.option("showDropDownButton","generic"!==devices.Z.real().platform||pickerType!==PICKER_TYPE.native),this._pickerType=pickerType},_init:function(){this._initStrategy(),this.option((0,extend.l)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:function(string){return string.charAt(0).toLowerCase()+string.substr(1)},_initStrategy:function(){var strategyName=this._getStrategyName(this._getFormatType()),strategy=STRATEGY_CLASSES[strategyName];this._strategy&&this._strategy.NAME===strategyName||(this._strategy=new strategy(this))},_getFormatType:function(){var currentType=this.option("type"),isTime=/h|m|s/g.test(currentType),type="";return/d|M|Y/g.test(currentType)&&(type+=ui_date_box_base_TYPE.date),isTime&&(type+=ui_date_box_base_TYPE.time),type},_getStrategyName:function(type){var pickerType=this._pickerType;return pickerType===PICKER_TYPE.rollers?STRATEGY_NAME_dateView:pickerType===PICKER_TYPE.native?STRATEGY_NAME_native:type===ui_date_box_base_TYPE.date?STRATEGY_NAME_calendar:type===ui_date_box_base_TYPE.datetime?STRATEGY_NAME_calendarWithTime:STRATEGY_NAME_list},_initMarkup:function(){this.$element().addClass("dx-datebox"),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render:function(){this.callBase(),this._formatValidationIcon()},_renderDimensions:function(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged:function(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight:function(){var _this$_strategy$_upda,_this$_strategy;this._popup&&(null===(_this$_strategy$_upda=(_this$_strategy=this._strategy)._updatePopupHeight)||void 0===_this$_strategy$_upda||_this$_strategy$_upda.call(_this$_strategy))},_refreshFormatClass:function(){var $element=this.$element();(0,iterator.S6)(ui_date_box_base_TYPE,(function(_,item){$element.removeClass("dx-datebox-"+item)})),$element.addClass("dx-datebox-"+this.option("type"))},_refreshPickerTypeClass:function(){var $element=this.$element();(0,iterator.S6)(PICKER_TYPE,(function(_,item){$element.removeClass("dx-datebox-"+item)})),$element.addClass("dx-datebox-"+this._pickerType)},_formatValidationIcon:function(){if((0,utils_window.Ym)()){var inputElement=this._input().get(0),isRtlEnabled=this.option("rtlEnabled"),clearButtonWidth=this._getClearButtonWidth(),longestElementDimensions=this._getLongestElementDimensions(),curWidth=parseFloat(ui_date_box_base_window.getComputedStyle(inputElement).width)-clearButtonWidth,shouldHideValidationIcon=longestElementDimensions.width>curWidth,style=inputElement.style;this.$element().toggleClass("dx-show-invalid-badge",!shouldHideValidationIcon),shouldHideValidationIcon?(void 0===this._storedPadding&&(this._storedPadding=isRtlEnabled?longestElementDimensions.leftPadding:longestElementDimensions.rightPadding),isRtlEnabled?style.paddingLeft=0:style.paddingRight=0):isRtlEnabled?style.paddingLeft=this._storedPadding+"px":style.paddingRight=this._storedPadding+"px"}},_getClearButtonWidth:function(){var clearButtonWidth=0;if(this._isClearButtonVisible()&&""===this._input().val()){var clearButtonElement=this.$element().find(".dx-clear-button-area").get(0);clearButtonWidth=parseFloat(ui_date_box_base_window.getComputedStyle(clearButtonElement).width)}return clearButtonWidth},_getLongestElementDimensions:function(){var format=this._strategy.getDisplayFormat(this.option("displayFormat")),longestValue=localization_date.format(ui_date_utils.getLongestDate(format,localization_date.getMonthNames(),localization_date.getDayNames()),format),$input=this._input(),inputElement=$input.get(0),$longestValueElement=(0,dom.l5)($input,longestValue),storedPadding=void 0!==this._storedPadding?this._storedPadding:0;$longestValueElement.appendTo(this.$element());var elementWidth=parseFloat(ui_date_box_base_window.getComputedStyle($longestValueElement.get(0)).width),rightPadding=parseFloat(ui_date_box_base_window.getComputedStyle(inputElement).paddingRight),leftPadding=parseFloat(ui_date_box_base_window.getComputedStyle(inputElement).paddingLeft),necessaryWidth=elementWidth+leftPadding+rightPadding+storedPadding;return $longestValueElement.remove(),{width:necessaryWidth,leftPadding,rightPadding}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup:function(){this.callBase(),this._popup.$wrapper().addClass("dx-datebox-wrapper"),this._renderPopupWrapper()},_getPopupToolbarItems(){var _this$_strategy$_getP,_this$_strategy$_getP2,_this$_strategy2,defaultItems=this.callBase();return null!==(_this$_strategy$_getP=null===(_this$_strategy$_getP2=(_this$_strategy2=this._strategy)._getPopupToolbarItems)||void 0===_this$_strategy$_getP2?void 0:_this$_strategy$_getP2.call(_this$_strategy2,defaultItems))&&void 0!==_this$_strategy$_getP?_this$_strategy$_getP:defaultItems},_popupConfig:function(){var popupConfig=this.callBase();return(0,extend.l)(this._strategy.popupConfig(popupConfig),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper:function(){if(this._popup){var $element=this.$element(),classPostfixes=(0,extend.l)({},ui_date_box_base_TYPE,PICKER_TYPE);(0,iterator.S6)(classPostfixes,function(_,item){$element.removeClass("dx-datebox-wrapper-"+item)}.bind(this)),this._popup.$wrapper().addClass("dx-datebox-wrapper-"+this.option("type")).addClass("dx-datebox-wrapper-"+this._pickerType).addClass("dx-dropdowneditor-overlay")}},_renderPopupContent:function(){this.callBase(),this._strategy.renderPopupContent()},_getFirstPopupElement:function(){return this._strategy.getFirstPopupElement()||this.callBase()},_getLastPopupElement:function(){return this._strategy.getLastPopupElement()||this.callBase()},_popupShowingHandler:function(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler:function(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler:function(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged:function(visible){visible&&this._formatValidationIcon()},_clearValueHandler:function(e){this.option("text",""),this.callBase(e)},_readOnlyPropValue:function(){if(this._pickerType===PICKER_TYPE.rollers)return!0;var platform=devices.Z.real().platform;return this._isNativeType()&&("ios"===platform||"android"===platform)?this.option("readOnly"):this.callBase()},_isClearButtonVisible:function(){return this.callBase()&&!this._isNativeType()},_renderValue:function(){var value=this.dateOption("value");return this.option("text",this._getDisplayedText(value)),this._strategy.renderValue(),this.callBase()},_setSubmitValue:function(){var value=this.dateOption("value"),dateSerializationFormat=this.option("dateSerializationFormat"),submitFormat=ui_date_utils.SUBMIT_FORMATS_MAP[this.option("type")],submitValue=dateSerializationFormat?date_serialization.serializeDate(value,dateSerializationFormat):ui_date_utils.toStandardDateFormat(value,submitFormat);this._getSubmitElement().val(submitValue)},_getDisplayedText:function(value){var displayedText,mode=this.option("mode");if("text"===mode){var displayFormat=this._strategy.getDisplayFormat(this.option("displayFormat"));displayedText=localization_date.format(value,displayFormat)}else{var format=this._getFormatByMode(mode);displayedText=format?localization_date.format(value,format):ui_date_utils.toStandardDateFormat(value,mode)}return displayedText},_getFormatByMode:function(mode){return(0,support.inputType)(mode)?null:ui_date_utils.FORMATS_MAP[mode]},_valueChangeEventHandler:function(e){var{text,type,validationError}=this.option(),currentValue=this.dateOption("value");if(text!==this._getDisplayedText(currentValue)){var parsedDate=this._getParsedDate(text),value=null!=currentValue?currentValue:this._getDateByDefault(),newValue=ui_date_utils.mergeDates(value,parsedDate,type),date=parsedDate&&"time"===type?newValue:parsedDate;if(this._applyInternalValidation(date).isValid){var displayedText=this._getDisplayedText(newValue);value&&newValue&&value.getTime()===newValue.getTime()&&displayedText!==text?this._renderValue():this.dateValue(newValue,e)}}else validationError&&!validationError.editorSpecific||(this._applyInternalValidation(currentValue),this._applyCustomValidation(currentValue))},_getDateByDefault:function(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate:function(text){var displayFormat=this._strategy.getDisplayFormat(this.option("displayFormat")),parsedText=this._strategy.getParsedText(text,displayFormat);return null!=parsedText?parsedText:void 0},_applyInternalValidation(value){var hasText=!!this.option("text")&&null!==value,isDate=!!value&&(0,utils_type.J_)(value)&&!isNaN(value.getTime()),isDateInRange=isDate&&utils_date.dateInRange(value,this.dateOption("min"),this.dateOption("max"),this.option("type")),isValid=!hasText&&!value||isDateInRange,validationMessage="";return isDate?isDateInRange||(validationMessage=this.option("dateOutOfRangeMessage")):validationMessage=this.option("invalidDateMessage"),this.option({isValid,validationError:isValid?null:{editorSpecific:!0,message:validationMessage}}),{isValid,isDate}},_applyCustomValidation:function(value){this.validationRequest.fire({editor:this,value:this._serializeDate(value)})},_isValueChanged:function(newValue){var oldValue=this.dateOption("value");return(oldValue&&oldValue.getTime())!==(newValue&&newValue.getTime())},_isTextChanged:function(newValue){return this.option("text")!==(newValue&&this._getDisplayedText(newValue)||"")},_renderProps:function(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState:function(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle:function(){var placeholder=this.option("placeholder");if(placeholder)return placeholder;var type=this.option("type");return type===ui_date_box_base_TYPE.time?message.Z.format("dxDateBox-simulatedDataPickerTitleTime"):type===ui_date_box_base_TYPE.date||type===ui_date_box_base_TYPE.datetime?message.Z.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy:function(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler:function(e){var value=this._strategy.getValue();this.dateValue(value,e.event),this.callBase()},_dispose:function(){var _this$_strategy3;this.callBase(),null===(_this$_strategy3=this._strategy)||void 0===_this$_strategy3||_this$_strategy3.dispose()},_isNativeType:function(){return this._pickerType===PICKER_TYPE.native},_updatePopupTitle:function(){var _this$_popup;null===(_this$_popup=this._popup)||void 0===_this$_popup||_this$_popup.option("title",this._getPopupTitle())},_optionChanged:function(args){switch(args.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:args.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:args.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":var isValid=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),isValid||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break;case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(args.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat:function(){var value=this.option("value");return this.option("dateSerializationFormat")&&(0,config.Z)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,utils_type.kE)(value)?"number":(0,utils_type.HD)(value)?date_serialization.getDateSerializationFormat(value):void 0},_updateValue:function(value){this.callBase(),this._applyInternalValidation(null!=value?value:this.dateOption("value"))},dateValue:function(value,dxEvent){var isValueChanged=this._isValueChanged(value);return isValueChanged&&dxEvent&&this._saveValueChangeEvent(dxEvent),isValueChanged||(this._isTextChanged(value)?this._updateValue(value):""===this.option("text")&&this._applyCustomValidation(value)),this.dateOption("value",value)},dateOption:function(optionName,value){if(1===arguments.length)return date_serialization.deserializeDate(this.option(optionName));this.option(optionName,this._serializeDate(value))},_serializeDate:function(date){var serializationFormat=this._getSerializationFormat();return date_serialization.serializeDate(date,serializationFormat)},_clearValue:function(){var value=this.option("value");this.callBase(),null===value&&this._applyCustomValidation(null)},reset:function(){var value=this.option("value");this.callBase(),null===value&&this._applyInternalValidation(null)}});var ui_date_box_mask_DateBoxMask=ui_date_box_base_DateBox.inherit({_supportedKeys(e){var originalHandlers=this.callBase(e),callOriginalHandler=e=>{var originalHandler=originalHandlers[(0,events_utils.EV)(e)];return originalHandler&&originalHandler.apply(this,[e])},applyHandler=(e,maskHandler)=>this._shouldUseOriginalHandler(e)?callOriginalHandler.apply(this,[e]):maskHandler.apply(this,[e]);return(0,extend.l)({},originalHandlers,{del:e=>applyHandler(e,(event=>{this._revertPart(1),this._isAllSelected()||event.preventDefault()})),backspace:e=>applyHandler(e,(event=>{this._revertPart(-1),this._isAllSelected()||event.preventDefault()})),home:e=>applyHandler(e,(event=>{this._selectFirstPart(),event.preventDefault()})),end:e=>applyHandler(e,(event=>{this._selectLastPart(),event.preventDefault()})),escape:e=>applyHandler(e,(event=>{this._revertChanges(event)})),enter:e=>applyHandler(e,(()=>{this._enterHandler()})),leftArrow:e=>applyHandler(e,(event=>{this._selectNextPart(-1),event.preventDefault()})),rightArrow:e=>applyHandler(e,(event=>{this._selectNextPart(1),event.preventDefault()})),upArrow:e=>applyHandler(e,(event=>{this._upDownArrowHandler(1),event.preventDefault()})),downArrow:e=>applyHandler(e,(event=>{this._upDownArrowHandler(-1),event.preventDefault()}))})},_shouldUseOriginalHandler(e){var isNotDeletingInCalendar=this.option("opened")&&e&&-1===["backspace","del"].indexOf((0,events_utils.EV)(e));return!this._useMaskBehavior()||isNotDeletingInCalendar||e&&e.altKey},_upDownArrowHandler(step){this._setNewDateIfEmpty();var originalValue=this._getActivePartValue(this._initialMaskValue),delta=this._getActivePartValue()-originalValue;this._loadMaskValue(this._initialMaskValue),this._partIncrease(delta+step,!0)},_getDefaultOptions(){return(0,extend.l)(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(_ref){var{originalEvent,alt}=_ref,key=originalEvent.data||originalEvent.key;return"string"==typeof key&&1===key.length&&!alt&&!(0,events_utils.j1)(originalEvent)},_isSingleDigitKey(e){var _e$originalEvent,data=null===(_e$originalEvent=e.originalEvent)||void 0===_e$originalEvent?void 0:_e$originalEvent.data;return 1===(null==data?void 0:data.length)&&parseInt(data,10)},_useBeforeInputEvent:function(){return devices.Z.real().android},_keyInputHandler(e,key){var oldInputValue=this._input().val();this._processInputKey(key),e.preventDefault(),oldInputValue!==this._input().val()&&events_engine.Z.trigger(this._input(),"input")},_keyboardHandler(e){var key=e.originalEvent.key,result=this.callBase(e);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(browser.Z.chrome&&"Process"===e.key&&0===e.code.indexOf("Digit")?(key=e.code.replace("Digit",""),this._processInputKey(key),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(e)&&this._keyInputHandler(e.originalEvent,key)),result},_maskBeforeInputHandler(e){this._maskInputHandler=null;var{inputType}=e.originalEvent;"insertCompositionText"===inputType&&(this._maskInputHandler=()=>{this._renderSelectedPart()});var isBackwardDeletion="deleteContentBackward"===inputType;if(isBackwardDeletion||"deleteContentForward"===inputType){var direction=isBackwardDeletion?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(direction)}}if(this._useMaskBehavior()&&this._isSingleCharKey(e)){var key=e.originalEvent.data;return this._keyInputHandler(e,key),!0}},_keyPressHandler(e){var{originalEvent:event}=e;"insertCompositionText"===(null==event?void 0:event.inputType)&&this._isSingleDigitKey(e)&&(this._processInputKey(event.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(e),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(key){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(key))?this._searchString(key):this._searchNumber(key)},_isAllSelected(){var caret=this._caret();return caret.end-caret.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;var format=this._strategy.getDisplayFormat(this.option("displayFormat")),isLDMLPattern=(0,utils_type.HD)(format)&&!localization_date._getPatternByFormat(format);return this._formatPattern=isLDMLPattern?format:getFormat((function(value){return localization_date.format(value,format)})),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){var value="time"===this.option("type")?new Date(null):new Date;this._maskValue=value,this._initialMaskValue=value,this._renderDateParts()}},_partLimitsReached(max){var maxLimitLength=String(max).length,formatLength=this._getActivePartProp("pattern").length,maxSearchLength=1===formatLength?maxLimitLength:Math.min(formatLength,maxLimitLength),isLengthExceeded=this._searchValue.length===maxSearchLength,isValueOverflowed=parseInt(this._searchValue+"0")>max;return isLengthExceeded||isValueOverflowed},_searchNumber(char){var{max}=this._getActivePartLimits(),maxLimitLength=String(max).length;this._searchValue=(this._searchValue+char).substr(-maxLimitLength),isNaN(this._searchValue)&&(this._searchValue=char),this._setActivePartValue(this._searchValue),this._partLimitsReached(max)&&this._selectNextPart(1)},_searchString(char){if(isNaN(parseInt(this._getActivePartProp("text")))){for(var limits=this._getActivePartProp("limits")(this._maskValue),startString=this._searchValue+char.toLowerCase(),endLimit=limits.max-limits.min,i=0;i<=endLimit;i++)if(this._loadMaskValue(this._initialMaskValue),this._partIncrease(i+1),0===this._getActivePartProp("text").toLowerCase().indexOf(startString))return void(this._searchValue=startString);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(char))}},_clearSearchValue(){this._searchValue=""},_revertPart:function(direction){if(!this._isAllSelected()){var actual=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(actual),this._selectNextPart(direction)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&"text"===this.option("mode")},_prepareRegExpInfo(){this._regExpInfo=getRegExpInfo(this._getFormatPattern(),localization_date);var regexp=this._regExpInfo.regexp,source=regexp.source,flags=regexp.flags,quantifierRegexp=new RegExp(/(\{[0-9]+,?[0-9]*\})/),convertedSource=source.split(quantifierRegexp).map((sourcePart=>quantifierRegexp.test(sourcePart)?sourcePart:number.Z.convertDigits(sourcePart,!1))).join("");this._regExpInfo.regexp=new RegExp(convertedSource,flags)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(this._useMaskBehavior()){var text=this.option("text")||this._getDisplayedText(this._maskValue);text&&(this._dateParts=renderDateParts(text,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}},_detachMaskEvents(){events_engine.Z.off(this._input(),".dateBoxMask")},_attachMaskEvents(){events_engine.Z.on(this._input(),(0,events_utils.V4)("dxclick","dateBoxMask"),this._maskClickHandler.bind(this)),events_engine.Z.on(this._input(),(0,events_utils.V4)("paste","dateBoxMask"),this._maskPasteHandler.bind(this)),events_engine.Z.on(this._input(),(0,events_utils.V4)("drop","dateBoxMask"),(()=>{this._renderSelectedPart()})),events_engine.Z.on(this._input(),(0,events_utils.V4)("compositionend","dateBoxMask"),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&events_engine.Z.on(this._input(),(0,events_utils.V4)("beforeinput","dateBoxMask"),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(e){this._useMaskBehavior()&&this._partIncrease(e.delta>0?1:-1,e)},_selectNextPart(){var step=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.option("text")&&!this._disposed){step&&(this._initialMaskValue=new Date(this._maskValue));var index=(0,math.n$)(this._activePartIndex+step,0,this._dateParts.length-1);if(this._dateParts[index].isStub){if(!(0===index&&step<0||index===this._dateParts.length-1&&step>0))return void this._selectNextPart(step>=0?step+1:step-1);index=this._activePartIndex}this._activePartIndex!==index&&this._clearSearchValue(),this._activePartIndex=index,this._caret(this._getActivePartProp("caret"))}},_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"},_getActivePartLimits(lockOtherParts){return this._getActivePartProp("limits")(this._maskValue,lockOtherParts&&this._getRealLimitsPattern())},_getActivePartValue(dateValue){dateValue=dateValue||this._maskValue;var getter=this._getActivePartProp("getter");return(0,utils_type.mf)(getter)?getter(dateValue):dateValue[getter]()},_addLeadingZeroes(value){var zeroes=this._searchValue.match(/^0+/),limits=this._getActivePartLimits(),maxLimitLength=String(limits.max).length;return((zeroes&&zeroes[0]||"")+String(value)).substr(-maxLimitLength)},_setActivePartValue(value,dateValue){dateValue=dateValue||this._maskValue;var setter=this._getActivePartProp("setter"),limits=this._getActivePartLimits();value=(0,math.Z2)(value,limits.min,limits.max)?value:value%10,value=this._addLeadingZeroes((0,math.n$)(value,limits.min,limits.max)),(0,utils_type.mf)(setter)?setter(dateValue,value):dateValue[setter](value),this._renderDisplayText(this._getDisplayedText(dateValue)),this._renderDateParts()},_getActivePartProp(property){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][property]},_loadMaskValue(){var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=value&&new Date(value),this._initialMaskValue=value&&new Date(value)},_saveMaskValue(){var value=this._maskValue&&new Date(this._maskValue);value&&"date"===this.option("type")&&value.setHours(0,0,0,0),this._initialMaskValue=new Date(value),this.dateOption("value",value)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(text){this.callBase(text),this._useMaskBehavior()&&this.option("text",text)},_partIncrease(step,lockOtherParts){this._setNewDateIfEmpty();var{max,min}=this._getActivePartLimits(lockOtherParts),limitDelta=max-min;1===limitDelta&&limitDelta++;var newValue=step+this._getActivePartValue();newValue>max?newValue=this._applyLimits(newValue,{limitBase:min,limitClosest:max,limitDelta}):newValue<min&&(newValue=this._applyLimits(newValue,{limitBase:max,limitClosest:min,limitDelta})),this._setActivePartValue(newValue)},_applyLimits(newValue,_ref2){var{limitBase,limitClosest,limitDelta}=_ref2,delta=(newValue-limitClosest)%limitDelta;return delta?limitBase+delta-1*(0,math.Xx)(delta):limitClosest},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=((dateParts,position)=>{for(var i=0;i<dateParts.length;i++){var caretInGroup=dateParts[i].caret.end>=position;if(!dateParts[i].isStub&&caretInGroup)return i}return null})(this._dateParts,this._caret().start),this._isAllSelected()||((0,utils_type.$K)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(e){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(e){var newText=this._replaceSelectedText(this.option("text"),this._caret(),(0,dom.Zx)(e)),date=localization_date.parse(newText,this._getFormatPattern());date&&this._isDateValid(date)&&(this._maskValue=date,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),e.preventDefault()},_isDateValid:date=>(0,utils_type.J_)(date)&&!isNaN(date),_isValueDirty(){var value=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(value&&value.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&events_engine.Z.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(e){this._useMaskBehavior()&&!e.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(e),this._selectFirstPart(e)):this.callBase(e)},_valueChangeEventHandler(e){var text=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(e),text?null===this._maskValue&&this._loadMaskValue(text):this._maskValue=null,this._saveMaskValue()):this.callBase(e)},_optionChanged(args){switch(args.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(args),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(args),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(args)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},reset(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});const ui_date_box_mask=ui_date_box_mask_DateBoxMask;(0,component_registrator.Z)("dxDateBox",ui_date_box_mask);var{isWrapped}=variable_wrapper.default,EditorFactoryMixin=function(){var getResultConfig=function(config,options){return(0,extend.l)(config,{readOnly:options.readOnly,placeholder:options.placeholder,inputAttr:{id:options.id},tabIndex:options.tabIndex},options.editorOptions)},checkEnterBug=function(){return browser.Z.mozilla||devices.Z.real().ios},getTextEditorConfig=function(options){var data={},isEnterBug=checkEnterBug(),sharedData=options.sharedData||data;return getResultConfig({placeholder:options.placeholder,width:options.width,value:options.value,onValueChanged:function(e){var needDelayedUpdate="filterRow"===options.parentType||"searchPanel"===options.parentType,isInputOrKeyUpEvent=e.event&&("input"===e.event.type||"keyup"===e.event.type),updateValue=function(e,notFireEvent){options&&options.setValue(e.value,notFireEvent)};clearTimeout(data.valueChangeTimeout),isInputOrKeyUpEvent&&needDelayedUpdate?sharedData.valueChangeTimeout=data.valueChangeTimeout=setTimeout((function(){updateValue(e,data.valueChangeTimeout!==sharedData.valueChangeTimeout)}),(0,utils_type.$K)(options.updateValueTimeout)?options.updateValueTimeout:0):updateValue(e)},onKeyDown:function(e){isEnterBug&&"enter"===(0,events_utils.EV)(e.event)&&events_engine.Z.trigger((0,renderer.Z)(e.component._input()),"change")},valueChangeEvent:"change"+("filterRow"===options.parentType?" keyup input":"")},options)},prepareDateBox=function(options){options.editorName="dxDateBox",options.editorOptions=getResultConfig({value:options.value,onValueChanged:function(args){options.setValue(args.value)},onKeyDown:function(_ref){var{component,event}=_ref,useMaskBehavior=component.option("useMaskBehavior");(checkEnterBug()||useMaskBehavior)&&"enter"===(0,events_utils.EV)(event)&&(component.blur(),component.focus())},displayFormat:options.format,type:options.dataType,dateSerializationFormat:null,width:"filterBuilder"===options.parentType?void 0:"auto"},options)},prepareTextBox=function(options){var value,config=getTextEditorConfig(options),isSearching="searchPanel"===options.parentType;options.editorType&&"dxTextBox"!==options.editorType?config.value=options.value:config.value=(value=options.value,(0,utils_type.$K)(value)?value.toString():""),config.valueChangeEvent+=isSearching?" keyup input search":"",config.mode=config.mode||(isSearching?"search":"text"),options.editorName="dxTextBox",options.editorOptions=config},prepareNumberBox=function(options){var config=getTextEditorConfig(options);config.value=(0,utils_type.$K)(options.value)?options.value:null,options.editorName="dxNumberBox",options.editorOptions=config};function prepareLookupEditor(options){var displayGetter,dataSource,postProcess,lookup=options.lookup,isFilterRow="filterRow"===options.parentType;if(lookup){var _options$editorType;displayGetter=(0,data.vb)(lookup.displayExpr),dataSource=lookup.dataSource,(0,utils_type.mf)(dataSource)&&!isWrapped(dataSource)&&(dataSource=dataSource(options.row||{}),function(options){if(options.row&&options.row.watch&&"dataRow"===options.parentType){var selectBox,editorOptions=options.editorOptions||{};options.editorOptions=editorOptions;var dataSource,onInitialized=editorOptions.onInitialized;editorOptions.onInitialized=function(e){onInitialized&&onInitialized.apply(this,arguments),(selectBox=e.component).on("disposing",stopWatch)};var stopWatch=options.row.watch((()=>(dataSource=options.lookup.dataSource(options.row))&&dataSource.filter),(()=>{selectBox.option("dataSource",dataSource)}),(row=>{options.row=row}))}}(options)),((0,utils_type.Kn)(dataSource)||Array.isArray(dataSource))&&(dataSource=(0,data_source_utils.aN)(dataSource),isFilterRow&&(postProcess=dataSource.postProcess,dataSource.postProcess=function(items){return 0===this.pageIndex()&&(items=items.slice(0)).unshift(null),postProcess?postProcess.call(this,items):items}));var allowClearing=Boolean(lookup.allowClearing&&!isFilterRow);options.editorName=null!==(_options$editorType=options.editorType)&&void 0!==_options$editorType?_options$editorType:"dxSelectBox",options.editorOptions=getResultConfig({searchEnabled:!0,value:options.value,valueExpr:options.lookup.valueExpr,searchExpr:options.lookup.searchExpr||options.lookup.displayExpr,allowClearing,showClearButton:allowClearing,displayExpr:function(data){return null===data?options.showAllText:displayGetter(data)},dataSource,onValueChanged:function(e){var params=[e.value];!isFilterRow&&params.push(e.component.option("text")),options.setValue.apply(this,params)}},options)}}function prepareCheckBox(options){options.editorName="dxCheckBox",options.editorOptions=getResultConfig({elementAttr:{id:options.id},value:(0,utils_type.$K)(options.value)?options.value:void 0,hoverStateEnabled:!options.readOnly,focusStateEnabled:!options.readOnly,activeStateEnabled:!1,onValueChanged:function(e){options.setValue&&options.setValue(e.value,e)}},options)}var prepareCustomEditor=options=>{options.editorName=options.editorType,options.editorOptions=getResultConfig({value:options.value,onValueChanged:function(args){options.setValue(args.value)}},options)},prepareEditor=options=>{var prepareDefaultEditor={dxDateBox:prepareDateBox,dxCheckBox:prepareCheckBox,dxNumberBox:prepareNumberBox,dxTextBox:prepareTextBox};if(options.lookup)prepareLookupEditor(options);else if(options.editorType){var _prepareDefaultEditor;(null!==(_prepareDefaultEditor=prepareDefaultEditor[options.editorType])&&void 0!==_prepareDefaultEditor?_prepareDefaultEditor:prepareCustomEditor)(options)}else switch(options.dataType){case"date":case"datetime":prepareDateBox(options);break;case"boolean":!function(options){"filterRow"===options.parentType||"filterBuilder"===options.parentType?prepareLookupEditor((0,extend.l)(options,{lookup:{displayExpr:function(data){return!0===data?options.trueText||"true":!1===data?options.falseText||"false":void 0},dataSource:[!0,!1]}})):prepareCheckBox(options)}(options);break;case"number":prepareNumberBox(options);break;default:prepareTextBox(options)}};return{createEditor:function($container,options){options.cancel=!1,options.editorElement=(0,core_element.u)($container),(0,utils_type.$K)(options.tabIndex)||(options.tabIndex=this.option("tabIndex")),prepareEditor(options),this.executeAction("onEditorPreparing",options),options.cancel||("dataRow"!==options.parentType||options.isOnForm||(0,utils_type.$K)(options.editorOptions.showValidationMark)||(options.editorOptions.showValidationMark=!1),function(that,options){var $editorElement=(0,renderer.Z)(options.editorElement);if(options.editorName&&options.editorOptions&&$editorElement[options.editorName]){if("dxCheckBox"!==options.editorName&&"dxSwitch"!==options.editorName||options.isOnForm||($editorElement.addClass(that.addWidgetPrefix("checkbox-size")),$editorElement.parent().addClass("dx-editor-inline-block")),that._createComponent($editorElement,options.editorName,options.editorOptions),"dxDateBox"===options.editorName){var dateBox=$editorElement.dxDateBox("instance"),defaultEnterKeyHandler=dateBox._supportedKeys().enter;dateBox.registerKeyHandler("enter",(e=>(dateBox.option("opened")&&defaultEnterKeyHandler(e),!0)))}"dxTextArea"===options.editorName&&$editorElement.dxTextArea("instance").registerKeyHandler("enter",(function(event){"enter"!==(0,events_utils.EV)(event)||event.ctrlKey||event.shiftKey||event.stopPropagation()}))}}(this,options),this.executeAction("onEditorPrepared",options))}}}();const ui_editor_factory_mixin=EditorFactoryMixin,UPDATE_FOCUS_EVENTS=(0,events_utils.V4)([pointer.Z.down,"focusin",click.u].join(" "),"dxDataGridEditorFactory"),module_members={_getFocusedElement($dataGridElement){const focusedElementSelector=`td[tabindex]:focus, ${this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus"}, input:focus, textarea:focus, .dx-lookup-field:focus, .dx-checkbox:focus, .dx-switch:focus, .dx-dropdownbutton .dx-buttongroup:focus, .dx-adaptive-item-text:focus`,$focusedElement=$dataGridElement.find(focusedElementSelector);return this.elementIsInsideGrid($focusedElement)&&$focusedElement},_getFocusCellSelector:()=>".dx-row > td",_updateFocusCore(){const $dataGridElement=this.component&&this.component.$element();if($dataGridElement){let $focus=this._getFocusedElement($dataGridElement);if($focus&&$focus.length){let isHideBorder;if(!$focus.hasClass("dx-cell-focus-disabled")&&!$focus.hasClass("dx-row")){const $focusCell=$focus.closest(this._getFocusCellSelector()+", .dx-cell-focus-disabled");$focusCell.get(0)!==$focus.get(0)&&(isHideBorder=this._needHideBorder($focusCell),$focus=$focusCell)}if($focus.length&&!$focus.hasClass("dx-cell-focus-disabled"))return void this.focus($focus,isHideBorder)}}this.loseFocus()},_needHideBorder:$element=>$element.hasClass("dx-editor-inline-block"),_updateFocus(e){const that=this,isFocusOverlay=e&&e.event&&(0,renderer.Z)(e.event.target).hasClass(that.addWidgetPrefix("focus-overlay"));that._isFocusOverlay=that._isFocusOverlay||isFocusOverlay,clearTimeout(that._updateFocusTimeoutID),that._updateFocusTimeoutID=setTimeout((()=>{delete that._updateFocusTimeoutID,that._isFocusOverlay||that._updateFocusCore(),that._isFocusOverlay=!1}))},_updateFocusOverlaySize($element,position){$element.hide();const location=animation_position.Z.calculate($element,(0,extend.l)({collision:"fit"},position));location.h.oversize>0&&(0,size.Ns)($element,(0,size.Y_)($element)-location.h.oversize),location.v.oversize>0&&(0,size.qt)($element,(0,size.zp)($element)-location.v.oversize),$element.show()},callbackNames:()=>["focused"],focus($element,isHideBorder){const that=this;if(void 0===$element)return that._$focusedElement;$element&&($element.is(that._$focusedElement)||that._$focusedElement&&that._$focusedElement.removeClass("dx-focused"),that._$focusedElement=$element,clearTimeout(that._focusTimeoutID),that._focusTimeoutID=setTimeout((()=>{delete that._focusTimeoutID,that.renderFocusOverlay($element,isHideBorder),$element.addClass("dx-focused"),that.focused.fire($element)})))},refocus(){const $focus=this.focus();this.focus($focus)},renderFocusOverlay($element,isHideBorder){const that=this;if(module_utils.isElementInCurrentGrid(this,$element))if(that._$focusOverlay||(that._$focusOverlay=(0,renderer.Z)("<div>").addClass(that.addWidgetPrefix("focus-overlay"))),isHideBorder)that._$focusOverlay.addClass("dx-hidden");else if($element.length){const align=browser.Z.mozilla?"right bottom":"left top",$content=$element.closest("."+that.addWidgetPrefix("content")),elemCoord=(0,utils_position.l)($element.get(0));that._$focusOverlay.removeClass("dx-hidden").appendTo($content),(0,size.qt)(that._$focusOverlay,elemCoord.bottom-elemCoord.top+1),(0,size.Ns)(that._$focusOverlay,elemCoord.right-elemCoord.left+1);const focusOverlayPosition={precise:!0,my:align,at:align,of:$element,boundary:$content.length&&$content};that._updateFocusOverlaySize(that._$focusOverlay,focusOverlayPosition),animation_position.Z.setup(that._$focusOverlay,focusOverlayPosition),that._$focusOverlay.css("visibility","visible")}},resize(){const $focusedElement=this._$focusedElement;$focusedElement&&this.focus($focusedElement)},loseFocus(){this._$focusedElement&&this._$focusedElement.removeClass("dx-focused"),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass("dx-hidden")},init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),events_engine.Z.on(this._getContainerRoot(),UPDATE_FOCUS_EVENTS,this._updateFocusHandler),this._attachContainerEventHandlers()},_getContainerRoot(){var _a;const $container=null===(_a=this.component)||void 0===_a?void 0:_a.$element(),root=dom_adapter.Z.getRootNode(null==$container?void 0:$container.get(0));return root.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||root.host?root:dom_adapter.Z.getDocument()},_attachContainerEventHandlers(){const that=this,$container=that.component&&that.component.$element();$container&&events_engine.Z.on($container,(0,events_utils.V4)("keydown","dxDataGridEditorFactory"),(e=>{"tab"===(0,events_utils.EV)(e)&&that._updateFocusHandler(e)}))},dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),events_engine.Z.off(this._getContainerRoot(),UPDATE_FOCUS_EVENTS,this._updateFocusHandler)}},editorFactoryModule={defaultOptions:()=>({}),controllers:{editorFactory:modules.ViewController.inherit(ui_editor_factory_mixin).inherit(module_members)}};module_core.registerModule("editorFactory",editorFactoryModule);var component=__webpack_require__("./node_modules/devextreme/esm/core/component.js"),core_action=__webpack_require__("./node_modules/devextreme/esm/core/action.js"),view_port=__webpack_require__("./node_modules/devextreme/esm/core/utils/view_port.js"),dialog_window=(0,utils_window.Jj)(),DEFAULT_BUTTON={text:"OK",onClick:function(){return!0}},DX_DIALOG_WRAPPER_CLASSNAME="".concat("dx-dialog","-wrapper"),DX_DIALOG_ROOT_CLASSNAME="".concat("dx-dialog","-root"),DX_DIALOG_CONTENT_CLASSNAME="".concat("dx-dialog","-content"),DX_DIALOG_MESSAGE_CLASSNAME="".concat("dx-dialog","-message"),DX_DIALOG_BUTTONS_CLASSNAME="".concat("dx-dialog","-buttons"),DX_DIALOG_BUTTON_CLASSNAME="".concat("dx-dialog","-button"),FakeDialogComponent=component.Component.inherit({ctor:function(element,options){this.callBase(options)},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{width:276}}])}}),custom=function(options){var _options$title,deferred=new utils_deferred.BH,defaultOptions=(new FakeDialogComponent).option();options=(0,extend.l)(defaultOptions,options);var $element=(0,renderer.Z)("<div>").addClass("dx-dialog").appendTo((0,view_port.S3)()),isMessageHtmlDefined="messageHtml"in options;"message"in options&&ui_errors.Z.log("W1013");var messageHtml=String(isMessageHtmlDefined?options.messageHtml:options.message),$message=(0,renderer.Z)("<div>").addClass(DX_DIALOG_MESSAGE_CLASSNAME).html(messageHtml),popupToolbarItems=[];(0,iterator.S6)(options.buttons||[DEFAULT_BUTTON],(function(){var action=new core_action.Z(this.onClick,{context:popupInstance});popupToolbarItems.push({toolbar:"bottom",location:devices.Z.current().android?"after":"center",widget:"dxButton",options:(0,extend.l)({},this,{onClick:function(){hide(action.execute(...arguments))}})})}));var popupInstance=new ui_popup.Z($element,(0,extend.l)({title:null!==(_options$title=options.title)&&void 0!==_options$title?_options$title:"",showTitle:(0,common.IS)(options.showTitle,!0),dragEnabled:(0,common.IS)(options.dragEnabled,!0),height:"auto",width:options.width,showCloseButton:options.showCloseButton||!1,ignoreChildEvents:!1,container:$element,visualContainer:dialog_window,dragAndResizeArea:dialog_window,onContentReady:function(args){args.component.$content().addClass(DX_DIALOG_CONTENT_CLASSNAME).append($message)},onShowing:function(e){e.component.bottomToolbar().addClass(DX_DIALOG_BUTTONS_CLASSNAME).find(".".concat("dx-button")).addClass(DX_DIALOG_BUTTON_CLASSNAME),(0,dom.M3)()},onShown:function(e){var $firstButton=e.component.bottomToolbar().find(".".concat("dx-button")).first();events_engine.Z.trigger($firstButton,"focus")},onHiding:function(){deferred.reject()},onHidden:function(_ref){var{element}=_ref;(0,renderer.Z)(element).remove()},toolbarItems:popupToolbarItems,animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:(0,config.Z)().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},options.popupOptions));function hide(value){deferred.resolve(value),popupInstance.hide()}return popupInstance.$wrapper().addClass(DX_DIALOG_WRAPPER_CLASSNAME),options.position&&popupInstance.option("position",options.position),popupInstance.$wrapper().addClass(DX_DIALOG_ROOT_CLASSNAME),{show:function(){if("android"===devices.Z.real().platform){var width=(0,size.Cr)(dialog_window)>(0,size.dz)(dialog_window)?"80%":"60%";popupInstance.option({width})}return popupInstance.show(),deferred.promise()},hide}},utils_icon=__webpack_require__("./node_modules/devextreme/esm/core/utils/icon.js"),EDIT_MODES=["batch","row","cell","form","popup"],ROW_BASED_MODES=["row","form","popup"],MODES_WITH_DELAYED_FOCUS=["row","form"],INSERT_INDEX="__DX_INSERT_INDEX__",EDIT_LINK_CLASS={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},EDIT_ICON_CLASS={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},METHOD_NAMES={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},ACTION_OPTION_NAMES={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},BUTTON_NAMES=["edit","save","cancel","delete","undelete"],createFailureHandler=function(deferred){return function(arg){var error=arg instanceof Error?arg:new Error(arg&&String(arg)||"Unknown error");deferred.reject(error)}},isEditingCell=function(isEditRow,cellOptions){return cellOptions.isEditing||isEditRow&&cellOptions.column.allowEditing},isEditingOrShowEditorAlwaysDataCell=function(isEditRow,cellOptions){var isCommandCell=!!cellOptions.column.command,isEditing=isEditingCell(isEditRow,cellOptions),isEditorCell=!isCommandCell&&(isEditing||cellOptions.column.showEditorAlways);return"data"===cellOptions.rowType&&isEditorCell},EditingController=ui_grid_core_modules.ViewController.inherit(function(){var getButtonIndex=(buttons,name)=>{var result=-1;return buttons.some(((button,index)=>{if(getButtonName(button)===name)return result=index,!0})),result};function getButtonName(button){return(0,utils_type.Kn)(button)?button.name:button}var members={init:function(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._rowsView=this.getView("rowsView"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach((d=>d.reject("cancel"))),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=[]),this.component._optionsByReference["editing.editRowKey"]=!0,this.component._optionsByReference["editing.changes"]=!0},getEditMode:function(){var editMode=this.option("editing.mode");return-1!==EDIT_MODES.indexOf(editMode)?editMode:"row"},_getDefaultEditorTemplate:function(){return(container,options)=>{var $editor=(0,renderer.Z)("<div>").appendTo(container);this.getController("editorFactory").createEditor($editor,(0,extend.l)({},options.column,{value:options.value,setValue:options.setValue,row:options.row,parentType:"dataRow",width:null,readOnly:!options.setValue,isOnForm:options.isOnForm,id:options.id}))}},_getNewRowPosition:function(){var newRowPosition=this.option("editing.newRowPosition");if("virtual"===this.option("scrolling.mode"))switch(newRowPosition){case"pageTop":return"viewportTop";case"pageBottom":return"viewportBottom";default:return newRowPosition}return newRowPosition},getChanges:function(){return this.option("editing.changes")},getInsertRowCount:function(){return this.option("editing.changes").filter((change=>"insert"===change.type)).length},resetChanges:function(){var changes=this.getChanges();(null==changes?void 0:changes.length)&&this._silentOption("editing.changes",[])},_getInternalData:function(key){return this._internalState.filter((item=>(0,common.bY)(item.key,key)))[0]},_addInternalData:function(params){var internalData=this._getInternalData(params.key);return internalData?(0,extend.l)(internalData,params):(this._internalState.push(params),params)},_getOldData:function(key){var _this$_getInternalDat;return null===(_this$_getInternalDat=this._getInternalData(key))||void 0===_this$_getInternalDat?void 0:_this$_getInternalDat.oldData},getUpdatedData:function(data){var key=this._dataController.keyOf(data),changes=this.getChanges(),editIndex=ui_grid_core_utils.getIndexByKey(key,changes);return changes[editIndex]?(0,array_utils.FL)(data,changes[editIndex].data):data},getInsertedData:function(){return this.getChanges().filter((change=>change.data&&"insert"===change.type)).map((change=>change.data))},getRemovedData:function(){return this.getChanges().filter((change=>this._getOldData(change.key)&&"remove"===change.type)).map((change=>this._getOldData(change.key)))},_fireDataErrorOccurred:function(arg){if("cancel"!==arg){var $popupContent=this.getPopupContent();this._dataController.dataErrorOccurred.fire(arg,$popupContent)}},_needToCloseEditableCell:common.ZT,_closeEditItem:common.ZT,_handleDataChanged:common.ZT,_isDefaultButtonVisible:function(button,options){var result=!0;switch(button.name){case"delete":result=this.allowDeleting(options);break;case"undelete":result=!1}return result},_isButtonVisible:function(button,options){var visible=button.visible;return(0,utils_type.$K)(visible)?(0,utils_type.mf)(visible)?visible.call(button,{component:options.component,row:options.row,column:options.column}):visible:this._isDefaultButtonVisible(button,options)},_isButtonDisabled:function(button,options){var disabled=button.disabled;return(0,utils_type.mf)(disabled)?disabled.call(button,{component:options.component,row:options.row,column:options.column}):!!disabled},_getButtonConfig:function(button,options){var config=(0,utils_type.Kn)(button)?button:{},buttonName=getButtonName(button),editingTexts=(options=>{var editingTexts=options.component.option("editing.texts")||{};return{save:editingTexts.saveRowChanges,cancel:editingTexts.cancelRowChanges,edit:editingTexts.editRow,undelete:editingTexts.undeleteRow,delete:editingTexts.deleteRow,add:editingTexts.addRowToNode}})(options),methodName=METHOD_NAMES[buttonName],editingOptions=this.option("editing"),actionName=ACTION_OPTION_NAMES[buttonName],allowAction=!actionName||editingOptions[actionName];return(0,extend.l)({name:buttonName,text:editingTexts[buttonName],cssClass:EDIT_LINK_CLASS[buttonName]},{onClick:methodName&&(e=>{var event=e.event;event.stopPropagation(),event.preventDefault(),setTimeout((()=>{options.row&&allowAction&&this[methodName]&&this[methodName](options.row.rowIndex)}))})},config)},_getEditingButtons:function(options){var buttonIndex,haveCustomButtons=!!options.column.buttons,buttons=(options.column.buttons||[]).slice();return haveCustomButtons?((buttonIndex=getButtonIndex(buttons,"edit"))>=0&&(getButtonIndex(buttons,"save")<0&&buttons.splice(buttonIndex+1,0,"save"),getButtonIndex(buttons,"cancel")<0&&buttons.splice(getButtonIndex(buttons,"save")+1,0,"cancel")),(buttonIndex=getButtonIndex(buttons,"delete"))>=0&&getButtonIndex(buttons,"undelete")<0&&buttons.splice(buttonIndex+1,0,"undelete")):buttons=BUTTON_NAMES.slice(),buttons.map((button=>this._getButtonConfig(button,options)))},_renderEditingButtons:function($container,buttons,options,change){buttons.forEach((button=>{this._isButtonVisible(button,options)&&this._createButton($container,button,options,change)}))},_getEditCommandCellTemplate:function(){return(container,options,change)=>{var $container=(0,renderer.Z)(container);if("data"===options.rowType){var buttons=this._getEditingButtons(options);this._renderEditingButtons($container,buttons,options,change),options.watch&&options.watch((()=>buttons.map((button=>({visible:this._isButtonVisible(button,options),disabled:this._isButtonDisabled(button,options)})))),(()=>{$container.empty(),this._renderEditingButtons($container,buttons,options)}))}else ui_grid_core_utils.setEmptyText($container)}},isRowBasedEditMode:function(){var editMode=this.getEditMode();return-1!==ROW_BASED_MODES.indexOf(editMode)},getFirstEditableColumnIndex:function(){var columnIndex,visibleColumns=this.getController("columns").getVisibleColumns();return(0,iterator.S6)(visibleColumns,(function(index,column){if(column.allowEditing)return columnIndex=index,!1})),columnIndex},getFirstEditableCellInRow:function(rowIndex){var rowsView=this.getView("rowsView");return rowsView&&rowsView._getCellElement(rowIndex||0,this.getFirstEditableColumnIndex())},getFocusedCellInRow:function(rowIndex){return this.getFirstEditableCellInRow(rowIndex)},getIndexByKey:function(key,items){return ui_grid_core_utils.getIndexByKey(key,items)},hasChanges:function(rowIndex){for(var changes=this.getChanges(),result=!1,i=0;i<(null==changes?void 0:changes.length);i++)if(changes[i].type&&(!(0,utils_type.$K)(rowIndex)||this._dataController.getRowIndexByKey(changes[i].key)===rowIndex)){result=!0;break}return result},dispose:function(){this.callBase(),clearTimeout(this._inputFocusTimeoutID),events_engine.Z.off(dom_adapter.Z.getDocument(),pointer.Z.up,this._pointerUpEditorHandler),events_engine.Z.off(dom_adapter.Z.getDocument(),pointer.Z.down,this._pointerDownEditorHandler),events_engine.Z.off(dom_adapter.Z.getDocument(),click.u,this._saveEditorHandler)},_silentOption:function(name,value){"editing.changes"===name&&(this._changes=(0,object.HR)([],value)),this.callBase.apply(this,arguments)},optionChanged:function(args){if("editing"===args.name){var fullName=args.fullName;if("editing.editRowKey"===fullName)this._handleEditRowKeyChange(args);else if("editing.changes"===fullName){(0,common.bY)(args.value,this._changes,-1)||(this._changes=(0,object.HR)([],args.value),this._handleChangesChange(args))}else args.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey());args.handled=!0}else this.callBase(args)},_handleEditRowKeyChange:function(args){var rowIndex=this._dataController.getRowIndexByKey(args.value),oldRowIndexCorrection=this._getEditRowIndexCorrection(),oldRowIndex=this._dataController.getRowIndexByKey(args.previousValue)+oldRowIndexCorrection;(0,utils_type.$K)(args.value)?args.value!==args.previousValue&&this._editRowFromOptionChanged(rowIndex,oldRowIndex):this.cancelEditData()},_handleChangesChange:function(args){var dataController=this._dataController,changes=args.value;(args.value.length||args.previousValue.length)&&(changes.forEach((change=>{if("insert"===change.type)this._addInsertInfo(change);else{var _items$rowIndex,items=dataController.items(),rowIndex=dataController.getRowIndexByKey(change.key);this._addInternalData({key:change.key,oldData:null===(_items$rowIndex=items[rowIndex])||void 0===_items$rowIndex?void 0:_items$rowIndex.data})}})),dataController.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))},publicMethods:function(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]},refresh:function(){(0,utils_type.$K)(this._pageIndex)&&this._refreshCore.apply(this,arguments)},_refreshCore:common.ZT,isEditing:function(){return(0,utils_type.$K)(this.option("editing.editRowKey"))},isEditRow:function(){return!1},_setEditRowKey:function(value,silent){silent?this._silentOption("editing.editRowKey",value):this.option("editing.editRowKey",value),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())},_setEditRowKeyByIndex:function(rowIndex,silent){var key=this._dataController.getKeyByRowIndex(rowIndex);void 0!==key?this._setEditRowKey(key,silent):this._dataController.fireError("E1043")},getEditRowIndex:function(){return this._getVisibleEditRowIndex()},getEditFormRowIndex:function(){return-1},isEditRowByIndex(rowIndex){var key=this._dataController.getKeyByRowIndex(rowIndex),isKeyEqual=(0,utils_type.$K)(key)&&(0,common.bY)(this.option("editing.editRowKey"),key);return isKeyEqual?this._getVisibleEditRowIndex()===rowIndex:isKeyEqual},isEditCell:function(visibleRowIndex,columnIndex){return this.isEditRowByIndex(visibleRowIndex)&&this._getVisibleEditColumnIndex()===columnIndex},getPopupContent:common.ZT,_isProcessedItem:function(item){return!1},_getInsertRowIndex:function(items,change,isProcessedItems){var result=-1,dataController=this._dataController,key=this._getInsertAfterOrBeforeKey(change);return(0,utils_type.$K)(key)||0!==items.length?(0,utils_type.$K)(key)&&items.some(((item,index)=>{var isProcessedItem=isProcessedItems||this._isProcessedItem(item);if((0,utils_type.Kn)(item)&&(isProcessedItem||(0,utils_type.$K)(item[INSERT_INDEX])?(0,common.bY)(item.key,key)&&(result=index):(0,common.bY)(dataController.keyOf(item),key)&&(result=index)),result>=0){var nextItem=items[result+1];if(nextItem&&("detail"===nextItem.rowType||"detailAdaptive"===nextItem.rowType)&&(0,utils_type.$K)(change.insertAfterKey))return;return(0,utils_type.$K)(change.insertAfterKey)&&(result+=1),!0}})):result=0,result},_generateNewItem:function(key){var _this$_getInternalDat2,item={key},insertInfo=null===(_this$_getInternalDat2=this._getInternalData(key))||void 0===_this$_getInternalDat2?void 0:_this$_getInternalDat2.insertInfo;return null!=insertInfo&&insertInfo[INSERT_INDEX]&&(item[INSERT_INDEX]=insertInfo[INSERT_INDEX]),item},_getLoadedRowIndex:function(items,change,isProcessedItems){var loadedRowIndex=this._getInsertRowIndex(items,change,isProcessedItems),dataController=this._dataController;if(loadedRowIndex<0){var newRowPosition=this._getNewRowPosition(),pageIndex=dataController.pageIndex(),insertAfterOrBeforeKey=this._getInsertAfterOrBeforeKey(change);"last"===newRowPosition||0!==pageIndex||(0,utils_type.$K)(insertAfterOrBeforeKey)?"last"===newRowPosition&&dataController.isLastPageLoaded()&&(loadedRowIndex=items.length):loadedRowIndex=0}return loadedRowIndex},processItems:function(items,e){var changeType=e.changeType;return this.update(changeType),this.getChanges().forEach((change=>{var _this$_getInternalDat3;if("insert"===change.type){var key=change.key,insertInfo=null===(_this$_getInternalDat3=this._getInternalData(key))||void 0===_this$_getInternalDat3?void 0:_this$_getInternalDat3.insertInfo;(0,utils_type.$K)(key)&&(0,utils_type.$K)(insertInfo)||(key=(insertInfo=this._addInsertInfo(change)).key);var loadedRowIndex=this._getLoadedRowIndex(items,change),item=this._generateNewItem(key);loadedRowIndex>=0&&items.splice(loadedRowIndex,0,item)}})),items},processDataItem:function(item,options,generateDataValues){var columns=options.visibleColumns,key=item.data[INSERT_INDEX]?item.data.key:item.key,changes=this.getChanges(),editIndex=ui_grid_core_utils.getIndexByKey(key,changes);item.isEditing=!1,editIndex>=0&&this._processDataItemCore(item,changes[editIndex],key,columns,generateDataValues)},_processDataItemCore:function(item,change,key,columns,generateDataValues){var{data,type}=change;switch(type){case"insert":item.isNewRow=!0,item.key=key,item.data=data;break;case"update":item.modified=!0,item.oldData=item.data,item.data=(0,array_utils.FL)(item.data,data),item.modifiedValues=generateDataValues(data,columns,!0);break;case"remove":item.removed=!0}},_initNewRow:function(options){if(this.executeAction("onInitNewRow",options),options.promise){var deferred=new utils_deferred.BH;return(0,utils_deferred.gx)((0,utils_deferred.p4)(options.promise)).done(deferred.resolve).fail(createFailureHandler(deferred)).fail((arg=>this._fireDataErrorOccurred(arg))),deferred}},_createInsertInfo:function(){var insertInfo={};return insertInfo[INSERT_INDEX]=this._getInsertIndex(),insertInfo},_addInsertInfo:function(change,parentKey){var _this$_getInternalDat4,insertInfo,{key}=change;if((0,utils_type.$K)(key)||(key=String(new guid.Z),change.key=key),insertInfo=null===(_this$_getInternalDat4=this._getInternalData(key))||void 0===_this$_getInternalDat4?void 0:_this$_getInternalDat4.insertInfo,!(0,utils_type.$K)(insertInfo)){var insertAfterOrBeforeKey=this._getInsertAfterOrBeforeKey(change);insertInfo=this._createInsertInfo(),(0,utils_type.$K)(insertAfterOrBeforeKey)||this._setInsertAfterOrBeforeKey(change,parentKey)}return this._addInternalData({insertInfo,key}),{insertInfo,key}},_setInsertAfterOrBeforeKey:function(change,parentKey){var dataController=this._dataController,allItems=dataController.items(!0),rowsView=this.getView("rowsView"),newRowPosition=this._getNewRowPosition();switch(newRowPosition){case"first":case"last":break;case"pageTop":case"pageBottom":if(allItems.length){var itemIndex="pageTop"===newRowPosition?0:allItems.length-1;change[0===itemIndex?"insertBeforeKey":"insertAfterKey"]=allItems[itemIndex].key}break;default:var visibleItemIndex="viewportBottom"===newRowPosition?null==rowsView?void 0:rowsView.getBottomVisibleItemIndex():null==rowsView?void 0:rowsView.getTopVisibleItemIndex(),row=dataController.getVisibleRows()[visibleItemIndex];row&&(!row.isEditing&&"detail"===row.rowType||"detailAdaptive"===row.rowType)&&visibleItemIndex++;var insertKey=dataController.getKeyByRowIndex(visibleItemIndex);(0,utils_type.$K)(insertKey)&&(change.insertBeforeKey=insertKey)}},_getInsertIndex:function(){var maxInsertIndex=0;return this.getChanges().forEach((editItem=>{var _this$_getInternalDat5,insertInfo=null===(_this$_getInternalDat5=this._getInternalData(editItem.key))||void 0===_this$_getInternalDat5?void 0:_this$_getInternalDat5.insertInfo;(0,utils_type.$K)(insertInfo)&&"insert"===editItem.type&&insertInfo[INSERT_INDEX]>maxInsertIndex&&(maxInsertIndex=insertInfo[INSERT_INDEX])})),maxInsertIndex+1},_getInsertAfterOrBeforeKey:function(insertChange){var _insertChange$insertA;return null!==(_insertChange$insertA=insertChange.insertAfterKey)&&void 0!==_insertChange$insertA?_insertChange$insertA:insertChange.insertBeforeKey},_getPageIndexToInsertRow:function(){var newRowPosition=this._getNewRowPosition(),dataController=this._dataController,pageIndex=dataController.pageIndex(),lastPageIndex=dataController.pageCount()-1;return"first"===newRowPosition&&0!==pageIndex?0:"last"===newRowPosition&&pageIndex!==lastPageIndex?lastPageIndex:-1},addRow:function(parentKey){var dataController=this._dataController;return dataController.store()?this._addRow(parentKey):(dataController.fireError("E1052",this.component.NAME),(new utils_deferred.BH).reject())},_addRow:function(parentKey){var store=this._dataController.store(),key=store&&store.key(),param={data:{}},oldEditRowIndex=this._getVisibleEditRowIndex(),deferred=new utils_deferred.BH;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(key||(param.data.__KEY__=String(new guid.Z)),(0,utils_deferred.gx)(this._initNewRow(param,parentKey)).done((()=>{this._allowRowAdding()?(0,utils_deferred.gx)(this._addRowCore(param.data,parentKey,oldEditRowIndex)).done(deferred.resolve).fail(deferred.reject):deferred.reject("cancel")})).fail(deferred.reject),deferred.promise()):((0,utils_deferred.gx)(this._navigateToNewRow(oldEditRowIndex)).done(deferred.resolve).fail(deferred.reject),deferred.promise())},_allowRowAdding:function(){return!(this._getInsertIndex()>1)},_addRowCore:function(data,parentKey,initialOldEditRowIndex){var change={data,type:"insert"},editRowIndex=this._getVisibleEditRowIndex(),key=this._addInsertInfo(change,parentKey).key;return this._setEditRowKey(key,!0),this._addChange(change),this._navigateToNewRow(initialOldEditRowIndex,change,editRowIndex)},_navigateToNewRow:function(oldEditRowIndex,change,editRowIndex){var _editRowIndex,_change,d=new utils_deferred.BH,dataController=this._dataController,focusController=this.getController("focus");if(editRowIndex=null!==(_editRowIndex=editRowIndex)&&void 0!==_editRowIndex?_editRowIndex:-1,!(change=null!==(_change=change)&&void 0!==_change?_change:this.getChanges().filter((c=>"insert"===c.type))[0]))return d.reject("cancel").promise();var pageIndexToInsertRow=this._getPageIndexToInsertRow(),rowIndex=this._getLoadedRowIndex(dataController.items(),change,!0),navigateToRowByKey=key=>{(0,utils_deferred.gx)(null==focusController?void 0:focusController.navigateToRow(key)).done((()=>{rowIndex=dataController.getRowIndexByKey(change.key),d.resolve()}))},insertAfterOrBeforeKey=this._getInsertAfterOrBeforeKey(change);return pageIndexToInsertRow>=0?dataController.pageIndex(pageIndexToInsertRow).done((()=>{navigateToRowByKey(change.key)})).fail(d.reject):rowIndex<0&&(0,utils_type.$K)(insertAfterOrBeforeKey)?navigateToRowByKey(insertAfterOrBeforeKey):(dataController.updateItems({changeType:"update",rowIndices:[oldEditRowIndex,editRowIndex,rowIndex]}),(rowIndex=dataController.getRowIndexByKey(change.key))<0?navigateToRowByKey(change.key):d.resolve()),d.done((()=>{var _this$_rowsView;null===(_this$_rowsView=this._rowsView)||void 0===_this$_rowsView||_this$_rowsView.waitAsyncTemplates(!0).done((()=>{this._showAddedRow(rowIndex),this._afterInsertRow(change.key)}))})),d.promise()},_showAddedRow:function(rowIndex){this._focusFirstEditableCellInRow(rowIndex)},_beforeFocusElementInRow:common.ZT,_focusFirstEditableCellInRow:function(rowIndex){var dataController=this._dataController,key=dataController.getKeyByRowIndex(rowIndex),$firstCell=this.getFirstEditableCellInRow(rowIndex);this._editCellInProgress=!0,this._delayedInputFocus($firstCell,(()=>{rowIndex=dataController.getRowIndexByKey(key),this._editCellInProgress=!1,this._beforeFocusElementInRow(rowIndex)}))},_isEditingStart:function(options){return this.executeAction("onEditingStart",options),options.cancel},_beforeUpdateItems:common.ZT,_getVisibleEditColumnIndex:function(){var editColumnName=this.option("editing.editColumnName");return(0,utils_type.$K)(editColumnName)?this._columnsController.getVisibleColumnIndex(editColumnName):-1},_setEditColumnNameByIndex:function(index,silent){var _visibleColumns$index,visibleColumns=this._columnsController.getVisibleColumns();this._setEditColumnName(null===(_visibleColumns$index=visibleColumns[index])||void 0===_visibleColumns$index?void 0:_visibleColumns$index.name,silent)},_setEditColumnName:function(name,silent){silent?this._silentOption("editing.editColumnName",name):this.option("editing.editColumnName",name)},_resetEditColumnName:function(){this._setEditColumnName(null,!0)},_getEditColumn:function(){var editColumnName=this.option("editing.editColumnName");return this._getColumnByName(editColumnName)},_getColumnByName:function(name){var editColumn,visibleColumns=this._columnsController.getVisibleColumns();return(0,utils_type.$K)(name)&&visibleColumns.some((column=>{if(column.name===name)return editColumn=column,!0})),editColumn},_getVisibleEditRowIndex:function(columnName){var dataController=this._dataController,editRowKey=this.option("editing.editRowKey"),rowIndex=dataController.getRowIndexByKey(editRowKey);return-1===rowIndex?rowIndex:rowIndex+this._getEditRowIndexCorrection(columnName)},_getEditRowIndexCorrection:function(columnName){var editColumn=columnName?this._getColumnByName(columnName):this._getEditColumn();return"adaptiveHidden"===(null==editColumn?void 0:editColumn.visibleWidth)?1:0},_resetEditRowKey:function(){this._setEditRowKey(null,!0)},_resetEditIndices:function(){this._resetEditColumnName(),this._resetEditRowKey()},editRow:function(rowIndex){var _item$oldData,dataController=this._dataController,item=dataController.items()[rowIndex],params={data:item&&item.data,cancel:!1},oldRowIndex=this._getVisibleEditRowIndex();if(item)return rowIndex===oldRowIndex||void(void 0!==item.key?(item.isNewRow||(params.key=item.key),this._isEditingStart(params)||(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=dataController.pageIndex(),this._addInternalData({key:item.key,oldData:null!==(_item$oldData=item.oldData)&&void 0!==_item$oldData?_item$oldData:item.data}),this._setEditRowKey(item.key))):this._dataController.fireError("E1043"))},_editRowFromOptionChanged:function(rowIndex,oldRowIndex){var rowIndices=[oldRowIndex,rowIndex];this._beforeUpdateItems(rowIndices,rowIndex,oldRowIndex),this._editRowFromOptionChangedCore(rowIndices,rowIndex)},_editRowFromOptionChangedCore:function(rowIndices,rowIndex,preventRendering){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices,cancel:preventRendering})},_focusEditorIfNeed:common.ZT,_showEditPopup:common.ZT,_repaintEditPopup:common.ZT,_getEditPopupHiddenHandler:function(){return e=>{this.isEditing()&&this.cancelEditData()}},_getPopupEditFormTemplate:common.ZT,_getSaveButtonConfig:function(){return{text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)}},_getCancelButtonConfig:function(){return{text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)}},_removeInternalData:function(key){var internalData=this._getInternalData(key),index=this._internalState.indexOf(internalData);index>-1&&this._internalState.splice(index,1)},_updateInsertAfterOrBeforeKeys:function(changes,index){var removeChange=changes[index];changes.forEach((change=>{var insertAfterOrBeforeKey=this._getInsertAfterOrBeforeKey(change);(0,common.bY)(insertAfterOrBeforeKey,removeChange.key)&&(change[(0,utils_type.$K)(change.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(removeChange))}))},_removeChange:function(index){if(index>=0){var changes=[...this.getChanges()],key=changes[index].key;this._removeInternalData(key),this._updateInsertAfterOrBeforeKeys(changes,index),changes.splice(index,1),this._silentOption("editing.changes",changes),(0,common.bY)(this.option("editing.editRowKey"),key)&&this._resetEditIndices()}},executeOperation:function(deferred,func){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=deferred,this.waitForDeferredOperations().done((()=>{"rejected"!==deferred.state()&&(func(),this._lastOperation=null)})).fail((()=>{deferred.reject(),this._lastOperation=null}))},waitForDeferredOperations:function(){return(0,utils_deferred.gx)(...this._deferreds)},_processCanceledEditingCell:common.ZT,_repaintEditCell:function(column,oldColumn,oldEditRowIndex){this._needFocusEditor=!0,!column||!column.showEditorAlways||oldColumn&&!oldColumn.showEditorAlways?(this._editCellInProgress=!0,this.getController("editorFactory").loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[oldEditRowIndex,this._getVisibleEditRowIndex()]})):column!==oldColumn&&this._dataController.updateItems({changeType:"update",rowIndices:[]})},_delayedInputFocus:function($cell,beforeFocusCallback,callBeforeFocusCallbackAlways){var inputFocus=()=>{if(beforeFocusCallback&&beforeFocusCallback(),$cell){var $focusableElement=$cell.find("[tabindex], input:not([type='hidden'])").first();ui_grid_core_utils.focusAndSelectElement(this,$focusableElement)}this._beforeFocusCallback=null};devices.Z.real().ios||devices.Z.real().android?inputFocus():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),callBeforeFocusCallbackAlways&&(this._beforeFocusCallback=beforeFocusCallback),this._inputFocusTimeoutID=setTimeout(inputFocus))},_focusEditingCell:function(beforeFocusCallback,$editCell,callBeforeFocusCallbackAlways){var rowsView=this.getView("rowsView"),editColumnIndex=this._getVisibleEditColumnIndex();($editCell=$editCell||rowsView&&rowsView._getCellElement(this._getVisibleEditRowIndex(),editColumnIndex))&&this._delayedInputFocus($editCell,beforeFocusCallback,callBeforeFocusCallbackAlways)},deleteRow:function(rowIndex){this._checkAndDeleteRow(rowIndex)},_checkAndDeleteRow:function(rowIndex){var editingOptions=this.option("editing"),editingTexts=null==editingOptions?void 0:editingOptions.texts,confirmDelete=null==editingOptions?void 0:editingOptions.confirmDelete,confirmDeleteMessage=null==editingTexts?void 0:editingTexts.confirmDeleteMessage,item=this._dataController.items()[rowIndex],allowDeleting=!this.isEditing()||item.isNewRow;if(item&&allowDeleting)if(confirmDelete&&confirmDeleteMessage){var confirmDeleteTitle=editingTexts&&editingTexts.confirmDeleteTitle;(function(messageHtml){var title=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",showTitle=arguments.length>2?arguments[2]:void 0,options=(0,utils_type.PO)(messageHtml)?messageHtml:{title,messageHtml,showTitle,buttons:[{text:message.Z.format("Yes"),onClick:function(){return!0}},{text:message.Z.format("No"),onClick:function(){return!1}}],dragEnabled:showTitle};return custom(options).show()})(confirmDeleteMessage,confirmDeleteTitle,(0,utils_type.$K)(confirmDeleteTitle)&&confirmDeleteTitle.length>0).done((confirmResult=>{confirmResult&&this._deleteRowCore(rowIndex)}))}else this._deleteRowCore(rowIndex)},_deleteRowCore:function(rowIndex){var item=this._dataController.items()[rowIndex],key=item&&item.key,oldEditRowIndex=this._getVisibleEditRowIndex();this.refresh();var changes=this.getChanges(),editIndex=ui_grid_core_utils.getIndexByKey(key,changes);return editIndex>=0?"insert"===changes[editIndex].type?this._removeChange(editIndex):this._addChange({key,type:"remove"}):this._addChange({key,oldData:item.data,type:"remove"}),this._afterDeleteRow(rowIndex,oldEditRowIndex)},_afterDeleteRow:function(rowIndex,oldEditRowIndex){return this.saveEditData()},undeleteRow:function(rowIndex){var dataController=this._dataController,item=dataController.items()[rowIndex],oldEditRowIndex=this._getVisibleEditRowIndex(),key=item&&item.key,changes=this.getChanges();if(item){var editIndex=ui_grid_core_utils.getIndexByKey(key,changes);if(editIndex>=0){var{data}=changes[editIndex];(0,utils_type.Qr)(data)?this._removeChange(editIndex):this._addChange({key,type:"update"}),dataController.updateItems({changeType:"update",rowIndices:[oldEditRowIndex,rowIndex]})}}},_fireOnSaving:function(){var onSavingParams={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",onSavingParams);var d=new utils_deferred.BH;return(0,utils_deferred.gx)((0,utils_deferred.p4)(onSavingParams.promise)).done((()=>{d.resolve(onSavingParams)})).fail((arg=>{createFailureHandler(d),this._fireDataErrorOccurred(arg),d.resolve({cancel:!0})})),d},_executeEditingAction:function(actionName,params,func){if(this.component._disposed)return null;var deferred=new utils_deferred.BH;return this.executeAction(actionName,params),(0,utils_deferred.gx)((0,utils_deferred.p4)(params.cancel)).done((function(cancel){cancel?setTimeout((function(){deferred.resolve("cancel")})):func(params).done(deferred.resolve).fail(createFailureHandler(deferred))})).fail(createFailureHandler(deferred)),deferred},_processChanges:function(deferreds,results,dataChanges,changes){var store=this._dataController.store();(0,iterator.S6)(changes,((index,change)=>{var deferred,params,oldData=this._getOldData(change.key),{data,type}=change,changeCopy=(0,esm_extends.Z)({},change);if(!this._beforeSaveEditData(change,index)){switch(type){case"remove":params={data:oldData,key:change.key,cancel:!1},deferred=this._executeEditingAction("onRowRemoving",params,(function(){return store.remove(change.key).done((function(key){dataChanges.push({type:"remove",key})}))}));break;case"insert":params={data,cancel:!1},deferred=this._executeEditingAction("onRowInserting",params,(function(){return store.insert(params.data).done((function(data,key){(0,utils_type.$K)(key)&&(changeCopy.key=key),data&&(0,utils_type.Kn)(data)&&data!==params.data&&(changeCopy.data=data),dataChanges.push({type:"insert",data,index:0})}))}));break;case"update":params={newData:data,oldData,key:change.key,cancel:!1},deferred=this._executeEditingAction("onRowUpdating",params,(function(){return store.update(change.key,params.newData).done((function(data,key){data&&(0,utils_type.Kn)(data)&&data!==params.newData&&(changeCopy.data=data),dataChanges.push({type:"update",key,data})}))}))}if(changes[index]=changeCopy,deferred){var doneDeferred=new utils_deferred.BH;deferred.always((function(data){results.push({key:change.key,result:data})})).always(doneDeferred.resolve),deferreds.push(doneDeferred.promise())}}}))},_processRemoveIfError:function(changes,editIndex){var change=changes[editIndex];return"remove"===(null==change?void 0:change.type)&&editIndex>=0&&changes.splice(editIndex,1),!0},_processRemove:function(changes,editIndex,cancel){var change=changes[editIndex];if(!cancel||!change||"remove"===change.type)return this._processRemoveCore(changes,editIndex,!cancel||!change)},_processRemoveCore:function(changes,editIndex){return editIndex>=0&&changes.splice(editIndex,1),!0},_processSaveEditDataResult:function(results){for(var hasSavedData=!1,changes=[...this.getChanges()],changesLength=changes.length,i=0;i<results.length;i++){var arg=results[i].result,cancel="cancel"===arg,editIndex=ui_grid_core_utils.getIndexByKey(results[i].key,changes),change=changes[editIndex];if(arg&&arg instanceof Error){if(change&&this._addInternalData({key:change.key,error:arg}),this._fireDataErrorOccurred(arg),this._processRemoveIfError(changes,editIndex))break}else this._processRemove(changes,editIndex,cancel)&&(hasSavedData=!cancel)}return changes.length<changesLength&&this._silentOption("editing.changes",changes),hasSavedData},_fireSaveEditDataEvents:function(changes){(0,iterator.S6)(changes,((_,_ref)=>{var{data,key,type}=_ref,internalData=this._addInternalData({key}),params={key,data};switch(internalData.error&&(params.error=internalData.error),type){case"remove":this.executeAction("onRowRemoved",(0,extend.l)({},params,{data:internalData.oldData}));break;case"insert":this.executeAction("onRowInserted",params);break;case"update":this.executeAction("onRowUpdated",params)}})),this.executeAction("onSaved",{changes})},saveEditData:function(){var deferred=new utils_deferred.BH;return this.waitForDeferredOperations().done((()=>{this.isSaving()?this._resolveAfterSave(deferred):(0,utils_deferred.gx)(this._beforeSaveEditData()).done((cancel=>{cancel?this._resolveAfterSave(deferred,{cancel}):(this._saving=!0,this._saveEditDataInner().always((()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()})).done(deferred.resolve).fail(deferred.reject))})).fail(deferred.reject)})).fail(deferred.reject),deferred.promise()},_resolveAfterSave:function(deferred){var{cancel,error}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,utils_deferred.gx)(this._afterSaveEditData(cancel)).done((function(){deferred.resolve(error)})).fail(deferred.reject)},_saveEditDataInner:function(){var result=new utils_deferred.BH,results=[],deferreds=[],dataChanges=[],dataSource=this._dataController.dataSource();return(0,utils_deferred.gx)(this._fireOnSaving()).done((_ref2=>{var{cancel,changes}=_ref2;return cancel?result.resolve().promise():(this._processChanges(deferreds,results,dataChanges,changes),deferreds.length?(this._refocusEditCell=!0,null==dataSource||dataSource.beginLoading(),(0,utils_deferred.gx)(...deferreds).done((()=>{this._processSaveEditDataResult(results)?this._endSaving(dataChanges,changes,result):(null==dataSource||dataSource.endLoading(),result.resolve())})).fail((error=>{null==dataSource||dataSource.endLoading(),result.resolve(error)})),result.always((()=>{this._refocusEditCell=!0})).promise()):void this._cancelSaving(result))})).fail(result.reject),result.promise()},_beforeEndSaving:function(changes){this._resetEditIndices()},_endSaving:function(dataChanges,changes,deferred){var dataSource=this._dataController.dataSource();this._beforeEndSaving(changes),null==dataSource||dataSource.endLoading(),this._refreshDataAfterSave(dataChanges,changes,deferred)},_cancelSaving:function(result){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(result)},_refreshDataAfterSave:function(dataChanges,changes,deferred){var dataController=this._dataController,refreshMode=this.option("editing.refreshMode"),isFullRefresh="reshape"!==refreshMode&&"repaint"!==refreshMode;isFullRefresh||dataController.push(dataChanges),(0,utils_deferred.gx)(dataController.refresh({selection:isFullRefresh,reload:isFullRefresh,load:"reshape"===refreshMode,changesOnly:this.option("repaintChangesOnly")})).always((()=>{this._fireSaveEditDataEvents(changes)})).done((()=>{this._resolveAfterSave(deferred)})).fail((error=>{this._resolveAfterSave(deferred,{error})}))},isSaving:function(){return this._saving},_updateEditColumn:function(){var isEditColumnVisible=this._isEditColumnVisible(),cssClass="dx-command-edit"+(this.option("editing.useIcons")?" dx-command-edit-with-icons":"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:isEditColumnVisible,cssClass,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:isEditColumnVisible,cssClass})},_isEditColumnVisible:function(){return this.option("editing").allowDeleting},_isEditButtonDisabled:function(){var hasChanges=this.hasChanges();return!((0,utils_type.$K)(this.option("editing.editRowKey"))||hasChanges)},_updateEditButtons:function(){var headerPanel=this.getView("headerPanel"),isButtonDisabled=this._isEditButtonDisabled();headerPanel&&(headerPanel.setToolbarItemDisabled("saveButton",isButtonDisabled),headerPanel.setToolbarItemDisabled("revertButton",isButtonDisabled))},_applyModified:function($element){$element&&$element.addClass("dx-cell-modified")},_beforeCloseEditCellInBatchMode:common.ZT,cancelEditData:function(){var changes=this.getChanges(),params={cancel:!1,changes};this.executeAction("onEditCanceling",params),params.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes}))},_cancelEditDataCore:function(){var rowIndex=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(rowIndex)},_afterCancelEditData:function(rowIndex){this._dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})},_hideEditPopup:common.ZT,hasEditData:function(){return this.hasChanges()},update:function(changeType){var dataController=this._dataController;dataController&&this._pageIndex!==dataController.pageIndex()&&("refresh"===changeType&&this.refresh({isPageChanged:!0}),this._pageIndex=dataController.pageIndex()),this._updateEditButtons()},_getRowIndicesForCascadeUpdating:function(row,skipCurrentRow){return skipCurrentRow?[]:[row.rowIndex]},addDeferred:function(deferred){this._deferreds.indexOf(deferred)<0&&(this._deferreds.push(deferred),deferred.always((()=>{var index=this._deferreds.indexOf(deferred);index>=0&&this._deferreds.splice(index,1)})))},_prepareChange:function(options,value,text){var _options$row,newData={},oldData=null===(_options$row=options.row)||void 0===_options$row?void 0:_options$row.data,rowKey=options.key,deferred=new utils_deferred.BH;void 0!==rowKey&&(options.value=value,(0,utils_deferred.p4)(options.column.setCellValue(newData,value,(0,extend.l)(!0,{},oldData),text)).done((function(){deferred.resolve({data:newData,key:rowKey,oldData,type:"update"})})).fail(createFailureHandler(deferred)).fail((arg=>this._fireDataErrorOccurred(arg))),(0,utils_type.$K)(text)&&options.column.displayValueMap&&(options.column.displayValueMap[value]=text),this._updateRowValues(options),this.addDeferred(deferred));return deferred},_updateRowValues:function(options){if(options.values){var dataController=this._dataController,rowIndex=dataController.getRowIndexByKey(options.key),row=dataController.getVisibleRows()[rowIndex];row&&(options.row.values=row.values,options.values=row.values),options.values[options.columnIndex]=options.value}},updateFieldValue:function(options,value,text,forceUpdateRow){var rowKey=options.key,deferred=new utils_deferred.BH;return void 0===rowKey&&this._dataController.fireError("E1043"),options.column.setCellValue?this._prepareChange(options,value,text).done((params=>{(0,utils_deferred.gx)(this._applyChange(options,params,forceUpdateRow)).always((()=>{deferred.resolve()}))})):deferred.resolve(),deferred.promise()},_focusPreviousEditingCellIfNeed:function(options){if(this.hasEditData()&&!this.isEditCell(options.rowIndex,options.columnIndex))return this._focusEditingCell(),this._updateEditRow(options.row,!0),!0},_needUpdateRow:function(column){var visibleColumns=this._columnsController.getVisibleColumns();column||(column=this._getEditColumn());var isCustomSetCellValue=column&&column.setCellValue!==column.defaultSetCellValue,isCustomCalculateCellValue=visibleColumns.some((visibleColumn=>visibleColumn.calculateCellValue!==visibleColumn.defaultCalculateCellValue));return isCustomSetCellValue||isCustomCalculateCellValue},_applyChange:function(options,params,forceUpdateRow){var changeOptions=(0,esm_extends.Z)({},options,{forceUpdateRow});return this._addChange(params,changeOptions),this._updateEditButtons(),this._applyChangeCore(options,changeOptions.forceUpdateRow)},_applyChangeCore:function(options,forceUpdateRow){var isCustomSetCellValue=options.column.setCellValue!==options.column.defaultSetCellValue,row=options.row;row&&(forceUpdateRow||isCustomSetCellValue?this._updateEditRow(row,forceUpdateRow,isCustomSetCellValue):row.update&&row.update())},_updateEditRowCore:function(row,skipCurrentRow,isCustomSetCellValue){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(row,skipCurrentRow)})},_updateEditRow:function(row,forceUpdateRow,isCustomSetCellValue){forceUpdateRow?this._updateRowImmediately(row,forceUpdateRow,isCustomSetCellValue):this._updateRowWithDelay(row,isCustomSetCellValue)},_updateRowImmediately:function(row,forceUpdateRow,isCustomSetCellValue){this._updateEditRowCore(row,!forceUpdateRow,isCustomSetCellValue),this._validateEditFormAfterUpdate(row,isCustomSetCellValue),forceUpdateRow||this._focusEditingCell()},_updateRowWithDelay:function(row,isCustomSetCellValue){var deferred=new utils_deferred.BH;this.addDeferred(deferred),setTimeout((()=>{var _this$_editForm,elementContainer=(null===(_this$_editForm=this._editForm)||void 0===_this$_editForm?void 0:_this$_editForm.element())||this.component.$element().get(0),$focusedElement=(0,renderer.Z)(dom_adapter.Z.getActiveElement(elementContainer)),columnIndex=this._rowsView.getCellIndex($focusedElement,row.rowIndex),focusedElement=$focusedElement.get(0),selectionRange=ui_grid_core_utils.getSelectionRange(focusedElement);if(this._updateEditRowCore(row,!1,isCustomSetCellValue),this._validateEditFormAfterUpdate(row,isCustomSetCellValue),columnIndex>=0){var $focusedItem=this._rowsView._getCellElement(row.rowIndex,columnIndex);this._delayedInputFocus($focusedItem,(()=>{setTimeout((()=>{var _this$component$$elem;focusedElement=dom_adapter.Z.getActiveElement(null===(_this$component$$elem=this.component.$element())||void 0===_this$component$$elem?void 0:_this$component$$elem.get(0)),selectionRange.selectionStart>=0&&ui_grid_core_utils.setSelectionRange(focusedElement,selectionRange)}))}))}deferred.resolve()}))},_validateEditFormAfterUpdate:common.ZT,_addChange:function(changeParams,options){var _this$getChanges,row=null==options?void 0:options.row,changes=[...this.getChanges()],index=ui_grid_core_utils.getIndexByKey(changeParams.key,changes);index<0&&(index=changes.length,this._addInternalData({key:changeParams.key,oldData:changeParams.oldData}),delete changeParams.oldData,changes.push(changeParams));var change=(0,esm_extends.Z)({},changes[index]);return change&&(changeParams.data&&(change.data=(0,array_utils.FL)(change.data,changeParams.data)),change.type&&changeParams.data||!changeParams.type||(change.type=changeParams.type),row&&(row.oldData=this._getOldData(row.key),row.data=(0,array_utils.FL)(row.data,changeParams.data))),changes[index]=change,this._silentOption("editing.changes",changes),options&&change!==(null===(_this$getChanges=this.getChanges())||void 0===_this$getChanges?void 0:_this$getChanges[index])&&(options.forceUpdateRow=!0),change},_getFormEditItemTemplate:function(cellOptions,column){return column.editCellTemplate||this._getDefaultEditorTemplate()},getColumnTemplate:function(options){var template,editingStartOptions,column=options.column,rowIndex=options.row&&options.row.rowIndex,isRowMode=this.isRowBasedEditMode(),isRowEditing=this.isEditRow(rowIndex),isCellEditing=this.isEditCell(rowIndex,options.columnIndex);!(column.showEditorAlways||column.setCellValue&&(isRowEditing&&column.allowEditing||isCellEditing))||"data"!==options.rowType&&"detailAdaptive"!==options.rowType||column.command?"detail"===column.command&&"detail"===options.rowType&&isRowEditing&&(template=null==this?void 0:this.getEditFormTemplate(options)):(!((this.allowUpdating(options)||isRowEditing)&&column.allowEditing||isCellEditing)||!isRowEditing&&isRowMode||(column.showEditorAlways&&!isRowMode&&(editingStartOptions={cancel:!1,key:options.row.isNewRow?void 0:options.row.key,data:options.row.data,column},this._isEditingStart(editingStartOptions)),editingStartOptions&&editingStartOptions.cancel||(options.setValue=(value,text)=>{this.updateFieldValue(options,value,text)})),template=column.editCellTemplate||this._getDefaultEditorTemplate());return template},_createButton:function($container,button,options,change){var icon=EDIT_ICON_CLASS[button.name],useIcons=this.option("editing.useIcons"),useLegacyColumnButtonTemplate=this.option("useLegacyColumnButtonTemplate"),$button=(0,renderer.Z)("<a>").attr("href","#").addClass("dx-link").addClass(button.cssClass);if(button.template&&useLegacyColumnButtonTemplate)this._rowsView.renderTemplate($container,button.template,options,!0);else{if(button.template)$button=(0,renderer.Z)("<span>").addClass(button.cssClass);else if(useIcons&&icon||button.icon){icon=button.icon||icon;var iconType=utils_icon.P(icon);"image"===iconType||"svg"===iconType?$button=utils_icon.H(icon).addClass(button.cssClass):$button.addClass("dx-icon"+("dxIcon"===iconType?"-":" ")+icon).attr("title",button.text),$button.addClass("dx-link-icon"),$container.addClass("dx-command-edit-with-icons");var localizationName=this.getButtonLocalizationNames()[button.name];localizationName&&$button.attr("aria-label",message.Z.format(localizationName))}else $button.text(button.text);(0,utils_type.$K)(button.hint)&&$button.attr("title",button.hint),this._isButtonDisabled(button,options)?$button.addClass("dx-state-disabled"):button.template&&!button.onClick||events_engine.Z.on($button,(0,events_utils.V4)("click","dxDataGridEditing"),this.createAction((function(e){var _button$onClick;null===(_button$onClick=button.onClick)||void 0===_button$onClick||_button$onClick.call(button,(0,extend.l)({},e,{row:options.row,column:options.column})),e.event.preventDefault(),e.event.stopPropagation()}))),$container.append($button,"&nbsp;"),button.template&&this._rowsView.renderTemplate($button,button.template,(0,esm_extends.Z)({},options,{column:void 0}),!0,change)}},getButtonLocalizationNames:()=>({edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}),prepareButtonItem:function(headerPanel,name,methodName,sortIndex){var editingTexts=this.option("editing.texts")||{},titleButtonTextByClassNames={revert:editingTexts.cancelAllChanges,save:editingTexts.saveAllChanges,addRow:editingTexts.addRow},className={revert:"cancel",save:"save",addRow:"addrow"}[name],hintText=titleButtonTextByClassNames[name],isButtonDisabled=("save"===className||"cancel"===className)&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:e=>{(0,renderer.Z)(e.element).addClass(headerPanel._getToolbarButtonClass("dx-edit-button "+this.addWidgetPrefix(className)+"-button"))},icon:"edit-button-"+className,disabled:isButtonDisabled,onClick:()=>{setTimeout((()=>{this[methodName]()}))},text:hintText,hint:hintText},showText:"inMenu",name:name+"Button",location:"after",locateInMenu:"auto",sortIndex}},prepareEditButtons:function(headerPanel){var buttonItems=[];return(this.option("editing")||{}).allowAdding&&buttonItems.push(this.prepareButtonItem(headerPanel,"addRow","addRow",20)),buttonItems},highlightDataCell:function($cell,params){this.shouldHighlightCell(params)&&$cell.addClass("dx-cell-modified")},_afterInsertRow:common.ZT,_beforeSaveEditData:function(change){if(change&&!(0,utils_type.$K)(change.key)&&(0,utils_type.$K)(change.type))return!0},_afterSaveEditData:common.ZT,_beforeCancelEditData:common.ZT,_allowEditAction:function(actionName,options){var allowEditAction=this.option("editing."+actionName);return(0,utils_type.mf)(allowEditAction)&&(allowEditAction=allowEditAction({component:this.component,row:options.row})),allowEditAction},allowUpdating:function(options,eventName){var startEditAction=this.option("editing.startEditAction")||"click";return(!(arguments.length>1)||(startEditAction===eventName||"down"===eventName))&&this._allowEditAction("allowUpdating",options)},allowDeleting:function(options){return this._allowEditAction("allowDeleting",options)},isCellModified:function(parameters){var columnIndex=parameters.columnIndex,modifiedValues=parameters.row&&(parameters.row.isNewRow?parameters.row.values:parameters.row.modifiedValues);return!!modifiedValues&&void 0!==modifiedValues[columnIndex]},isNewRowInEditMode:function(){var visibleEditRowIndex=this._getVisibleEditRowIndex(),rows=this._dataController.items();return visibleEditRowIndex>=0&&rows[visibleEditRowIndex].isNewRow},shouldHighlightCell:function(parameters){return this.isCellModified(parameters)&&parameters.column.setCellValue&&("row"!==this.getEditMode()||!parameters.row.isEditing)}};return members}()),editingModule={defaultOptions:function(){return{editing:{mode:"row",refreshMode:"full",newRowPosition:"viewportTop",allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:message.Z.format("dxDataGrid-editingEditRow"),saveAllChanges:message.Z.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:message.Z.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:message.Z.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:message.Z.format("dxDataGrid-editingCancelRowChanges"),addRow:message.Z.format("dxDataGrid-editingAddRow"),deleteRow:message.Z.format("dxDataGrid-editingDeleteRow"),undeleteRow:message.Z.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:message.Z.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}},controllers:{editing:EditingController},extenders:{controllers:{data:{init:function(){this._editingController=this.getController("editing"),this.callBase()},reload:function(full,repaintChangesOnly){return!repaintChangesOnly&&this._editingController.refresh(),this.callBase.apply(this,arguments)},repaintRows:function(){if(!this.getController("editing").isSaving())return this.callBase.apply(this,arguments)},_updateEditRow:function(items){var _this$_updateEditItem,editRowKey=this.option("editing.editRowKey"),editItem=items[ui_grid_core_utils.getIndexByKey(editRowKey,items)];editItem&&(editItem.isEditing=!0,null===(_this$_updateEditItem=this._updateEditItem)||void 0===_this$_updateEditItem||_this$_updateEditItem.call(this,editItem))},_updateItemsCore:function(change){this.callBase(change),this._updateEditRow(this.items(!0))},_applyChangeUpdate:function(change){this._updateEditRow(change.items),this.callBase(change)},_applyChangesOnly:function(change){this._updateEditRow(change.items),this.callBase(change)},_processItems:function(items,change){return items=this._editingController.processItems(items,change),this.callBase(items,change)},_processDataItem:function(dataItem,options){return this._editingController.processDataItem(dataItem,options,this.generateDataValues),this.callBase(dataItem,options)},_processItem:function(item,options){return(item=this.callBase(item,options)).isNewRow&&(options.dataIndex--,delete item.dataIndex),item},_getChangedColumnIndices:function(oldItem,newItem,rowIndex,isLiveUpdate){if(oldItem.isNewRow===newItem.isNewRow&&oldItem.removed===newItem.removed)return this.callBase.apply(this,arguments)},_isCellChanged:function(oldRow,newRow,visibleRowIndex,columnIndex,isLiveUpdate){var editingController=this.getController("editing"),cell=oldRow.cells&&oldRow.cells[columnIndex],isEditing=editingController&&editingController.isEditCell(visibleRowIndex,columnIndex);return(!isLiveUpdate||!isEditing)&&(!(!cell||!cell.column||cell.column.showEditorAlways||cell.isEditing===isEditing)||this.callBase.apply(this,arguments))},needToRefreshOnDataSourceChange:function(args){var editingController=this.getController("editing");return!(Array.isArray(args.value)&&args.value===args.previousValue&&editingController.isSaving())},_handleDataSourceChange(args){var result=this.callBase(args),changes=this.option("editing.changes"),dataSource=args.value;if(Array.isArray(dataSource)&&changes.length){var dataSourceKeys=dataSource.map((item=>this.keyOf(item))),newChanges=changes.filter((change=>"insert"===change.type||dataSourceKeys.some((key=>(0,common.bY)(change.key,key)))));newChanges.length!==changes.length&&this.option("editing.changes",newChanges);var editRowKey=this.option("editing.editRowKey");!newChanges.some((change=>"insert"===change.type&&(0,common.bY)(editRowKey,change.key)))&&dataSourceKeys.every((key=>!(0,common.bY)(editRowKey,key)))&&this.option("editing.editRowKey",null)}return result}}},views:{rowsView:{init:function(){this.callBase(),this._editingController=this.getController("editing")},getCellIndex:function($cell,rowIndex){if(!$cell.is("td")&&rowIndex>=0){var $cellElements=this.getCellElements(rowIndex),cellIndex=-1;return(0,iterator.S6)($cellElements,(function(index,cellElement){(0,renderer.Z)(cellElement).find($cell).length&&(cellIndex=index)})),cellIndex}return this.callBase.apply(this,arguments)},publicMethods:function(){return this.callBase().concat(["cellValue"])},_getCellTemplate:function(options){return this._editingController.getColumnTemplate(options)||this.callBase(options)},_createRow:function(row){var $row=this.callBase.apply(this,arguments);if(row){var isRowRemoved=!!row.removed,isRowInserted=!!row.isNewRow,isRowModified=!!row.modified;isRowInserted&&$row.addClass("dx-row-inserted"),isRowModified&&$row.addClass("dx-row-modified"),(isRowInserted||isRowRemoved)&&$row.removeClass("dx-selection")}return $row},_getColumnIndexByElement:function($element){for(var $tableElement=$element.closest("table"),$tableElements=this.getTableElements();$tableElement.length&&!$tableElements.filter($tableElement).length;)$element=$tableElement.closest("td"),$tableElement=$element.closest("table");return this._getColumnIndexByElementCore($element)},_getColumnIndexByElementCore:function($element){var $targetElement=$element.closest(".dx-row> td:not(.dx-master-detail-cell)");return this.getCellIndex($targetElement)},_editCellByClick:function(e,eventName){var editingController=this._editingController,$targetElement=(0,renderer.Z)(e.event.target),columnIndex=this._getColumnIndexByElement($targetElement),row=this._dataController.items()[e.rowIndex],allowUpdating=editingController.allowUpdating({row},eventName)||row&&row.isNewRow,column=this._columnsController.getVisibleColumns()[columnIndex],isEditedCell=editingController.isEditCell(e.rowIndex,columnIndex),allowEditing=allowUpdating&&column&&(column.allowEditing||isEditedCell),startEditAction=this.option("editing.startEditAction")||"click",isShowEditorAlways=column&&column.showEditorAlways;if(isEditedCell)return!0;if("down"===eventName)return(devices.Z.real().ios||devices.Z.real().android)&&(0,dom.M3)(),isShowEditorAlways&&allowEditing&&editingController.editCell(e.rowIndex,columnIndex);if("click"===eventName&&"dblClick"===startEditAction){var withoutSaveEditData=null==row?void 0:row.isNewRow;editingController.closeEditCell(!1,withoutSaveEditData)}return allowEditing&&eventName===startEditAction?editingController.editCell(e.rowIndex,columnIndex)||editingController.isEditRow(e.rowIndex):void 0},_rowPointerDown:function(e){this._pointerDownTimeout=setTimeout((()=>{this._editCellByClick(e,"down")}))},_rowClick:function(e){var isEditForm=(0,renderer.Z)(e.rowElement).hasClass(this.addWidgetPrefix("edit-form"));e.event.targetComponent=this.component,this._editCellByClick(e,"click")||isEditForm||this.callBase.apply(this,arguments)},_rowDblClick:function(e){this._editCellByClick(e,"dblClick")||this.callBase.apply(this,arguments)},_cellPrepared:function($cell,parameters){var _parameters$column,editingController=this._editingController,isCommandCell=!!parameters.column.command,isEditableCell=parameters.setValue,isEditRow=editingController.isEditRow(parameters.rowIndex),isEditing=isEditingCell(isEditRow,parameters);if(isEditingOrShowEditorAlwaysDataCell(isEditRow,parameters)){var alignment=parameters.column.alignment;$cell.toggleClass(this.addWidgetPrefix("readonly"),!isEditableCell).toggleClass("dx-cell-focus-disabled",!isEditableCell),alignment&&$cell.find("input:not([type='hidden'])").first().css("textAlign",alignment)}isEditing&&this._editCellPrepared($cell);var hasTemplate=!(null===(_parameters$column=parameters.column)||void 0===_parameters$column||!_parameters$column.cellTemplate);!parameters.column||isCommandCell||hasTemplate&&!editingController.shouldHighlightCell(parameters)||editingController.highlightDataCell($cell,parameters),this.callBase.apply(this,arguments)},_editCellPrepared:common.ZT,_formItemPrepared:common.ZT,_getCellOptions:function(options){var cellOptions=this.callBase(options);return cellOptions.isEditing=this._editingController.isEditCell(cellOptions.rowIndex,cellOptions.columnIndex),cellOptions},_createCell:function(options){var $cell=this.callBase(options),isEditRow=this._editingController.isEditRow(options.rowIndex);return isEditingOrShowEditorAlwaysDataCell(isEditRow,options)&&$cell.addClass("dx-editor-cell"),$cell},cellValue:function(rowIndex,columnIdentifier,value,text){var cellOptions=this.getCellOptions(rowIndex,columnIdentifier);if(cellOptions){if(void 0===value)return cellOptions.value;this._editingController.updateFieldValue(cellOptions,value,text,!0)}},dispose:function(){this.callBase.apply(this,arguments),clearTimeout(this._pointerDownTimeout)},_renderCore:function(){return this.callBase.apply(this,arguments),this.waitAsyncTemplates(!0).done((()=>{this._editingController._focusEditorIfNeed()}))}},headerPanel:{_getToolbarItems:function(){var items=this.callBase();return this.getController("editing").prepareEditButtons(this).concat(items)},optionChanged:function(args){var fullName=args.fullName;switch(args.name){case"editing":fullName&&!["editing.popup","editing.changes","editing.editColumnName","editing.editRowKey"].some((optionName=>optionName===fullName))&&this._invalidate(),this.callBase(args);break;case"useLegacyColumnButtonTemplate":args.handled=!0;break;default:this.callBase(args)}},isVisible:function(){var editingOptions=this.getController("editing").option("editing");return this.callBase()||(null==editingOptions?void 0:editingOptions.allowAdding)}}}}};const module_EditingController=editingModule.controllers.editing.inherit({_generateNewItem(key){const item=this.callBase(key);return item.data={key},item.children=[],item.level=0,item.parentKey=this.option("rootValue"),item},_isProcessedItem:()=>!0,_setInsertAfterOrBeforeKey(change,parentKey){void 0!==parentKey&&parentKey!==this.option("rootValue")?change.insertAfterKey=parentKey:this.callBase.apply(this,arguments)},_getLoadedRowIndex(items,change){const dataSourceAdapter=this.getController("data").dataSource(),parentKey=null==dataSourceAdapter?void 0:dataSourceAdapter.parentKeyOf(change.data);if(void 0!==parentKey&&parentKey!==this.option("rootValue")){const rowIndex=ui_grid_core_utils.getIndexByKey(parentKey,items);return rowIndex>=0&&this._dataController.isRowExpanded(parentKey)?rowIndex+1:-1}return this.callBase.apply(this,arguments)},_isEditColumnVisible(){const result=this.callBase.apply(this,arguments),editingOptions=this.option("editing");return result||editingOptions.allowAdding},_isDefaultButtonVisible(button,options){const result=this.callBase.apply(this,arguments),{row}=options;return"add"===button.name?this.allowAdding(options)&&row.rowIndex!==this._getVisibleEditRowIndex()&&!(row.removed||row.isNewRow):result},_getEditingButtons(options){const buttons=this.callBase.apply(this,arguments);return options.column.buttons||buttons.unshift(this._getButtonConfig("add",options)),buttons},_beforeSaveEditData(change){const dataController=this._dataController,result=this.callBase.apply(this,arguments);if(change&&"insert"!==change.type){const store=null==dataController?void 0:dataController.store(),key=null==store?void 0:store.key();if(!(0,utils_type.$K)(key))throw ui_errors.Z.Error("E1045")}return result},addRowByRowIndex(rowIndex){const row=this.getController("data").getVisibleRows()[rowIndex];return this.addRow(row?row.key:void 0)},addRow(key){return void 0===key&&(key=this.option("rootValue")),this.callBase.call(this,key)},_addRowCore(data,parentKey,oldEditRowIndex){const{callBase}=this,rootValue=this.option("rootValue"),dataController=this.getController("data"),parentKeyGetter=dataController.dataSource().createParentIdGetter();if(void 0!==(parentKey=parentKeyGetter(data))&&parentKey!==rootValue&&!dataController.isRowExpanded(parentKey)){const deferred=new utils_deferred.BH;return dataController.expandRow(parentKey).done((()=>{setTimeout((()=>{callBase.call(this,data,parentKey,oldEditRowIndex).done(deferred.resolve).fail(deferred.reject)}))})).fail(deferred.reject),deferred.promise()}return callBase.call(this,data,parentKey,oldEditRowIndex)},_initNewRow(options,parentKey){return this.getController("data").dataSource().createParentIdSetter()(options.data,parentKey),this.callBase.apply(this,arguments)},allowAdding(options){return this._allowEditAction("allowAdding",options)},_needToCloseEditableCell($targetElement){return this.callBase.apply(this,arguments)||$targetElement.closest(".dx-treelist-icon-container").length&&this.isEditing()},getButtonLocalizationNames(){const names=this.callBase.apply(this);return names.add="dxTreeList-editingAddRowToNode",names}}),originalRowClick=editingModule.extenders.views.rowsView._rowClick,originalRowDblClick=editingModule.extenders.views.rowsView._rowDblClick,validateClick=function(e){const $targetElement=(0,renderer.Z)(e.event.target),originalClickHandler="dxdblclick"===e.event.type?originalRowDblClick:originalRowClick;return!$targetElement.closest(".dx-select-checkbox").length&&!needToCallOriginalClickHandler.call(this,e,originalClickHandler)};function needToCallOriginalClickHandler(e,originalClickHandler){return!(0,renderer.Z)(e.event.target).closest(".dx-treelist-icon-container").length&&(originalClickHandler.call(this,e),!0)}const RowsViewExtender=(0,extend.l)({},editingModule.extenders.views.rowsView,{_renderCellCommandContent($container,options){const editingController=this._editingController,isEditRow=options.row&&editingController.isEditRow(options.row.rowIndex);return!(options.isEditing||isEditRow)&&this.callBase.apply(this,arguments)},_rowClick(e){validateClick.call(this,e)&&this.callBase.apply(this,arguments)},_rowDblClick(e){validateClick.call(this,e)&&this.callBase.apply(this,arguments)}});module_core.registerModule("editing",{defaultOptions:()=>(0,extend.l)(!0,editingModule.defaultOptions(),{editing:{texts:{addRowToNode:message.Z.format("dxTreeList-editingAddRowToNode")}}}),controllers:{editing:module_EditingController},extenders:{controllers:(0,extend.l)(!0,{},editingModule.extenders.controllers,{data:{changeRowExpand(){return this._editingController.refresh(),this.callBase.apply(this,arguments)}}}),views:{rowsView:RowsViewExtender,headerPanel:editingModule.extenders.views.headerPanel}}});var editingRowBasedModule={extenders:{controllers:{editing:{isRowEditMode:function(){return"row"===this.getEditMode()},_afterCancelEditData:function(rowIndex){var dataController=this._dataController;this.isRowBasedEditMode()&&rowIndex>=0?dataController.updateItems({changeType:"update",rowIndices:[rowIndex,rowIndex+1]}):this.callBase.apply(this,arguments)},_isDefaultButtonVisible:function(button,options){var isRowMode=this.isRowBasedEditMode(),isEditRow=options.row&&(0,common.bY)(options.row.key,this.option("editing.editRowKey"));if(isRowMode)switch(button.name){case"edit":return!isEditRow&&this.allowUpdating(options);case"delete":return this.callBase.apply(this,arguments)&&!isEditRow;case"save":case"cancel":return isEditRow;default:return this.callBase.apply(this,arguments)}return this.callBase.apply(this,arguments)},isEditRow:function(rowIndex){return this.isRowBasedEditMode()&&this.isEditRowByIndex(rowIndex)},_cancelSaving:function(){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),this.callBase.apply(this,arguments)},_refreshCore:function(params){var{allowCancelEditing}=null!=params?params:{};if(this.isRowBasedEditMode()){var hasUpdateChanges=this.getChanges().filter((it=>"update"===it.type)).length>0;this.init(),allowCancelEditing&&hasUpdateChanges&&this._cancelEditDataCore()}this.callBase.apply(this,arguments)},_isEditColumnVisible:function(){var result=this.callBase.apply(this,arguments),editingOptions=this.option("editing"),isRowEditMode=this.isRowEditMode(),isVisibleInRowEditMode=editingOptions.allowUpdating||editingOptions.allowAdding;return result||isRowEditMode&&isVisibleInRowEditMode},_focusEditorIfNeed:function(){var editMode=this.getEditMode();if(this._needFocusEditor){if(-1!==MODES_WITH_DELAYED_FOCUS.indexOf(editMode)){var $editingCell=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus($editingCell,(()=>{$editingCell&&this.component.focus($editingCell)}))}this._needFocusEditor=!1}}},data:{_getChangedColumnIndices:function(oldItem,newItem,rowIndex,isLiveUpdate){if(!this.getController("editing").isRowBasedEditMode()||oldItem.isEditing===newItem.isEditing)return this.callBase.apply(this,arguments)}}},views:{rowsView:{_createRow:function(row){var $row=this.callBase.apply(this,arguments);row&&(this._editingController.isEditRow(row.rowIndex)&&($row.addClass("dx-edit-row"),$row.removeClass("dx-selection"),"detail"===row.rowType&&$row.addClass(this.addWidgetPrefix("edit-form"))));return $row},_update:function(change){this.callBase(change),"updateSelection"===change.changeType&&this.getTableElements().children("tbody").children(".dx-edit-row").removeClass("dx-selection")}}}}};module_core.registerModule("editingRowBased",editingRowBasedModule);var visibility_change=__webpack_require__("./node_modules/devextreme/esm/events/visibility_change.js"),validation_engine=__webpack_require__("./node_modules/devextreme/esm/ui/validation_engine.js");class FormItemsRunTimeInfo{constructor(){this._map={}}_findWidgetInstance(condition){var result;return(0,iterator.S6)(this._map,(function(guid,_ref){var{widgetInstance,item}=_ref;if(condition(item))return result=widgetInstance,!1})),result}_findFieldByCondition(callback,valueExpr){var result;return(0,iterator.S6)(this._map,(function(key,value){if(callback(value))return result="guid"===valueExpr?key:value[valueExpr],!1})),result}clear(){this._map={}}removeItemsByItems(itemsRunTimeInfo){(0,iterator.S6)(itemsRunTimeInfo.getItems(),(guid=>this.removeItemByKey(guid)))}removeItemByKey(key){delete this._map[key]}add(options){var key=options.guid||new guid.Z;return this._map[key]=options,key}addItemsOrExtendFrom(itemsRunTimeInfo){itemsRunTimeInfo.each(((key,itemRunTimeInfo)=>{this._map[key]?(itemRunTimeInfo.widgetInstance&&(this._map[key].widgetInstance=itemRunTimeInfo.widgetInstance),this._map[key].$itemContainer=itemRunTimeInfo.$itemContainer):this.add({item:itemRunTimeInfo.item,widgetInstance:itemRunTimeInfo.widgetInstance,guid:key,$itemContainer:itemRunTimeInfo.$itemContainer})}))}extendRunTimeItemInfoByKey(key,options){this._map[key]&&(this._map[key]=(0,extend.l)(this._map[key],options))}findWidgetInstanceByItem(item){return this._findWidgetInstance((storedItem=>storedItem===item))}findGroupOrTabLayoutManagerByPath(targetPath){return this._findFieldByCondition((_ref2=>{var{path}=_ref2;return path===targetPath}),"layoutManager")}findKeyByPath(targetPath){return this._findFieldByCondition((_ref3=>{var{path}=_ref3;return path===targetPath}),"guid")}findWidgetInstanceByName(name){return this._findWidgetInstance((item=>name===item.name))}findWidgetInstanceByDataField(dataField){return this._findWidgetInstance((item=>dataField===((0,utils_type.HD)(item)?item:item.dataField)))}findItemContainerByItem(item){for(var key in this._map)if(this._map[key].item===item)return this._map[key].$itemContainer;return null}findItemIndexByItem(targetItem){return this._findFieldByCondition((_ref4=>{var{item}=_ref4;return item===targetItem}),"itemIndex")}findPreparedItemByItem(item){return this._findFieldByCondition((_ref5=>{var{item:currentItem}=_ref5;return currentItem===item}),"preparedItem")}getItems(){return this._map}each(handler){(0,iterator.S6)(this._map,(function(key,itemRunTimeInfo){handler(key,itemRunTimeInfo)}))}removeItemsByPathStartWith(path){Object.keys(this._map).filter((key=>!!this._map[key].path&&this._map[key].path.indexOf(path,0)>-1)).forEach((key=>this.removeItemByKey(key)))}}var _translator={move($element,position){(0,translator.pB)($element,{left:position})}},animation={moveTo($element,position,duration,completeAction){fx.Z.animate($element,{type:"slide",to:{left:position},duration,complete:completeAction})},complete($element){fx.Z.stop($element,!0)}},ui_collection_widget_live_update=__webpack_require__("./node_modules/devextreme/esm/ui/collection/ui.collection_widget.live_update.js"),toNumber=value=>+value,MultiView=ui_collection_widget_live_update.Z.inherit({_activeStateUnit:".dx-multiview-item",_supportedKeys:function(){return(0,extend.l)(this.callBase(),{pageUp:common.ZT,pageDown:common.ZT})},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,_itemAttributes:{role:"tabpanel"},loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectionByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===devices.Z.real().deviceType&&!devices.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_itemClass:function(){return"dx-multiview-item"},_itemDataKey:function(){return"dxMultiViewItemData"},_itemContainer:function(){return this._$itemContainer},_itemElements:function(){return this._itemContainer().children(this._itemSelector())},_itemWidth:function(){return this._itemWidthValue||(this._itemWidthValue=(0,size.dz)(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache:function(){delete this._itemWidthValue},_itemsCount:function(){return this.option("items").length},_normalizeIndex:function(index){var count=this._itemsCount();return index<0&&(index+=count),index>=count&&(index-=count),index},_getRTLSignCorrection:function(){return this.option("rtlEnabled")?-1:1},_init:function(){this.callBase.apply(this,arguments);var $element=this.$element();$element.addClass("dx-multiview"),this._$wrapper=(0,renderer.Z)("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo($element),this._$itemContainer=(0,renderer.Z)("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._initSwipeable()},_initMarkup:function(){this._deferredItems=[],this.callBase();var selectedItemIndices=this._getSelectedItemIndices();this._updateItemsVisibility(selectedItemIndices[0])},_afterItemElementDeleted:function($item,deletedActionArgs){this.callBase($item,deletedActionArgs),this._deferredItems&&this._deferredItems.splice(deletedActionArgs.itemIndex,1)},_beforeItemElementInserted:function(change){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(change.index,0,null)},_executeItemRenderAction:function(index,itemData,itemElement){index=(this.option("items")||[]).indexOf(itemData),this.callBase(index,itemData,itemElement)},_renderItemContent:function(args){var renderContentDeferred=new utils_deferred.BH,that=this,callBase=this.callBase,deferred=new utils_deferred.BH;return deferred.done((function(){var $itemContent=callBase.call(that,args);renderContentDeferred.resolve($itemContent)})),this._deferredItems[args.index]=deferred,this.option("deferRendering")||deferred.resolve(),renderContentDeferred.promise()},_render:function(){this.callBase(),(0,common.g0)((()=>{var selectedItemIndices=this._getSelectedItemIndices();this._updateItems(selectedItemIndices[0])}))},_updateItems:function(selectedIndex,newIndex){this._updateItemsPosition(selectedIndex,newIndex),this._updateItemsVisibility(selectedIndex,newIndex)},_modifyByChanges:function(){this.callBase.apply(this,arguments);var selectedItemIndices=this._getSelectedItemIndices();this._updateItemsVisibility(selectedItemIndices[0])},_updateItemsPosition:function(selectedIndex,newIndex){var $itemElements=this._itemElements(),positionSign=(0,utils_type.$K)(newIndex)?-this._animationDirection(newIndex,selectedIndex):void 0,$selectedItem=$itemElements.eq(selectedIndex);_translator.move($selectedItem,0),(0,utils_type.$K)(newIndex)&&_translator.move($itemElements.eq(newIndex),100*positionSign+"%")},_updateItemsVisibility:function(selectedIndex,newIndex){this._itemElements().each(function(itemIndex,item){var $item=(0,renderer.Z)(item),isHidden=itemIndex!==selectedIndex&&itemIndex!==newIndex;isHidden||this._renderSpecificItem(itemIndex),$item.toggleClass("dx-multiview-item-hidden",isHidden),this.setAria("hidden",isHidden||void 0,$item)}.bind(this))},_renderSpecificItem:function(index){var $item=this._itemElements().eq(index),hasItemContent=$item.find(this._itemContentClass()).length>0;(0,utils_type.$K)(index)&&!hasItemContent&&(this._deferredItems[index].resolve(),(0,visibility_change.U_)($item))},_refreshItem:function($item,item){this.callBase($item,item),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelected:common.ZT,_updateSelection:function(addedSelection,removedSelection){var newIndex=addedSelection[0],prevIndex=removedSelection[0];animation.complete(this._$itemContainer),this._updateItems(prevIndex,newIndex);var animationDirection=this._animationDirection(newIndex,prevIndex);this._animateItemContainer(animationDirection*this._itemWidth(),function(){_translator.move(this._$itemContainer,0),this._updateItems(newIndex),(0,size.dz)(this._$itemContainer)}.bind(this))},_animateItemContainer:function(position,completeCallback){var duration=this.option("animationEnabled")?200:0;animation.moveTo(this._$itemContainer,position,duration,completeCallback)},_animationDirection:function(newIndex,prevIndex){var $element,containerPosition=($element=this._$itemContainer,(0,translator.jt)($element).left),indexDifference=(prevIndex-newIndex)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection(),directionSignVariable=0!==containerPosition?containerPosition:indexDifference;return(0,math.Xx)(directionSignVariable)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),swipeable.Z,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:args=>this._swipeStartHandler(args.event),onUpdated:args=>this._swipeUpdateHandler(args.event),onEnd:args=>this._swipeEndHandler(args.event)})},_swipeStartHandler:function(e){animation.complete(this._$itemContainer);var selectedIndex=this.option("selectedIndex"),loop=this.option("loop"),lastIndex=this._itemsCount()-1,rtl=this.option("rtlEnabled");e.maxLeftOffset=toNumber(loop||(rtl?selectedIndex>0:selectedIndex<lastIndex)),e.maxRightOffset=toNumber(loop||(rtl?selectedIndex<lastIndex:selectedIndex>0)),this._swipeDirection=null},_swipeUpdateHandler:function(e){var offset=e.offset,swipeDirection=(0,math.Xx)(offset)*this._getRTLSignCorrection();if(_translator.move(this._$itemContainer,offset*this._itemWidth()),swipeDirection!==this._swipeDirection){this._swipeDirection=swipeDirection;var selectedIndex=this.option("selectedIndex"),newIndex=this._normalizeIndex(selectedIndex-swipeDirection);this._updateItems(selectedIndex,newIndex)}},_swipeEndHandler:function(e){var targetOffset=e.targetOffset*this._getRTLSignCorrection();if(targetOffset){this.option("selectedIndex",this._normalizeIndex(this.option("selectedIndex")-targetOffset));var $selectedElement=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",(0,core_element.u)($selectedElement))}else this._animateItemContainer(0,common.ZT)},_getItemFocusLoopSignCorrection:function(){return this._itemFocusLooped?-1:1},_moveFocus:function(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem:function($items){var $result=this.callBase.apply(this,arguments);return this._itemFocusLooped=$result.is($items.last()),$result},_nextItem:function($items){var $result=this.callBase.apply(this,arguments);return this._itemFocusLooped=$result.is($items.first()),$result},_dimensionChanged:function(){this._clearItemWidthCache()},_visibilityChanged:function(visible){visible&&this._dimensionChanged()},_updateSwipeDisabledState(){var disabled=this._getSwipeDisabledState();swipeable.Z.getInstance(this.$element()).option("disabled",disabled)},_optionChanged:function(args){var value=args.value;switch(args.name){case"loop":this.option("loopItemFocus",value);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this.callBase(args);break;default:this.callBase(args)}}});(0,component_registrator.Z)("dxMultiView",MultiView);const multi_view=MultiView;var tabs=__webpack_require__("./node_modules/devextreme/esm/ui/tabs.js");class TabPanelItem extends item.Z{_renderWatchers(){return this._startWatcher("badge",common.ZT),super._renderWatchers()}}var bindable_template=__webpack_require__("./node_modules/devextreme/esm/core/templates/bindable_template.js"),TabPanel=multi_view.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:function(data){return data?data.badge:void 0}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===devices.Z.real().deviceType&&!devices.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return!support.touch},options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}}])},_init:function(){this.callBase(),this.$element().addClass("dx-tabpanel"),this.setAria("role","tabpanel")},_initMarkup:function(){this.callBase(),this._createTitleActions(),this._renderLayout()},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new bindable_template.c((function($container,data){if((0,utils_type.PO)(data)){var $iconElement=(0,utils_icon.H)(data.icon);$iconElement&&$container.append($iconElement),(0,utils_type.$K)(data.title)&&!(0,utils_type.PO)(data.title)&&$container.append(dom_adapter.Z.createTextNode(data.title))}else(0,utils_type.$K)(data)&&$container.text(String(data));$container.wrapInner((0,renderer.Z)("<span>").addClass("dx-tab-text"))}),["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions:function(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction:function(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction:function(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction:function(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderContent:function(){var that=this;this.callBase(),this.option("templatesRenderAsynchronously")&&(this._resizeEventTimer=setTimeout((function(){that._updateLayout()}),0))},_renderLayout:function(){if(this._tabs)this._updateLayout();else{var $element=this.$element();this._$tabContainer=(0,renderer.Z)("<div>").addClass("dx-tabpanel-tabs").appendTo($element);var $tabs=(0,renderer.Z)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent($tabs,tabs.Z,this._tabConfig()),this._$container=(0,renderer.Z)("<div>").addClass("dx-tabpanel-container").appendTo($element),this._$container.append(this._$wrapper),this._updateLayout()}},_updateLayout:function(){if((0,utils_window.Ym)()){var tabsHeight=(0,size.zp)(this._$tabContainer);this._$container.css({marginTop:-tabsHeight,paddingTop:tabsHeight})}},_refreshActiveDescendant:function(){if(this._tabs){var tabs=this._tabs,tabItems=tabs.itemElements(),$activeTab=(0,renderer.Z)(tabItems[tabs.option("selectedIndex")]),id=this.getFocusedItemId();this.setAria("controls",void 0,(0,renderer.Z)(tabItems)),this.setAria("controls",id,$activeTab)}},_tabConfig:function(){return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(e){this.option("selectedIndex",e.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(args){if("focusedElement"===args.name)if(args.value){var $value=(0,renderer.Z)(args.value),$newItem=this._itemElements().eq($value.index());this.option("focusedElement",(0,core_element.u)($newItem))}else this.option("focusedElement",args.value)}.bind(this),onFocusIn:function(args){this._focusInHandler(args.event)}.bind(this),onFocusOut:function(args){this._isFocusOutHandlerExecuting||this._focusOutHandler(args.event)}.bind(this)}},_renderFocusTarget:function(){this._focusTarget().attr("tabIndex",-1)},_updateFocusState:function(e,isFocused){this.callBase(e,isFocused),e.target===this._tabs._focusTarget().get(0)&&this._toggleFocusClass(isFocused,this._focusTarget())},_focusOutHandler:function(e){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(e),this._isFocusOutHandlerExecuting=!1},_setTabsOption:function(name,value){this._tabs&&this._tabs.option(name,value)},_visibilityChanged:function(visible){visible&&(this._tabs._dimensionChanged(),this._updateLayout())},registerKeyHandler:function(key,handler){this.callBase(key,handler),this._tabs&&this._tabs.registerKeyHandler(key,handler)},repaint:function(){this.callBase(),this._tabs.repaint()},_optionChanged:function(args){var name=args.name,value=args.value,fullName=args.fullName;switch(name){case"dataSource":default:this.callBase(args);break;case"items":this._setTabsOption(name,this.option(name)),this._updateLayout(),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(args);break;case"width":this.callBase(args),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(fullName,value),this.callBase(args),!0===this.option("focusStateEnabled")){var selectedIndex=this.option("selectedIndex"),selectedTabContent=this._itemElements().eq(selectedIndex);this.option("focusedElement",(0,core_element.u)(selectedTabContent))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(fullName,value),this.callBase(args);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(fullName,value);break;case"focusedElement":var id=value?(0,renderer.Z)(value).index():value,newItem=value?this._tabs._itemElements().eq(id):value;this._setTabsOption("focusedElement",(0,core_element.u)(newItem)),this.callBase(args);break;case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",value);break;case"badgeExpr":this._invalidate()}},_clean:function(){clearTimeout(this._resizeEventTimer),this.callBase()}});TabPanel.ItemClass=TabPanelItem,(0,component_registrator.Z)("dxTabPanel",TabPanel);const tab_panel=TabPanel;class ItemOptionAction{constructor(options){this._options=options,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){core_class.Z.abstract()}}var createItemPathByIndex=(index,isTabs)=>"".concat(isTabs?"tabs":"items","[").concat(index,"]"),concatPaths=(path1,path2)=>(0,utils_type.$K)(path1)&&(0,utils_type.$K)(path2)?"".concat(path1,".").concat(path2):path1||path2,getTextWithoutSpaces=text=>text?text.replace(/\s/g,""):void 0,getFullOptionName=(path,optionName)=>"".concat(path,".").concat(optionName),getOptionNameFromFullName=fullName=>{var parts=fullName.split(".");return parts[parts.length-1].replace(/\[\d+]/,"")},isFullPathContainsTabs=fullPath=>fullPath.indexOf("tabs")>-1,getItemPath=(items,item,isTabs)=>{var index=items.indexOf(item);if(index>-1)return createItemPathByIndex(index,isTabs);for(var i=0;i<items.length;i++){var targetItem=items[i],tabOrGroupItems=targetItem.tabs||targetItem.items;if(tabOrGroupItems){var itemPath=getItemPath(tabOrGroupItems,item,targetItem.tabs);if(itemPath)return concatPaths(createItemPathByIndex(i,isTabs),itemPath)}}};class WidgetOptionItemOptionAction extends ItemOptionAction{tryExecute(){var{value}=this._options,instance=this.findInstance();return!!instance&&(instance.option(value),!0)}}class TabOptionItemOptionAction extends ItemOptionAction{tryExecute(){var tabPanel=this.findInstance();if(tabPanel){var{optionName,item,value}=this._options,itemIndex=this._itemsRunTimeInfo.findItemIndexByItem(item);if(itemIndex>=0)return tabPanel.option(getFullOptionName("items[".concat(itemIndex,"]"),optionName),value),!0}return!1}}class SimpleItemTemplateChangedAction extends ItemOptionAction{tryExecute(){return!1}}class GroupItemTemplateChangedAction extends ItemOptionAction{tryExecute(){var preparedItem=this.findPreparedItem();return!(null==preparedItem||!preparedItem._prepareGroupItemTemplate||!preparedItem._renderGroupContentTemplate)&&(preparedItem._prepareGroupItemTemplate(this._options.item.template),preparedItem._renderGroupContentTemplate(),!0)}}class TabsOptionItemOptionAction extends ItemOptionAction{tryExecute(){var tabPanel=this.findInstance();if(tabPanel){var{value}=this._options;return tabPanel.option("dataSource",value),!0}return!1}}class ValidationRulesItemOptionAction extends ItemOptionAction{tryExecute(){var{item}=this._options,instance=this.findInstance(),validator=instance&&(0,element_data.aT)(instance.$element()[0],"dxValidator");if(validator&&item){var filterRequired=item=>"required"===item.type,oldContainsRequired=(validator.option("validationRules")||[]).some(filterRequired),newContainsRequired=(item.validationRules||[]).some(filterRequired);if(!oldContainsRequired&&!newContainsRequired||oldContainsRequired&&newContainsRequired)return validator.option("validationRules",item.validationRules),!0}return!1}}class CssClassItemOptionAction extends ItemOptionAction{tryExecute(){var $itemContainer=this.findItemContainer(),{previousValue,value}=this._options;return!!$itemContainer&&($itemContainer.removeClass(previousValue).addClass(value),!0)}}const ui_form_item_options_actions=(optionName,itemActionOptions)=>{switch(optionName){case"editorOptions":case"buttonOptions":return new WidgetOptionItemOptionAction(itemActionOptions);case"validationRules":return new ValidationRulesItemOptionAction(itemActionOptions);case"cssClass":return new CssClassItemOptionAction(itemActionOptions);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new TabOptionItemOptionAction((0,extend.l)(itemActionOptions,{optionName}));case"tabs":return new TabsOptionItemOptionAction(itemActionOptions);case"template":var _itemActionOptions$it,_itemActionOptions$it2,_itemActionOptions$it3,itemType=null!==(_itemActionOptions$it=null==itemActionOptions||null===(_itemActionOptions$it2=itemActionOptions.item)||void 0===_itemActionOptions$it2?void 0:_itemActionOptions$it2.itemType)&&void 0!==_itemActionOptions$it?_itemActionOptions$it:null===(_itemActionOptions$it3=itemActionOptions.itemsRunTimeInfo.findPreparedItemByItem(null==itemActionOptions?void 0:itemActionOptions.item))||void 0===_itemActionOptions$it3?void 0:_itemActionOptions$it3.itemType;return"simple"===itemType?new SimpleItemTemplateChangedAction(itemActionOptions):"group"===itemType?new GroupItemTemplateChangedAction(itemActionOptions):new TabOptionItemOptionAction((0,extend.l)(itemActionOptions,{optionName}));default:return null}};var resize_observer=__webpack_require__("./node_modules/devextreme/esm/core/resize_observer.js"),ResponsiveBox=ui_collection_widget_edit.Z.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init:function(){this.option("screenByWidth")||this._options.silent("screenByWidth",utils_window.$n),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction:function(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:function(){return"dx-box-item"},_itemDataKey:function(){return"dxBoxItemData"},_initMarkup:function(){this.callBase(),this.$element().addClass("dx-responsivebox")},_renderItems:function(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged:function(item){var $item=this._findItemElementByItem(item);$item.length&&(this._refreshItem($item,item),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize:function(){var currentScreen=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass("dx-responsivebox-screen-"+currentScreen),this.option("currentScreenFactor",currentScreen)},_removeScreenSizeClass:function(){var currentScreenFactor=this.option("currentScreenFactor");currentScreenFactor&&this.$element().removeClass("dx-responsivebox-screen-"+currentScreenFactor)},_prepareGrid:function(){var grid=this._grid=[];this._prepareRowsAndCols(),(0,iterator.S6)(this._rows,function(){var row=[];grid.push(row),(0,iterator.S6)(this._cols,function(){row.push(this._createEmptyCell())}.bind(this))}.bind(this))},getSingleColumnRows:function(){var rows=this.option("rows"),screenItemsLength=this._screenItems.length;if(rows.length){for(var filteredRows=this._filterByScreen(rows),result=[],i=0;i<screenItemsLength;i++){var sizeConfig=this._defaultSizeConfig();i<filteredRows.length&&(0,utils_type.$K)(filteredRows[i].shrink)&&(sizeConfig.shrink=filteredRows[i].shrink),result.push(sizeConfig)}return result}return this._defaultSizeConfig(screenItemsLength)},_prepareRowsAndCols:function(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen:function(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems:function(){this._screenItems.sort((function(item1,item2){return item1.location.row-item2.location.row||item1.location.col-item2.location.col})),(0,iterator.S6)(this._screenItems,(function(index,item){(0,extend.l)(item.location,{row:index,col:0,rowspan:1,colspan:1})}))},_sizesByScreen:function(sizeConfigs){return(0,iterator.UI)(this._filterByScreen(sizeConfigs),function(sizeConfig){return(0,extend.l)(this._defaultSizeConfig(),sizeConfig)}.bind(this))},_createDefaultSizeConfig:function(){return{ratio:1,baseSize:0,minSize:0,maxSize:0}},_defaultSizeConfig:function(size){var defaultSizeConfig=this._createDefaultSizeConfig();if(!arguments.length)return defaultSizeConfig;for(var result=[],i=0;i<size;i++)result.push(defaultSizeConfig);return result},_filterByScreen:function(items){var screenRegExp=this._screenRegExp();return(0,common.h3)(items,(function(item){return!item.screen||screenRegExp.test(item.screen)}))},_screenRegExp:function(){var screen=this._getCurrentScreen();return new RegExp("(^|\\s)"+screen+"($|\\s)","i")},_getCurrentScreen:function(){var width=this._screenWidth();return this.option("screenByWidth")(width)},_screenWidth:function(){return(0,utils_window.Ym)()?(0,size.dz)((0,utils_window.Jj)()):1920},_createEmptyCell:function(){return{item:{},location:{colspan:1,rowspan:1}}},_spreadItems:function(){(0,iterator.S6)(this._screenItems,function(_,itemInfo){var location=itemInfo.location||{},itemCol=location.col,itemRow=location.row,row=this._grid[itemRow],itemCell=row&&row[itemCol];this._occupyCells(itemCell,itemInfo)}.bind(this))},_itemsByScreen:function(){return this.option("items").reduce(((result,item)=>{var locations=item.location||{};return locations=(0,utils_type.PO)(locations)?[locations]:locations,this._filterByScreen(locations).forEach((location=>{result.push({item,location:(0,extend.l)({rowspan:1,colspan:1},location)})})),result}),[])},_occupyCells:function(itemCell,itemInfo){itemCell&&!this._isItemCellOccupied(itemCell,itemInfo)&&((0,extend.l)(itemCell,itemInfo),this._markSpanningCell(itemCell))},_isItemCellOccupied:function(itemCell,itemInfo){if(!(0,utils_type.Qr)(itemCell.item))return!0;var result=!1;return this._loopOverSpanning(itemInfo.location,(function(cell){result=result||!(0,utils_type.Qr)(cell.item)})),result},_loopOverSpanning:function(location,callback){var rowEnd=location.row+location.rowspan-1,colEnd=location.col+location.colspan-1,boundRowEnd=Math.min(rowEnd,this._rows.length-1),boundColEnd=Math.min(colEnd,this._cols.length-1);location.rowspan-=rowEnd-boundRowEnd,location.colspan-=colEnd-boundColEnd;for(var rowIndex=location.row;rowIndex<=boundRowEnd;rowIndex++)for(var colIndex=location.col;colIndex<=boundColEnd;colIndex++)rowIndex===location.row&&colIndex===location.col||callback(this._grid[rowIndex][colIndex])},_markSpanningCell:function(itemCell){this._loopOverSpanning(itemCell.location,(function(cell){(0,extend.l)(cell,{item:itemCell.item,spanningCell:itemCell})}))},_linkNodeToItem:function(){(0,iterator.S6)(this._itemElements(),(function(_,itemNode){var $item=(0,renderer.Z)(itemNode),item=$item.data("dxBoxItemData");item.box||(item.node=$item.children())}))},_layoutItems:function(){var rowsCount=this._grid.length,colsCount=rowsCount&&this._grid[0].length;if(rowsCount||colsCount){var result=this._layoutBlock({direction:"col",row:{start:0,end:rowsCount-1},col:{start:0,end:colsCount-1}}),rootBox=this._prepareBoxConfig(result.box||{direction:"row",items:[(0,extend.l)(result,{ratio:1})]});(0,extend.l)(rootBox,this._rootBoxConfig(rootBox.items)),this._$root=(0,renderer.Z)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,box,rootBox)}},_rootBoxConfig:function(items){var rootItems=(0,iterator.S6)(items,function(index,item){this._needApplyAutoBaseSize(item)&&(0,extend.l)(item,{baseSize:"auto"})}.bind(this));return{width:"100%",height:"100%",items:rootItems,itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:function(item){return!(item.baseSize||item.minSize&&"auto"!==item.minSize||item.maxSize&&"auto"!==item.maxSize)},_prepareBoxConfig:function(config){return(0,extend.l)(config||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock:function(options){return this._isSingleItem(options)?this._itemByCell(options.row.start,options.col.start):this._layoutDirection(options)},_isSingleItem:function(options){var firstCellLocation=this._grid[options.row.start][options.col.start].location,isItemRowSpanned=options.row.end-options.row.start==firstCellLocation.rowspan-1,isItemColSpanned=options.col.end-options.col.start==firstCellLocation.colspan-1;return isItemRowSpanned&&isItemColSpanned},_itemByCell:function(rowIndex,colIndex){var itemCell=this._grid[rowIndex][colIndex];return itemCell.spanningCell?null:itemCell.item},_layoutDirection:function(options){for(var block,items=[],direction=options.direction,crossDirection=this._crossDirection(direction);block=this._nextBlock(options);){if(this._isBlockIndivisible(options.prevBlockOptions,block))throw ui_errors.Z.Error("E1025");var item=this._layoutBlock({direction:crossDirection,row:block.row,col:block.col,prevBlockOptions:options});item&&((0,extend.l)(item,this._blockSize(block,crossDirection)),items.push(item)),options[crossDirection].start=block[crossDirection].end+1}return{box:this._prepareBoxConfig({direction,items})}},_isBlockIndivisible:function(options,block){return options&&options.col.start===block.col.start&&options.col.end===block.col.end&&options.row.start===block.row.start&&options.row.end===block.row.end},_crossDirection:function(direction){return"col"===direction?"row":"col"},_nextBlock:function(options){var direction=options.direction,crossDirection=this._crossDirection(direction),startIndex=options[direction].start,endIndex=options[direction].end,crossStartIndex=options[crossDirection].start;if(crossStartIndex>options[crossDirection].end)return null;for(var crossSpan=1,crossIndex=crossStartIndex;crossIndex<crossStartIndex+crossSpan;crossIndex++){for(var lineCrossSpan=1,index=startIndex;index<=endIndex;index++){var cell=this._cellByDirection(direction,index,crossIndex);lineCrossSpan=Math.max(lineCrossSpan,cell.location[crossDirection+"span"])}var lineCrossEndIndex=crossIndex+lineCrossSpan,crossEndIndex=crossStartIndex+crossSpan;lineCrossEndIndex>crossEndIndex&&(crossSpan+=lineCrossEndIndex-crossEndIndex)}var result={};return result[direction]={start:startIndex,end:endIndex},result[crossDirection]={start:crossStartIndex,end:crossStartIndex+crossSpan-1},result},_cellByDirection:function(direction,index,crossIndex){return"col"===direction?this._grid[crossIndex][index]:this._grid[index][crossIndex]},_blockSize:function(block,direction){for(var defaultMinSize="row"===direction?"auto":0,sizeConfigs="row"===direction?this._rows:this._cols,result=(0,extend.l)(this._createDefaultSizeConfig(),{ratio:0}),index=block[direction].start;index<=block[direction].end;index++){var sizeConfig=sizeConfigs[index];result.ratio+=sizeConfig.ratio,result.baseSize+=sizeConfig.baseSize,result.minSize+=sizeConfig.minSize,result.maxSize+=sizeConfig.maxSize,(0,utils_type.$K)(sizeConfig.shrink)&&(result.shrink=sizeConfig.shrink)}return result.minSize=result.minSize?result.minSize:defaultMinSize,result.maxSize=result.maxSize?result.maxSize:"auto",this._isSingleColumnScreen()&&(result.baseSize="auto"),result},_update:function(forceRemoveRoot){var $existingRoot=this._$root;this._renderItems(),$existingRoot&&(forceRemoveRoot?$existingRoot.remove():($existingRoot.detach(),this._saveAssistantRoot($existingRoot))),this._layoutChangedAction()},_saveAssistantRoot:function($root){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push($root)},_dispose:function(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots:function(){this._assistantRoots&&(0,iterator.S6)(this._assistantRoots,(function(_,item){(0,renderer.Z)(item).remove()}))},_clearItemNodeTemplates:function(){(0,iterator.S6)(this.option("items"),(function(){delete this.node}))},_attachClickEvent:common.ZT,_optionChanged:function(args){switch(args.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(args),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(args);break;case"currentScreenFactor":break;default:this.callBase(args)}},_dimensionChanged:function(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint:function(){this._update()}});(0,component_registrator.Z)("dxResponsiveBox",ResponsiveBox);const responsive_box=ResponsiveBox;var FIELD_ITEM_LABEL_CONTENT_CLASS="dx-field-item-label-content",FIELD_ITEM_LABEL_CLASS="dx-field-item-label",FIELD_ITEM_CONTENT_CLASS="dx-field-item-content",dom_component=__webpack_require__("./node_modules/devextreme/esm/core/dom_component.js"),DefaultAdapter=core_class.Z.inherit({ctor(editor,validator){this.editor=editor,this.validator=validator,this.validationRequestsCallbacks=[];var handler=args=>{this.validationRequestsCallbacks.forEach((item=>item(args)))};editor.validationRequest.add(handler),editor.on("disposing",(function(){editor.validationRequest.remove(handler)}))},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(params){this.editor.option({validationErrors:params.brokenRules,validationStatus:params.status})},reset(){this.editor.reset()},focus(){this.editor.focus()}});const default_adapter=DefaultAdapter;var Validator=dom_component.Z.inherit({_initOptions:function(options){this.callBase.apply(this,arguments),this.option(validation_engine.Z.initValidationOptions(options))},_getDefaultOptions(){return(0,extend.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,callbacks.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var group=this._findGroup();this._groupWasInit||this.on("disposing",(function(args){validation_engine.Z.removeRegisteredValidator(args.component._validationGroup,args.component)})),this._groupWasInit&&this._validationGroup===group||(validation_engine.Z.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=group,validation_engine.Z.registerValidatorInGroup(group,this))},_setOptionsByReference(){this.callBase(),(0,extend.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){var element=this.$element()[0];return(0,element_data.aT)(element,"dx-validation-target")},_initAdapter(){var dxStandardEditor=this._getEditor(),adapter=this.option("adapter");if(!adapter){if(dxStandardEditor)return(adapter=new default_adapter(dxStandardEditor,this)).validationRequestsCallbacks.push((args=>{this._validationInfo.skipValidation||this.validate(args)})),void this.option("adapter",adapter);throw ui_errors.Z.Error("E0120")}var callbacks=adapter.validationRequestsCallbacks;callbacks&&callbacks.push((args=>{this.validate(args)}))},_toggleRTLDirection(isRtl){var _this$option$editor$o,_this$option,_this$option$editor,rtlEnabled=null!==(_this$option$editor$o=null===(_this$option=this.option("adapter"))||void 0===_this$option||null===(_this$option$editor=_this$option.editor)||void 0===_this$option$editor?void 0:_this$option$editor.option("rtlEnabled"))&&void 0!==_this$option$editor$o?_this$option$editor$o:isRtl;this.callBase(rtlEnabled)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var dxStandardEditor=this._getEditor();if(dxStandardEditor){var isRequired=(this.option("validationRules")||[]).some((_ref=>{var{type}=_ref;return"required"===type}))||null;dxStandardEditor.isInitialized()&&dxStandardEditor.setAria("required",isRequired),dxStandardEditor.option("_onMarkupRendered",(()=>{dxStandardEditor.setAria("required",isRequired)}))}},_visibilityChanged(visible){visible&&this._initGroupRegistration()},_optionChanged(args){switch(args.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(validation_engine.Z.synchronizeValidationOptions(args,this.option()));break;default:this.callBase(args)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,iterator.UI)(this.option("validationRules"),((rule,index)=>(0,extend.l)({},rule,{validator:this,index})))),this._validationRules},_findGroup(){var $element=this.$element();return this.option("validationGroup")||validation_engine.Z.findGroup($element,this._modelByElement($element))},_resetValidationRules(){delete this._validationRules},validate(args){var result,adapter=this.option("adapter"),name=this.option("name"),bypass=adapter.bypass&&adapter.bypass(),value=args&&void 0!==args.value?args.value:adapter.getValue(),currentError=adapter.getCurrentValidationError&&adapter.getCurrentValidationError(),rules=this._getValidationRules(),currentResult=this._validationInfo&&this._validationInfo.result;return currentResult&&"pending"===currentResult.status&&currentResult.value===value?(0,extend.l)({},currentResult):(bypass?result={isValid:!0,status:"valid"}:currentError&&currentError.editorSpecific?(currentError.validator=this,result={isValid:!1,status:"invalid",brokenRule:currentError,brokenRules:[currentError]}):result=validation_engine.Z.validate(value,rules,name),result.id=(new guid.Z).toString(),this._applyValidationResult(result,adapter),result.complete&&result.complete.then((res=>{res.id===this._validationInfo.result.id&&this._applyValidationResult(res,adapter)})),(0,extend.l)({},this._validationInfo.result))},reset(){var adapter=this.option("adapter"),result={id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null};this._validationInfo.skipValidation=!0,adapter.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult(result,adapter)},_updateValidationResult(result){if(this._validationInfo.result&&this._validationInfo.result.id===result.id)for(var prop in result)"id"!==prop&&"complete"!==prop&&(this._validationInfo.result[prop]=result[prop]);else{var complete=this._validationInfo.deferred&&this._validationInfo.result.complete;this._validationInfo.result=(0,extend.l)({},result,{complete})}},_applyValidationResult(result,adapter){var validatedAction=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(result.validator=this,this._updateValidationResult(result),adapter.applyValidationResults&&adapter.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),"pending"===this._validationInfo.result.status)return this._validationInfo.deferred||(this._validationInfo.deferred=new utils_deferred.BH,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);"pending"!==this._validationInfo.result.status&&(validatedAction(result),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(result),this._validationInfo.deferred=null))},focus(){var adapter=this.option("adapter");adapter&&adapter.focus&&adapter.focus()},_useTemplates:function(){return!1}});(0,component_registrator.Z)("dxValidator",Validator);const ui_validator=Validator;var EDITORS_WITH_ARRAY_VALUE=["dxTagBox","dxRangeSlider"],EDITORS_WITHOUT_LABELS=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function convertToRenderFieldItemOptions(_ref){var{$parent,rootElementCssClassList,formOrLayoutManager,createComponentCallback,item,template,labelTemplate,name,formLabelLocation,requiredMessageTemplate,validationGroup,editorValue,canAssignUndefinedValueToEditor,editorValidationBoundary,editorStylingMode,showColonAfterLabel,managerLabelLocation,itemId,managerMarkOptions,labelMode,onLabelTemplateRendered}=_ref,isRequired=(0,utils_type.$K)(item.isRequired)?item.isRequired:!!function _hasRequiredRuleInSet(rules){var hasRequiredRule;rules&&rules.length&&(0,iterator.S6)(rules,(function(index,rule){if("required"===rule.type)return hasRequiredRule=!0,!1}));return hasRequiredRule}(item.validationRules),isSimpleItem="simple"===item.itemType,helpID=item.helpText?"dx-"+new guid.Z:null,labelOptions=function _convertToLabelOptions(_ref5){var{item,id,isRequired,managerMarkOptions,showColonAfterLabel,labelLocation,labelTemplate,formLabelMode,onLabelTemplateRendered}=_ref5,isEditorWithoutLabels=EDITORS_WITHOUT_LABELS.includes(item.editorType),labelOptions=(0,extend.l)({showColon:showColonAfterLabel,location:labelLocation,id,visible:"outside"===formLabelMode||isEditorWithoutLabels&&"hidden"!==formLabelMode,isRequired},item?item.label:{},{markOptions:convertToLabelMarkOptions(managerMarkOptions,isRequired),labelTemplate,onLabelTemplateRendered});["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor"].includes(item.editorType)&&(labelOptions.labelID="dx-label-".concat(new guid.Z));!labelOptions.text&&item.dataField&&(labelOptions.text=(0,inflector.GK)(item.dataField));labelOptions.text&&(labelOptions.textWithoutColon=labelOptions.text,labelOptions.text+=labelOptions.showColon?":":"");return labelOptions}({item,id:itemId,isRequired,managerMarkOptions,showColonAfterLabel,labelLocation:managerLabelLocation,formLabelMode:labelMode,labelTemplate,onLabelTemplateRendered}),needRenderLabel=labelOptions.visible&&(labelOptions.text||labelOptions.labelTemplate&&isSimpleItem),{location:labelLocation,labelID}=labelOptions,labelNeedBaselineAlign="top"!==labelLocation&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(item.editorType),editorOptions=function _convertToEditorOptions(_ref4){var{editorType,defaultEditorName,editorValue,canAssignUndefinedValueToEditor,externalEditorOptions,editorInputId,editorValidationBoundary,editorStylingMode,formLabelMode,labelText,labelMark}=_ref4,editorOptionsWithValue={};(void 0!==editorValue||canAssignUndefinedValueToEditor)&&(editorOptionsWithValue.value=editorValue);-1!==EDITORS_WITH_ARRAY_VALUE.indexOf(editorType)&&(editorOptionsWithValue.value=editorOptionsWithValue.value||[]);var labelMode=null==externalEditorOptions?void 0:externalEditorOptions.labelMode;(0,utils_type.$K)(labelMode)||(labelMode="outside"===formLabelMode?"hidden":formLabelMode);var stylingMode=(null==externalEditorOptions?void 0:externalEditorOptions.stylingMode)||editorStylingMode,result=(0,extend.l)(!0,editorOptionsWithValue,externalEditorOptions,{inputAttr:{id:editorInputId},validationBoundary:editorValidationBoundary,stylingMode,label:labelText,labelMode,labelMark});externalEditorOptions&&(result.dataSource&&(result.dataSource=externalEditorOptions.dataSource),result.items&&(result.items=externalEditorOptions.items));defaultEditorName&&!result.name&&(result.name=defaultEditorName);return result}({editorType:item.editorType,editorValue,defaultEditorName:item.dataField,canAssignUndefinedValueToEditor,externalEditorOptions:item.editorOptions,editorInputId:itemId,editorValidationBoundary,editorStylingMode,formLabelMode:labelMode,labelText:labelOptions.textWithoutColon,labelMark:labelOptions.markOptions.showRequiredMark?String.fromCharCode(160)+labelOptions.markOptions.requiredMark:""});return{$parent,rootElementCssClassList,formOrLayoutManager,createComponentCallback,labelOptions,labelNeedBaselineAlign,labelLocation,needRenderLabel,item,isSimpleItem,isRequired,template,helpID,labelID,name,helpText:labelOptions.markOptions.showOptionalMark&&!labelOptions.visible&&"hidden"!==editorOptions.labelMode&&!(0,utils_type.$K)(item.helpText)?labelOptions.markOptions.optionalMark:item.helpText,formLabelLocation,requiredMessageTemplate,validationGroup,editorOptions}}function convertToLabelMarkOptions(_ref3,isRequired){var{showRequiredMark,requiredMark,showOptionalMark,optionalMark}=_ref3;return{showRequiredMark:showRequiredMark&&isRequired,requiredMark,showOptionalMark:showOptionalMark&&!isRequired,optionalMark}}var FIELD_ITEM_REQUIRED_MARK_CLASS="dx-field-item-required-mark",FIELD_ITEM_LABEL_LOCATION_CLASS="dx-field-item-label-location-",FIELD_ITEM_OPTIONAL_MARK_CLASS="dx-field-item-optional-mark",FIELD_ITEM_LABEL_TEXT_CLASS="dx-field-item-label-text";function renderLabel(_ref){var{text,id,location,alignment,labelID=null,markOptions={},labelTemplate,labelTemplateData,onLabelTemplateRendered}=_ref;if((!(0,utils_type.$K)(text)||text.length<=0)&&!(0,utils_type.$K)(labelTemplate))return null;var $label=(0,renderer.Z)("<label>").addClass(FIELD_ITEM_LABEL_CLASS+" "+FIELD_ITEM_LABEL_LOCATION_CLASS+location).attr("for",id).attr("id",labelID).css("textAlign",alignment),$labelContainer=(0,renderer.Z)("<span>").addClass(FIELD_ITEM_LABEL_CONTENT_CLASS),$labelContent=(0,renderer.Z)("<span>").addClass(FIELD_ITEM_LABEL_TEXT_CLASS).text(text);return labelTemplate&&($labelContent=(0,renderer.Z)("<div>").addClass("dx-field-item-custom-label-content"),labelTemplateData.text=text,labelTemplate.render({container:(0,core_element.u)($labelContent),model:labelTemplateData,onRendered(){null==onLabelTemplateRendered||onLabelTemplateRendered()}})),$label.append($labelContainer.append($labelContent,function _renderLabelMark(markOptions){var markText=function getLabelMarkText(_ref2){var{showRequiredMark,requiredMark,showOptionalMark,optionalMark}=_ref2;return showRequiredMark||showOptionalMark?String.fromCharCode(160)+(showRequiredMark?requiredMark:optionalMark):""}(markOptions);if(""===markText)return null;return(0,renderer.Z)("<span>").addClass(markOptions.showRequiredMark?FIELD_ITEM_REQUIRED_MARK_CLASS:FIELD_ITEM_OPTIONAL_MARK_CLASS).text(markText)}(markOptions)))}function getLabelWidthByHTML(labelContent){for(var result=0,itemsCount=labelContent.children.length,i=0;i<itemsCount;i++){result+=labelContent.children[i].offsetWidth}return result}var FIELD_ITEM_CONTENT_WRAPPER_CLASS="dx-field-item-content-wrapper",TEMPLATE_WRAPPER_CLASS="dx-template-wrapper",VALIDATION_TARGET_CLASS="dx-validation-target",INVALID_CLASS="dx-invalid";function renderFieldItem(_ref){var{$parent,rootElementCssClassList,formOrLayoutManager,createComponentCallback,labelOptions,labelNeedBaselineAlign,labelLocation,needRenderLabel,formLabelLocation,item,editorOptions,isSimpleItem,isRequired,template,helpID,labelID,name,helpText,requiredMessageTemplate,validationGroup}=_ref,$rootElement=(0,renderer.Z)("<div>").addClass(rootElementCssClassList.join(" ")).appendTo($parent);$rootElement.addClass(isRequired?"dx-field-item-required":"dx-field-item-optional"),isSimpleItem&&$rootElement.addClass("dx-flex-layout"),isSimpleItem&&labelNeedBaselineAlign&&$rootElement.addClass("dx-field-item-label-align");var $fieldEditorContainer=(0,renderer.Z)("<div>");$fieldEditorContainer.data("dx-form-item",item),$fieldEditorContainer.addClass(FIELD_ITEM_CONTENT_CLASS).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[formLabelLocation]);var widgetInstance,$label=null;if(needRenderLabel&&(labelOptions.labelTemplate&&(labelOptions.labelTemplateData=getTemplateData(item,editorOptions,formOrLayoutManager)),$label=renderLabel(labelOptions)),$label){var{editorType}=item;$rootElement.append($label),"top"!==labelLocation&&"left"!==labelLocation||$rootElement.append($fieldEditorContainer),"right"===labelLocation&&$rootElement.prepend($fieldEditorContainer),"top"===labelLocation?$rootElement.addClass("dx-label-v-align"):$rootElement.addClass("dx-label-h-align"),"dxCheckBox"!==editorType&&"dxSwitch"!==editorType||events_engine.Z.on($label,click.u,(function(){events_engine.Z.trigger($fieldEditorContainer.children(),click.u)}));var isToggleControls=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(editorType),labelAlignment=labelOptions.alignment;!template&&isToggleControls&&"top"===labelLocation&&("left"===labelAlignment||!labelAlignment)&&$fieldEditorContainer.addClass("dx-toggle-controls-paddings")}else $rootElement.append($fieldEditorContainer);if(template)template.render({container:(0,core_element.u)($fieldEditorContainer),model:getTemplateData(item,editorOptions,formOrLayoutManager),onRendered(){var validationTargetInstance=function tryGetValidationTargetInstance($validationTarget){var _$validationTarget$pa,_$validationTarget$pa2;return(null==$validationTarget?void 0:$validationTarget.data(VALIDATION_TARGET_CLASS))||(null==$validationTarget||null===(_$validationTarget$pa=$validationTarget.parent)||void 0===_$validationTarget$pa||null===(_$validationTarget$pa2=_$validationTarget$pa.call($validationTarget))||void 0===_$validationTarget$pa2?void 0:_$validationTarget$pa2.data(VALIDATION_TARGET_CLASS))}(getValidationTarget($fieldEditorContainer));subscribeWrapperInvalidClassToggle(validationTargetInstance)}});else{var $div=(0,renderer.Z)("<div>").appendTo($fieldEditorContainer);try{(widgetInstance=createComponentCallback($div,item.editorType,editorOptions)).setAria("describedby",helpID),labelID&&widgetInstance.setAria("labelledby",labelID),widgetInstance.setAria("required",isRequired)}catch(e){ui_errors.Z.log("E1035",e.message)}}var $validationTarget=getValidationTarget($fieldEditorContainer),validationTargetInstance=$validationTarget&&$validationTarget.data(VALIDATION_TARGET_CLASS);if(validationTargetInstance){var validationRules,isItemHaveCustomLabel=item.label&&item.label.text,itemName=isItemHaveCustomLabel?null:name,fieldName=isItemHaveCustomLabel?item.label.text:itemName&&(0,inflector.GK)(itemName);if(isSimpleItem)if(item.validationRules)validationRules=item.validationRules;else{var requiredMessage=(0,string.WU)(requiredMessageTemplate,fieldName||"");validationRules=item.isRequired?[{type:"required",message:requiredMessage}]:null}Array.isArray(validationRules)&&validationRules.length&&createComponentCallback($validationTarget,ui_validator,{validationRules,validationGroup,dataGetter:function(){return{formItem:item}}}),subscribeWrapperInvalidClassToggle(validationTargetInstance)}helpText&&isSimpleItem&&$fieldEditorContainer.parent().append((0,renderer.Z)("<div>").addClass(FIELD_ITEM_CONTENT_WRAPPER_CLASS).append($fieldEditorContainer).append((0,renderer.Z)("<div>").addClass("dx-field-item-help-text").attr("id",helpID).text(helpText)));return{$fieldEditorContainer,$rootElement,widgetInstance}}function getValidationTarget($fieldEditorContainer){var $editor=$fieldEditorContainer.children().first();return $editor.hasClass(TEMPLATE_WRAPPER_CLASS)?$editor.children().first():$editor}function subscribeWrapperInvalidClassToggle(validationTargetInstance){if(validationTargetInstance&&(0,themes.x2)()){var wrapperClass=".".concat(FIELD_ITEM_CONTENT_WRAPPER_CLASS),toggleInvalidClass=_ref2=>{var{element,component}=_ref2,{isValid,validationMessageMode}=component.option();(0,renderer.Z)(element).parents(wrapperClass).toggleClass(INVALID_CLASS,!1===isValid&&(component._isFocused()||"always"===validationMessageMode))};validationTargetInstance.on("optionChanged",(e=>{"isValid"===e.name&&toggleInvalidClass(e)})),validationTargetInstance.on("focusIn",toggleInvalidClass).on("focusOut",toggleInvalidClass).on("enterKey",toggleInvalidClass)}}function getTemplateData(item,editorOptions,formOrLayoutManager){return{dataField:item.dataField,editorType:item.editorType,editorOptions,component:formOrLayoutManager,name:item.name}}function renderButtonItem(_ref){var{item,$parent,rootElementCssClassList,validationGroup,createComponentCallback}=_ref,$rootElement=(0,renderer.Z)("<div>").appendTo($parent).addClass(rootElementCssClassList.join(" ")).addClass("dx-field-button-item").css("textAlign",function convertAlignmentToTextAlign(horizontalAlignment){return(0,utils_type.$K)(horizontalAlignment)?horizontalAlignment:"right"}(item.horizontalAlignment));return $parent.css("justifyContent",function convertAlignmentToJustifyContent(verticalAlignment){switch(verticalAlignment){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}(item.verticalAlignment)),{$rootElement,buttonInstance:createComponentCallback((0,renderer.Z)("<div>").appendTo($rootElement),"dxButton",(0,extend.l)({validationGroup},item.buttonOptions))}}function renderEmptyItem(_ref){var{$parent,rootElementCssClassList}=_ref;return(0,renderer.Z)("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(rootElementCssClassList.join(" ")).appendTo($parent)}var LayoutManager=ui_widget.default.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:message.Z.format("dxForm-optionalMark"),requiredMessage:message.Z.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference:function(){this.callBase(),(0,extend.l)(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init:function(){var layoutData=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new FormItemsRunTimeInfo,this._updateReferencedOptions(layoutData),this._initDataAndItems(layoutData)},_dispose:function(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems:function(initialData){this._syncDataWithItems(),this._updateItems(initialData)},_syncDataWithItems:function(){var layoutData=this.option("layoutData"),userItems=this.option("items");(0,utils_type.$K)(userItems)&&userItems.forEach((item=>{var value;item.dataField&&void 0===this._getDataByField(item.dataField)&&(item.editorOptions&&(value=item.editorOptions.value),((0,utils_type.$K)(value)||item.dataField in layoutData)&&this._updateFieldValue(item.dataField,value))}))},_getDataByField:function(dataField){return dataField?this.option("layoutData."+dataField):null},_isCheckboxUndefinedStateEnabled:function(_ref){var{allowIndeterminateState,editorType,dataField}=_ref;if(!0===allowIndeterminateState&&"dxCheckBox"===editorType){var nameParts=["layoutData",...dataField.split(".")],propertyName=nameParts.pop(),layoutData=this.option(nameParts.join("."));return layoutData&&propertyName in layoutData}return!1},_updateFieldValue:function(dataField,value){var layoutData=this.option("layoutData"),newValue=value;!variable_wrapper.default.isWrapped(layoutData[dataField])&&(0,utils_type.$K)(dataField)?this.option("layoutData."+dataField,newValue):variable_wrapper.default.isWritableWrapped(layoutData[dataField])&&(newValue=(0,utils_type.mf)(newValue)?newValue():newValue,layoutData[dataField](newValue)),this._triggerOnFieldDataChanged({dataField,value:newValue})},_triggerOnFieldDataChanged:function(args){this._createActionByOption("onFieldDataChanged")(args)},_updateItems:function(layoutData){var that=this,userItems=this.option("items"),isUserItemsExist=(0,utils_type.$K)(userItems),customizeItem=that.option("customizeItem"),items=isUserItemsExist?userItems:this._generateItemsByData(layoutData);if((0,utils_type.$K)(items)){var processedItems=[];(0,iterator.S6)(items,(function(index,item){that._isAcceptableItem(item)&&(item=that._processItem(item),customizeItem&&customizeItem(item),(0,utils_type.Kn)(item)&&!1!==variable_wrapper.default.unwrap(item.visible)&&processedItems.push(item))})),that._itemWatchers.length&&isUserItemsExist||that._updateItemWatchers(items),this._setItems(processedItems),this._sortItems()}},_cleanItemWatchers:function(){this._itemWatchers.forEach((function(dispose){dispose()})),this._itemWatchers=[]},_updateItemWatchers:function(items){var that=this,watch=that._getWatch();items.forEach((function(item){(0,utils_type.Kn)(item)&&(0,utils_type.$K)(item.visible)&&(0,utils_type.mf)(watch)&&that._itemWatchers.push(watch((function(){return variable_wrapper.default.unwrap(item.visible)}),(function(){that._updateItems(that.option("layoutData")),that.repaint()}),{skipImmediate:!0}))}))},_generateItemsByData:function(layoutData){var result=[];return(0,utils_type.$K)(layoutData)&&(0,iterator.S6)(layoutData,(function(dataField){result.push({dataField})})),result},_isAcceptableItem:function(item){var itemField=item.dataField||item,itemData=this._getDataByField(itemField);return!((0,utils_type.mf)(itemData)&&!variable_wrapper.default.isWrapped(itemData))},_processItem:function(item){if("string"==typeof item&&(item={dataField:item}),"object"!=typeof item||item.itemType||(item.itemType="simple"),!(0,utils_type.$K)(item.editorType)&&(0,utils_type.$K)(item.dataField)){var value=this._getDataByField(item.dataField);item.editorType=(0,utils_type.$K)(value)?this._getEditorTypeByDataType((0,utils_type.dt)(value)):"dxTextBox"}var _item$allowIndetermin;"dxCheckBox"===item.editorType&&(item.allowIndeterminateState=null===(_item$allowIndetermin=item.allowIndeterminateState)||void 0===_item$allowIndetermin||_item$allowIndetermin);return item},_getEditorTypeByDataType:function(dataType){switch(dataType){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems:function(){(0,array.Sq)(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes:function(){this._items.sort((function(itemA,itemB){var indexA=itemA.visibleIndex,indexB=itemB.visibleIndex;return indexA>indexB?1:indexA<indexB?-1:0}))},_initMarkup:function(){this._itemsRunTimeInfo.clear(),this.$element().addClass("dx-layout-manager"),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox:function(){var templatesInfo=[];if(this._items&&this._items.length){var colCount=this._getColCount(),$container=(0,renderer.Z)("<div>").appendTo(this.$element());this._prepareItemsWithMerging(colCount);var layoutItems=this._generateLayoutItems();this._responsiveBox=this._createComponent($container,responsive_box,this._getResponsiveBoxConfig(layoutItems,colCount,templatesInfo)),(0,utils_window.Ym)()||this._renderTemplates(templatesInfo)}},_itemStateChangedHandler:function(e){this._refresh()},_renderTemplates:function(templatesInfo){var that=this,itemsWithLabelTemplateCount=0;templatesInfo.forEach((_ref2=>{var _item$label,{item}=_ref2;null!=item&&null!==(_item$label=item.label)&&void 0!==_item$label&&_item$label.template&&itemsWithLabelTemplateCount++})),(0,iterator.S6)(templatesInfo,(function(index,info){switch(info.itemType){case"empty":renderEmptyItem(info);break;case"button":that._renderButtonItem(info);break;default:that._renderFieldItem(info,itemsWithLabelTemplateCount)}}))},_getResponsiveBoxConfig:function(layoutItems,colCount,templatesInfo){var that=this,colCountByScreen=that.option("colCountByScreen"),xsColCount=colCountByScreen&&colCountByScreen.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:function(){var onLayoutChanged=that.option("onLayoutChanged"),isSingleColumnMode=that.isSingleColumnMode();onLayoutChanged&&(that.$element().toggleClass("dx-layout-manager-one-col",isSingleColumnMode),onLayoutChanged(isSingleColumnMode))},onContentReady:function(e){(0,utils_window.Ym)()&&that._renderTemplates(templatesInfo),that.option("onLayoutChanged")&&that.$element().toggleClass("dx-layout-manager-one-col",that.isSingleColumnMode(e.component))},itemTemplate:function(e,itemData,itemElement){if(e.location){var $itemElement=(0,renderer.Z)(itemElement),itemRenderedCountInPreviousRows=e.location.row*colCount,item=that._items[e.location.col+itemRenderedCountInPreviousRows];if(item){var itemCssClassList=[item.cssClass];$itemElement.toggleClass("dx-single-column-item-content",that.isSingleColumnMode(this)),0===e.location.row&&itemCssClassList.push("dx-first-row"),0===e.location.col&&itemCssClassList.push("dx-first-col"),"simple"===item.itemType&&that.option("isRoot")&&$itemElement.addClass("dx-root-simple-item");var isLastColumn=e.location.col===colCount-1||e.location.col+e.location.colspan===colCount,rowsCount=that._getRowsCount(),isLastRow=e.location.row===rowsCount-1;isLastColumn&&itemCssClassList.push("dx-last-col"),isLastRow&&itemCssClassList.push("dx-last-row"),"empty"!==item.itemType&&(itemCssClassList.push("dx-field-item"),itemCssClassList.push(that.option("cssItemClass")),(0,utils_type.$K)(item.col)&&itemCssClassList.push("dx-col-"+item.col)),templatesInfo.push({itemType:item.itemType,item,$parent:$itemElement,rootElementCssClassList:itemCssClassList})}}},cols:that._generateRatio(colCount),rows:that._generateRatio(that._getRowsCount(),!0),dataSource:layoutItems,screenByWidth:that.option("screenByWidth"),singleColumnScreen:!xsColCount&&"xs"}},_getColCount:function(){var colCount=this.option("colCount"),colCountByScreen=this.option("colCountByScreen");if(colCountByScreen){var screenFactor=this.option("form").getTargetScreenFactor();screenFactor||(screenFactor=(0,utils_window.Ym)()?(0,utils_window.Wf)(this.option("screenByWidth")):"lg"),colCount=colCountByScreen[screenFactor]||colCount}if("auto"===colCount){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=colCount=this._getMaxColCount()}return colCount<1?1:colCount},_getMaxColCount:function(){if(!(0,utils_window.Ym)())return 1;var minColWidth=this.option("minColWidth"),width=(0,size.dz)(this.$element()),itemsCount=this._items.length,maxColCount=Math.floor(width/minColWidth)||1;return itemsCount<maxColCount?itemsCount:maxColCount},isCachedColCountObsolete:function(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging:function(colCount){var item,itemsMergedByCol,j,i,items=this._items.slice(0),result=[];for(i=0;i<items.length;i++)if(item=items[i],result.push(item),(this.option("alignItemLabels")||item.alignItemLabels||item.colSpan)&&(item.col=this._getColByIndex(result.length-1,colCount)),item.colSpan>1&&item.col+item.colSpan<=colCount){for(itemsMergedByCol=[],j=0;j<item.colSpan-1;j++)itemsMergedByCol.push({merged:!0});result=result.concat(itemsMergedByCol)}else delete item.colSpan;this._setItems(result)},_getColByIndex:function(index,colCount){return index%colCount},_setItems:function(items){this._items=items,this._cashedColCount=null},_generateLayoutItems:function(){var item,i,items=this._items,colCount=this._getColCount(),result=[];for(i=0;i<items.length;i++)if(!(item=items[i]).merged){var generatedItem={location:{row:parseInt(i/colCount),col:this._getColByIndex(i,colCount)}};(0,utils_type.$K)(item.disabled)&&(generatedItem.disabled=item.disabled),(0,utils_type.$K)(item.visible)&&(generatedItem.visible=item.visible),(0,utils_type.$K)(item.colSpan)&&(generatedItem.location.colspan=item.colSpan),(0,utils_type.$K)(item.rowSpan)&&(generatedItem.location.rowspan=item.rowSpan),result.push(generatedItem)}return result},_renderEmptyItem:function($container){renderEmptyItem({$container})},_renderButtonItem:function(_ref3){var{item,$parent,rootElementCssClassList}=_ref3,{$rootElement,buttonInstance}=renderButtonItem({item,$parent,rootElementCssClassList,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item,widgetInstance:buttonInstance,guid:item.guid,$itemContainer:$rootElement})},_renderFieldItem:function(_ref4,itemsWithLabelTemplateCount){var _item$label2,_this$option,{item,$parent,rootElementCssClassList}=_ref4,editorValue=this._getDataByField(item.dataField),canAssignUndefinedValueToEditor=!1;if(void 0===editorValue){var{allowIndeterminateState,editorType,dataField}=item;canAssignUndefinedValueToEditor=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState,editorType,dataField})}var name=item.dataField||item.name,formOrLayoutManager=this._getFormOrThis(),{$fieldEditorContainer,widgetInstance,$rootElement}=renderFieldItem(convertToRenderFieldItemOptions({$parent,rootElementCssClassList,item,name,editorValue,canAssignUndefinedValueToEditor,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:item.template?this._getTemplate(item.template):null,labelTemplate:null!==(_item$label2=item.label)&&void 0!==_item$label2&&_item$label2.template?this._getTemplate(item.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(name),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(formOrLayoutManager,itemsWithLabelTemplateCount)&&formOrLayoutManager._alignLabels(this,this.isSingleColumnMode(formOrLayoutManager))}}));null===(_this$option=this.option("onFieldItemRendered"))||void 0===_this$option||_this$option(),widgetInstance&&item.dataField&&this._bindDataField(widgetInstance,item.dataField,item.editorType,$fieldEditorContainer),this._itemsRunTimeInfo.add({item,widgetInstance,guid:item.guid,$itemContainer:$rootElement})},_incTemplateRenderedCallCount(){var _this$_labelTemplateR;this._labelTemplateRenderedCallCount=(null!==(_this$_labelTemplateR=this._labelTemplateRenderedCallCount)&&void 0!==_this$_labelTemplateR?_this$_labelTemplateR:0)+1},_shouldAlignLabelsOnTemplateRendered(formOrLayoutManager,totalItemsWithLabelTemplate){return formOrLayoutManager.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===totalItemsWithLabelTemplate},_getMarkOptions:function(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis:function(){return this.option("form")||this},_bindDataField:function(editorInstance,dataField,editorType,$container){var formOrThis=this._getFormOrThis();editorInstance.on("enterKey",(function(args){formOrThis._createActionByOption("onEditorEnterKey")((0,extend.l)(args,{dataField}))})),this._createWatcher(editorInstance,$container,dataField),this.linkEditorToDataField(editorInstance,dataField,editorType)},_createWatcher:function(editorInstance,$container,dataField){var that=this,watch=that._getWatch();if((0,utils_type.mf)(watch)){var dispose=watch((function(){return that._getDataByField(dataField)}),(function(){var fieldValue=that._getDataByField(dataField);if("dxTagBox"===editorInstance.NAME){var editorValue=editorInstance.option("value");if(fieldValue!==editorValue&&function(array1,array2){if(!Array.isArray(array1)||!Array.isArray(array2)||array1.length!==array2.length)return!1;for(var i=0;i<array1.length;i++)if(array1[i]!==array2[i])return!1;return!0}(fieldValue,editorValue))return}editorInstance.option("value",fieldValue)}),{deep:!0,skipImmediate:!0});events_engine.Z.on($container,remove.x,dispose)}},_getWatch:function(){if(!(0,utils_type.$K)(this._watch)){var formInstance=this.option("form");this._watch=formInstance&&formInstance.option("integrationOptions.watchMethod")}return this._watch},_createComponent:function($editor,type,editorOptions){var readOnlyState=this.option("readOnly"),instance=this.callBase($editor,type,editorOptions);return readOnlyState&&instance.option("readOnly",readOnlyState),this.on("optionChanged",(function(args){"readOnly"!==args.name||(0,utils_type.$K)(editorOptions.readOnly)||instance.option(args.name,args.value)})),instance},_generateRatio:function(count,isAutoSize){var ratio,i,result=[];for(i=0;i<count;i++)ratio={ratio:1},isAutoSize&&(ratio.baseSize="auto"),result.push(ratio);return result},_getRowsCount:function(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions:function(newLayoutData){var layoutData=this.option("layoutData");(0,utils_type.Kn)(layoutData)&&Object.getOwnPropertyNames(layoutData).forEach((property=>delete this._optionsByReference["layoutData."+property])),(0,utils_type.Kn)(newLayoutData)&&Object.getOwnPropertyNames(newLayoutData).forEach((property=>this._optionsByReference["layoutData."+property]=!0))},_resetWidget(instance){this._disableEditorValueChangedHandler=!0,instance.reset(),this._disableEditorValueChangedHandler=!1,instance.option("isValid",!0)},_optionChanged(args){if(0!==args.fullName.search("layoutData."))switch(args.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(args.value),this.option("items")?(0,utils_type.Qr)(args.value)||this._itemsRunTimeInfo.each(((_,itemRunTimeInfo)=>{if((0,utils_type.$K)(itemRunTimeInfo.item)){var dataField=itemRunTimeInfo.item.dataField;if(dataField&&(0,utils_type.$K)(itemRunTimeInfo.widgetInstance)){var dataValue=(0,data.vb)(dataField)(args.value),{allowIndeterminateState,editorType}=itemRunTimeInfo.item;void 0!==dataValue||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState,editorType,dataField})?itemRunTimeInfo.widgetInstance.option("value",dataValue):this._resetWidget(itemRunTimeInfo.widgetInstance)}}})):(this._initDataAndItems(args.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(args.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":"auto"===this.option("colCount")&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(args),"auto"===this.option("colCount")&&this._resetColCount();break;default:this.callBase(args)}},_resetColCount:function(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(editorInstance,dataField){this.on("optionChanged",(args=>{args.fullName==="layoutData.".concat(dataField)&&editorInstance._setOptionWithoutOptionChange("value",args.value)})),editorInstance.on("valueChanged",(args=>{var isValueReferenceType=(0,utils_type.Kn)(args.value)||Array.isArray(args.value);this._disableEditorValueChangedHandler||isValueReferenceType&&args.value===args.previousValue||this._updateFieldValue(dataField,args.value)}))},_dimensionChanged:function(){"auto"===this.option("colCount")&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData:function(data,value){var that=this;(0,utils_type.Kn)(data)?(0,iterator.S6)(data,(function(dataField,fieldValue){that._updateFieldValue(dataField,fieldValue)})):"string"==typeof data&&that._updateFieldValue(data,value)},getEditor:function(field){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(field)||this._itemsRunTimeInfo.findWidgetInstanceByName(field)},isSingleColumnMode:function(component){var responsiveBox=this._responsiveBox||component;if(responsiveBox)return responsiveBox.option("currentScreenFactor")===responsiveBox.option("singleColumnScreen")},getItemsRunTimeInfo:function(){return this._itemsRunTimeInfo}});(0,component_registrator.Z)("dxLayoutManager",LayoutManager);var ValidationSummary=ui_collection_widget_edit.Z.inherit({_getDefaultOptions(){return(0,extend.l)(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),(0,extend.l)(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){var $element=this.$element(),group=this.option("validationGroup")||validation_engine.Z.findGroup($element,this._modelByElement($element)),groupConfig=validation_engine.Z.addGroup(group);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=group,this.groupSubscription=this._groupValidationHandler.bind(this),groupConfig.on("validated",this.groupSubscription)},_unsubscribeGroup(){var groupConfig=validation_engine.Z.getGroupConfig(this._validationGroup);groupConfig&&groupConfig.off("validated",this.groupSubscription)},_getOrderedItems(validators,items){var orderedItems=[];return(0,iterator.S6)(validators,(function(_,validator){var foundItems=(0,common.h3)(items,(function(item){if(item.validator===validator)return!0}));foundItems.length&&(orderedItems=orderedItems.concat(foundItems))})),orderedItems},_groupValidationHandler(params){var items=this._getOrderedItems(params.validators,(0,iterator.UI)(params.brokenRules,(function(rule){return{text:rule.message,validator:rule.validator,index:rule.index}})));this.validators=params.validators,(0,iterator.S6)(this.validators,((_,validator)=>{if(validator._validationSummary!==this){var handler=this._itemValidationHandler.bind(this);validator.on("validated",handler),validator.on("disposing",(function(){validator.off("validated",handler),validator._validationSummary=null,handler=null})),validator._validationSummary=this}})),this.option("items",items)},_itemValidationHandler(_ref){for(var{isValid,validator,brokenRules}=_ref,items=this.option("items"),itemsChanged=!1,itemIndex=0,_loop=function(){var item=items[itemIndex];if(item.validator===validator){var foundRule=(0,common.h3)(brokenRules||[],(function(rule){return rule.index===item.index}))[0];if(isValid||!foundRule)return items.splice(itemIndex,1),itemsChanged=!0,"continue";foundRule.message!==item.text&&(item.text=foundRule.message,itemsChanged=!0)}itemIndex++};itemIndex<items.length;)_loop();(0,iterator.S6)(brokenRules,(function(_,rule){var foundItem=(0,common.h3)(items,(function(item){return item.validator===validator&&item.index===rule.index}))[0];foundItem||(items.push({text:rule.message,validator,index:rule.index}),itemsChanged=!0)})),itemsChanged&&(items=this._getOrderedItems(this.validators,items),this.option("items",items))},_initMarkup(){this.$element().addClass("dx-validationsummary"),this.callBase()},_optionChanged(args){if("validationGroup"===args.name)this._initGroupRegistration();else this.callBase(args)},_itemClass:()=>"dx-validationsummary-item",_itemDataKey:()=>"dx-validationsummary-item-data",_postprocessRenderItem(params){events_engine.Z.on(params.itemElement,"click",(function(){params.itemData.validator&&params.itemData.validator.focus&&params.itemData.validator.focus()}))},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});(0,component_registrator.Z)("dxValidationSummary",ValidationSummary);const validation_summary=ValidationSummary;class ValidationGroup extends dom_component.Z{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),validation_engine.Z.addGroup(this)}_initMarkup(){var $element=this.$element();$element.addClass("dx-validationgroup"),$element.find(".".concat("dx-validator")).each((function(_,validatorContainer){ui_validator.getInstance((0,renderer.Z)(validatorContainer))._initGroupRegistration()})),$element.find(".".concat("dx-validationsummary")).each((function(_,summaryContainer){validation_summary.getInstance((0,renderer.Z)(summaryContainer)).refreshValidationGroup()})),super._initMarkup()}validate(){return validation_engine.Z.validateGroup(this)}reset(){return validation_engine.Z.resetGroup(this)}_dispose(){validation_engine.Z.removeGroup(this),this.$element().removeClass("dx-validationgroup"),super._dispose()}_useTemplates(){return!1}}(0,component_registrator.Z)("dxValidationGroup",ValidationGroup);var constants=__webpack_require__("./node_modules/devextreme/esm/ui/toolbar/constants.js"),ITEM_OPTIONS_FOR_VALIDATION_UPDATING=["items","isRequired","validationRules","visible"],Form=ui_widget.default.inherit({_init:function(){this.callBase(),this._cachedColCountOptions=[],this._itemsRunTimeInfo=new FormItemsRunTimeInfo,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{formID:"dx-"+new guid.Z,formData:{},colCount:1,screenByWidth:utils_window.$n,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:message.Z.format("dxForm-optionalMark"),requiredMessage:message.Z.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:(0,config.Z)().editorStylingMode,labelMode:"outside"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return(0,themes.x2)()},options:{showColonAfterLabel:!1,labelLocation:"top"}}])},_setOptionsByReference:function(){this.callBase(),(0,extend.l)(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:function($element){return parseInt($element.attr("group-col-count"))},_applyLabelsWidthByCol:function($container,index){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},fieldItemClass=options.inOneColumn?"dx-field-item":"dx-col-"+index,cssExcludeTabbedSelector=options.excludeTabbed?":not(.".concat("dx-field-item-tab",")"):"";!function setLabelWidthByMaxLabelWidth($targetContainer,labelsSelector,labelMarkOptions){var labelWidth,i,FIELD_ITEM_LABEL_CONTENT_CLASS_Selector="".concat(labelsSelector," > .").concat(FIELD_ITEM_LABEL_CLASS,":not(.").concat(FIELD_ITEM_LABEL_LOCATION_CLASS,"top) > .").concat(FIELD_ITEM_LABEL_CONTENT_CLASS),$FIELD_ITEM_LABEL_CONTENT_CLASS_Items=$targetContainer.find(FIELD_ITEM_LABEL_CONTENT_CLASS_Selector),FIELD_ITEM_LABEL_CONTENT_CLASS_Length=$FIELD_ITEM_LABEL_CONTENT_CLASS_Items.length,maxWidth=0;for(i=0;i<FIELD_ITEM_LABEL_CONTENT_CLASS_Length;i++)(labelWidth=getLabelWidthByHTML($FIELD_ITEM_LABEL_CONTENT_CLASS_Items[i]))>maxWidth&&(maxWidth=labelWidth);for(i=0;i<FIELD_ITEM_LABEL_CONTENT_CLASS_Length;i++)$FIELD_ITEM_LABEL_CONTENT_CLASS_Items[i].style.width=maxWidth+"px"}($container,".".concat(fieldItemClass).concat(cssExcludeTabbedSelector))},_applyLabelsWidth:function($container,excludeTabbed,inOneColumn,colCount,labelMarkOptions){colCount=inOneColumn?1:colCount||this._getGroupColCount($container);var i,applyLabelsOptions={excludeTabbed,inOneColumn};for(i=0;i<colCount;i++)this._applyLabelsWidthByCol($container,i,applyLabelsOptions,labelMarkOptions)},_getGroupElementsInColumn:function($container,columnIndex,colCount){var cssColCountSelector=(0,utils_type.$K)(colCount)?".dx-group-colcount-"+colCount:"",groupSelector=".dx-col-"+columnIndex+" > ."+FIELD_ITEM_CONTENT_CLASS+" > .dx-form-group"+cssColCountSelector;return $container.find(groupSelector)},_applyLabelsWidthWithGroups:function($container,colCount,excludeTabbed,labelMarkOptions){if(!0===this.option("alignRootItemLabels"))for(var $rootSimpleItems=$container.find(".".concat("dx-root-simple-item")),colIndex=0;colIndex<colCount;colIndex++)this._applyLabelsWidthByCol($rootSimpleItems,colIndex,excludeTabbed,labelMarkOptions);if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups($container,colCount,excludeTabbed,labelMarkOptions);else{var i,$groups=this.$element().find(".dx-form-group");for(i=0;i<$groups.length;i++)this._applyLabelsWidth($groups.eq(i),excludeTabbed,void 0,void 0,labelMarkOptions)}},_applyLabelsWidthWithNestedGroups:function($container,colCount,excludeTabbed,labelMarkOptions){var colIndex,groupsColIndex,groupColIndex,$groupsByCol,applyLabelsOptions={excludeTabbed};for(colIndex=0;colIndex<colCount;colIndex++)for($groupsByCol=this._getGroupElementsInColumn($container,colIndex),this._applyLabelsWidthByCol($groupsByCol,0,applyLabelsOptions,labelMarkOptions),groupsColIndex=0;groupsColIndex<this._groupsColCount.length;groupsColIndex++){$groupsByCol=this._getGroupElementsInColumn($container,colIndex,this._groupsColCount[groupsColIndex]);var groupColCount=this._getGroupColCount($groupsByCol);for(groupColIndex=1;groupColIndex<groupColCount;groupColIndex++)this._applyLabelsWidthByCol($groupsByCol,groupColIndex,applyLabelsOptions,labelMarkOptions)}},_labelLocation:function(){return this.option("labelLocation")},_alignLabelsInColumn:function(_ref){var{layoutManager,inOneColumn,$container,excludeTabbed,items}=_ref;if((0,utils_window.Ym)()&&"top"!==this._labelLocation()){var labelMarkOptions=convertToLabelMarkOptions(layoutManager._getMarkOptions());inOneColumn?this._applyLabelsWidth($container,excludeTabbed,!0,void 0,labelMarkOptions):this._checkGrouping(items)?this._applyLabelsWidthWithGroups($container,layoutManager._getColCount(),excludeTabbed,labelMarkOptions):this._applyLabelsWidth($container,excludeTabbed,!1,layoutManager._getColCount(),labelMarkOptions)}},_prepareFormData:function(){(0,utils_type.$K)(this.option("formData"))||this.option("formData",{})},_setStylingModeClass:function(){"underlined"===this.option("stylingMode")&&this.$element().addClass("dx-form-styling-mode-underlined")},_initMarkup:function(){validation_engine.Z.addGroup(this._getValidationGroup()),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass("dx-form"),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription:function(){if((0,utils_window.Ym)()){var formRootElement=this.$element().get(0);resize_observer.Z.unobserve(formRootElement),resize_observer.Z.observe(formRootElement,(()=>{this._resizeHandler()}))}},_resizeHandler:function(){this._cachedLayoutManagers.length&&(0,iterator.S6)(this._cachedLayoutManagers,((_,layoutManager)=>{var _layoutManager$option;null===(_layoutManager$option=layoutManager.option("onLayoutChanged"))||void 0===_layoutManager$option||_layoutManager$option(layoutManager.isSingleColumnMode())}))},_getCurrentScreenFactor:function(){return(0,utils_window.Ym)()?(0,utils_window.Wf)(this.option("screenByWidth")):"lg"},_clearCachedInstances:function(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels:function(layoutManager,inOneColumn){this._alignLabelsInColumn({$container:this.$element(),layoutManager,excludeTabbed:!0,items:this.option("items"),inOneColumn}),(0,visibility_change.U_)(this.$element().find(".".concat(constants.z)))},_clean:function(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,resize_observer.Z.unobserve(this.$element().get(0))},_renderScrollable:function(){var useNativeScrolling=this.option("useNativeScrolling");this._scrollable=new ui_scrollable.Z(this.$element(),{useNative:!!useNativeScrolling,useSimulatedScrollbar:!useNativeScrolling,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent:function(){return this.option("scrollingEnabled")?(0,renderer.Z)(this._scrollable.content()):this.$element()},_clearValidationSummary:function(){var _this$_$validationSum;null===(_this$_$validationSum=this._$validationSummary)||void 0===_this$_$validationSum||_this$_$validationSum.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary:function(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=(0,renderer.Z)("<div>").addClass("dx-form-validation-summary").appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(items,parentIsTabbedItem,currentPath,isTabs){if(items){for(var result=[],i=0;i<items.length;i++){var item=items[i],path=concatPaths(currentPath,createItemPathByIndex(i,isTabs)),itemRunTimeInfo={item,itemIndex:i,path},guid=this._itemsRunTimeInfo.add(itemRunTimeInfo);if((0,utils_type.HD)(item)&&(item={dataField:item}),(0,utils_type.Kn)(item)){var preparedItem=(0,esm_extends.Z)({},item);itemRunTimeInfo.preparedItem=preparedItem,preparedItem.guid=guid,this._tryPrepareGroupItem(preparedItem),this._tryPrepareTabbedItem(preparedItem,path),this._tryPrepareItemTemplate(preparedItem),parentIsTabbedItem&&(preparedItem.cssItemClass="dx-field-item-tab"),preparedItem.items&&(preparedItem.items=this._prepareItems(preparedItem.items,parentIsTabbedItem,path)),result.push(preparedItem)}else result.push(item)}return result}},_tryPrepareGroupItem:function(item){"group"===item.itemType&&(item.alignItemLabels=(0,common.IS)(item.alignItemLabels,!0),item._prepareGroupItemTemplate=itemTemplate=>{item.template&&(item.groupContentTemplate=this._getTemplate(itemTemplate)),item.template=this._itemGroupTemplate.bind(this,item)},item._prepareGroupItemTemplate(item.template))},_tryPrepareTabbedItem:function(item,path){"tabbed"===item.itemType&&(item.template=this._itemTabbedTemplate.bind(this,item),item.tabs=this._prepareItems(item.tabs,!0,path,!0))},_tryPrepareItemTemplate:function(item){item.template&&(item.template=this._getTemplate(item.template))},_checkGrouping:function(items){if(items)for(var i=0;i<items.length;i++){if("group"===items[i].itemType)return!0}},_renderLayout:function(){var that=this,items=that.option("items"),$content=that._getContent();items=that._prepareItems(items),that._rootLayoutManager=that._renderLayoutManager($content,this._createLayoutManagerOptions(items,{isRoot:!0,colCount:that.option("colCount"),alignItemLabels:that.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged:function(inOneColumn){that._alignLabels.bind(that)(that._rootLayoutManager,inOneColumn)},onContentReady:function(e){that._alignLabels(e.component,e.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:function(item){return item.items||[]},_itemTabbedTemplate:function(item,e,$container){var _item$tabs,$tabPanel=(0,renderer.Z)("<div>").appendTo($container),tabPanelOptions=(0,extend.l)({},item.tabPanelOptions,{dataSource:item.tabs,onItemRendered:args=>{var _item$tabPanelOptions,_item$tabPanelOptions2;null===(_item$tabPanelOptions=item.tabPanelOptions)||void 0===_item$tabPanelOptions||null===(_item$tabPanelOptions2=_item$tabPanelOptions.onItemRendered)||void 0===_item$tabPanelOptions2||_item$tabPanelOptions2.call(_item$tabPanelOptions,args),(0,visibility_change.Uo)(args.itemElement)},itemTemplate:(itemData,e,container)=>{var $container=(0,renderer.Z)(container),alignItemLabels=(0,common.IS)(itemData.alignItemLabels,!0),layoutManager=this._renderLayoutManager($container,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(itemData),{colCount:itemData.colCount,alignItemLabels,screenByWidth:this.option("screenByWidth"),colCountByScreen:itemData.colCountByScreen,cssItemClass:itemData.cssItemClass,onLayoutChanged:inOneColumn=>{this._alignLabelsInColumn({$container,layoutManager,items:itemData.items,inOneColumn})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(itemData.guid,{layoutManager}),alignItemLabels&&this._alignLabelsInColumn({$container,layoutManager,items:itemData.items,inOneColumn:layoutManager.isSingleColumnMode()})}}),tryUpdateTabPanelInstance=(items,instance)=>{Array.isArray(items)&&items.forEach((item=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid,{widgetInstance:instance})))},tabPanel=this._createComponent($tabPanel,tab_panel,tabPanelOptions);(0,renderer.Z)($container).parent().addClass("dx-field-item-has-tabs"),tabPanel.on("optionChanged",(e=>{"dataSource"===e.fullName&&tryUpdateTabPanelInstance(e.value,e.component)})),tryUpdateTabPanelInstance([{guid:item.guid},...null!==(_item$tabs=item.tabs)&&void 0!==_item$tabs?_item$tabs:[]],tabPanel)},_itemGroupTemplate:function(item,e,$container){var colCount,layoutManager,$group=(0,renderer.Z)("<div>").toggleClass("dx-form-group-with-caption",(0,utils_type.$K)(item.caption)&&item.caption.length).addClass("dx-form-group").appendTo($container);(0,renderer.Z)($container).parent().addClass("dx-field-item-has-group"),item.caption&&(0,renderer.Z)("<span>").addClass("dx-form-group-caption").text(item.caption).appendTo($group);var $groupContent=(0,renderer.Z)("<div>").addClass("dx-form-group-content").appendTo($group);item.groupContentTemplate?(item._renderGroupContentTemplate=()=>{$groupContent.empty();var data={formData:this.option("formData"),component:this};item.groupContentTemplate.render({model:data,container:(0,core_element.u)($groupContent)})},item._renderGroupContentTemplate()):(layoutManager=this._renderLayoutManager($groupContent,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(item),{colCount:item.colCount,colCountByScreen:item.colCountByScreen,alignItemLabels:item.alignItemLabels,cssItemClass:item.cssItemClass})),this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid,{layoutManager}),colCount=layoutManager._getColCount(),this._groupsColCount.includes(colCount)||this._groupsColCount.push(colCount),$group.addClass("dx-group-colcount-"+colCount),$group.attr("group-col-count",colCount))},_createLayoutManagerOptions:function(items,extendedLayoutManagerOptions){return function convertToLayoutManagerOptions(_ref){var{form,$formElement,formOptions,items,validationGroup,extendedLayoutManagerOptions,onFieldDataChanged,onContentReady,onDisposing,onFieldItemRendered}=_ref,baseOptions={form,items,$formElement,validationGroup,onFieldDataChanged,onContentReady,onDisposing,onFieldItemRendered,validationBoundary:formOptions.scrollingEnabled?$formElement:void 0,scrollingEnabled:formOptions.scrollingEnabled,showRequiredMark:formOptions.showRequiredMark,showOptionalMark:formOptions.showOptionalMark,requiredMark:formOptions.requiredMark,optionalMark:formOptions.optionalMark,requiredMessage:formOptions.requiredMessage,screenByWidth:formOptions.screenByWidth,layoutData:formOptions.formData,labelLocation:formOptions.labelLocation,customizeItem:formOptions.customizeItem,minColWidth:formOptions.minColWidth,showColonAfterLabel:formOptions.showColonAfterLabel,onEditorEnterKey:formOptions.onEditorEnterKey,labelMode:formOptions.labelMode};return(0,extend.l)(baseOptions,{isRoot:extendedLayoutManagerOptions.isRoot,colCount:extendedLayoutManagerOptions.colCount,alignItemLabels:extendedLayoutManagerOptions.alignItemLabels,cssItemClass:extendedLayoutManagerOptions.cssItemClass,colCountByScreen:extendedLayoutManagerOptions.colCountByScreen,onLayoutChanged:extendedLayoutManagerOptions.onLayoutChanged,width:extendedLayoutManagerOptions.width})}({form:this,formOptions:this.option(),$formElement:this.$element(),items,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions,onFieldDataChanged:args=>{this._isDataUpdating||this._triggerOnFieldDataChanged(args)},onContentReady:args=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(args.component._itemsRunTimeInfo),extendedLayoutManagerOptions.onContentReady&&extendedLayoutManagerOptions.onContentReady(args)},onDisposing:_ref2=>{var{component}=_ref2,nestedItemsRunTimeInfo=component.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(nestedItemsRunTimeInfo)},onFieldItemRendered:()=>{var _this$_validationSumm;null===(_this$_validationSumm=this._validationSummary)||void 0===_this$_validationSumm||_this$_validationSumm.refreshValidationGroup()}})},_renderLayoutManager:function($parent,layoutManagerOptions){var baseColCountByScreen={lg:layoutManagerOptions.colCount,md:layoutManagerOptions.colCount,sm:layoutManagerOptions.colCount,xs:1};this._cachedColCountOptions.push({colCountByScreen:(0,extend.l)(baseColCountByScreen,layoutManagerOptions.colCountByScreen)});var $element=(0,renderer.Z)("<div>");$element.appendTo($parent);var instance=this._createComponent($element,"dxLayoutManager",layoutManagerOptions);return instance.on("autoColCountChanged",(()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout((()=>!this._disposed&&this._refresh()),0)})),this._cachedLayoutManagers.push(instance),instance},_getValidationGroup:function(){return this.option("validationGroup")||this},_createComponent:function($element,type,config){return config=config||{},this._extendConfig(config,{readOnly:this.option("readOnly")}),this.callBase($element,type,config)},_attachSyncSubscriptions:function(){var that=this;that.on("optionChanged",(function(args){var optionFullName=args.fullName;"formData"===optionFullName&&((0,utils_type.$K)(args.value)||that._options.silent("formData",args.value={}),that._triggerOnFieldDataChangedByDataSet(args.value)),that._cachedLayoutManagers.length&&(0,iterator.S6)(that._cachedLayoutManagers,(function(index,layoutManager){"formData"===optionFullName&&(that._isDataUpdating=!0,layoutManager.option("layoutData",args.value),that._isDataUpdating=!1),"readOnly"!==args.name&&"disabled"!==args.name||layoutManager.option(optionFullName,args.value)}))}))},_optionChanged:function(args){var splitFullName=args.fullName.split(".");splitFullName.length>1&&-1!==splitFullName[0].search("items")&&this._itemsOptionChangedHandler(args)||splitFullName.length>1&&-1!==splitFullName[0].search("formData")&&this._formDataOptionChangedHandler(args)||this._defaultOptionChangedHandler(args)},_defaultOptionChangedHandler:function(args){switch(args.name){case"formData":this.option("items")?(0,utils_type.Qr)(args.value)&&this._resetValues():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":"auto"===this.option("colCount")&&this._invalidate();break;case"width":this.callBase(args),this._rootLayoutManager.option(args.name,args.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":validation_engine.Z.removeGroup(args.previousValue||this),this._invalidate();break;default:this.callBase(args)}},_itemsOptionChangedHandler:function(args){var nameParts=args.fullName.split("."),value=args.value,itemPath=this._getItemPath(nameParts),item=this.option(itemPath),optionNameWithoutPath=args.fullName.replace(itemPath+".",""),simpleOptionName=optionNameWithoutPath.split(".")[0].replace(/\[\d+]/,""),itemAction=this._tryCreateItemOptionAction(simpleOptionName,item,item[simpleOptionName],args.previousValue,itemPath),result=this._tryExecuteItemOptionAction(itemAction)||this._tryChangeLayoutManagerItemOption(args.fullName,value);if(!result&&item){this._changeItemOption(item,optionNameWithoutPath,value);var items=this._generateItemsFromData(this.option("items"));this.option("items",items),result=!0}return result},_formDataOptionChangedHandler:function(args){var nameParts=args.fullName.split("."),value=args.value,dataField=nameParts.slice(1).join("."),editor=this.getEditor(dataField);return editor?editor.option("value",value):this._triggerOnFieldDataChanged({dataField,value}),!0},_tryCreateItemOptionAction:function(optionName,item,value,previousValue,itemPath){return"tabs"===optionName&&(this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(itemPath,".tabs")),value=this._prepareItems(value,!0,itemPath,!0)),ui_form_item_options_actions(optionName,{item,value,previousValue,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:function(action){return action&&action.tryExecute()},_updateValidationGroupAndSummaryIfNeeded:function(fullName){var _this$_validationSumm2,optionName=getOptionNameFromFullName(fullName);ITEM_OPTIONS_FOR_VALIDATION_UPDATING.indexOf(optionName)>-1&&(validation_engine.Z.addGroup(this._getValidationGroup()),this.option("showValidationSummary")&&(null===(_this$_validationSumm2=this._validationSummary)||void 0===_this$_validationSumm2||_this$_validationSumm2.refreshValidationGroup()))},_setLayoutManagerItemOption(layoutManager,optionName,value,path){if(this._updateLockCount>0){!layoutManager._updateLockCount&&layoutManager.beginUpdate();var key=this._itemsRunTimeInfo.findKeyByPath(path);this.postponedOperations.add(key,(()=>(!layoutManager._disposed&&layoutManager.endUpdate(),(new utils_deferred.BH).resolve())))}var contentReadyHandler=e=>{if(e.component.off("contentReady",contentReadyHandler),isFullPathContainsTabs(path)){var tabPath=(fullPath=>{for(var pathParts=fullPath.split("."),resultPathParts=[...pathParts],i=pathParts.length-1;i>=0;i--){if(isFullPathContainsTabs(pathParts[i]))return resultPathParts.join(".");resultPathParts.splice(i,1)}return""})(path),tabLayoutManager=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(tabPath);tabLayoutManager&&this._alignLabelsInColumn({items:tabLayoutManager.option("items"),layoutManager:tabLayoutManager,$container:tabLayoutManager.$element(),inOneColumn:tabLayoutManager.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};layoutManager.on("contentReady",contentReadyHandler),layoutManager.option(optionName,value),this._updateValidationGroupAndSummaryIfNeeded(optionName)},_tryChangeLayoutManagerItemOption(fullName,value){var nameParts=fullName.split("."),optionName=getOptionNameFromFullName(fullName);if("items"===optionName&&nameParts.length>1){var itemPath=this._getItemPath(nameParts),layoutManager=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(itemPath);if(layoutManager){this._itemsRunTimeInfo.removeItemsByItems(layoutManager.getItemsRunTimeInfo());var items=this._prepareItems(value,!1,itemPath);return this._setLayoutManagerItemOption(layoutManager,optionName,items,itemPath),!0}}else if(nameParts.length>2){var endPartIndex=nameParts.length-2,_itemPath=this._getItemPath(nameParts.slice(0,endPartIndex)),_layoutManager=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(_itemPath);if(_layoutManager){var fullOptionName=getFullOptionName(nameParts[endPartIndex],optionName);if("editorType"===optionName&&_layoutManager.option(fullOptionName)!==value)return!1;if("visible"===optionName){var formItems=this.option(getFullOptionName(_itemPath,"items"));if(formItems&&formItems.length){var layoutManagerItems=_layoutManager.option("items");formItems.forEach(((item,index)=>{layoutManagerItems[index].visibleIndex=item.visibleIndex}))}}return this._setLayoutManagerItemOption(_layoutManager,fullOptionName,value,_itemPath),!0}}return!1},_tryChangeLayoutManagerItemOptions(itemPath,options){var result;return this.beginUpdate(),(0,iterator.S6)(options,((optionName,optionValue)=>{if(!(result=this._tryChangeLayoutManagerItemOption(getFullOptionName(itemPath,optionName),optionValue)))return!1})),this.endUpdate(),result},_getItemPath:function(nameParts){var i,itemPath=nameParts[0];for(i=1;i<nameParts.length&&-1!==nameParts[i].search(/items\[\d+]|tabs\[\d+]/);i++)itemPath+="."+nameParts[i];return itemPath},_triggerOnFieldDataChanged:function(args){this._createActionByOption("onFieldDataChanged")(args)},_triggerOnFieldDataChangedByDataSet:function(data){var that=this;data&&(0,utils_type.Kn)(data)&&(0,iterator.S6)(data,(function(dataField,value){that._triggerOnFieldDataChanged({dataField,value})}))},_updateFieldValue:function(dataField,value){if((0,utils_type.$K)(this.option("formData"))){var editor=this.getEditor(dataField);if(this.option("formData."+dataField,value),editor)editor.option("value")!==value&&editor.option("value",value)}},_generateItemsFromData:function(items){var formData=this.option("formData"),result=[];return!items&&(0,utils_type.$K)(formData)&&(0,iterator.S6)(formData,(function(dataField){result.push({dataField})})),items&&(0,iterator.S6)(items,(function(index,item){(0,utils_type.Kn)(item)?result.push(item):result.push({dataField:item})})),result},_getItemByField:function(field,items){var resultItem,that=this,fieldParts=(0,utils_type.Kn)(field)?field:that._getFieldParts(field),fieldName=fieldParts.fieldName,fieldPath=fieldParts.fieldPath;return items.length&&(0,iterator.S6)(items,(function(index,item){var itemType=item.itemType;if(fieldPath.length){var path=fieldPath.slice();item=that._getItemByFieldPath(path,fieldName,item)}else if("group"===itemType&&!item.caption&&!item.name||"tabbed"===itemType&&!item.name){var subItemsField=that._getSubItemField(itemType);item.items=that._generateItemsFromData(item.items),item=that._getItemByField({fieldName,fieldPath},item[subItemsField])}if(((item,fieldName)=>!!item&&(item.dataField===fieldName||item.name===fieldName||getTextWithoutSpaces(item.title)===fieldName||"group"===item.itemType&&getTextWithoutSpaces(item.caption)===fieldName))(item,fieldName))return resultItem=item,!1})),resultItem},_getFieldParts:function(field){for(var fieldName=field,separatorIndex=fieldName.indexOf("."),resultPath=[];-1!==separatorIndex;)resultPath.push(fieldName.substr(0,separatorIndex)),separatorIndex=(fieldName=fieldName.substr(separatorIndex+1)).indexOf(".");return{fieldName,fieldPath:resultPath.reverse()}},_getItemByFieldPath:function(path,fieldName,item){var result,itemType=item.itemType,subItemsField=this._getSubItemField(itemType),isItemWithSubItems="group"===itemType||"tabbed"===itemType||item.title;do{if(!isItemWithSubItems)break;var name=item.name||item.caption||item.title,isGroupWithName=(0,utils_type.$K)(name),nameWithoutSpaces=getTextWithoutSpaces(name),pathNode=void 0;if(item[subItemsField]=this._generateItemsFromData(item[subItemsField]),isGroupWithName&&(pathNode=path.pop()),!path.length&&(result=this._getItemByField(fieldName,item[subItemsField])))break;(!isGroupWithName||isGroupWithName&&nameWithoutSpaces===pathNode)&&path.length&&(result=this._searchItemInEverySubItem(path,fieldName,item[subItemsField]))}while(path.length&&!(0,utils_type.$K)(result));return result},_getSubItemField:function(itemType){return"tabbed"===itemType?"tabs":"items"},_searchItemInEverySubItem:function(path,fieldName,items){var result,that=this;return(0,iterator.S6)(items,(function(index,groupItem){if(result=that._getItemByFieldPath(path.slice(),fieldName,groupItem))return!1})),result||(result=!1),result},_changeItemOption:function(item,option,value){(0,utils_type.Kn)(item)&&(item[option]=value)},_dimensionChanged:function(){var currentScreenFactor=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==currentScreenFactor&&(this._isColCountChanged(this._lastMarkupScreenFactor,currentScreenFactor)&&(this._targetScreenFactor=currentScreenFactor,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=currentScreenFactor)},_isColCountChanged:function(oldScreenSize,newScreenSize){var isChanged=!1;return(0,iterator.S6)(this._cachedColCountOptions,(function(index,item){if(item.colCountByScreen[oldScreenSize]!==item.colCountByScreen[newScreenSize])return isChanged=!0,!1})),isChanged},_refresh:function(){events_engine.Z.trigger(this.$element().find(".dx-state-focused input, .dx-state-focused textarea"),"change"),this.callBase()},_resetValues:function(){this._itemsRunTimeInfo.each((function(_,itemRunTimeInfo){(0,utils_type.$K)(itemRunTimeInfo.widgetInstance)&&editor_editor.Z.isEditor(itemRunTimeInfo.widgetInstance)&&(itemRunTimeInfo.widgetInstance.reset(),itemRunTimeInfo.widgetInstance.option("isValid",!0))})),validation_engine.Z.resetGroup(this._getValidationGroup())},_updateData:function(data,value,isComplexData){var that=this,_data=isComplexData?value:data;(0,utils_type.Kn)(_data)?(0,iterator.S6)(_data,(function(dataField,fieldValue){that._updateData(isComplexData?data+"."+dataField:dataField,fieldValue,(0,utils_type.Kn)(fieldValue))})):(0,utils_type.HD)(data)&&that._updateFieldValue(data,value)},registerKeyHandler:function(key,handler){this.callBase(key,handler),this._itemsRunTimeInfo.each((function(_,itemRunTimeInfo){(0,utils_type.$K)(itemRunTimeInfo.widgetInstance)&&itemRunTimeInfo.widgetInstance.registerKeyHandler(key,handler)}))},_focusTarget:function(){return this.$element().find("."+FIELD_ITEM_CONTENT_CLASS+" [tabindex]").first()},_visibilityChanged:function(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout:function(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose:function(){this._clearAutoColCountChangedTimeout(),validation_engine.Z.removeGroup(this._getValidationGroup()),this.callBase()},resetValues:function(){this._resetValues()},updateData:function(data,value){this._updateData(data,value)},getEditor:function(dataField){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(dataField)||this._itemsRunTimeInfo.findWidgetInstanceByName(dataField)},getButton:function(name){return this._itemsRunTimeInfo.findWidgetInstanceByName(name)},updateDimensions:function(){var that=this,deferred=new utils_deferred.BH;return that._scrollable?that._scrollable.update().done((function(){deferred.resolveWith(that)})):deferred.resolveWith(that),deferred.promise()},itemOption:function(id,option,value){var items=this._generateItemsFromData(this.option("items")),item=this._getItemByField(id,items),path=getItemPath(items,item);if(item)switch(arguments.length){case 1:return item;case 3:var itemAction=this._tryCreateItemOptionAction(option,item,value,item[option],path);this._changeItemOption(item,option,value);var fullName=getFullOptionName(path,option);this._tryExecuteItemOptionAction(itemAction)||this._tryChangeLayoutManagerItemOption(fullName,value)||this.option("items",items);break;default:var allowUpdateItems;if((0,utils_type.Kn)(option))if(!this._tryChangeLayoutManagerItemOptions(path,option))(0,iterator.S6)(option,((optionName,optionValue)=>{var itemAction=this._tryCreateItemOptionAction(optionName,item,optionValue,item[optionName],path);this._changeItemOption(item,optionName,optionValue),allowUpdateItems||this._tryExecuteItemOptionAction(itemAction)||(allowUpdateItems=!0)})),allowUpdateItems&&this.option("items",items)}},validate:function(){return validation_engine.Z.validateGroup(this._getValidationGroup())},getItemID:function(name){return"dx_"+this.option("formID")+"_"+(name||new guid.Z)},getTargetScreenFactor:function(){return this._targetScreenFactor}});(0,component_registrator.Z)("dxForm",Form);const esm_ui_form=Form;var isRenovatedScrollable=!!ui_scrollable.Z.IS_RENOVATED_WIDGET,FOCUSABLE_ELEMENT_CLASS=isRenovatedScrollable?"dx-scrollable":"dx-scrollable-container",forEachFormItems=(items,callBack)=>{items.forEach((item=>{item.items||item.tabs?forEachFormItems(item.items||item.tabs,callBack):callBack(item)}))},editingFormBasedModule={extenders:{controllers:{editing:{init:function(){this._editForm=null,this._updateEditFormDeferred=null,this.callBase.apply(this,arguments)},isFormOrPopupEditMode:function(){return this.isPopupEditMode()||this.isFormEditMode()},isPopupEditMode:function(){return"popup"===this.option("editing.mode")},isFormEditMode:function(){return"form"===this.option("editing.mode")},getFirstEditableColumnIndex:function(){var firstFormItem=this._firstFormItem;if(this.isFormEditMode()&&firstFormItem){var editRowKey=this.option("editing.editRowKey"),editRowIndex=this._dataController.getRowIndexByKey(editRowKey),$editFormElements=this._rowsView.getCellElements(editRowIndex);return this._rowsView._getEditFormEditorVisibleIndex($editFormElements,firstFormItem.column)}return this.callBase.apply(this,arguments)},getEditFormRowIndex:function(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():this.callBase.apply(this,arguments)},_isEditColumnVisible:function(){var result=this.callBase.apply(this,arguments),editingOptions=this.option("editing");return this.isFormOrPopupEditMode()&&editingOptions.allowUpdating||result},_handleDataChanged:function(args){if(this.isPopupEditMode()){var _args$items,_args$changeTypes,editRowKey=this.option("editing.editRowKey"),hasEditRow=null==args||null===(_args$items=args.items)||void 0===_args$items?void 0:_args$items.some((item=>(0,common.bY)(item.key,editRowKey))),onlyInsertChanges=(null===(_args$changeTypes=args.changeTypes)||void 0===_args$changeTypes?void 0:_args$changeTypes.length)&&args.changeTypes.every((item=>"insert"===item));("refresh"===args.changeType||hasEditRow&&args.isOptionChanged)&&!onlyInsertChanges&&this._repaintEditPopup()}this.callBase.apply(this,arguments)},getPopupContent:function(){var _this$_editPopup,popupVisible=null===(_this$_editPopup=this._editPopup)||void 0===_this$_editPopup?void 0:_this$_editPopup.option("visible");if(this.isPopupEditMode()&&popupVisible)return this._$popupContent},_showAddedRow:function(rowIndex){this.isPopupEditMode()?this._showEditPopup(rowIndex):this.callBase.apply(this,arguments)},_cancelEditDataCore:function(){this.callBase.apply(this,arguments),this.isPopupEditMode()&&this._hideEditPopup()},_updateEditRowCore:function(row,skipCurrentRow,isCustomSetCellValue){var _row$update,editForm=this._editForm;this.isPopupEditMode()?this.option("repaintChangesOnly")?(null===(_row$update=row.update)||void 0===_row$update||_row$update.call(row,row),this._rowsView.renderDelayedTemplates()):editForm&&(this._updateEditFormDeferred=(new utils_deferred.BH).done((()=>editForm.repaint())),this._updateLockCount||this._updateEditFormDeferred.resolve()):this.callBase.apply(this,arguments)},_showEditPopup:function(rowIndex,repaintForm){var isMobileDevice="desktop"!==devices.Z.current().deviceType,editPopupClass=this.addWidgetPrefix("edit-popup"),popupOptions=(0,extend.l)({showTitle:!1,fullScreen:isMobileDevice,wrapperAttr:{class:editPopupClass},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(rowIndex)},this.option("editing.popup"));if(!this._editPopup){var $popupContainer=(0,renderer.Z)("<div>").appendTo(this.component.$element()).addClass(editPopupClass);this._editPopup=this._createComponent($popupContainer,ui_popup.Z),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",(e=>{var _this$_editForm;(events_engine.Z.trigger(e.component.$content().find("[tabindex], input:not([type='hidden'])").not(".".concat(FOCUSABLE_ELEMENT_CLASS)).first(),"focus"),repaintForm)&&(null===(_this$_editForm=this._editForm)||void 0===_this$_editForm||_this$_editForm.repaint())}))}this._editPopup.option(popupOptions),this._editPopup.show(),this.callBase.apply(this,arguments)},_getPopupEditFormTemplate:function(rowIndex){var row=this.component.getVisibleRows()[rowIndex],templateOptions={row,values:row.values,rowType:row.rowType,key:row.key,rowIndex};return this._rowsView._addWatchMethod(templateOptions,row),container=>{var formTemplate=this.getEditFormTemplate(),scrollable=this._createComponent((0,renderer.Z)("<div>").appendTo(container),ui_scrollable.Z);this._$popupContent=(0,renderer.Z)(scrollable.content()),formTemplate(this._$popupContent,templateOptions,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates()}},_repaintEditPopup:function(){var rowIndex=this._getVisibleEditRowIndex();if(rowIndex>=0){var _this$_editPopup2,_this$_editPopup3,defaultAnimation=null===(_this$_editPopup2=this._editPopup)||void 0===_this$_editPopup2?void 0:_this$_editPopup2.option("animation");null===(_this$_editPopup3=this._editPopup)||void 0===_this$_editPopup3||_this$_editPopup3.option("animation",null),this._showEditPopup(rowIndex,!0),void 0!==defaultAnimation&&this._editPopup.option("animation",defaultAnimation)}},_hideEditPopup:function(){var _this$_editPopup4;null===(_this$_editPopup4=this._editPopup)||void 0===_this$_editPopup4||_this$_editPopup4.option("visible",!1)},optionChanged:function(args){if("editing"===args.name&&this.isFormOrPopupEditMode()){var fullName=args.fullName;0===fullName.indexOf("editing.form")?(this._handleFormOptionChange(args),args.handled=!0):0===fullName.indexOf("editing.popup")&&(this._handlePopupOptionChange(args),args.handled=!0)}this.callBase.apply(this,arguments)},_handleFormOptionChange:function(args){var _this$_editPopup5;if(this.isFormEditMode()){var editRowIndex=this._getVisibleEditRowIndex();editRowIndex>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[editRowIndex]})}else null!==(_this$_editPopup5=this._editPopup)&&void 0!==_this$_editPopup5&&_this$_editPopup5.option("visible")&&0===args.fullName.indexOf("editing.form")&&this._repaintEditPopup()},_handlePopupOptionChange:function(args){var editPopup=this._editPopup;if(editPopup){var popupOptionName=args.fullName.slice(14);popupOptionName?editPopup.option(popupOptionName,args.value):editPopup.option(args.value)}},renderFormEditorTemplate:function(detailCellOptions,item,formTemplateOptions,container,isReadOnly){var that=this,$container=(0,renderer.Z)(container),column=item.column,editorType=(item=>{var _column$formItem,column=item.column;return item.isCustomEditorType?item.editorType:null===(_column$formItem=column.formItem)||void 0===_column$formItem?void 0:_column$formItem.editorType})(item),rowData=null==detailCellOptions?void 0:detailCellOptions.row.data,form=formTemplateOptions.component,{label,labelMark,labelMode}=formTemplateOptions.editorOptions||{},cellOptions=(0,extend.l)({},detailCellOptions,{data:rowData,cellElement:null,isOnForm:!0,item,id:form.getItemID(item.name||item.dataField),column:(0,extend.l)({},column,{editorType,editorOptions:(0,extend.l)({label,labelMark,labelMode},column.editorOptions,item.editorOptions)}),columnIndex:column.index,setValue:!isReadOnly&&column.allowEditing&&function(value,text){that.updateFieldValue(cellOptions,value,text)}});cellOptions.value=column.calculateCellValue(rowData);var template=this._getFormEditItemTemplate.bind(this)(cellOptions,column);return this._rowsView.renderTemplate($container,template,cellOptions,!!(0,dom.al)($container)).done((()=>{this._rowsView._updateCell($container,cellOptions)})),cellOptions},getFormEditorTemplate:function(cellOptions,item){var column=this.component.columnOption(item.dataField);return(options,container)=>{var _cellOptions$row$watc,_cellOptions$row,$container=(0,renderer.Z)(container);null===(_cellOptions$row$watc=(_cellOptions$row=cellOptions.row).watch)||void 0===_cellOptions$row$watc||_cellOptions$row$watc.call(_cellOptions$row,(function(){return column.selector(cellOptions.row.data)}),(()=>{var _validator,$editorElement=$container.find(".dx-widget").first(),validator=$editorElement.data("dxValidator"),validatorOptions=null===(_validator=validator)||void 0===_validator?void 0:_validator.option();$container.contents().remove(),cellOptions=this.renderFormEditorTemplate.bind(this)(cellOptions,item,options,$container),validator=($editorElement=$container.find(".dx-widget").first()).data("dxValidator"),validatorOptions&&!validator&&$editorElement.dxValidator({validationRules:validatorOptions.validationRules,validationGroup:validatorOptions.validationGroup,dataGetter:validatorOptions.dataGetter})})),cellOptions=this.renderFormEditorTemplate.bind(this)(cellOptions,item,options,$container)}},getEditFormOptions:function(detailOptions){var _this$_getValidationG,editFormOptions=null===(_this$_getValidationG=this._getValidationGroupsInForm)||void 0===_this$_getValidationG?void 0:_this$_getValidationG.call(this,detailOptions),userCustomizeItem=this.option("editing.form.customizeItem"),editFormItemClass=this.addWidgetPrefix("edit-form-item"),items=this.option("editing.form.items"),isCustomEditorType={};if(items)forEachFormItems(items,(item=>{var itemId=(null==item?void 0:item.name)||(null==item?void 0:item.dataField);itemId&&(isCustomEditorType[itemId]=!!item.editorType)}));else{var columns=this.getController("columns").getColumns();items=[],(0,iterator.S6)(columns,(function(_,column){column.isBand||column.type||items.push({column,name:column.name,dataField:column.dataField})}))}return(0,extend.l)({},editFormOptions,{items,formID:"dx-"+new guid.Z,customizeItem:item=>{var column,itemId=item.name||item.dataField;if((item.column||itemId)&&(column=item.column||this._columnsController.columnOption(item.name?"name:"+item.name:"dataField:"+item.dataField)),column){if(item.label=item.label||{},item.label.text=item.label.text||column.caption,"boolean"===column.dataType&&void 0===item.label.visible){var labelMode=this.option("editing.form.labelMode");"floating"!==labelMode&&"static"!==labelMode||(item.label.visible=!0)}item.template=item.template||this.getFormEditorTemplate(detailOptions,item),item.column=column,item.isCustomEditorType=isCustomEditorType[itemId],column.formItem&&(0,extend.l)(item,column.formItem),void 0===item.isRequired&&column.validationRules&&(item.isRequired=column.validationRules.some((function(rule){return"required"===rule.type})),item.validationRules=[]);var itemVisible=!(0,utils_type.$K)(item.visible)||item.visible;!this._firstFormItem&&itemVisible&&(this._firstFormItem=item)}null==userCustomizeItem||userCustomizeItem.call(this,item),item.cssClass=(0,utils_type.HD)(item.cssClass)?item.cssClass+" "+editFormItemClass:editFormItemClass}})},getEditFormTemplate:function(){return($container,detailOptions,options)=>{var editFormOptions=this.option("editing.form"),baseEditFormOptions=this.getEditFormOptions(detailOptions),$formContainer=(0,renderer.Z)("<div>").appendTo($container),isPopupForm=null==options?void 0:options.isPopupForm;if(this._firstFormItem=void 0,isPopupForm&&$formContainer.addClass(this.addWidgetPrefix("edit-popup-form")),this._editForm=this._createComponent($formContainer,esm_ui_form,(0,extend.l)({},editFormOptions,baseEditFormOptions)),!isPopupForm){var $buttonsContainer=(0,renderer.Z)("<div>").addClass(this.addWidgetPrefix("form-buttons-container")).appendTo($container);this._createComponent((0,renderer.Z)("<div>").appendTo($buttonsContainer),ui_button.Z,this._getSaveButtonConfig()),this._createComponent((0,renderer.Z)("<div>").appendTo($buttonsContainer),ui_button.Z,this._getCancelButtonConfig())}this._editForm.on("contentReady",(()=>{var _this$_editPopup6;this._rowsView.renderDelayedTemplates(),null===(_this$_editPopup6=this._editPopup)||void 0===_this$_editPopup6||_this$_editPopup6.repaint()}))}},getEditForm:function(){return this._editForm},_endUpdateCore:function(){var _this$_updateEditForm;null===(_this$_updateEditForm=this._updateEditFormDeferred)||void 0===_this$_updateEditForm||_this$_updateEditForm.resolve()},_beforeEndSaving:function(){var _this$_editPopup7;(this.callBase.apply(this,arguments),this.isPopupEditMode())&&(null===(_this$_editPopup7=this._editPopup)||void 0===_this$_editPopup7||_this$_editPopup7.hide())},_processDataItemCore:function(item,_ref){var{type}=_ref;this.isPopupEditMode()&&"insert"===type&&(item.visible=!1),this.callBase.apply(this,arguments)},_editRowFromOptionChangedCore:function(rowIndices,rowIndex){var isPopupEditMode=this.isPopupEditMode();this.callBase(rowIndices,rowIndex,isPopupEditMode),isPopupEditMode&&this._showEditPopup(rowIndex)}},data:{_updateEditItem:function(item){this._editingController.isFormEditMode()&&(item.rowType="detail")},_getChangedColumnIndices:function(oldItem,newItem,visibleRowIndex,isLiveUpdate){if(!1!==isLiveUpdate||!newItem.isEditing||!this._editingController.isFormEditMode())return this.callBase.apply(this,arguments)}}},views:{rowsView:{_renderCellContent:function($cell,options){"data"===options.rowType&&this._editingController.isPopupEditMode()&&!1===options.row.visible||this.callBase.apply(this,arguments)},getCellElements:function(rowIndex){var $cellElements=this.callBase(rowIndex),editingController=this._editingController,editForm=editingController.getEditForm();return editingController.getEditFormRowIndex()===rowIndex&&$cellElements&&editForm?editForm.$element().find("."+this.addWidgetPrefix("edit-form-item")+", .dx-button"):$cellElements},_getVisibleColumnIndex:function($cells,rowIndex,columnIdentifier){if(this._editingController.getEditFormRowIndex()===rowIndex&&(0,utils_type.HD)(columnIdentifier)){var column=this._columnsController.columnOption(columnIdentifier);return this._getEditFormEditorVisibleIndex($cells,column)}return this.callBase.apply(this,arguments)},_getEditFormEditorVisibleIndex:function($cells,column){var visibleIndex=-1;return(0,iterator.S6)($cells,(function(index,cellElement){var item=(0,renderer.Z)(cellElement).find(".dx-field-item-content").data("dx-form-item");if(null!=item&&item.column&&column&&item.column.index===column.index)return visibleIndex=index,!1})),visibleIndex},_isFormItem:function(parameters){var isDetailRow="detail"===parameters.rowType||"detailAdaptive"===parameters.rowType,isPopupEditing="data"===parameters.rowType&&this._editingController.isPopupEditMode();return(isDetailRow||isPopupEditing)&&parameters.item},_updateCell:function($cell,parameters){this._isFormItem(parameters)?this._formItemPrepared(parameters,$cell):this.callBase($cell,parameters)}}}}};module_core.registerModule("editingFormBased",editingFormBasedModule);const ui_grid_core_editing_cell_based={extenders:{controllers:{editing:{init:function(){var $pointerDownTarget,isResizing,needCreateHandlers=!this._saveEditorHandler;(this.callBase.apply(this,arguments),needCreateHandlers)&&(this._pointerUpEditorHandler=()=>{var _this$getController;isResizing=null===(_this$getController=this.getController("columnsResizer"))||void 0===_this$getController?void 0:_this$getController.isResizing()},this._pointerDownEditorHandler=e=>$pointerDownTarget=(0,renderer.Z)(e.target),this._saveEditorHandler=this.createAction((function(e){var event=e.event,$target=(0,renderer.Z)(event.target),targetComponent=event.targetComponent,component=this.component;if((!$pointerDownTarget||!$pointerDownTarget.is("input")||$pointerDownTarget.is($target))&&this.isCellOrBatchEditMode()&&!this._editCellInProgress){var isEditorPopup=checkEditorPopup($target)||checkEditorPopup(null==targetComponent?void 0:targetComponent.$element()),isAnotherComponent=targetComponent&&!targetComponent._disposed&&targetComponent!==this.component,isAddRowButton=!!$target.closest(".".concat(this.addWidgetPrefix("addrow-button"))).length,isFocusOverlay=$target.hasClass(this.addWidgetPrefix("focus-overlay")),isCellEditMode=this.isCellEditMode();isResizing||isEditorPopup||isFocusOverlay||isAddRowButton&&isCellEditMode&&this.isEditing()||!(0,dom.al)($target)&&!isAnotherComponent||this._closeEditItem.bind(this)($target)}function checkEditorPopup($element){if(!$element)return!1;var $dropDownEditorOverlay=$element.closest(".".concat("dx-dropdowneditor-overlay")),$componentElement=component.$element();return $dropDownEditorOverlay.length>0&&0===$componentElement.closest($dropDownEditorOverlay).length}})),events_engine.Z.on(dom_adapter.Z.getDocument(),pointer.Z.up,this._pointerUpEditorHandler),events_engine.Z.on(dom_adapter.Z.getDocument(),pointer.Z.down,this._pointerDownEditorHandler),events_engine.Z.on(dom_adapter.Z.getDocument(),click.u,this._saveEditorHandler))},isCellEditMode:function(){return"cell"===this.option("editing.mode")},isBatchEditMode:function(){return"batch"===this.option("editing.mode")},isCellOrBatchEditMode:function(){return this.isCellEditMode()||this.isBatchEditMode()},_needToCloseEditableCell:function($targetElement){var $element=this.component.$element(),result=this.isEditing();if((!$element||!!$targetElement.closest($element).length)&&$targetElement.closest(".dx-data-row").length){var rowsView=this.getView("rowsView"),$targetCell=$targetElement.closest(".dx-row> td"),rowIndex=rowsView.getRowIndex($targetCell.parent()),columnIndex=rowsView.getCellElements(rowIndex).index($targetCell),visibleColumns=this._columnsController.getVisibleColumns(),allowEditing=visibleColumns[columnIndex]&&visibleColumns[columnIndex].allowEditing;result=result&&!allowEditing&&!this.isEditCell(rowIndex,columnIndex)}return result||this.callBase.apply(this,arguments)},_closeEditItem:function($targetElement){this._needToCloseEditableCell($targetElement)&&this.closeEditCell()},_focusEditorIfNeed:function(){if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var _this$_rowsView,editColumnIndex=this._getVisibleEditColumnIndex(),$cell=null===(_this$_rowsView=this._rowsView)||void 0===_this$_rowsView?void 0:_this$_rowsView._getCellElement(this._getVisibleEditRowIndex(),editColumnIndex);$cell&&!$cell.find(":focus").length?this._focusEditingCell((()=>{this._editCellInProgress=!1}),$cell,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else this.callBase.apply(this,arguments)},isEditing:function(){if(this.isCellOrBatchEditMode()){var isEditRowKeyDefined=(0,utils_type.$K)(this.option("editing.editRowKey")),isEditColumnNameDefined=(0,utils_type.$K)(this.option("editing.editColumnName"));return isEditRowKeyDefined&&isEditColumnNameDefined}return this.callBase.apply(this,arguments)},_handleEditColumnNameChange:function(args){var oldRowIndex=this._getVisibleEditRowIndex(args.previousValue);if(this.isCellOrBatchEditMode()&&-1!==oldRowIndex&&(0,utils_type.$K)(args.value)&&args.value!==args.previousValue){var columnIndex=this._columnsController.getVisibleColumnIndex(args.value),oldColumnIndex=this._columnsController.getVisibleColumnIndex(args.previousValue);this._editCellFromOptionChanged(columnIndex,oldColumnIndex,oldRowIndex)}},_addRow:function(parentKey,deferred){if(this.isCellEditMode()&&this.hasChanges()){var _deferred=new utils_deferred.BH;return this.saveEditData().done((()=>{this.hasChanges()?_deferred.reject("cancel"):this.addRow(parentKey).done(_deferred.resolve).fail(_deferred.reject)})),_deferred.promise()}return this.callBase.apply(this,arguments)},editCell:function(rowIndex,columnIndex){return this._editCell({rowIndex,columnIndex})},_editCell:function(options){var coreResult,d=new utils_deferred.BH;return this.executeOperation(d,(()=>{coreResult=this._editCellCore(options),(0,utils_deferred.gx)(coreResult).done(d.resolve).fail(d.reject)})),void 0!==coreResult?coreResult:d.promise()},_editCellCore:function(options){var dataController=this._dataController,isEditByOptionChanged=(0,utils_type.$K)(options.oldColumnIndex)||(0,utils_type.$K)(options.oldRowIndex),{columnIndex,rowIndex,column,item}=this._getNormalizedEditCellOptions(options),params={data:null==item?void 0:item.data,cancel:!1,column};if(void 0!==item.key){if(column&&("data"===item.rowType||"detailAdaptive"===item.rowType)&&!item.removed&&this.isCellOrBatchEditMode()){if(!isEditByOptionChanged&&this.isEditCell(rowIndex,columnIndex))return!0;var editRowIndex=rowIndex+dataController.getRowIndexOffset();return(0,utils_deferred.gx)(this._beforeEditCell(rowIndex,columnIndex,item)).done((cancel=>{cancel||this._prepareEditCell(params,item,columnIndex,editRowIndex)||this._processCanceledEditingCell()}))}return!1}this._dataController.fireError("E1043")},_beforeEditCell:function(rowIndex,columnIndex,item){if(this.isCellEditMode()&&!item.isNewRow&&this.hasChanges()){var d=new utils_deferred.BH;return this.saveEditData().always((()=>{d.resolve(this.hasChanges())})),d}},publicMethods:function(){return this.callBase.apply(this,arguments).concat(["editCell","closeEditCell"])},_getNormalizedEditCellOptions:function(_ref){var oldColumn,{oldColumnIndex,oldRowIndex,columnIndex,rowIndex}=_ref,columnsController=this._columnsController,visibleColumns=columnsController.getVisibleColumns(),item=this._dataController.items()[rowIndex];return oldColumn=(0,utils_type.$K)(oldColumnIndex)?visibleColumns[oldColumnIndex]:this._getEditColumn(),(0,utils_type.$K)(oldRowIndex)||(oldRowIndex=this._getVisibleEditRowIndex()),(0,utils_type.HD)(columnIndex)&&(columnIndex=columnsController.columnOption(columnIndex,"index"),columnIndex=columnsController.getVisibleIndex(columnIndex)),{oldColumn,columnIndex,oldRowIndex,rowIndex,column:visibleColumns[columnIndex],item}},_prepareEditCell:function(params,item,editColumnIndex,editRowIndex){if(item.isNewRow||(params.key=item.key),this._isEditingStart(params))return!1;var _item$oldData;(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(item.key),this._setEditColumnNameByIndex(editColumnIndex),params.column.showEditorAlways)||this._addInternalData({key:item.key,oldData:null!==(_item$oldData=item.oldData)&&void 0!==_item$oldData?_item$oldData:item.data});return!0},closeEditCell:function(isError,withoutSaveEditData){var result=(0,utils_deferred.gx)(),oldEditRowIndex=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){var deferred=new utils_deferred.BH;result=new utils_deferred.BH,this.executeOperation(deferred,(()=>{this._closeEditCellCore(isError,oldEditRowIndex,withoutSaveEditData).always(result.resolve)}))}return result.promise()},_closeEditCellCore:function(isError,oldEditRowIndex,withoutSaveEditData){var dataController=this._dataController,deferred=new utils_deferred.BH,promise=deferred.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!withoutSaveEditData)return this.saveEditData().done((error=>{this.hasChanges()?deferred.resolve():this.closeEditCell(!!error).always(deferred.resolve)})),promise}else if(this._resetEditRowKey(),this._resetEditColumnName(),oldEditRowIndex>=0){var rowIndices=[oldEditRowIndex];this._beforeCloseEditCellInBatchMode(rowIndices),isError||dataController.updateItems({changeType:"update",rowIndices})}return deferred.resolve(),promise},_resetModifiedClassCells:function(changes){if(this.isBatchEditMode()){var columnsCount=this._columnsController.getVisibleColumns().length;changes.forEach((_ref2=>{var{key}=_ref2,rowIndex=this._dataController.getRowIndexByKey(key);if(-1!==rowIndex)for(var columnIndex=0;columnIndex<columnsCount;columnIndex++)this._rowsView._getCellElement(rowIndex,columnIndex).removeClass("dx-cell-modified")}))}},_prepareChange:function(options,value,text){var $cellElement=(0,renderer.Z)(options.cellElement);return this.isBatchEditMode()&&void 0!==options.key&&this._applyModified($cellElement,options),this.callBase.apply(this,arguments)},_cancelSaving:function(){var dataController=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),dataController.updateItems()),this.callBase.apply(this,arguments)},optionChanged:function(args){var fullName=args.fullName;"editing"===args.name&&"editing.editColumnName"===fullName?(this._handleEditColumnNameChange(args),args.handled=!0):this.callBase(args)},_editCellFromOptionChanged:function(columnIndex,oldColumnIndex,oldRowIndex){var columns=this._columnsController.getVisibleColumns();columnIndex>-1&&(0,common.g0)((()=>{this._repaintEditCell(columns[columnIndex],columns[oldColumnIndex],oldRowIndex)}))},_handleEditRowKeyChange:function(args){if(this.isCellOrBatchEditMode()){var _this$_editCellFromOp,columnIndex=this._getVisibleEditColumnIndex(),oldRowIndexCorrection=this._getEditRowIndexCorrection(),oldRowIndex=this._dataController.getRowIndexByKey(args.previousValue)+oldRowIndexCorrection;if((0,utils_type.$K)(args.value)&&args.value!==args.previousValue)null===(_this$_editCellFromOp=this._editCellFromOptionChanged)||void 0===_this$_editCellFromOp||_this$_editCellFromOp.call(this,columnIndex,columnIndex,oldRowIndex)}else this.callBase.apply(this,arguments)},deleteRow:function(rowIndex){if(this.isCellEditMode()&&this.isEditing()){var isNewRow=this._dataController.items()[rowIndex].isNewRow,rowKey=this._dataController.getKeyByRowIndex(rowIndex);this.closeEditCell(null,isNewRow).always((()=>{rowIndex=this._dataController.getRowIndexByKey(rowKey),this._checkAndDeleteRow(rowIndex)}))}else this.callBase.apply(this,arguments)},_checkAndDeleteRow:function(rowIndex){this.isBatchEditMode()?this._deleteRowCore(rowIndex):this.callBase.apply(this,arguments)},_refreshCore:function(params){var{isPageChanged}=null!=params?params:{},needResetIndexes=this.isBatchEditMode()||isPageChanged&&"virtual"!==this.option("scrolling.mode");this.isCellOrBatchEditMode()?needResetIndexes&&(this._resetEditColumnName(),this._resetEditRowKey()):this.callBase.apply(this,arguments)},_allowRowAdding:function(params){return!!this.isBatchEditMode()||this.callBase.apply(this,arguments)},_afterDeleteRow:function(rowIndex,oldEditRowIndex){var dataController=this._dataController;return this.isBatchEditMode()?(dataController.updateItems({changeType:"update",rowIndices:[oldEditRowIndex,rowIndex]}),(new utils_deferred.BH).resolve()):this.callBase.apply(this,arguments)},_updateEditRow:function(row,forceUpdateRow,isCustomSetCellValue){this.isCellOrBatchEditMode()?this._updateRowImmediately(row,forceUpdateRow,isCustomSetCellValue):this.callBase.apply(this,arguments)},_isDefaultButtonVisible:function(button,options){if(this.isCellOrBatchEditMode()){var isBatchMode=this.isBatchEditMode();switch(button.name){case"save":case"cancel":case"edit":return!1;case"delete":return this.callBase.apply(this,arguments)&&(!isBatchMode||!options.row.removed);case"undelete":return isBatchMode&&this.allowDeleting(options)&&options.row.removed;default:return this.callBase.apply(this,arguments)}}return this.callBase.apply(this,arguments)},_isRowDeleteAllowed:function(){return this.callBase.apply(this,arguments)||this.isBatchEditMode()},_beforeEndSaving:function(changes){var _changes$;this.isCellEditMode()?"update"!==(null===(_changes$=changes[0])||void 0===_changes$?void 0:_changes$.type)&&this.callBase.apply(this,arguments):(this.isBatchEditMode()&&this._resetModifiedClassCells(changes),this.callBase.apply(this,arguments))},prepareEditButtons:function(headerPanel){var editingOptions=this.option("editing")||{},buttonItems=this.callBase.apply(this,arguments);return(editingOptions.allowUpdating||editingOptions.allowAdding||editingOptions.allowDeleting)&&this.isBatchEditMode()&&(buttonItems.push(this.prepareButtonItem(headerPanel,"save","saveEditData",21)),buttonItems.push(this.prepareButtonItem(headerPanel,"revert","cancelEditData",22))),buttonItems},_saveEditDataInner:function(){var _deferred2,deferred,editRow=this._dataController.getVisibleRows()[this.getEditRowIndex()],editColumn=this._getEditColumn(),showEditorAlways=null==editColumn?void 0:editColumn.showEditorAlways;return this.isCellEditMode()&&!(null!=editRow&&editRow.isNewRow)&&showEditorAlways&&(deferred=new utils_deferred.BH,this.addDeferred(deferred)),this.callBase.apply(this,arguments).always(null===(_deferred2=deferred)||void 0===_deferred2?void 0:_deferred2.resolve)},_applyChange:function(options,params,forceUpdateRow){var isUpdateInCellMode=this.isCellEditMode()&&options.row&&!options.row.isNewRow,showEditorAlways=options.column.showEditorAlways,isCustomSetCellValue=options.column.setCellValue!==options.column.defaultSetCellValue;return showEditorAlways&&!forceUpdateRow&&isUpdateInCellMode&&this.hasEditData()&&!this.isEditCell(options.rowIndex,options.columnIndex)?(this._focusEditingCell(),void this._updateEditRow(options.row,!0,isCustomSetCellValue)):this.callBase.apply(this,arguments)},_applyChangeCore:function(options,forceUpdateRow){var showEditorAlways=options.column.showEditorAlways,isUpdateInCellMode=this.isCellEditMode()&&options.row&&!options.row.isNewRow;if(showEditorAlways&&!forceUpdateRow){if(isUpdateInCellMode)return this._setEditRowKey(options.row.key,!0),this._setEditColumnNameByIndex(options.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return forceUpdateRow=this._needUpdateRow(options.column),this.callBase(options,forceUpdateRow)}return this.callBase.apply(this,arguments)},_processDataItemCore:function(item,_ref3){var{data,type}=_ref3;this.isBatchEditMode()&&"remove"===type&&(item.data=(0,array_utils.FL)(item.data,data)),this.callBase.apply(this,arguments)},_processRemoveCore:function(changes,editIndex,processIfBatch){if(!this.isBatchEditMode()||processIfBatch)return this.callBase.apply(this,arguments)},_processRemoveIfError:function(){if(!this.isBatchEditMode())return this.callBase.apply(this,arguments)},_beforeFocusElementInRow:function(rowIndex){this.callBase.apply(this,arguments);var editRowIndex=rowIndex>=0?rowIndex:0,columnIndex=this.getFirstEditableColumnIndex();columnIndex>=0&&this.editCell(editRowIndex,columnIndex)}}},views:{rowsView:{_createTable:function(){var $table=this.callBase.apply(this,arguments),editingController=this._editingController;return editingController.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&events_engine.Z.on($table,(0,events_utils.V4)(hold.Z.name,"dxDataGridRowsView"),"td:not(.dx-editor-cell)",this.createAction((()=>{editingController.isEditing()&&editingController.closeEditCell()}))),$table},_createRow:function(row){var $row=this.callBase.apply(this,arguments);if(row){var editingController=this._editingController,isRowRemoved=!!row.removed;editingController.isBatchEditMode()&&isRowRemoved&&$row.addClass("dx-row-removed")}return $row}},headerPanel:{isVisible:function(){var editingOptions=this.getController("editing").option("editing");return this.callBase()||editingOptions&&(editingOptions.allowUpdating||editingOptions.allowDeleting)&&"batch"===editingOptions.mode}}}}};module_core.registerModule("editingCellBased",ui_grid_core_editing_cell_based);var load_indicator=__webpack_require__("./node_modules/devextreme/esm/ui/load_indicator.js");const FORM_BASED_MODES=["popup","form"],VALIDATION_STATUS_valid="valid",VALIDATION_STATUS_invalid="invalid",VALIDATION_STATUS_pending="pending",validationResultIsValid=function(result){return(0,utils_type.$K)(result)&&"cancel"!==result},cellValueShouldBeValidated=function(value,rowOptions){return void 0!==value||void 0===value&&rowOptions&&!rowOptions.isNewRow},ValidatingController=modules.Controller.inherit({init(){this._editingController=this.getController("editing"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()},initValidationState(){this._validationState=[],this._validationStateCache={}},_rowIsValidated(change){const validationData=this._getValidationData(null==change?void 0:change.key);return!!validationData&&!!validationData.validated},_getValidationData(key,create){const keyHash=(0,common.k3)(key),isObjectKeyHash=(0,utils_type.Kn)(keyHash);let validationData;return validationData=isObjectKeyHash?this._validationState.filter((data=>(0,common.bY)(data.key,key)))[0]:this._validationStateCache[keyHash],!validationData&&create&&(validationData={key,isValid:!0},this._validationState.push(validationData),isObjectKeyHash||(this._validationStateCache[keyHash]=validationData)),validationData},_getBrokenRules(validationData,validationResults){let brokenRules;return brokenRules=validationResults?validationResults.brokenRules||validationResults.brokenRule&&[validationResults.brokenRule]:validationData.brokenRules||[],brokenRules},_rowValidating(validationData,validationResults){const deferred=new utils_deferred.BH,change=this._editingController.getChangeByKey(null==validationData?void 0:validationData.key),brokenRules=this._getBrokenRules(validationData,validationResults),parameters={brokenRules,isValid:validationResults?validationResults.isValid:validationData.isValid,key:change.key,newData:change.data,oldData:this._editingController._getOldData(change.key),promise:null,errorText:this.getHiddenValidatorsErrorText(brokenRules)};return this.executeAction("onRowValidating",parameters),(0,utils_deferred.gx)((0,utils_deferred.p4)(parameters.promise)).always((()=>{validationData.isValid=parameters.isValid,validationData.errorText=parameters.errorText,deferred.resolve(parameters)})),deferred.promise()},getHiddenValidatorsErrorText(brokenRules){const brokenRulesMessages=[];return(0,iterator.S6)(brokenRules,((_,brokenRule)=>{const{column}=brokenRule,isGroupExpandColumn=column&&void 0!==column.groupIndex&&!column.showWhenGrouped,isVisibleColumn=column&&column.visible;brokenRule.validator.$element().parent().length||isVisibleColumn&&!isGroupExpandColumn||brokenRulesMessages.push(brokenRule.message)})),brokenRulesMessages.join(", ")},validate(isFull){let isValid=!0;const editingController=this._editingController,deferred=new utils_deferred.BH,completeList=[],editMode=editingController.getEditMode();if(isFull=isFull||"row"===editMode,this._isValidationInProgress)return deferred.resolve(!1).promise();if(this._isValidationInProgress=!0,isFull){editingController.addDeferred(deferred);const changes=editingController.getChanges();(0,iterator.S6)(changes,((index,{type,key})=>{if("remove"!==type){const validationData=this._getValidationData(key,!0),validationResult=this.validateGroup(validationData);completeList.push(validationResult),validationResult.done((validationResult=>{validationData.validated=!0,isValid=isValid&&validationResult.isValid}))}}))}else if(this._currentCellValidator){const validationResult=this.validateGroup(this._currentCellValidator._findGroup());completeList.push(validationResult),validationResult.done((validationResult=>{isValid=validationResult.isValid}))}return(0,utils_deferred.gx)(...completeList).done((()=>{this._isValidationInProgress=!1,deferred.resolve(isValid)})),deferred.promise()},validateGroup(validationData){const result=new utils_deferred.BH,validateGroup=validationData&&validation_engine.Z.getGroupConfig(validationData);let validationResult;return(null==validateGroup?void 0:validateGroup.validators.length)&&(this.resetRowValidationResults(validationData),validationResult=validation_engine.Z.validateGroup(validationData)),(0,utils_deferred.gx)((null==validationResult?void 0:validationResult.complete)||validationResult).done((validationResult=>{(0,utils_deferred.gx)(this._rowValidating(validationData,validationResult)).done(result.resolve)})),result.promise()},isRowDataModified:change=>!(0,utils_type.Qr)(change.data),updateValidationState(change){const editMode=this._editingController.getEditMode(),{key}=change,validationData=this._getValidationData(key,!0);if(FORM_BASED_MODES.includes(editMode))validationData.isValid=!0;else{if("insert"===change.type&&!this.isRowDataModified(change))return void(validationData.isValid=!0);this.setDisableApplyValidationResults(!0);if(validation_engine.Z.getGroupConfig(validationData)){const validationResult=validation_engine.Z.validateGroup(validationData);(0,utils_deferred.gx)(validationResult.complete||validationResult).done((validationResult=>{validationData.isValid=validationResult.isValid,validationData.brokenRules=validationResult.brokenRules}))}else validationData.brokenRules&&validationData.brokenRules.length||(validationData.isValid=!0);this.setDisableApplyValidationResults(!1)}},setValidator(validator){this._currentCellValidator=validator},renderCellPendingIndicator($container){let $indicator=$container.find(".dx-pending-indicator");if(!$indicator.length){const $indicatorContainer=$container;$indicator=(0,renderer.Z)("<div>").appendTo($indicatorContainer).addClass("dx-pending-indicator"),this._createComponent($indicator,load_indicator.Z),$container.addClass("dx-validation-pending")}},disposeCellPendingIndicator($container){const $indicator=$container.find(".dx-pending-indicator");if($indicator.length){const indicator=load_indicator.Z.getInstance($indicator);indicator&&(indicator.dispose(),indicator.$element().remove()),$container.removeClass("dx-validation-pending")}},validationStatusChanged(result){const{validator}=result,validationGroup=validator.option("validationGroup"),{column}=validator.option("dataGetter")();this.updateCellValidationResult({rowKey:validationGroup.key,columnIndex:column.index,validationResult:result})},validatorInitialized(arg){arg.component.on("validating",this.validationStatusChanged.bind(this)),arg.component.on("validated",this.validationStatusChanged.bind(this))},validatorDisposing(arg){const validator=arg.component,validationGroup=validator.option("validationGroup"),{column}=validator.option("dataGetter")(),result=this.getCellValidationResult({rowKey:null==validationGroup?void 0:validationGroup.key,columnIndex:column.index});validationResultIsValid(result)&&result.status===VALIDATION_STATUS_pending&&this.cancelCellValidationResult({change:validationGroup,columnIndex:column.index})},applyValidationResult($container,result){const{validator}=result,validationGroup=validator.option("validationGroup"),{column}=validator.option("dataGetter")();if(result.brokenRules&&result.brokenRules.forEach((rule=>{rule.columnIndex=column.index,rule.column=column})),$container){const validationResult=this.getCellValidationResult({rowKey:validationGroup.key,columnIndex:column.index}),requestIsDisabled=validationResultIsValid(validationResult)&&validationResult.disabledPendingId===result.id;if(this._disableApplyValidationResults||requestIsDisabled)return;if(result.status===VALIDATION_STATUS_invalid){const $focus=$container.find(":focus");(0,selectors.si)($focus)||(events_engine.Z.trigger($focus,"focus"),events_engine.Z.trigger($focus,pointer.Z.down))}const editor=!column.editCellTemplate&&this.getController("editorFactory").getEditorInstance($container);result.status===VALIDATION_STATUS_pending?editor?editor.option("validationStatus",VALIDATION_STATUS_pending):this.renderCellPendingIndicator($container):editor?editor.option("validationStatus",VALIDATION_STATUS_valid):this.disposeCellPendingIndicator($container),$container.toggleClass(this.addWidgetPrefix("invalid"),result.status===VALIDATION_STATUS_invalid)}},_syncInternalEditingData(parameters){var _a;const editingController=this._editingController,change=editingController.getChangeByKey(parameters.key),oldDataFromState=editingController._getOldData(parameters.key),oldData=null===(_a=parameters.row)||void 0===_a?void 0:_a.oldData;change&&oldData&&!oldDataFromState&&editingController._addInternalData({key:parameters.key,oldData})},createValidator(parameters,$container){var _a,_b;const editingController=this._editingController,{column}=parameters;let{showEditorAlways}=column;if((0,utils_type.$K)(column.command)||!column.validationRules||!Array.isArray(column.validationRules)||!column.validationRules.length)return;let needCreateValidator=editingController.getIndexByKey(parameters.key,editingController.getChanges())>-1;if(!needCreateValidator){if(!showEditorAlways){const columnsController=this.getController("columns");showEditorAlways=((null==columnsController?void 0:columnsController.getVisibleColumns())||[]).some((column=>column.showEditorAlways))}const isEditRow=(0,common.bY)(this.option("editing.editRowKey"),parameters.key),isCellOrBatchEditingAllowed=editingController.isCellOrBatchEditMode()&&editingController.allowUpdating({row:parameters.row});needCreateValidator=isEditRow||isCellOrBatchEditingAllowed&&showEditorAlways,isCellOrBatchEditingAllowed&&showEditorAlways&&editingController._addInternalData({key:parameters.key,oldData:null!==(_b=null===(_a=parameters.row)||void 0===_a?void 0:_a.oldData)&&void 0!==_b?_b:parameters.data})}if(needCreateValidator){if($container&&!$container.length)return void ui_errors.Z.log("E1050");this._syncInternalEditingData(parameters);const validationData=this._getValidationData(parameters.key,!0),getValue=()=>{const change=editingController.getChangeByKey(null==validationData?void 0:validationData.key),value=column.calculateCellValue((null==change?void 0:change.data)||{});return void 0!==value?value:parameters.value},useDefaultValidator=$container&&$container.hasClass("dx-widget");$container&&$container.addClass(this.addWidgetPrefix("validator"));const validator=new ui_validator($container||(0,renderer.Z)("<div>"),{name:column.caption,validationRules:(0,extend.l)(!0,[],column.validationRules),validationGroup:validationData,adapter:useDefaultValidator?null:{getValue,applyValidationResults:result=>{this.applyValidationResult($container,result)}},dataGetter(){const key=null==validationData?void 0:validationData.key,change=editingController.getChangeByKey(key),oldData=editingController._getOldData(key);return{data:(0,array_utils.FL)(oldData,null==change?void 0:change.data),column}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(useDefaultValidator){const adapter=validator.option("adapter");if(adapter){const originBypass=adapter.bypass,defaultAdapterBypass=()=>parameters.row.isNewRow&&!this._isValidationInProgress&&!editingController.isCellModified(parameters);adapter.getValue=getValue,adapter.validationRequestsCallbacks=[],adapter.bypass=()=>originBypass.call(adapter)||defaultAdapterBypass()}}return validator}},setDisableApplyValidationResults(flag){this._disableApplyValidationResults=flag},getDisableApplyValidationResults(){return this._disableApplyValidationResults},isCurrentValidatorProcessing({rowKey,columnIndex}){return this._currentCellValidator&&(0,common.bY)(this._currentCellValidator.option("validationGroup").key,rowKey)&&this._currentCellValidator.option("dataGetter")().column.index===columnIndex},validateCell(validator){const cellParams={rowKey:validator.option("validationGroup").key,columnIndex:validator.option("dataGetter")().column.index};let validationResult=this.getCellValidationResult(cellParams);const stateRestored=validationResultIsValid(validationResult),adapter=validator.option("adapter");if(stateRestored){const currentCellValue=adapter.getValue();(0,common.bY)(currentCellValue,validationResult.value)||(validationResult=validator.validate())}else validationResult=validator.validate();const deferred=new utils_deferred.BH;return stateRestored&&validationResult.status===VALIDATION_STATUS_pending&&(this.updateCellValidationResult(cellParams),adapter.applyValidationResults(validationResult)),(0,utils_deferred.gx)(validationResult.complete||validationResult).done((validationResult=>{stateRestored&&adapter.applyValidationResults(validationResult),deferred.resolve(validationResult)})),deferred.promise()},updateCellValidationResult({rowKey,columnIndex,validationResult}){const validationData=this._getValidationData(rowKey);if(!validationData)return;let result;if(validationData.validationResults||(validationData.validationResults={}),validationResult){if(result=(0,extend.l)({},validationResult),validationData.validationResults[columnIndex]=result,validationResult.status===VALIDATION_STATUS_pending&&("cell"===this._editingController.getEditMode()&&(result.deferred=new utils_deferred.BH,result.complete.always((()=>{result.deferred.resolve()})),this._editingController.addDeferred(result.deferred)),this._disableApplyValidationResults))return void(result.disabledPendingId=validationResult.id)}else result=validationData.validationResults[columnIndex];result&&result.disabledPendingId&&delete result.disabledPendingId},getCellValidationResult({rowKey,columnIndex}){var _a;const validationData=this._getValidationData(rowKey,!0);return null===(_a=null==validationData?void 0:validationData.validationResults)||void 0===_a?void 0:_a[columnIndex]},removeCellValidationResult({change,columnIndex}){const validationData=this._getValidationData(null==change?void 0:change.key);validationData&&validationData.validationResults&&(this.cancelCellValidationResult({change,columnIndex}),delete validationData.validationResults[columnIndex])},cancelCellValidationResult({change,columnIndex}){const validationData=this._getValidationData(change.key);if(change&&validationData.validationResults){const result=validationData.validationResults[columnIndex];result&&(result.deferred&&result.deferred.reject("cancel"),validationData.validationResults[columnIndex]="cancel")}},resetRowValidationResults(validationData){validationData&&(validationData.validationResults&&delete validationData.validationResults,delete validationData.validated)},isInvalidCell({rowKey,columnIndex}){const result=this.getCellValidationResult({rowKey,columnIndex});return validationResultIsValid(result)&&result.status===VALIDATION_STATUS_invalid},getCellValidator({rowKey,columnIndex}){const validationData=this._getValidationData(rowKey),groupConfig=validationData&&validation_engine.Z.getGroupConfig(validationData),validators=groupConfig&&groupConfig.validators;return validators&&validators.filter((v=>{const{column}=v.option("dataGetter")();return!!column&&column.index===columnIndex}))[0]},setCellValidationStatus(cellOptions){const validationResult=this.getCellValidationResult({rowKey:cellOptions.key,columnIndex:cellOptions.column.index});(0,utils_type.$K)(validationResult)?cellOptions.validationStatus="cancel"!==validationResult?validationResult.status:"cancel":delete cellOptions.validationStatus}}),validatingModule={defaultOptions:()=>({editing:{texts:{validationCancelChanges:message.Z.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:ValidatingController},extenders:{controllers:{editing:{_addChange(changeParams){const change=this.callBase.apply(this,arguments),validatingController=this.getController("validating");return change&&"remove"!==changeParams.type&&validatingController.updateValidationState(change),change},_handleChangesChange(args){this.callBase.apply(this,arguments);const validatingController=this.getController("validating");args.value.forEach((change=>{void 0===validatingController._getValidationData(change.key)&&validatingController.updateValidationState(change)}))},_updateRowAndPageIndices(){const that=this,startInsertIndex=that.getView("rowsView").getTopVisibleItemIndex();let rowIndex=startInsertIndex;(0,iterator.S6)(that.getChanges(),((_,{key,type})=>{const validationData=this.getController("validating")._getValidationData(key);validationData&&!validationData.isValid&&validationData.pageIndex!==that._pageIndex&&(validationData.pageIndex=that._pageIndex,validationData.rowIndex="insert"===type?startInsertIndex:rowIndex,rowIndex++)}))},_getValidationGroupsInForm(detailOptions){return{validationGroup:this.getController("validating")._getValidationData(detailOptions.key,!0)}},_validateEditFormAfterUpdate(row,isCustomSetCellValue){isCustomSetCellValue&&this._editForm&&this._editForm.validate(),this.callBase.apply(this,arguments)},_prepareEditCell(params){const isNotCanceled=this.callBase.apply(this,arguments),validatingController=this.getController("validating");return isNotCanceled&&params.column.showEditorAlways&&validatingController.updateValidationState({key:params.key}),isNotCanceled},processItems(items,changeType){const changes=this.getChanges(),dataController=this.getController("data"),validatingController=this.getController("validating"),itemsCount=(items=this.callBase(items,changeType)).length;return"batch"===this.getEditMode()&&"prepend"!==changeType&&"append"!==changeType&&changes.forEach((change=>{const{key}=change,validationData=validatingController._getValidationData(key);validationData&&change.type&&validationData.pageIndex===this._pageIndex&&(null==change?void 0:change.pageIndex)!==this._pageIndex&&function(change,validationData){const data={key:change.key},index=function(change,items){let index=-1;const isInsert="insert"===change.type,{key}=change;return(0,iterator.S6)(items,((i,item)=>{if((0,common.bY)(key,isInsert?item.key:dataController.keyOf(item)))return index=i,!1})),index}(change,items);if(index>=0)return;validationData.rowIndex=validationData.rowIndex>itemsCount?validationData.rowIndex%itemsCount:validationData.rowIndex;const{rowIndex}=validationData;data.__DX_INSERT_INDEX__=1,items.splice(rowIndex,0,data)}(change,validationData)})),items},processDataItem(item){const isInserted=item.data.__DX_INSERT_INDEX__,key=isInserted?item.data.key:item.key;if("batch"===this.getEditMode()&&isInserted&&key){const changes=this.getChanges(),editIndex=module_utils.getIndexByKey(key,changes);if(editIndex>=0){const change=changes[editIndex];if("insert"!==change.type){const oldData=this._getOldData(change.key);item.data=(0,extend.l)(!0,{},oldData,change.data),item.key=key}}}this.callBase.apply(this,arguments)},_createInvisibleColumnValidators(changes){const that=this,validatingController=this.getController("validating"),columnsController=this.getController("columns"),columns=columnsController.getColumns(),invisibleColumns=columnsController.getInvisibleColumns().filter((column=>!column.isBand)),groupColumns=columnsController.getGroupColumns().filter((column=>!column.showWhenGrouped&&-1===invisibleColumns.indexOf(column))),invisibleColumnValidators=[],isCellVisible=(column,rowKey)=>this._dataController.getRowIndexByKey(rowKey)>=0&&invisibleColumns.indexOf(column)<0;return invisibleColumns.push(...groupColumns),FORM_BASED_MODES.includes(this.getEditMode())||(0,iterator.S6)(columns,((_,column)=>{changes.forEach((change=>{let data;if(!isCellVisible(column,change.key)){if("insert"===change.type)data=change.data;else if("update"===change.type){const oldData=that._getOldData(change.key);data=(0,array_utils.FL)(oldData,change.data)}if(data){const validator=validatingController.createValidator({column,key:change.key,value:column.calculateCellValue(data)});validator&&invisibleColumnValidators.push(validator)}}}))})),function(){invisibleColumnValidators.forEach((validator=>{validator.dispose()}))}},_beforeSaveEditData(change,editIndex){let result=this.callBase.apply(this,arguments);const validatingController=this.getController("validating"),validationData=validatingController._getValidationData(null==change?void 0:change.key);if(change){const isValid="remove"===change.type||validationData.isValid;result=result||!isValid}else{const disposeValidators=this._createInvisibleColumnValidators(this.getChanges());result=new utils_deferred.BH,this.executeOperation(result,(()=>{validatingController.validate(!0).done((isFullValid=>{switch(disposeValidators(),this._updateRowAndPageIndices(),this.getEditMode()){case"cell":isFullValid||this._focusEditingCell();break;case"batch":isFullValid||(this._resetEditRowKey(),this._resetEditColumnName(),this.getController("data").updateItems())}result.resolve(!isFullValid)}))}))}return result.promise?result.promise():result},_beforeEditCell(rowIndex,columnIndex,item){const result=this.callBase(rowIndex,columnIndex,item);if("cell"===this.getEditMode()){const $cell=this._rowsView._getCellElement(rowIndex,columnIndex),validator=$cell&&$cell.data("dxValidator"),rowOptions=$cell&&$cell.closest(".dx-row").data("options"),value=validator&&validator.option("adapter").getValue();if(validator&&cellValueShouldBeValidated(value,rowOptions)){const validatingController=this.getController("validating"),deferred=new utils_deferred.BH;return(0,utils_deferred.gx)(validatingController.validateCell(validator),result).done(((validationResult,result)=>{deferred.resolve(validationResult.status===VALIDATION_STATUS_valid&&result)})),deferred.promise()}if(!validator)return result}},_afterSaveEditData(cancel){let $firstErrorRow;const isCellEditMode="cell"===this.getEditMode();if((0,iterator.S6)(this.getChanges(),((_,change)=>{const $errorRow=this._showErrorRow(change);$firstErrorRow=$firstErrorRow||$errorRow})),$firstErrorRow){const scrollable=this._rowsView.getScrollable();scrollable&&(scrollable.update(),scrollable.scrollToElement($firstErrorRow))}if(cancel&&isCellEditMode&&this._needUpdateRow()){const editRowIndex=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[editRowIndex]}),this._focusEditingCell()}else if(!cancel){let shouldResetValidationState=!0;if(isCellEditMode){shouldResetValidationState=!(this.getController("columns").getColumns().filter((col=>{var _a;return col.showEditorAlways&&(null===(_a=col.validationRules)||void 0===_a?void 0:_a.length)>0})).length>0)}shouldResetValidationState&&this.getController("validating").initValidationState()}},_handleDataChanged(args){const validationState=this.getController("validating")._validationState;"standard"===this.option("scrolling.mode")&&this.resetRowAndPageIndices(),"prepend"===args.changeType&&(0,iterator.S6)(validationState,((_,validationData)=>{validationData.rowIndex+=args.items.length})),this.callBase(args)},resetRowAndPageIndices(){const validationState=this.getController("validating")._validationState;(0,iterator.S6)(validationState,((_,validationData)=>{validationData.pageIndex!==this._pageIndex&&(delete validationData.pageIndex,delete validationData.rowIndex)}))},_beforeCancelEditData(){this.getController("validating").initValidationState(),this.callBase()},_showErrorRow(change){let $popupContent;const errorHandling=this.getController("errorHandling"),items=this.getController("data").items(),rowIndex=this.getIndexByKey(change.key,items),validationData=this.getController("validating")._getValidationData(change.key);if(!(null==validationData?void 0:validationData.isValid)&&(null==validationData?void 0:validationData.errorText)&&rowIndex>=0)return $popupContent=this.getPopupContent(),errorHandling&&errorHandling.renderErrorRow(null==validationData?void 0:validationData.errorText,rowIndex,$popupContent)},updateFieldValue(e){const validatingController=this.getController("validating"),deferred=new utils_deferred.BH;return validatingController.removeCellValidationResult({change:this.getChangeByKey(e.key),columnIndex:e.column.index}),this.callBase.apply(this,arguments).done((()=>{const currentValidator=validatingController.getCellValidator({rowKey:e.key,columnIndex:e.column.index});(0,utils_deferred.gx)(currentValidator&&validatingController.validateCell(currentValidator)).done((validationResult=>{this.getController("editorFactory").refocus(),deferred.resolve(validationResult)}))})),deferred.promise()},highlightDataCell($cell,parameters){this.callBase.apply(this,arguments);const validatingController=this.getController("validating");validatingController.setCellValidationStatus(parameters);const isEditableCell=!!parameters.setValue,cellModified=this.isCellModified(parameters),isValidated=(0,utils_type.$K)(parameters.validationStatus);if(cellModified&&parameters.column.setCellValue||isEditableCell&&!cellModified&&!(parameters.row.isNewRow||!isValidated)){const validator=$cell.data("dxValidator");validator&&(0,utils_deferred.gx)(this.getController("validating").validateCell(validator)).done((()=>{validatingController.setCellValidationStatus(parameters)}))}},getChangeByKey(key){const changes=this.getChanges();return changes[module_utils.getIndexByKey(key,changes)]},isCellModified(parameters){const cellModified=this.callBase(parameters),change=this.getChangeByKey(parameters.key),isCellInvalid=!!parameters.row&&this.getController("validating").isInvalidCell({rowKey:parameters.key,columnIndex:parameters.column.index});return cellModified||this.getController("validating")._rowIsValidated(change)&&isCellInvalid}},editorFactory:{_showRevertButton($container){var _a;let $tooltipElement=null===(_a=this._revertTooltip)||void 0===_a?void 0:_a.$element();if(!$container||!$container.length)return null==$tooltipElement||$tooltipElement.remove(),void(this._revertTooltip=void 0);if($container.find($tooltipElement).length)return;const $overlayContainer=$container.closest("."+this.addWidgetPrefix("content")),revertTooltipClass=this.addWidgetPrefix("revert-tooltip");null==$tooltipElement||$tooltipElement.remove(),$tooltipElement=(0,renderer.Z)("<div>").addClass(revertTooltipClass).appendTo($container);const tooltipOptions={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:$overlayContainer,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:revertTooltipClass},contentTemplate:()=>{const $buttonElement=(0,renderer.Z)("<div>").addClass("dx-revert-button"),buttonOptions={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),onClick:()=>{this._editingController.cancelEditData()}};return new ui_button.Z($buttonElement,buttonOptions).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:$container},onPositioned:this._positionedHandler.bind(this)};this._revertTooltip=new ui_overlay.Z($tooltipElement,tooltipOptions)},_hideFixedGroupCell($cell,overlayOptions){let $nextFixedRowElement,$groupCellElement;const isFixedColumns=this._rowsView.isFixedColumns(),isFormOrPopupEditMode=this._editingController.isFormOrPopupEditMode();if(isFixedColumns&&!isFormOrPopupEditMode){const nextRowOptions=$cell.closest(".dx-row").next().data("options");nextRowOptions&&"group"===nextRowOptions.rowType&&($nextFixedRowElement=(0,renderer.Z)(this._rowsView.getRowElement(nextRowOptions.rowIndex)).last(),$groupCellElement=$nextFixedRowElement.find(".dx-group-cell"),$groupCellElement.length&&"hidden"!==$groupCellElement.get(0).style.visibility&&($groupCellElement.css("visibility","hidden"),overlayOptions.onDisposing=function(){$groupCellElement.css("visibility","")}))}},_positionedHandler(e,isOverlayVisible){if(!e.component.__skipPositionProcessing){const isRevertButton=(0,renderer.Z)(e.element).hasClass(this.addWidgetPrefix("revert-tooltip")),needRepaint=!isRevertButton&&this._rowsView.updateFreeSpaceRowHeight(),normalizedPosition=this._normalizeValidationMessagePositionAndMaxWidth(e,isRevertButton,isOverlayVisible);e.component.__skipPositionProcessing=!(!needRepaint&&!normalizedPosition),normalizedPosition?e.component.option(normalizedPosition):needRepaint&&e.component.repaint()}},_showValidationMessage($cell,messages,alignment){const editorPopup=$cell.find(".dx-dropdowneditor-overlay").data("dxPopup"),isOverlayVisible=editorPopup&&editorPopup.option("visible"),myPosition=isOverlayVisible?"top right":"top "+alignment,atPosition=isOverlayVisible?"top left":"bottom "+alignment,$overlayContainer=$cell.closest("."+this.addWidgetPrefix("content"));let errorMessageText="";messages&&messages.forEach((message=>{errorMessageText+=(errorMessageText.length?"<br/>":"")+(0,string.HZ)(message)}));const invalidMessageClass=this.addWidgetPrefix("invalid-message");this._rowsView.element().find("."+invalidMessageClass).remove();const $overlayElement=(0,renderer.Z)("<div>").addClass("dx-invalid-message").addClass("dx-invalid-message-always").addClass(invalidMessageClass).html(errorMessageText).appendTo($cell),overlayOptions={container:$overlayContainer,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:"dx-invalid-message dx-invalid-message-always "+invalidMessageClass},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!isOverlayVisible&&browser.Z.mozilla?-1:0},my:myPosition,at:atPosition,of:$cell},onPositioned:e=>{this._positionedHandler(e,isOverlayVisible),this._shiftValidationMessageIfNeed(e.component.$content(),$cell)}};this._hideFixedGroupCell($cell,overlayOptions),new ui_overlay.Z($overlayElement,overlayOptions)},_hideValidationMessage(){var _a;const validationMessages=null===(_a=this._rowsView.element())||void 0===_a?void 0:_a.find(this._getValidationMessagesSelector());null==validationMessages||validationMessages.remove()},_normalizeValidationMessagePositionAndMaxWidth(options,isRevertButton,isOverlayVisible){const fixedColumns=this._columnsController.getFixedColumns();if(!fixedColumns||!fixedColumns.length)return;let position;const visibleTableWidth=!isRevertButton&&function(that,element){const rowIndex=(0,renderer.Z)(element).closest("tr").index(),$cellElements=(0,renderer.Z)(that._rowsView.getRowElement(rowIndex)).first().children().filter(":not(.dx-hidden-cell)");return that._rowsView._getWidths($cellElements).reduce(((w1,w2)=>w1+w2),0)}(this,options.element),$overlayContentElement=options.component.$content(),validationMessageWidth=(0,size.Y_)($overlayContentElement,!0),needMaxWidth=!isRevertButton&&validationMessageWidth>visibleTableWidth,columnIndex=this._rowsView.getCellIndex((0,renderer.Z)(options.element).closest("td")),boundaryNonFixedColumnsInfo=function(fixedColumns){let firstNonFixedColumnIndex,lastNonFixedColumnIndex;return fixedColumns.some(((column,index)=>{if("transparent"===column.command)return firstNonFixedColumnIndex=0===index?-1:index,lastNonFixedColumnIndex=index===fixedColumns.length-1?-1:index+column.colspan-1,!0})),{startColumnIndex:firstNonFixedColumnIndex,endColumnIndex:lastNonFixedColumnIndex}}(fixedColumns);return isRevertButton||columnIndex!==boundaryNonFixedColumnsInfo.startColumnIndex&&!needMaxWidth?columnIndex===boundaryNonFixedColumnsInfo.endColumnIndex&&(position={collision:"none flip",my:"top right",at:isRevertButton||isOverlayVisible?"top left":"bottom right"},isRevertButton&&(position.offset="-1 0")):position={collision:"none flip",my:"top left",at:isOverlayVisible?"top right":"bottom left"},position&&{position,maxWidth:needMaxWidth?visibleTableWidth-2:void 0}},_shiftValidationMessageIfNeed($content,$cell){const $revertContent=this._revertTooltip&&this._revertTooltip.$content();if(!$revertContent)return;const contentOffset=$content.offset(),revertContentOffset=$revertContent.offset();if(contentOffset.top===revertContentOffset.top&&contentOffset.left+(0,size.dz)($content)>revertContentOffset.left){const left=(0,size.dz)($revertContent)+2;$content.css("left",revertContentOffset.left<$cell.offset().left?-left:left)}},_getRevertTooltipsSelector(){return".dx-editor-cell ."+this.addWidgetPrefix("revert-tooltip")},_getValidationMessagesSelector(){const invalidMessageClass=this.addWidgetPrefix("invalid-message");return`.dx-editor-cell .${invalidMessageClass}, .dx-cell-modified .${invalidMessageClass}`},init(){this.callBase(),this._editingController=this.getController("editing"),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView")},loseFocus(skipValidator){skipValidator||this.getController("validating").setValidator(null),this.callBase()},updateCellState($element,validationResult,isHideBorder){var _a;const $focus=null==$element?void 0:$element.closest(this._getFocusCellSelector()),$cell=(null==$focus?void 0:$focus.is("td"))?$focus:null,rowOptions=null==$focus?void 0:$focus.closest(".dx-row").data("options"),change=rowOptions?this.getController("editing").getChangeByKey(rowOptions.key):null,column=$cell&&this.getController("columns").getVisibleColumns()[$cell.index()],isCellModified=void 0!==(null===(_a=null==change?void 0:change.data)||void 0===_a?void 0:_a[null==column?void 0:column.name])&&!this._editingController.isSaving();"cell"===this._editingController.getEditMode()&&((null==validationResult?void 0:validationResult.status)===VALIDATION_STATUS_invalid||isCellModified?this._showRevertButton($focus):this._revertTooltip&&this._revertTooltip.$element().remove());if(validationResult&&validationResult.status===VALIDATION_STATUS_invalid&&$cell&&column&&validationResult&&validationResult.brokenRules){const errorMessages=[];validationResult.brokenRules.forEach((rule=>{rule.message&&errorMessages.push(rule.message)})),errorMessages.length&&this._showValidationMessage($focus,errorMessages,column.alignment||"left")}!isHideBorder&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()},focus($element,isHideBorder){if(!arguments.length)return this.callBase();if(this._hideValidationMessage(),(null==$element?void 0:$element.hasClass("dx-row"))||(null==$element?void 0:$element.hasClass("dx-master-detail-cell")))return this.callBase($element,isHideBorder);const $focus=null==$element?void 0:$element.closest(this._getFocusCellSelector()),{callBase}=this,validator=$focus&&($focus.data("dxValidator")||$element.find("."+this.addWidgetPrefix("validator")).eq(0).data("dxValidator")),rowOptions=$focus&&$focus.closest(".dx-row").data("options"),editingController=this.getController("editing"),change=rowOptions?editingController.getChangeByKey(rowOptions.key):null,validatingController=this.getController("validating");let validationResult;if(validator){validatingController.setValidator(validator);const value=validator.option("adapter").getValue();if(cellValueShouldBeValidated(value,rowOptions)||validatingController._rowIsValidated(change))return editingController.waitForDeferredOperations().done((()=>{(0,utils_deferred.gx)(validatingController.validateCell(validator)).done((result=>{validationResult=result;const{column}=validationResult.validator.option("dataGetter")();change&&column&&!validatingController.isCurrentValidatorProcessing({rowKey:change.key,columnIndex:column.index})||(validationResult.status===VALIDATION_STATUS_invalid&&(isHideBorder=!0),this.updateCellState($element,validationResult,isHideBorder),callBase.call(this,$element,isHideBorder))}))})),this.callBase($element,isHideBorder)}return this.updateCellState($element,validationResult,isHideBorder),this.callBase($element,isHideBorder)},getEditorInstance($container){const $editor=$container.find(".dx-texteditor").eq(0);return module_utils.getWidgetInstance($editor)}},data:{_getValidationStatus:validationResult=>(validationResultIsValid(validationResult)?validationResult.status:validationResult)||VALIDATION_STATUS_valid,_isCellChanged(oldRow,newRow,visibleRowIndex,columnIndex,isLiveUpdate){var _a,_b;const cell=null===(_a=oldRow.cells)||void 0===_a?void 0:_a[columnIndex],oldValidationStatus=this._getValidationStatus({status:null==cell?void 0:cell.validationStatus}),validatingController=this.getController("validating"),validationResult=validatingController.getCellValidationResult({rowKey:oldRow.key,columnIndex}),validationData=validatingController._getValidationData(oldRow.key),newValidationStatus=this._getValidationStatus(validationResult),rowIsModified=JSON.stringify(newRow.modifiedValues)!==JSON.stringify(oldRow.modifiedValues),validationStatusChanged=oldValidationStatus!==newValidationStatus&&rowIsModified,cellIsMarkedAsInvalid=(0,renderer.Z)(null==cell?void 0:cell.cellElement).hasClass(this.addWidgetPrefix("invalid")),hasValidationRules=null===(_b=null==cell?void 0:cell.column.validationRules)||void 0===_b?void 0:_b.length,rowEditStateChanged=oldRow.isEditing!==newRow.isEditing&&hasValidationRules,cellValidationStateChanged=validationStatusChanged||validationData.isValid&&cellIsMarkedAsInvalid;return!(!rowEditStateChanged&&!cellValidationStateChanged)||this.callBase.apply(this,arguments)}}},views:{rowsView:{updateFreeSpaceRowHeight($table){const that=this;let $rowElements,$freeSpaceRowElement,$freeSpaceRowElements;const $element=that.element(),$tooltipContent=$element&&$element.find(`.${that.addWidgetPrefix("invalid-message")} .dx-overlay-content`);if(that.callBase($table),$tooltipContent&&$tooltipContent.length&&($rowElements=that._getRowElements(),$freeSpaceRowElements=that._getFreeSpaceRowElements($table),$freeSpaceRowElement=$freeSpaceRowElements.first(),$freeSpaceRowElement&&1===$rowElements.length&&(!$freeSpaceRowElement.is(":visible")||(0,size.zp)($tooltipContent)>(0,size.zp)($freeSpaceRowElement))))return $freeSpaceRowElements.show(),(0,size.QQ)($freeSpaceRowElements,(0,size.zp)($tooltipContent)),!0},_formItemPrepared(cellOptions,$container){this.callBase.apply(this,arguments),(0,common.Su)((()=>{const $editor=$container.find(".dx-widget").first();$editor.length&&!$editor.children().length||this.getController("validating").createValidator(cellOptions,$editor)}))},_cellPrepared($cell,parameters){this.getController("editing").isFormOrPopupEditMode()||this.getController("validating").createValidator(parameters,$cell),this.callBase.apply(this,arguments)},_restoreErrorRow(contentTable){const editingController=this.getController("editing");editingController&&editingController.hasChanges()&&this._getRowElements(contentTable).each(((_,item)=>{const rowOptions=(0,renderer.Z)(item).data("options");if(rowOptions){const change=editingController.getChangeByKey(rowOptions.key);change&&editingController._showErrorRow(change)}}))}}}}},EditingControllerExtender=(0,extend.l)({},validatingModule.extenders.controllers.editing);delete EditingControllerExtender.processItems,delete EditingControllerExtender.processDataItem,module_core.registerModule("validating",{defaultOptions:validatingModule.defaultOptions,controllers:validatingModule.controllers,extenders:{controllers:{editing:EditingControllerExtender,editorFactory:validatingModule.extenders.controllers.editorFactory},views:validatingModule.extenders.views}});var needTwoPagesLoading=that=>that.option("scrolling.loadTwoPagesOnStart")||that._controller.isVirtual()||that._controller.getViewportItemIndex()>0,getBeginPageIndex=that=>that._cache.length?that._cache[0].pageIndex:-1,getEndPageIndex=that=>that._cache.length?that._cache[that._cache.length-1].pageIndex:-1,fireChanged=(that,changed,args)=>{that._isChangedFiring=!0,changed(args),that._isChangedFiring=!1},processDelayChanged=(that,changed,args)=>{if(that._isDelayChanged)return that._isDelayChanged=!1,fireChanged(that,changed,args),!0},getPreloadPageCount=(that,previous)=>{var preloadEnabled=that.option("scrolling.preloadEnabled"),pageCount=(that=>{var pageSize=that._dataOptions.pageSize();if(that.option("scrolling.preventPreload"))return 0;var realViewportSize=that._controller.viewportSize();if(that._controller.isVirtualMode()&&that.option("scrolling.removeInvisiblePages")){realViewportSize=0;for(var viewportSize=that._controller.viewportSize()*that._controller.viewportItemSize(),offset=that._controller.getContentOffset(),position=that._controller.getViewportPosition(),virtualItemsCount=that._controller.virtualItemsCount(),totalItemsCount=that._dataOptions.totalItemsCount(),itemIndex=virtualItemsCount.begin;itemIndex<totalItemsCount&&!(offset>=position+viewportSize);itemIndex++)(offset+=that._controller.getItemSizes()[itemIndex]||that._controller.viewportItemSize())>=position&&realViewportSize++}return pageSize&&realViewportSize>0?Math.ceil(realViewportSize/pageSize):1})(that),isAppendMode=that._controller.isAppendMode();return pageCount&&(previous?pageCount=preloadEnabled?1:0:(preloadEnabled&&pageCount++,!isAppendMode&&needTwoPagesLoading(that)||pageCount--)),pageCount},processChanged=(that,changed,changeType,isDelayChanged,removeCacheItem)=>{var dataOptions=that._dataOptions,items=dataOptions.items().slice(),change=(0,utils_type.Kn)(changeType)?changeType:void 0,isPrepend="prepend"===changeType,viewportItems=dataOptions.viewportItems();changeType&&(0,utils_type.HD)(changeType)&&!that._isDelayChanged&&(change={changeType,items},removeCacheItem&&(change.removeCount=removeCacheItem.itemsCount,change.removeCount&&dataOptions.correctCount&&(change.removeCount=dataOptions.correctCount(viewportItems,change.removeCount,isPrepend))));var removeItemCount=removeCacheItem?removeCacheItem.itemsLength:0;removeItemCount&&dataOptions.correctCount&&(removeItemCount=dataOptions.correctCount(viewportItems,removeItemCount,isPrepend)),"append"===changeType?(viewportItems.push.apply(viewportItems,items),removeCacheItem&&viewportItems.splice(0,removeItemCount)):isPrepend?(viewportItems.unshift.apply(viewportItems,items),removeCacheItem&&viewportItems.splice(-removeItemCount)):that._dataOptions.viewportItems(items),dataOptions.updateLoading(),that._lastPageIndex=that.pageIndex(),that._isDelayChanged=isDelayChanged,isDelayChanged||fireChanged(that,changed,change)};class VirtualDataLoader{constructor(controller,dataOptions){this._controller=controller,this._dataOptions=dataOptions,this._pageIndex=this._lastPageIndex=dataOptions.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(itemIndex){var newPageIndex,pageSize=this._dataOptions.pageSize(),pageCount=this._dataOptions.pageCount(),virtualMode=this._controller.isVirtualMode(),appendMode=this._controller.isAppendMode(),totalItemsCount=this._dataOptions.totalItemsCount();if(pageSize&&(virtualMode||appendMode)&&totalItemsCount>=0){var viewportSize=this._controller.viewportSize();if(viewportSize&&itemIndex+viewportSize>=totalItemsCount&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){var lastPageSize=totalItemsCount%pageSize;(newPageIndex=pageCount-1)>0&&lastPageSize>0&&lastPageSize<viewportSize&&newPageIndex--}else newPageIndex=pageCount;else{newPageIndex=Math.floor(itemIndex/pageSize);var maxPageIndex=pageCount-1;newPageIndex=Math.max(newPageIndex,0),newPageIndex=Math.min(newPageIndex,maxPageIndex)}return this.pageIndex(newPageIndex),this.load()}}pageIndex(pageIndex){var isVirtualMode=this._controller.isVirtualMode(),isAppendMode=this._controller.isAppendMode();return!1!==this.option("scrolling.legacyMode")&&(isVirtualMode||isAppendMode)?(void 0!==pageIndex&&(this._pageIndex=pageIndex),this._pageIndex):this._dataOptions.pageIndex(pageIndex)}beginPageIndex(defaultPageIndex){var beginPageIndex=getBeginPageIndex(this);return beginPageIndex<0&&(beginPageIndex=void 0!==defaultPageIndex?defaultPageIndex:this.pageIndex()),beginPageIndex}endPageIndex(){var endPageIndex=getEndPageIndex(this);return endPageIndex>0?endPageIndex:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){var result,dataOptions=this._dataOptions,isVirtualMode=this._controller.isVirtualMode(),isAppendMode=this._controller.isAppendMode();if(!1!==this.option("scrolling.legacyMode")&&(isVirtualMode||isAppendMode)){var pageIndexForLoad=(that=>{var result=-1,beginPageIndex=getBeginPageIndex(that),dataOptions=that._dataOptions;beginPageIndex<0?result=that._pageIndex:that._cache[that._pageIndex-beginPageIndex]?beginPageIndex>=0&&that._controller.viewportSize()>=0&&(beginPageIndex>0&&(getEndPageIndex(that)+1===dataOptions.pageCount()&&that._cache.length<getPreloadPageCount(that)+1||that._pageIndex===beginPageIndex&&getPreloadPageCount(that,!0))&&(result=beginPageIndex-1),result<0&&beginPageIndex+that._cache.length<=that._pageIndex+getPreloadPageCount(that)&&(result=beginPageIndex+that._cache.length)):result=that._pageIndex;return that._loadingPageIndexes[result]&&(result=-1),result})(this);if(pageIndexForLoad>=0){var loadResult=((that,pageIndex)=>{var dataOptions=that._dataOptions;if(pageIndex===that.pageIndex()||!dataOptions.isLoading()&&pageIndex<dataOptions.pageCount()||!dataOptions.hasKnownLastPage()&&pageIndex===dataOptions.pageCount())return dataOptions.pageIndex(pageIndex),that._loadingPageIndexes[pageIndex]=!0,(0,utils_deferred.gx)(dataOptions.load()).always((()=>{that._loadingPageIndexes[pageIndex]=!1}))})(this,pageIndexForLoad);loadResult&&(result=new utils_deferred.BH,loadResult.done((()=>{var delayDeferred=this._delayDeferred;delayDeferred?delayDeferred.done(result.resolve).fail(result.reject):result.resolve()})).fail(result.reject),dataOptions.updateLoading())}}else result=dataOptions.load();return result||this._lastPageIndex===this.pageIndex()||this._dataOptions.onChanged({changeType:"pageIndex"}),result||(new utils_deferred.BH).resolve()}loadIfNeed(){var isVirtualMode=this._controller.isVirtualMode(),isAppendMode=this._controller.isAppendMode();if((isVirtualMode||isAppendMode)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){var position=this._controller.getViewportPosition();position>0?this._controller._setViewportPositionCore(position):this.load()}}handleDataChanged(callBase,e){var changeType,removeInvisiblePages,dataOptions=this._dataOptions,lastCacheLength=this._cache.length,isVirtualMode=this._controller.isVirtualMode(),isAppendMode=this._controller.isAppendMode();if(e&&e.changes)fireChanged(this,callBase,e);else if(!1!==this.option("scrolling.legacyMode")&&(isVirtualMode||isAppendMode)){var beginPageIndex=getBeginPageIndex(this);if(beginPageIndex>=0&&(isVirtualMode&&beginPageIndex+this._cache.length!==dataOptions.pageIndex()&&beginPageIndex-1!==dataOptions.pageIndex()&&(lastCacheLength=0,this._cache=[]),isAppendMode))if(0===dataOptions.pageIndex())this._cache=[];else if(dataOptions.pageIndex()<getEndPageIndex(this))return void fireChanged(this,callBase,{changeType:"append",items:[]});var removeCacheItem,cacheItem={pageIndex:dataOptions.pageIndex(),itemsLength:dataOptions.items(!0).length,itemsCount:this.itemsCount(!0)};this.option("scrolling.removeInvisiblePages")&&isVirtualMode?removeInvisiblePages=this._cache.length>Math.max(getPreloadPageCount(this)+(this.option("scrolling.preloadEnabled")?1:0),2):processDelayChanged(this,callBase,{isDelayed:!0}),beginPageIndex===dataOptions.pageIndex()+1?(removeInvisiblePages&&(removeCacheItem=this._cache.pop()),changeType="prepend",this._cache.unshift(cacheItem)):(removeInvisiblePages&&(removeCacheItem=this._cache.shift()),changeType="append",this._cache.push(cacheItem));var isDelayChanged=isVirtualMode&&0===lastCacheLength&&needTwoPagesLoading(this);processChanged(this,callBase,this._cache.length>1?changeType:void 0,isDelayChanged,removeCacheItem),this._delayDeferred=this.load().done((()=>{processDelayChanged(this,callBase)&&this.load()}))}else processChanged(this,callBase,e)}getDelayDeferred(){return this._delayDeferred}itemsCount(isBase){var itemsCount=0,isVirtualMode=this._controller.isVirtualMode();return!isBase&&isVirtualMode?this._cache.forEach((cacheItem=>{itemsCount+=cacheItem.itemsCount})):itemsCount=this._dataOptions.itemsCount(),itemsCount}virtualItemsCount(){var pageIndex=getBeginPageIndex(this);pageIndex<0&&(pageIndex=this._dataOptions.pageIndex());var beginItemsCount=pageIndex*this._dataOptions.pageSize(),itemsCount=this._cache.length*this._dataOptions.pageSize();return{begin:beginItemsCount,end:Math.max(0,this._dataOptions.totalItemsCount()-itemsCount-beginItemsCount)}}reset(){this._loadingPageIndexes={},this._cache=[]}}var _isVirtualMode=that=>"virtual"===that.option("scrolling.mode")||that._isVirtual;function subscribeToExternalScrollers($element,scrollChangedHandler,$targetElement){var $scrollElement,scrollableArray=[],scrollToArray=[],disposeArray=[];function getElementOffset(scrollable){var $scrollableElement=scrollable.element?scrollable.$element():scrollable,scrollableOffset=animation_position.Z.offset($scrollableElement);return scrollableOffset?scrollable.scrollTop()-(scrollableOffset.top-$element.offset().top):$element.offset().top}var widgetScrollStrategy={on:function(scrollable,eventName,handler){scrollable.on("scroll",handler)},off:function(scrollable,eventName,handler){scrollable.off("scroll",handler)}};function subscribeToScrollEvents($scrollElement){var isDocument="#document"===$scrollElement.get(0).nodeName,isElement=$scrollElement.get(0).nodeType===(0,utils_window.Jj)().Node.ELEMENT_NODE,scrollable=$scrollElement.data("dxScrollable"),eventsStrategy=widgetScrollStrategy;if(scrollable||(scrollable=isDocument&&(0,renderer.Z)((0,utils_window.Jj)())||isElement&&"auto"===$scrollElement.css("overflowY")&&$scrollElement,eventsStrategy=events_engine.Z,scrollable)){var handler=function(scrollable){return function(){var scrollTop=scrollable.scrollTop()-getElementOffset(scrollable);scrollChangedHandler(scrollTop=scrollTop>0?scrollTop:0)}}(scrollable);eventsStrategy.on(scrollable,"scroll",handler),scrollToArray.push((function(pos){var topOffset=getElementOffset(scrollable),scrollMethod=scrollable.scrollTo?"scrollTo":"scrollTop";pos-topOffset>=0&&scrollable[scrollMethod](pos+topOffset)})),scrollableArray.push(scrollable),disposeArray.push((function(){eventsStrategy.off(scrollable,"scroll",handler)}))}}var getScrollElementParent=$element=>{var _$element$get$parentN;return(0,renderer.Z)(null!==(_$element$get$parentN=$element.get(0).parentNode)&&void 0!==_$element$get$parentN?_$element$get$parentN:$element.get(0).host)};for($scrollElement=($targetElement=$targetElement||$element).parent();$scrollElement.length;$scrollElement=getScrollElementParent($scrollElement))subscribeToScrollEvents($scrollElement);return{scrollTo:function(pos){(0,iterator.S6)(scrollToArray,(function(_,scrollTo){scrollTo(pos)}))},dispose:function(){(0,iterator.S6)(disposeArray,(function(_,dispose){dispose()}))}}}var _updateLoading,result,removeEmptyRows,VirtualScrollController=core_class.Z.inherit(function(){var members={ctor:function(component,dataOptions,isVirtual){this._dataOptions=dataOptions,this.component=component,this._viewportSize=!1===component.option("scrolling.legacyMode")?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=isVirtual,this.positionChanged=(0,callbacks.Z)(),this._dataLoader=new VirtualDataLoader(this,this._dataOptions)},getItemSizes:function(){return this._itemSizes},option:function(){return this.component.option.apply(this.component,arguments)},isVirtual:function(){return this._isVirtual},virtualItemsCount:function(){if(_isVirtualMode(this)){var dataOptions=this._dataOptions,totalItemsCount=dataOptions.totalItemsCount();if(!1===this.option("scrolling.legacyMode")&&-1!==totalItemsCount){var viewportParams=this.getViewportParams(),loadedOffset=dataOptions.loadedOffset(),loadedItemCount=dataOptions.loadedItemCount(),skip=Math.max(viewportParams.skip,loadedOffset),take=Math.min(viewportParams.take,loadedItemCount);return{begin:skip,end:Math.max(totalItemsCount-(skip+take),0)}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}},getScrollingTimeout:function(){var renderAsync=this.option("scrolling.renderAsync"),scrollingTimeout=0;if((0,utils_type.$K)(renderAsync)){if(renderAsync){var _this$option;scrollingTimeout=null!==(_this$option=this.option("scrolling.timeout"))&&void 0!==_this$option?_this$option:0}}else(scrollingTimeout=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()))<this.option("scrolling.renderingThreshold")&&(scrollingTimeout=this.option("scrolling.minTimeout")||0);return scrollingTimeout},setViewportPosition:function(position){var result=new utils_deferred.BH,scrollingTimeout=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),scrollingTimeout>0?this._scrollTimeoutID=setTimeout((()=>{this._setViewportPositionCore(position),result.resolve()}),scrollingTimeout):(this._setViewportPositionCore(position),result.resolve()),result.promise()},getViewportPosition:function(){return this._position},getItemIndexByPosition:function(position,viewportItemIndex,height){var _position;position=null!==(_position=position)&&void 0!==_position?_position:this._position;for(var defaultItemSize=this.getItemSize(),offset=0,itemOffset=0,itemOffsetsWithSize=Object.keys(this._itemSizes).concat(-1),i=0;i<itemOffsetsWithSize.length&&offset<position;i++){var itemOffsetWithSize=parseInt(itemOffsetsWithSize[i]),itemOffsetDiff=(position-offset)/defaultItemSize;if(itemOffsetWithSize<0||itemOffset+itemOffsetDiff<itemOffsetWithSize){itemOffset+=itemOffsetDiff,this._sizeRatio<1&&(0,utils_type.$K)(viewportItemIndex)&&(itemOffset=viewportItemIndex+height/this._viewportItemSize);break}offset+=(itemOffsetDiff=itemOffsetWithSize-itemOffset)*defaultItemSize,itemOffset+=itemOffsetDiff;var itemSize=this._itemSizes[itemOffsetWithSize];itemOffset+=(offset+=itemSize)<position?1:(position-offset+itemSize)/itemSize}return Math.round(50*itemOffset)/50},isScrollingBack:function(){return this._isScrollingBack},_setViewportPositionCore:function(position){var prevPosition=this._position||0;this._position=position,prevPosition!==this._position&&(this._isScrollingBack=this._position<prevPosition);var itemIndex=this.getItemIndexByPosition(),result=this.setViewportItemIndex(itemIndex);return this.positionChanged.fire(),result},setContentItemSizes:function(sizes){var virtualItemsCount=this.virtualItemsCount();if(this._contentSize=sizes.reduce(((a,b)=>a+b),0),virtualItemsCount){sizes.forEach(((size,index)=>{this._itemSizes[virtualItemsCount.begin+index]=size}));var virtualContentSize=(virtualItemsCount.begin+virtualItemsCount.end+this.itemsCount())*this._viewportItemSize,contentHeightLimit=ui_grid_core_utils.getContentHeightLimit(browser.Z);this._sizeRatio=virtualContentSize>contentHeightLimit?contentHeightLimit/virtualContentSize:1}},getItemSize:function(){return this._viewportItemSize*this._sizeRatio},getItemOffset:function(itemIndex,isEnd){var virtualItemsCount=this.virtualItemsCount(),itemCount=itemIndex;if(!virtualItemsCount)return 0;var offset=0,totalItemsCount=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach((currentItemIndex=>{itemCount&&(isEnd?currentItemIndex>=totalItemsCount-itemIndex:currentItemIndex<itemIndex)&&(offset+=this._itemSizes[currentItemIndex],itemCount--)})),Math.floor(offset+itemCount*this._viewportItemSize*this._sizeRatio)},getContentOffset:function(type){var isEnd="end"===type,virtualItemsCount=this.virtualItemsCount();return virtualItemsCount?this.getItemOffset(isEnd?virtualItemsCount.end:virtualItemsCount.begin,isEnd):0},getVirtualContentSize:function(){return this.virtualItemsCount()?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0},getViewportItemIndex:function(){return this._viewportItemIndex},setViewportItemIndex:function(itemIndex){if(this._viewportItemIndex=itemIndex,!1!==this.option("scrolling.legacyMode"))return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)},viewportItemSize:function(size){return void 0!==size&&(this._viewportItemSize=size),this._viewportItemSize},viewportSize:function(size){return void 0!==size&&(this._viewportSize=size),this._viewportSize},viewportHeight:function(height,scrollTop){var position=null!=scrollTop?scrollTop:this._position,begin=this.getItemIndexByPosition(position),end=this.getItemIndexByPosition(position+height,begin,height);this.viewportSize(Math.ceil(end-begin)),(0,utils_type.$K)(scrollTop)||this._viewportItemIndex===begin||this._setViewportPositionCore(position)},reset:function(isRefresh){this._dataLoader.reset(),isRefresh||(this._itemSizes={})},subscribeToWindowScrollEvents:function($element){this._windowScroll=this._windowScroll||subscribeToExternalScrollers($element,(scrollTop=>{this.viewportItemSize()&&this.setViewportPosition(scrollTop)}))},dispose:function(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null},scrollTo:function(pos){this._windowScroll&&this._windowScroll.scrollTo(pos)},isVirtualMode:function(){return _isVirtualMode(this)},isAppendMode:function(){return"infinite"===(that=this).option("scrolling.mode")&&!that._isVirtual;var that},getViewportParams:function(){var _this$option2,virtualMode="virtual"===this.option("scrolling.mode"),totalItemsCount=this._dataOptions.totalItemsCount(),topIndex=this._dataOptions.hasKnownLastPage()&&this._viewportItemIndex>totalItemsCount?totalItemsCount:this._viewportItemIndex,bottomIndex=this._viewportSize+topIndex,maxGap=this.option("scrolling.prerenderedRowChunkSize")||1,isScrollingBack=this.isScrollingBack(),minGap=null!==(_this$option2=this.option("scrolling.prerenderedRowCount"))&&void 0!==_this$option2?_this$option2:1,topMinGap=isScrollingBack?minGap:0,bottomMinGap=isScrollingBack?0:minGap,skip=Math.floor(Math.max(0,topIndex-topMinGap)/maxGap)*maxGap,take=Math.ceil((bottomIndex+bottomMinGap-skip)/maxGap)*maxGap;if(virtualMode){var remainedItems=Math.max(0,totalItemsCount-skip);take=Math.min(take,remainedItems)}return{skip,take}},itemsCount:function(){return this.option("scrolling.legacyMode")?this._dataLoader.itemsCount.apply(this._dataLoader,arguments):this._dataOptions.itemsCount()}};return["pageIndex","beginPageIndex","endPageIndex","pageSize","load","loadIfNeed","handleDataChanged","getDelayDeferred"].forEach((function(name){members[name]=function(){return this._dataLoader[name].apply(this._dataLoader,arguments)}})),members}()),isVirtualMode=function(that){return"virtual"===that.option("scrolling.mode")},isAppendMode=function(that){return"infinite"===that.option("scrolling.mode")},isVirtualPaging=function(that){return isVirtualMode(that)||isAppendMode(that)},_correctCount=function(items,count,fromEnd,isItemCountableFunc){for(var i=0;i<count+1;i++){var item=items[fromEnd?items.length-1-i:i];item&&!isItemCountableFunc(item,i===count,fromEnd)&&count++}return count},isItemCountableByDataSource=function(item,dataSource){return"data"===item.rowType&&!item.isNewRow||"group"===item.rowType&&dataSource.isGroupItemCountable(item.data)},VirtualScrollingDataSourceAdapterExtender=(_updateLoading=function(that){var beginPageIndex=that._virtualScrollController.beginPageIndex(-1);isVirtualMode(that)&&(beginPageIndex<0||that.viewportSize()>=0&&that.getViewportItemIndex()>=0&&(beginPageIndex*that.pageSize()>that.getViewportItemIndex()||beginPageIndex*that.pageSize()+that.itemsCount()<that.getViewportItemIndex()+that.viewportSize())&&that._dataSource.isLoading()?that._isLoading||(that._isLoading=!0,that.loadingChanged.fire(!0)):that._isLoading&&(that._isLoading=!1,that.loadingChanged.fire(!1)))},result={init:function(){this.callBase.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new VirtualScrollController(this.component,this._getVirtualScrollDataOptions())},_getVirtualScrollDataOptions:function(){var that=this;return{pageSize:function(){return that.pageSize()},totalItemsCount:function(){return that.totalItemsCount()},hasKnownLastPage:function(){return that.hasKnownLastPage()},pageIndex:function(index){return that._dataSource.pageIndex(index)},isLoading:function(){return that._dataSource.isLoading()&&!that.isCustomLoading()},pageCount:function(){return that.pageCount()},load:function(){return that._dataSource.load()},updateLoading:function(){_updateLoading(that)},itemsCount:function(){return that.itemsCount(!0)},items:function(){return that._dataSource.items()},viewportItems:function(items){return items&&(that._items=items),that._items},onChanged:function(e){that.changed.fire(e)},changingDuration:function(e){return that.isLoading()?300:that._renderTime||0}}},_handleLoadingChanged:function(isLoading){!1!==this.option("scrolling.legacyMode")?(isVirtualMode(this)&&!this._isLoadingAll||(this._isLoading=isLoading,this.callBase.apply(this,arguments)),this._startLoadTime=isLoading?new Date:void 0):this.callBase.apply(this,arguments)},_handleLoadError:function(){!1!==this.option("scrolling.legacyMode")&&(this._isLoading=!1,this.loadingChanged.fire(!1)),this.callBase.apply(this,arguments)},_handleDataChanged:function(e){if(!1===this.option("scrolling.legacyMode"))return this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),void this.callBase.apply(this,arguments);var callBase=this.callBase.bind(this);this._virtualScrollController.handleDataChanged(callBase,e)},_customizeRemoteOperations:function(options,operationTypes){var newMode=!1===this.option("scrolling.legacyMode"),renderAsync=this.option("scrolling.renderAsync");(0,utils_type.$K)(renderAsync)||(renderAsync=this._renderTime>=this.option("scrolling.renderingThreshold")),!(isVirtualMode(this)||isAppendMode(this)&&newMode)||operationTypes.reload||!operationTypes.skip&&!newMode||renderAsync||(options.delay=void 0),this.callBase.apply(this,arguments)},items:function(){return this._items},_dataSourceTotalCount:function(isBase){return!1===this.option("scrolling.legacyMode")&&isVirtualMode(this)&&!isBase?this._totalCount:this.callBase()},itemsCount:function(isBase){return isBase||!1===this.option("scrolling.legacyMode")?this.callBase():this._virtualScrollController.itemsCount()},load:function(loadOptions){return!1===this.option("scrolling.legacyMode")||loadOptions?this.callBase(loadOptions):this._virtualScrollController.load()},isLoading:function(){return!1===this.option("scrolling.legacyMode")?this._dataSource.isLoading():this._isLoading},isLoaded:function(){return this._dataSource.isLoaded()&&this._isLoaded},resetPagesCache:function(isLiveUpdate){isLiveUpdate||this._virtualScrollController.reset(!0),this.callBase.apply(this,arguments)},_changeRowExpandCore:function(){var result=this.callBase.apply(this,arguments);return!1===this.option("scrolling.legacyMode")||(this.resetPagesCache(),_updateLoading(this)),result},reload:function(){this._dataSource.pageIndex(this.pageIndex());var virtualScrollController=this._virtualScrollController;if(!1!==this.option("scrolling.legacyMode")&&virtualScrollController){var d=new utils_deferred.BH;return this.callBase.apply(this,arguments).done((function(r){var delayDeferred=virtualScrollController.getDelayDeferred();delayDeferred?delayDeferred.done(d.resolve).fail(d.reject):d.resolve(r)})).fail(d.reject),d}return this.callBase.apply(this,arguments)},refresh:function(options,operationTypes){if(!1!==this.option("scrolling.legacyMode")){var storeLoadOptions=options.storeLoadOptions,dataSource=this._dataSource;operationTypes.reload?(this._virtualScrollController.reset(),dataSource.items().length=0,this._isLoaded=!1,_updateLoading(this),this._isLoaded=!0,isAppendMode(this)?(this.pageIndex(0),dataSource.pageIndex(0),storeLoadOptions.pageIndex=0,options.pageIndex=0,storeLoadOptions.skip=0):(dataSource.pageIndex(this.pageIndex()),dataSource.paginate()&&(options.pageIndex=this.pageIndex(),storeLoadOptions.skip=this.pageIndex()*this.pageSize()))):isAppendMode(this)&&storeLoadOptions.skip&&this._totalCountCorrection<0&&(storeLoadOptions.skip+=this._totalCountCorrection)}return this.callBase.apply(this,arguments)},dispose:function(){this._virtualScrollController.dispose(),this.callBase.apply(this,arguments)},loadPageCount:function(count){if(!(0,utils_type.$K)(count))return this._loadPageCount;this._loadPageCount=count},_handleDataLoading:function(options){var loadPageCount=this.loadPageCount(),pageSize=this.pageSize(),newMode=!1===this.option("scrolling.legacyMode"),storeLoadOptions=options.storeLoadOptions,takeIsDefined=(0,utils_type.$K)(storeLoadOptions.take);options.loadPageCount=loadPageCount,!options.isCustomLoading&&newMode&&takeIsDefined&&loadPageCount>1&&pageSize>0&&(storeLoadOptions.take=loadPageCount*pageSize),this.callBase.apply(this,arguments)},_loadPageSize:function(){return this.callBase.apply(this,arguments)*this.loadPageCount()}},["beginPageIndex","endPageIndex","pageIndex"].forEach((function(name){result[name]=function(){if(!1===this.option("scrolling.legacyMode")){var dataSource=this._dataSource;return dataSource.pageIndex.apply(dataSource,arguments)}var virtualScrollController=this._virtualScrollController;return virtualScrollController[name].apply(virtualScrollController,arguments)}})),["virtualItemsCount","getContentOffset","getVirtualContentSize","setContentItemSizes","setViewportPosition","getViewportItemIndex","setViewportItemIndex","getItemIndexByPosition","viewportSize","viewportItemSize","getItemSize","getItemSizes","loadIfNeed"].forEach((function(name){result[name]=function(){var virtualScrollController=this._virtualScrollController;return virtualScrollController[name].apply(virtualScrollController,arguments)}})),result),VirtualScrollingRowsViewExtender=(removeEmptyRows=function($emptyRows,className){var tBodies=$emptyRows.toArray().map((row=>(0,renderer.Z)(row).parent("."+className).get(0))).filter((row=>row));tBodies.length&&($emptyRows=(0,renderer.Z)(tBodies));for(var rowCount="dx-freespace-row"===className?$emptyRows.length-1:$emptyRows.length,i=0;i<rowCount;i++)$emptyRows.eq(i).remove()},{init:function(){var _dataController$state,dataController=this.getController("data");this.callBase(),dataController.pageChanged.add((pageIndex=>{var scrollTop=this._scrollTop;this.scrollToPage(null!=pageIndex?pageIndex:dataController.pageIndex()),!1===this.option("scrolling.legacyMode")&&this._scrollTop===scrollTop&&dataController.updateViewport()})),dataController.dataSourceChanged.add((()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()})),null===(_dataController$state=dataController.stateLoaded)||void 0===_dataController$state||_dataController$state.add((()=>{this._scrollToCurrentPageOnResize()})),this._scrollToCurrentPageOnResize()},_scrollToCurrentPageOnResize:function(){var dataController=this.getController("data");if(dataController.pageIndex()>0){var resizeHandler=()=>{this.resizeCompleted.remove(resizeHandler),this.scrollToPage(dataController.pageIndex())};this.resizeCompleted.add(resizeHandler)}},scrollToPage:function(pageIndex){var scrollPosition,dataController=this._dataController,pageSize=dataController?dataController.pageSize():0;if(isVirtualMode(this)||isAppendMode(this)){var itemSize=dataController.getItemSize(),itemSizes=dataController.getItemSizes(),itemIndex=pageIndex*pageSize;for(var index in scrollPosition=itemIndex*itemSize,itemSizes)index<itemIndex&&(scrollPosition+=itemSizes[index]-itemSize)}else scrollPosition=0;this.scrollTo({y:scrollPosition,x:this._scrollLeft})},renderDelayedTemplates:function(e){this.waitAsyncTemplates().done((()=>{this._updateContentPosition(!0)})),this.callBase.apply(this,arguments)},_renderCore:function(e){var startRenderTime=new Date,deferred=this.callBase.apply(this,arguments),dataSource=this._dataController._dataSource;if(dataSource&&e){var itemCount=e.items?e.items.length:20,viewportSize=this._dataController.viewportSize()||20;ui_grid_core_utils.isVirtualRowRendering(this)&&itemCount>0&&!1!==this.option("scrolling.legacyMode")?dataSource._renderTime=(new Date-startRenderTime)*viewportSize/itemCount:dataSource._renderTime=new Date-startRenderTime}return deferred},_getRowElements:function(tableElement){var $rows=this.callBase(tableElement);return $rows&&$rows.not(".dx-virtual-row")},_removeRowsElements:function(contentTable,removeCount,changeType){var rowElements=this._getRowElements(contentTable).toArray();rowElements="append"===changeType?rowElements.slice(0,removeCount):rowElements.slice(-removeCount);var errorHandlingController=this.getController("errorHandling");rowElements.map((rowElement=>{var $rowElement=(0,renderer.Z)(rowElement);errorHandlingController&&errorHandlingController.removeErrorRow($rowElement.next()),$rowElement.remove()}))},_updateContent:function(tableElement,change){var $freeSpaceRowElements,contentElement=this._findContentElement(),changeType=change&&change.changeType,d=(0,utils_deferred.BH)(),contentTable=contentElement.children().first();return"append"===changeType||"prepend"===changeType?this.waitAsyncTemplates().done((()=>{var $tBodies=this._getBodies(tableElement);1===$tBodies.length?this._getBodies(contentTable)["append"===changeType?"append":"prepend"]($tBodies.children()):$tBodies["append"===changeType?"appendTo":"prependTo"](contentTable),tableElement.remove(),$freeSpaceRowElements=this._getFreeSpaceRowElements(contentTable),removeEmptyRows($freeSpaceRowElements,"dx-freespace-row"),change.removeCount&&this._removeRowsElements(contentTable,change.removeCount,changeType),this._restoreErrorRow(contentTable),d.resolve()})).fail(d.reject):this.callBase.apply(this,arguments).done((()=>{"update"===changeType&&this._restoreErrorRow(contentTable),d.resolve()})).fail(d.reject),d.promise().done((()=>{this._updateBottomLoading()}))},_addVirtualRow:function($table,isFixed,location,position){if(position){var $virtualRow=this._createEmptyRow("dx-virtual-row",isFixed,position);$virtualRow=this._wrapRowIfNeed($table,$virtualRow),this._appendEmptyRow($table,$virtualRow,location)}},_updateContentItemSizes:function(){var rowHeights=this._getRowHeights(),correctedRowHeights=this._correctRowHeights(rowHeights);this._dataController.setContentItemSizes(correctedRowHeights)},_updateViewportSize:function(viewportHeight,scrollTop){(0,utils_type.$K)(viewportHeight)||(viewportHeight=this._hasHeight?(0,size.zp)(this.element()):(0,size.zp)((0,utils_window.Jj)())),this._dataController.viewportHeight(viewportHeight,scrollTop)},_getRowHeights:function(){var _this$getController,_this$getController$i,isPopupEditMode=null===(_this$getController=this.getController("editing"))||void 0===_this$getController||null===(_this$getController$i=_this$getController.isPopupEditMode)||void 0===_this$getController$i?void 0:_this$getController$i.call(_this$getController),rowElements=this._getRowElements(this._tableElement).toArray();return isPopupEditMode&&(rowElements=rowElements.filter((row=>!(0,renderer.Z)(row).hasClass("dx-row-inserted")))),rowElements.map((row=>(0,utils_position.l)(row).height))},_correctRowHeights:function(rowHeights){for(var dataController=this._dataController,dataSource=dataController._dataSource,correctedRowHeights=[],visibleRows=dataController.getVisibleRows(),itemSize=0,firstCountableItem=!0,lastLoadIndex=-1,i=0;i<rowHeights.length;i++){var currentItem=visibleRows[i];(0,utils_type.$K)(currentItem)&&(!1===this.option("scrolling.legacyMode")?(lastLoadIndex>=0&&lastLoadIndex!==currentItem.loadIndex&&(correctedRowHeights.push(itemSize),itemSize=0),lastLoadIndex=currentItem.loadIndex):isItemCountableByDataSource(currentItem,dataSource)&&(firstCountableItem?firstCountableItem=!1:(correctedRowHeights.push(itemSize),itemSize=0)),itemSize+=rowHeights[i])}return itemSize>0&&correctedRowHeights.push(itemSize),correctedRowHeights},_updateContentPosition:function(isRender){var dataController=this._dataController,rowHeight=this._rowHeight||20;if(dataController.viewportItemSize(rowHeight),isVirtualMode(this)||ui_grid_core_utils.isVirtualRowRendering(this)){isRender||this._updateContentItemSizes();var top=dataController.getContentOffset("begin"),bottom=dataController.getContentOffset("end"),$tables=this.getTableElements(),$virtualRows=$tables.children("tbody").children(".dx-virtual-row");removeEmptyRows($virtualRows,"dx-virtual-row"),$tables.each(((index,element)=>{var isFixed=index>0,prevFixed=this._isFixedTableRendering;this._isFixedTableRendering=isFixed,this._addVirtualRow((0,renderer.Z)(element),isFixed,"top",top),this._addVirtualRow((0,renderer.Z)(element),isFixed,"bottom",bottom),this._isFixedTableRendering=prevFixed}))}},_isTableLinesDisplaysCorrect:function(table){return table.find(".dx-column-lines").length>0===this.option("showColumnLines")},_isColumnElementsEqual:function($columns,$virtualColumns){var result=$columns.length===$virtualColumns.length;return result&&(0,iterator.S6)($columns,(function(index,element){if(element.style.width!==$virtualColumns[index].style.width)return result=!1})),result},_getCellClasses:function(column){var classes=[],cssClass=column.cssClass,isExpandColumn="expand"===column.command;return cssClass&&classes.push(cssClass),isExpandColumn&&classes.push(this.addWidgetPrefix("group-space")),classes},_findBottomLoadPanel:function($contentElement){var $element=$contentElement||this.element(),$bottomLoadPanel=$element&&$element.find("."+this.addWidgetPrefix("bottom-load-panel"));if($bottomLoadPanel&&$bottomLoadPanel.length)return $bottomLoadPanel},_updateBottomLoading:function(){var virtualMode=isVirtualMode(this),appendMode=isAppendMode(this),showBottomLoading=!this._dataController.hasKnownLastPage()&&this._dataController.isLoaded()&&(virtualMode||appendMode),$contentElement=this._findContentElement(),bottomLoadPanelElement=this._findBottomLoadPanel($contentElement);showBottomLoading?bottomLoadPanelElement||(0,renderer.Z)("<div>").addClass(this.addWidgetPrefix("bottom-load-panel")).append(this._createComponent((0,renderer.Z)("<div>"),load_indicator.Z).$element()).appendTo($contentElement):bottomLoadPanelElement&&bottomLoadPanelElement.remove()},_handleScroll:function(e){var legacyScrollingMode=!0===this.option("scrolling.legacyMode"),zeroTopPosition=0===e.scrollOffset.top,hasScrolled=this._scrollTop!==e.scrollOffset.top||e.forceUpdateScrollPosition,isValidScrollTarget=this._hasHeight||!legacyScrollingMode&&zeroTopPosition;hasScrolled&&isValidScrollTarget&&this._rowHeight&&(this._scrollTop=e.scrollOffset.top,(isVirtualMode(this)||"standard"!==this.option("scrolling.rowRenderingMode"))&&!1===this.option("scrolling.legacyMode")&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(e.scrollOffset.top)),this.callBase.apply(this,arguments)},_needUpdateRowHeight:function(itemsCount){return this.callBase.apply(this,arguments)||itemsCount>0&&isAppendMode(this)&&!ui_grid_core_utils.isVirtualRowRendering(this)},_updateRowHeight:function(){if(this.callBase.apply(this,arguments),this._rowHeight){this._updateContentPosition();var viewportHeight=this._hasHeight?(0,size.zp)(this.element()):(0,size.zp)((0,utils_window.Jj)()),dataController=this._dataController;!1===this.option("scrolling.legacyMode")?(this._updateViewportSize(viewportHeight),dataController.updateViewport()):dataController.viewportSize(Math.ceil(viewportHeight/this._rowHeight))}},updateFreeSpaceRowHeight:function(){var result=this.callBase.apply(this,arguments);return result&&this._updateContentPosition(),result},setLoading:function(isLoading,messageText){var dataController=this._dataController,hasBottomLoadPanel=dataController.pageIndex()>0&&dataController.isLoaded()&&!!this._findBottomLoadPanel();!1===this.option("scrolling.legacyMode")&&isLoading&&dataController.isViewportChanging()||(hasBottomLoadPanel&&(isLoading=!1),this.callBase.call(this,isLoading,messageText))},_resizeCore:function(){var that=this,$element=that.element();that.callBase(),that.component.$element()&&!that._windowScroll&&(0,dom.al)($element)&&(that._windowScroll=subscribeToExternalScrollers($element,(function(scrollPos){!that._hasHeight&&that._rowHeight&&that._dataController.setViewportPosition(scrollPos)}),that.component.$element()),that.on("disposing",(function(){that._windowScroll.dispose()}))),!1!==this.option("scrolling.legacyMode")&&that.loadIfNeed()},loadIfNeed:function(){var _dataController$loadI,dataController=this._dataController;null==dataController||null===(_dataController$loadI=dataController.loadIfNeed)||void 0===_dataController$loadI||_dataController$loadI.call(dataController)},setColumnWidths:function(widths){var $content,scrollable=this.getScrollable();this.callBase.apply(this,arguments),"virtual"===this.option("scrolling.mode")&&($content=scrollable?(0,renderer.Z)(scrollable.content()):this.element(),this.callBase(widths,$content.children("."+this.addWidgetPrefix("content")).children(":not(."+this.addWidgetPrefix("table-content")+")")))},_restoreErrorRow:function(){if(!1===this.option("scrolling.legacyMode")){var errorHandling=this.getController("errorHandling");null==errorHandling||errorHandling.removeErrorRow()}this.callBase.apply(this,arguments)},dispose:function(){clearTimeout(this._scrollTimeoutID),this.callBase()}}),virtualScrollingModule={defaultOptions:function(){return{scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}},extenders:{dataSourceAdapter:VirtualScrollingDataSourceAdapterExtender,controllers:{data:function(){var members={_refreshDataSource:function(){var baseResult=this.callBase.apply(this,arguments)||(new utils_deferred.BH).resolve().promise();return baseResult.done(this.initVirtualRows.bind(this)),baseResult},_loadDataSource:function(){if(this._rowsScrollController&&isVirtualPaging(this)){var _this$_dataSource,{loadPageCount}=(0,utils_type.$K)(this._loadViewportParams)?this.getLoadPageParams():{};loadPageCount>=1&&(null===(_this$_dataSource=this._dataSource)||void 0===_this$_dataSource||_this$_dataSource.loadPageCount(loadPageCount))}return this.callBase.apply(this,arguments)},getRowPageSize:function(){var rowPageSize=this.option("scrolling.rowPageSize"),pageSize=this.pageSize();return pageSize&&pageSize<rowPageSize?pageSize:rowPageSize},reload:function(){var rowsScrollController=this._rowsScrollController||this._dataSource,itemIndex=rowsScrollController&&rowsScrollController.getItemIndexByPosition(),result=this.callBase.apply(this,arguments);return result&&result.done((()=>{if(isVirtualMode(this)||ui_grid_core_utils.isVirtualRowRendering(this)){var rowIndexOffset=this.getRowIndexOffset(),rowIndex=Math.floor(itemIndex)-rowIndexOffset,component=this.component,scrollable=component.getScrollable&&component.getScrollable(),isSortingOperation=this.dataSource().operationTypes().sorting;if(scrollable&&!isSortingOperation&&rowIndex>=0){var rowElement=component.getRowElement(rowIndex),$rowElement=rowElement&&rowElement[0]&&(0,renderer.Z)(rowElement[0]),top=$rowElement&&$rowElement.position().top,isChromeLatest=browser.Z.chrome&&browser.Z.version>=91;top>(browser.Z.mozilla||isChromeLatest?1:0)&&(top=Math.round(top+(0,size.zp)($rowElement)*(itemIndex%1)),scrollable.scrollTo({y:top}))}}}))},initVirtualRows:function(){var virtualRowsRendering=ui_grid_core_utils.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,"virtual"!==this.option("scrolling.mode")&&!0!==virtualRowsRendering||!1===virtualRowsRendering||!1!==this.option("scrolling.legacyMode")&&!this.option("scrolling.rowPageSize"))return this._visibleItems=null,void(this._rowsScrollController=null);var pageIndex=!isVirtualMode(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(pageIndex*this.pageSize()/this.getRowPageSize()),this._visibleItems=!1===this.option("scrolling.legacyMode")?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new VirtualScrollController(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add((()=>{var _this$_dataSource2;if(!1===this.option("scrolling.legacyMode"))return this._viewportChanging=!0,this.loadViewport(),void(this._viewportChanging=!1);null===(_this$_dataSource2=this._dataSource)||void 0===_this$_dataSource2||_this$_dataSource2.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())}))),!1===this.option("scrolling.legacyMode")&&this._updateLoadViewportParams(),this.isLoaded()&&!1!==this.option("scrolling.legacyMode")&&this._rowsScrollController.load()},isViewportChanging:function(){return this._viewportChanging},_getRowsScrollDataOptions:function(){var that=this,isItemCountable=function(item){return isItemCountableByDataSource(item,that._dataSource)};return{pageSize:function(){return that.getRowPageSize()},loadedOffset:function(){var _that$_dataSource;return isVirtualMode(that)&&(null===(_that$_dataSource=that._dataSource)||void 0===_that$_dataSource?void 0:_that$_dataSource.lastLoadOptions().skip)||0},loadedItemCount:function(){return that._itemCount},totalItemsCount:function(){return isVirtualPaging(that)?that.totalItemsCount():!1===that.option("scrolling.legacyMode")?that._itemCount:that._items.filter(isItemCountable).length},hasKnownLastPage:function(){return!1!==that.option("scrolling.legacyMode")||that.hasKnownLastPage()},pageIndex:function(index){return void 0!==index&&(that._rowPageIndex=index),that._rowPageIndex},isLoading:function(){return that.isLoading()},pageCount:function(){var pageCount=Math.ceil(this.totalItemsCount()/this.pageSize());return pageCount||1},load:function(){that._rowsScrollController.pageIndex()>=this.pageCount()&&(that._rowPageIndex=this.pageCount()-1,that._rowsScrollController.pageIndex(that._rowPageIndex)),!this.items().length&&this.totalItemsCount()||that._rowsScrollController.handleDataChanged((change=>{(change=change||{}).changeType=change.changeType||"refresh",change.items=change.items||that._visibleItems,that._visibleItems.forEach(((item,index)=>{item.rowIndex=index})),that._fireChanged(change)}))},updateLoading:function(){},itemsCount:function(){return this.items(!0).length},correctCount:function(items,count,fromEnd){return _correctCount(items,count,fromEnd,((item,isNextAfterLast,fromEnd)=>item.isNewRow?isNextAfterLast&&!fromEnd:isNextAfterLast&&fromEnd?!item.isNewRow:isItemCountable(item)))},items:function(countableOnly){var result=that._items;if(that.option("scrolling.legacyMode")){var dataSource=that.dataSource(),virtualItemsCount=null==dataSource?void 0:dataSource.virtualItemsCount(),begin=virtualItemsCount?virtualItemsCount.begin:0,rowPageSize=that.getRowPageSize(),skip=that._rowPageIndex*rowPageSize-begin,take=rowPageSize;if(skip<0)return[];skip&&(skip=this.correctCount(result,skip),result=result.slice(skip)),take&&(take=this.correctCount(result,take),result=result.slice(0,take))}return countableOnly?result.filter(isItemCountable):result},viewportItems:function(items){return items&&!1!==that.option("scrolling.legacyMode")&&(that._visibleItems=items),that._visibleItems},onChanged:function(){},changingDuration:function(e){var dataSource=that.dataSource();return null!=dataSource&&dataSource.isLoading()&&!1!==that.option("scrolling.legacyMode")?300:(null==dataSource?void 0:dataSource._renderTime)||0}}},_updateItemsCore:function(change){var delta=this.getRowIndexDelta();if(this.callBase.apply(this,arguments),!1===this.option("scrolling.legacyMode")&&ui_grid_core_utils.isVirtualRowRendering(this))"update"===change.changeType&&0===change.rowIndices.length&&change.cancelEmptyChanges&&(change.cancel=!0);else{var rowsScrollController=this._rowsScrollController;if(rowsScrollController){var visibleItems=this._visibleItems,isRefresh="refresh"===change.changeType||change.isLiveUpdate;if("append"===change.changeType&&change.items&&!change.items.length)return;isRefresh||"append"===change.changeType||"prepend"===change.changeType?(change.cancel=!0,isRefresh&&rowsScrollController.reset(!0),rowsScrollController.load()):("update"===change.changeType?change.rowIndices.forEach(((rowIndex,index)=>{var changeType=change.changeTypes[index],newItem=change.items[index];"update"===changeType?visibleItems[rowIndex]=newItem:"insert"===changeType?visibleItems.splice(rowIndex,0,newItem):"remove"===changeType&&visibleItems.splice(rowIndex,1)})):(visibleItems.forEach(((item,index)=>{visibleItems[index]=this._items[index+delta]||visibleItems[index]})),change.items=visibleItems),visibleItems.forEach((function(item,index){item.rowIndex=index})))}}},_updateLoadViewportParams:function(){var viewportParams=this._rowsScrollController.getViewportParams(),pageSize=this.pageSize();if(viewportParams&&!isVirtualPaging(this)&&pageSize>0){var pageOffset=this.pageIndex()*pageSize;viewportParams.skip+=pageOffset}this._loadViewportParams=viewportParams},_processItems:function(items){var resultItems=this.callBase.apply(this,arguments);if(!1===this.option("scrolling.legacyMode")){var _dataSource$lastLoadO,prevCountable,prevRowType,isPrevRowNew,dataSource=this._dataSource,currentIndex=null!==(_dataSource$lastLoadO=null==dataSource?void 0:dataSource.lastLoadOptions().skip)&&void 0!==_dataSource$lastLoadO?_dataSource$lastLoadO:0,wasCountableItem=!1,newRows=[];resultItems.forEach((item=>{var rowType=item.rowType,itemCountable=isItemCountableByDataSource(item,dataSource),isNextGroupItem="group"===rowType&&(prevCountable||itemCountable||"group"!==prevRowType&&currentIndex>0),isNextDataItem="data"===rowType&&itemCountable&&(prevCountable||"group"!==prevRowType);!item.isNewRow&&(0,utils_type.$K)(prevCountable)&&(!isNextGroupItem&&!isNextDataItem||isPrevRowNew&&!wasCountableItem||currentIndex++);(isNextGroupItem||isNextDataItem)&&(wasCountableItem=!0),item.isNewRow?newRows.push(item):(newRows.forEach((it=>it.loadIndex=currentIndex)),newRows=[]),item.loadIndex=currentIndex,prevCountable=itemCountable,prevRowType=rowType,isPrevRowNew=item.isNewRow})),newRows.forEach((it=>it.loadIndex=currentIndex))}return resultItems},_afterProcessItems:function(items,change){if(this._itemCount=items.filter((item=>isItemCountableByDataSource(item,this._dataSource))).length,(0,utils_type.$K)(this._loadViewportParams)){this._updateLoadViewportParams();var result=items;if(this._allItems=items,items.length){var{skipForCurrentPage}=this.getLoadPageParams(!0),skip=items[0].loadIndex+skipForCurrentPage,take=this._loadViewportParams.take;result=items.filter((it=>{var isNewRowInEmptyData=it.isNewRow&&it.loadIndex===skip&&0===take,isLoadIndexGreaterStart=it.loadIndex>=skip,isLoadIndexLessEnd=it.loadIndex<skip+take||isNewRowInEmptyData;return isLoadIndexGreaterStart&&isLoadIndexLessEnd}))}return result}return this.callBase.apply(this,arguments)},_applyChange:function(change){var that=this,items=change.items,changeType=change.changeType,removeCount=change.removeCount;if(removeCount){var fromEnd="prepend"===changeType;removeCount=_correctCount(that._items,removeCount,fromEnd,(function(item,isNextAfterLast){return"data"===item.rowType&&!item.isNewRow||"group"===item.rowType&&(that._dataSource.isGroupItemCountable(item.data)||isNextAfterLast)})),change.removeCount=removeCount}switch(changeType){case"prepend":that._items.unshift.apply(that._items,items),removeCount&&that._items.splice(-removeCount);break;case"append":that._items.push.apply(that._items,items),removeCount&&that._items.splice(0,removeCount);break;default:that.callBase(change)}},items:function(allItems){return allItems?this._allItems||this._items:this._visibleItems||this._items},getRowIndexDelta:function(){var delta=0;if(this.option("scrolling.legacyMode")){var visibleItems=this._visibleItems;visibleItems&&visibleItems[0]&&(delta=this._items.indexOf(visibleItems[0]))}return delta<0?0:delta},getRowIndexOffset:function(byLoadedRows){var offset=0,dataSource=this.dataSource(),rowsScrollController=this._rowsScrollController,newMode=!1===this.option("scrolling.legacyMode"),virtualPaging=isVirtualPaging(this);if(rowsScrollController&&!byLoadedRows)if(newMode&&(0,utils_type.$K)(this._loadViewportParams)){var{skipForCurrentPage,pageIndex}=this.getLoadPageParams(!0),items=this.items(!0);if(offset=virtualPaging?pageIndex*this.pageSize():0,items.length){var firstLoadIndex=items[0].loadIndex;offset+=items.filter((item=>item.loadIndex<firstLoadIndex+skipForCurrentPage)).length}}else offset=rowsScrollController.beginPageIndex()*rowsScrollController.pageSize();else if(virtualPaging&&newMode&&dataSource){var _dataSource$lastLoadO2;offset=null!==(_dataSource$lastLoadO2=dataSource.lastLoadOptions().skip)&&void 0!==_dataSource$lastLoadO2?_dataSource$lastLoadO2:0}else isVirtualMode(this)&&dataSource&&(offset=dataSource.beginPageIndex()*dataSource.pageSize());return offset},getDataIndex:function(change){return!1===this.option("scrolling.legacyMode")?this.getRowIndexOffset(!0):this.callBase.apply(this,arguments)},viewportSize:function(){var rowsScrollController=this._rowsScrollController,dataSource=this._dataSource,result=null==rowsScrollController?void 0:rowsScrollController.viewportSize.apply(rowsScrollController,arguments);return!1===this.option("scrolling.legacyMode")?result:null==dataSource?void 0:dataSource.viewportSize.apply(dataSource,arguments)},viewportHeight:function(height,scrollTop){var _this$_rowsScrollCont;null===(_this$_rowsScrollCont=this._rowsScrollController)||void 0===_this$_rowsScrollCont||_this$_rowsScrollCont.viewportHeight(height,scrollTop)},viewportItemSize:function(){var rowsScrollController=this._rowsScrollController,dataSource=this._dataSource,result=null==rowsScrollController?void 0:rowsScrollController.viewportItemSize.apply(rowsScrollController,arguments);return!1===this.option("scrolling.legacyMode")?result:null==dataSource?void 0:dataSource.viewportItemSize.apply(dataSource,arguments)},setViewportPosition:function(){var rowsScrollController=this._rowsScrollController,dataSource=this._dataSource;this._isPaging=!1,rowsScrollController?rowsScrollController.setViewportPosition.apply(rowsScrollController,arguments):null==dataSource||dataSource.setViewportPosition.apply(dataSource,arguments)},setContentItemSizes:function(sizes){var rowsScrollController=this._rowsScrollController,dataSource=this._dataSource,result=null==rowsScrollController?void 0:rowsScrollController.setContentItemSizes(sizes);return!1===this.option("scrolling.legacyMode")?result:null==dataSource?void 0:dataSource.setContentItemSizes(sizes)},getPreloadedRowCount:function(){var preloadCount=this.option("scrolling.preloadedRowCount"),preloadEnabled=this.option("scrolling.preloadEnabled");if((0,utils_type.$K)(preloadCount))return preloadCount;var viewportSize=this.viewportSize();return preloadEnabled?2*viewportSize:viewportSize},getLoadPageParams:function(byLoadedPage){var _this$_dataSource3,_this$_dataSource4,pageSize=this.pageSize(),viewportParams=this._loadViewportParams,lastLoadOptions=null===(_this$_dataSource3=this._dataSource)||void 0===_this$_dataSource3?void 0:_this$_dataSource3.lastLoadOptions(),loadedPageIndex=(null==lastLoadOptions?void 0:lastLoadOptions.pageIndex)||0,loadedTake=(null==lastLoadOptions?void 0:lastLoadOptions.take)||0,isScrollingBack=this._rowsScrollController.isScrollingBack(),topPreloadCount=isScrollingBack?this.getPreloadedRowCount():0,bottomPreloadCount=isScrollingBack?0:this.getPreloadedRowCount(),totalCountCorrection=(null===(_this$_dataSource4=this._dataSource)||void 0===_this$_dataSource4?void 0:_this$_dataSource4.totalCountCorrection())||0,skipWithPreload=Math.max(0,viewportParams.skip-topPreloadCount),pageIndex=byLoadedPage?loadedPageIndex:Math.floor(pageSize?skipWithPreload/pageSize:0),pageOffset=pageIndex*pageSize,skipForCurrentPage=viewportParams.skip-pageOffset,loadingTake=viewportParams.take+skipForCurrentPage+bottomPreloadCount-totalCountCorrection,take=byLoadedPage?loadedTake:loadingTake,loadPageCount=Math.ceil(pageSize?take/pageSize:0);return{pageIndex,loadPageCount:Math.max(1,loadPageCount),skipForCurrentPage:Math.max(0,skipForCurrentPage)}},_updateVisiblePageIndex:function(currentPageIndex){if(this._rowsScrollController){if((0,utils_type.$K)(currentPageIndex))return this._silentOption("paging.pageIndex",currentPageIndex),void this.pageChanged.fire();var viewPortItemIndex=this._rowsScrollController.getViewportItemIndex(),newPageIndex=Math.floor(viewPortItemIndex/this.pageSize());this.pageIndex()!==newPageIndex&&(this._silentOption("paging.pageIndex",newPageIndex),this.updateItems({changeType:"pageIndex"}))}},_getChangedLoadParams:function(){var loadedPageParams=this.getLoadPageParams(!0),{pageIndex,loadPageCount}=this.getLoadPageParams(),pageIndexIsValid=this._pageIndexIsValid(pageIndex),result=null;return this._isLoading||!pageIndexIsValid||pageIndex===loadedPageParams.pageIndex&&loadPageCount===loadedPageParams.loadPageCount||(result={pageIndex,loadPageCount}),result},_pageIndexIsValid:function(pageIndex){var result=!0;return(isAppendMode(this)&&this.hasKnownLastPage()||isVirtualMode(this))&&(result=pageIndex*this.pageSize()<this.totalItemsCount()),result},_loadItems:function(checkLoading,viewportIsFilled){var _dataSourceAdapter$lo,_dataSourceAdapter$pa,virtualPaging=isVirtualPaging(this),dataSourceAdapter=this._dataSource,changedParams=this._getChangedLoadParams(),currentLoadPageCount=null!==(_dataSourceAdapter$lo=null==dataSourceAdapter?void 0:dataSourceAdapter.loadPageCount())&&void 0!==_dataSourceAdapter$lo?_dataSourceAdapter$lo:0,lastRequiredItemCount=this.pageSize()*currentLoadPageCount,currentPageIndex=null!==(_dataSourceAdapter$pa=null==dataSourceAdapter?void 0:dataSourceAdapter.pageIndex())&&void 0!==_dataSourceAdapter$pa?_dataSourceAdapter$pa:0,pageIndexNotChanged=(null==changedParams?void 0:changedParams.pageIndex)===currentPageIndex,allLoadedInAppendMode=isAppendMode(this)&&this.totalItemsCount()<lastRequiredItemCount,isRepaintMode="repaint"===this.option("editing.refreshMode"),pageIndexIncreased=(null==changedParams?void 0:changedParams.pageIndex)>currentPageIndex,result=!1;if(!dataSourceAdapter||virtualPaging&&checkLoading&&(isRepaintMode&&viewportIsFilled||pageIndexIncreased||pageIndexNotChanged&&allLoadedInAppendMode))return result;if(virtualPaging&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),virtualPaging&&changedParams){result=!0,dataSourceAdapter.pageIndex(changedParams.pageIndex),dataSourceAdapter.loadPageCount(changedParams.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;var viewportChanging=this._viewportChanging;this.load().always((()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0})).done((()=>{var isLastPage=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(viewportChanging||isLastPage)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))}))}return result},loadViewport:function(params){var{checkLoadedParamsOnly,checkLoading,viewportIsNotFilled}=null!=params?params:{};if((isVirtualPaging(this)||ui_grid_core_utils.isVirtualRowRendering(this))&&(this._updateLoadViewportParams(),!(this._loadItems(checkLoading,!viewportIsNotFilled)||this._isLoading&&checkLoading||checkLoadedParamsOnly))){var _this$getController2,_this$getController2$,noPendingChangesInEditing=!(null!==(_this$getController2=this.getController("editing"))&&void 0!==_this$getController2&&null!==(_this$getController2$=_this$getController2.getChanges())&&void 0!==_this$getController2$&&_this$getController2$.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:noPendingChangesInEditing,cancelEmptyChanges:!0})}},updateViewport:function(){var _this$_loadViewportPa,_this$_loadViewportPa2,viewportSize=this.viewportSize(),itemCount=this.items().length,viewportIsNotFilled=viewportSize>itemCount,currentTake=null!==(_this$_loadViewportPa=null===(_this$_loadViewportPa2=this._loadViewportParams)||void 0===_this$_loadViewportPa2?void 0:_this$_loadViewportPa2.take)&&void 0!==_this$_loadViewportPa?_this$_loadViewportPa:0,rowsScrollController=this._rowsScrollController,newTake=null==rowsScrollController?void 0:rowsScrollController.getViewportParams().take;(viewportIsNotFilled||currentTake<newTake)&&!this._isPaging&&itemCount&&this.loadViewport({checkLoading:!0,viewportIsNotFilled})},loadIfNeed:function(){if(!1!==this.option("scrolling.legacyMode")){var rowsScrollController=this._rowsScrollController;rowsScrollController&&rowsScrollController.loadIfNeed();var dataSource=this._dataSource;return dataSource&&dataSource.loadIfNeed()}},getItemSize:function(){var rowsScrollController=this._rowsScrollController;if(rowsScrollController)return rowsScrollController.getItemSize.apply(rowsScrollController,arguments);var dataSource=this._dataSource;return dataSource&&dataSource.getItemSize.apply(dataSource,arguments)},getItemSizes:function(){var rowsScrollController=this._rowsScrollController;if(rowsScrollController)return rowsScrollController.getItemSizes.apply(rowsScrollController,arguments);var dataSource=this._dataSource;return dataSource&&dataSource.getItemSizes.apply(dataSource,arguments)},getContentOffset:function(){var rowsScrollController=this._rowsScrollController;if(rowsScrollController)return rowsScrollController.getContentOffset.apply(rowsScrollController,arguments);var dataSource=this._dataSource;return dataSource&&dataSource.getContentOffset.apply(dataSource,arguments)},refresh:function(options){var dataSource=this._dataSource;return dataSource&&options&&options.load&&isAppendMode(this)&&dataSource.resetCurrentTotalCount(),this.callBase.apply(this,arguments)},dispose:function(){var rowsScrollController=this._rowsScrollController;rowsScrollController&&rowsScrollController.dispose(),this.callBase.apply(this,arguments)},topItemIndex:function(){var _this$_loadViewportPa3;return null===(_this$_loadViewportPa3=this._loadViewportParams)||void 0===_this$_loadViewportPa3?void 0:_this$_loadViewportPa3.skip},bottomItemIndex:function(){var viewportParams=this._loadViewportParams;return viewportParams&&viewportParams.skip+viewportParams.take},virtualItemsCount:function(){var rowsScrollController=this._rowsScrollController;if(rowsScrollController)return rowsScrollController.virtualItemsCount.apply(rowsScrollController,arguments);var dataSource=this._dataSource;return null==dataSource?void 0:dataSource.virtualItemsCount.apply(dataSource,arguments)},pageIndex:function(_pageIndex){var _this$option,virtualPaging=isVirtualPaging(this),rowsScrollController=this._rowsScrollController;if(!1===this.option("scrolling.legacyMode")&&virtualPaging&&rowsScrollController&&void 0===_pageIndex)return null!==(_this$option=this.option("paging.pageIndex"))&&void 0!==_this$option?_this$option:0;return this.callBase.apply(this,arguments)},_fireChanged:function(e){this.callBase.apply(this,arguments);var{operationTypes}=e;if(!1===this.option("scrolling.legacyMode")&&isVirtualPaging(this)&&operationTypes){var{fullReload,pageIndex}=operationTypes;e.isDataChanged&&!fullReload&&pageIndex&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}},_getPagingOptionValue:function(optionName){var result=this.callBase.apply(this,arguments);return!1===this.option("scrolling.legacyMode")&&isVirtualPaging(this)&&(result=this[optionName]()),result},isEmpty:function(){return!1===this.option("scrolling.legacyMode")?!this.items(!0).length:this.callBase(this,arguments)},isLastPageLoaded:function(){var result=!1;if(!1===this.option("scrolling.legacyMode")&&isVirtualPaging(this)){var{pageIndex,loadPageCount}=this.getLoadPageParams(!0);result=pageIndex+loadPageCount>=this.pageCount()}else result=this.callBase.apply(this,arguments);return result},reset:function(){this._itemCount=0,this._allItems=null,this.callBase.apply(this,arguments)},_applyFilter:function(){var _this$_dataSource5;null===(_this$_dataSource5=this._dataSource)||void 0===_this$_dataSource5||_this$_dataSource5.loadPageCount(1),this.callBase.apply(this,arguments)}};return ui_grid_core_utils.proxyMethod(members,"getVirtualContentSize"),ui_grid_core_utils.proxyMethod(members,"setViewportItemIndex"),members}(),resizing:{_updateMasterDataGridCore:function(masterDataGrid){return(0,utils_deferred.gx)(this.callBase.apply(this,arguments)).done((masterDataGridUpdated=>{var isNewVirtualMode=isVirtualMode(masterDataGrid)&&!1===masterDataGrid.option("scrolling.legacyMode");!masterDataGridUpdated&&isNewVirtualMode&&(masterDataGrid.getScrollable()&&masterDataGrid.updateDimensions())}))},hasResizeTimeout:function(){return!!this._resizeTimeout},resize:function(){var result,callBase=this.callBase;if(isVirtualMode(this)||ui_grid_core_utils.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;var diff=new Date-this._lastTime,updateTimeout=this.option("scrolling.updateTimeout");this._lastTime&&diff<updateTimeout?(result=new utils_deferred.BH,this._resizeTimeout=setTimeout((()=>{this._resizeTimeout=null,callBase.apply(this).done(result.resolve).fail(result.reject),this._lastTime=new Date}),updateTimeout),this._lastTime=new Date):(result=callBase.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else result=callBase.apply(this);return result},dispose:function(){this.callBase.apply(this,arguments),clearTimeout(this._resizeTimeout)}}},views:{rowsView:VirtualScrollingRowsViewExtender}}};const oldDefaultOptions=virtualScrollingModule.defaultOptions,originalDataControllerExtender=virtualScrollingModule.extenders.controllers.data,originalDataSourceAdapterExtender=virtualScrollingModule.extenders.dataSourceAdapter;virtualScrollingModule.extenders.controllers.data=(0,extend.l)({},originalDataControllerExtender,{_loadOnOptionChange(){const virtualScrollController=this._dataSource&&this._dataSource._virtualScrollController;virtualScrollController&&virtualScrollController.reset(),this.callBase()}}),virtualScrollingModule.extenders.dataSourceAdapter=(0,extend.l)({},originalDataSourceAdapterExtender,{changeRowExpand(){return this.callBase.apply(this,arguments).done((()=>{const viewportItemIndex=this.getViewportItemIndex();viewportItemIndex>=0&&this.setViewportItemIndex(viewportItemIndex)}))}}),module_core.registerModule("virtualScrolling",(0,extend.l)({},virtualScrollingModule,{defaultOptions:()=>(0,extend.l)(!0,oldDefaultOptions(),{scrolling:{mode:"virtual"}})})),data_source_adapter_module.extend(virtualScrollingModule.extenders.dataSourceAdapter);var getElementMaxHeightByWindow=($element,startLocation)=>{var actualOffset,$window=(0,renderer.Z)((0,utils_window.Jj)()),{top:elementOffset}=$element.offset();if((0,utils_type.kE)(startLocation)){if(startLocation<elementOffset)return elementOffset-startLocation;actualOffset=(0,size.fA)($window)-startLocation+$window.scrollTop()}else{var offsetTop=elementOffset-$window.scrollTop(),offsetBottom=(0,size.fA)($window)-offsetTop-(0,size.zp)($element);actualOffset=Math.max(offsetTop,offsetBottom)}return.9*actualOffset},hover=__webpack_require__("./node_modules/devextreme/esm/events/hover.js");const ui_submenu=class Submenu extends context_menu{_getDefaultOptions(){return(0,extend.l)(super._getDefaultOptions(),{orientation:"horizontal",tabIndex:null,onHoverStart:common.ZT})}_initDataAdapter(){this._dataAdapter=this.option("_dataAdapter"),this._dataAdapter||super._initDataAdapter()}_renderContentImpl(){this._renderContextMenuOverlay(),super._renderContentImpl();var node=this._dataAdapter.getNodeByKey(this.option("_parentKey"));node&&this._renderItems(this._getChildNodes(node)),this._renderDelimiter()}_renderDelimiter(){this.$contentDelimiter=(0,renderer.Z)("<div>").appendTo(this._itemContainer()).addClass("dx-context-menu-content-delimiter")}_getOverlayOptions(){return(0,extend.l)(super._getOverlayOptions(),{onPositioned:this._overlayPositionedActionHandler.bind(this)})}_overlayPositionedActionHandler(arg){this._showDelimiter(arg)}_hoverEndHandler(e){super._hoverEndHandler(e),this._toggleFocusClass(!1,e.currentTarget)}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_hoverStartHandler(e){this.option("onHoverStart")(e),super._hoverStartHandler(e),this._toggleFocusClass(!0,e.currentTarget)}_drawSubmenu($rootItem){this._actions.onShowing({rootItem:(0,core_element.u)($rootItem),submenu:this}),super._drawSubmenu($rootItem),this._actions.onShown({rootItem:(0,core_element.u)($rootItem),submenu:this})}_hideSubmenu($rootItem){this._actions.onHiding({cancel:!0,rootItem:(0,core_element.u)($rootItem),submenu:this}),super._hideSubmenu($rootItem),this._actions.onHidden({rootItem:(0,core_element.u)($rootItem),submenu:this})}_showDelimiter(arg){if(this.$contentDelimiter){var $submenu=this._itemContainer().children(".".concat("dx-submenu")).eq(0),$rootItem=this.option("position").of,position={of:$submenu},containerOffset=arg.position,vLocation=containerOffset.v.location,hLocation=containerOffset.h.location,rootOffset=$rootItem.offset(),offsetLeft=Math.round(rootOffset.left),offsetTop=Math.round(rootOffset.top),rootWidth=(0,size.dz)($rootItem),rootHeight=(0,size.Cr)($rootItem),submenuWidth=(0,size.dz)($submenu),submenuHeight=(0,size.Cr)($submenu);this.$contentDelimiter.css("display","block"),(0,size.cl)(this.$contentDelimiter,this._isMenuHorizontal()?rootWidth<submenuWidth?rootWidth-2:submenuWidth:2),(0,size.QQ)(this.$contentDelimiter,this._isMenuHorizontal()?2:rootHeight<submenuHeight?rootHeight-2:submenuHeight),this._isMenuHorizontal()?vLocation>offsetTop?Math.round(hLocation)===offsetLeft?(position.offset="1 -1",position.at=position.my="left top"):(position.offset="-1 -1",position.at=position.my="right top"):((0,size.QQ)(this.$contentDelimiter,5),Math.round(hLocation)===offsetLeft?(position.offset="1 4",position.at=position.my="left bottom"):(position.offset="-1 2",position.at=position.my="right bottom")):hLocation>offsetLeft?Math.round(vLocation)===offsetTop?(position.offset="-1 1",position.at=position.my="left top"):(position.offset="-1 -1",position.at=position.my="left bottom"):Math.round(vLocation)===offsetTop?(position.offset="1 1",position.at=position.my="right top"):(position.offset="1 -1",position.at=position.my="right bottom"),animation_position.Z.setup(this.$contentDelimiter,position)}}_getContextMenuPosition(){return this.option("position")}isOverlayVisible(){return this._overlay.option("visible")}getOverlayContent(){return this._overlay.$content()}};var ui_menu_DEFAULT_DELAY={show:50,hide:300},ui_menu_ACTIONS=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","onItemContextMenu","onItemClick","onSelectionChanged","onItemRendered"];class Menu extends ui_menu_base{_getDefaultOptions(){return(0,extend.l)(super._getDefaultOptions(),{orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:{name:"onClick",delay:{show:50,hide:300}},hideSubmenuOnMouseLeave:!1,onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null,adaptivityEnabled:!1})}_setOptionsByReference(){super._setOptionsByReference(),(0,extend.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_itemElements(){var rootMenuElements=super._itemElements(),submenuElements=this._submenuItemElements();return rootMenuElements.add(submenuElements)}_submenuItemElements(){var elements=[],itemSelector=".".concat("dx-menu-item"),currentSubmenu=this._submenus.length&&this._submenus[0];return currentSubmenu&&currentSubmenu.itemsContainer()&&(elements=currentSubmenu.itemsContainer().find(itemSelector)),elements}_focusTarget(){return this.$element()}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_moveFocus(location){var argument,operation,$newTarget,$items=this._getAvailableItems(),isMenuHorizontal=this._isMenuHorizontal(),$activeItem=this._getActiveItem(!0);switch(location){case"up":operation=isMenuHorizontal?"showSubmenu":this._getItemsNavigationOperation("prevItem"),argument=isMenuHorizontal?$activeItem:$items,$newTarget=this._getKeyboardNavigationAction(operation,argument)();break;case"down":operation=isMenuHorizontal?"showSubmenu":this._getItemsNavigationOperation("nextItem"),argument=isMenuHorizontal?$activeItem:$items,$newTarget=this._getKeyboardNavigationAction(operation,argument)();break;case"right":operation=isMenuHorizontal?this._getItemsNavigationOperation("nextItem"):"showSubmenu",argument=isMenuHorizontal?$items:$activeItem,$newTarget=this._getKeyboardNavigationAction(operation,argument)();break;case"left":operation=isMenuHorizontal?this._getItemsNavigationOperation("prevItem"):"showSubmenu",argument=isMenuHorizontal?$items:$activeItem,$newTarget=this._getKeyboardNavigationAction(operation,argument)();break;default:return super._moveFocus(location)}$newTarget&&0!==$newTarget.length&&this.option("focusedElement",(0,core_element.u)($newTarget))}_getItemsNavigationOperation(operation){var navOperation=operation;return this.option("rtlEnabled")&&(navOperation="prevItem"===operation?"nextItem":"prevItem"),navOperation}_getKeyboardNavigationAction(operation,argument){var action=common.ZT;switch(operation){case"showSubmenu":argument.hasClass("dx-state-disabled")||(action=this._showSubmenu.bind(this,argument));break;case"nextItem":action=this._nextItem.bind(this,argument);break;case"prevItem":action=this._prevItem.bind(this,argument)}return action}_clean(){super._clean(),this.option("templatesRenderAsynchronously")&&clearTimeout(this._resizeEventTimer)}_visibilityChanged(visible){visible&&(this._menuItemsWidth||this._updateItemsWidthCache(),this._dimensionChanged())}_isAdaptivityEnabled(){return this.option("adaptivityEnabled")&&"horizontal"===this.option("orientation")}_updateItemsWidthCache(){var $menuItems=this.$element().find("ul").first().children("li").children(".".concat("dx-menu-item"));this._menuItemsWidth=this._getSummaryItemsWidth($menuItems,!0)}_dimensionChanged(){if(this._isAdaptivityEnabled()){var containerWidth=(0,size.Y_)(this.$element());this._toggleAdaptiveMode(this._menuItemsWidth>containerWidth)}}_init(){super._init(),this._submenus=[]}_initActions(){this._actions={},(0,iterator.S6)(ui_menu_ACTIONS,((index,action)=>{this._actions[action]=this._createActionByOption(action)}))}_initMarkup(){this._visibleSubmenu=null,this.$element().addClass("dx-menu"),super._initMarkup(),this._addCustomCssClass(this.$element()),this.setAria("role","menubar")}_render(){super._render(),this._initAdaptivity()}_renderHamburgerButton(){return this._hamburger=new ui_button.Z((0,renderer.Z)("<div>").addClass("dx-menu-hamburger-button"),{icon:"menu",activeStateEnabled:!1,onClick:this._toggleTreeView.bind(this)}),this._hamburger.$element()}_toggleTreeView(state){(0,utils_type.PO)(state)&&(state=!this._overlay.option("visible")),this._overlay.option("visible",state),this._toggleHamburgerActiveState(state)}_toggleHamburgerActiveState(state){this._hamburger&&this._hamburger.$element().toggleClass("dx-state-active",state)}_toggleAdaptiveMode(state){var $menuItemsContainer=this.$element().find(".".concat("dx-menu-horizontal")),$adaptiveElements=this.$element().find(".".concat("dx-menu-adaptive-mode"));state?this._hideVisibleSubmenu():(this._treeView&&this._treeView.collapseAll(),this._overlay&&this._toggleTreeView(state)),$menuItemsContainer.toggle(!state),$adaptiveElements.toggle(state)}_removeAdaptivity(){this._$adaptiveContainer&&(this._toggleAdaptiveMode(!1),this._$adaptiveContainer.remove(),this._$adaptiveContainer=null,this._treeView=null,this._hamburger=null,this._overlay=null)}_treeviewItemClickHandler(e){this._actions.onItemClick(e),e.node.children.length||this._toggleTreeView(!1)}_getAdaptiveOverlayOptions(){var position=this.option("rtlEnabled")?"right":"left";return{_ignoreFunctionValueDeprecation:!0,maxHeight:()=>getElementMaxHeightByWindow(this.$element()),deferRendering:!1,shading:!1,animation:!1,hideOnParentScroll:!0,onHidden:()=>{this._toggleHamburgerActiveState(!1)},height:"auto",hideOnOutsideClick:e=>!(0,renderer.Z)(e.target).closest(".".concat("dx-menu-hamburger-button")).length,position:{collision:"flipfit",at:"bottom "+position,my:"top "+position,of:this._hamburger.$element()}}}_getTreeViewOptions(){var menuOptions={};return(0,iterator.S6)(["rtlEnabled","width","accessKey","activeStateEnabled","animation","dataSource","disabled","displayExpr","displayExpr","focusStateEnabled","hint","hoverStateEnabled","itemsExpr","items","itemTemplate","selectedExpr","selectionMode","tabIndex","visible"],((_,option)=>{menuOptions[option]=this.option(option)})),(0,iterator.S6)(["onItemContextMenu","onSelectionChanged","onItemRendered"],((_,actionName)=>{menuOptions[actionName]=e=>{this._actions[actionName](e)}})),(0,extend.l)(menuOptions,{dataSource:this.getDataSource(),animationEnabled:!!this.option("animation"),onItemClick:this._treeviewItemClickHandler.bind(this),onItemExpanded:e=>{this._overlay.repaint(),this._actions.onSubmenuShown(e)},onItemCollapsed:e=>{this._overlay.repaint(),this._actions.onSubmenuHidden(e)},selectNodesRecursive:!1,selectByClick:this.option("selectByClick"),expandEvent:"click"})}_initAdaptivity(){if(this._isAdaptivityEnabled()){this._$adaptiveContainer=(0,renderer.Z)("<div>").addClass("dx-menu-adaptive-mode");var $hamburger=this._renderHamburgerButton();this._treeView=this._createComponent((0,renderer.Z)("<div>"),tree_view.Z,this._getTreeViewOptions()),this._overlay=this._createComponent((0,renderer.Z)("<div>"),ui_overlay.Z,this._getAdaptiveOverlayOptions()),this._overlay.$content().append(this._treeView.$element()).addClass("dx-menu-adaptive-mode").addClass(this.option("cssClass")),this._overlay.$wrapper().addClass("dx-menu-adaptive-mode-overlay-wrapper"),this._$adaptiveContainer.append($hamburger),this._$adaptiveContainer.append(this._overlay.$element()),this.$element().append(this._$adaptiveContainer),this._updateItemsWidthCache(),this._dimensionChanged()}}_getDelay(delayType){var delay=this.option("showFirstSubmenuMode").delay;return(0,utils_type.$K)(delay)?(0,utils_type.Kn)(delay)?delay[delayType]:delay:ui_menu_DEFAULT_DELAY[delayType]}_keyboardHandler(e){return super._keyboardHandler(e,!!this._visibleSubmenu)}_renderContainer(){var $wrapper=(0,renderer.Z)("<div>");return $wrapper.appendTo(this.$element()).addClass(this._isMenuHorizontal()?"dx-menu-horizontal":"dx-menu-vertical"),super._renderContainer($wrapper)}_renderSubmenuItems(node,$itemFrame){var submenu=this._createSubmenu(node,$itemFrame);return this._submenus.push(submenu),this._renderBorderElement($itemFrame),submenu}_getKeyboardListeners(){return super._getKeyboardListeners().concat(this._visibleSubmenu)}_createSubmenu(node,$rootItem){var $submenuContainer=(0,renderer.Z)("<div>").addClass("dx-context-menu").appendTo($rootItem),items=this._getChildNodes(node),subMenu=this._createComponent($submenuContainer,ui_submenu,(0,extend.l)(this._getSubmenuOptions(),{_dataAdapter:this._dataAdapter,_parentKey:node.internalFields.key,items,onHoverStart:this._clearTimeouts.bind(this),position:this.getSubmenuPosition($rootItem)}));return this._attachSubmenuHandlers($rootItem,subMenu),subMenu}_getSubmenuOptions(){var $submenuTarget=(0,renderer.Z)("<div>"),isMenuHorizontal=this._isMenuHorizontal();return{itemTemplate:this.option("itemTemplate"),target:$submenuTarget,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),cssClass:this.option("cssClass"),selectByClick:this.option("selectByClick"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),showSubmenuMode:this.option("showSubmenuMode"),displayExpr:this.option("displayExpr"),disabledExpr:this.option("disabledExpr"),selectedExpr:this.option("selectedExpr"),itemsExpr:this.option("itemsExpr"),onFocusedItemChanged:e=>{e.component.option("visible")&&this.option("focusedElement",e.component.option("focusedElement"))},onSelectionChanged:this._nestedItemOnSelectionChangedHandler.bind(this),onItemClick:this._nestedItemOnItemClickHandler.bind(this),onItemRendered:this._nestedItemOnItemRenderedHandler.bind(this),onLeftFirstItem:isMenuHorizontal?null:this._moveMainMenuFocus.bind(this,"prevItem"),onLeftLastItem:isMenuHorizontal?null:this._moveMainMenuFocus.bind(this,"nextItem"),onCloseRootSubmenu:this._moveMainMenuFocus.bind(this,isMenuHorizontal?"prevItem":null),onExpandLastSubmenu:isMenuHorizontal?this._moveMainMenuFocus.bind(this,"nextItem"):null}}_getShowFirstSubmenuMode(){if(!this._isDesktopDevice())return"onClick";var optionValue=this.option("showFirstSubmenuMode");return(0,utils_type.Kn)(optionValue)?optionValue.name:optionValue}_moveMainMenuFocus(direction){var $items=this._getAvailableItems(),itemCount=$items.length,$currentItem=$items.filter(".".concat("dx-menu-item-expanded")).eq(0),itemIndex=$items.index($currentItem);this._hideSubmenu(this._visibleSubmenu),(itemIndex+="prevItem"===direction?-1:1)>=itemCount?itemIndex=0:itemIndex<0&&(itemIndex=itemCount-1);var $newItem=$items.eq(itemIndex);this.option("focusedElement",(0,core_element.u)($newItem))}_nestedItemOnSelectionChangedHandler(args){var selectedItem=args.addedItems.length&&args.addedItems[0],submenu=ui_submenu.getInstance(args.element);(0,this._actions.onSelectionChanged)(args),selectedItem&&this._clearSelectionInSubmenus(selectedItem[0],submenu),this._clearRootSelection(),this._setOptionWithoutOptionChange("selectedItem",selectedItem)}_clearSelectionInSubmenus(item,targetSubmenu){var cleanAllSubmenus=!arguments.length;(0,iterator.S6)(this._submenus,((index,submenu)=>{var $submenu=submenu._itemContainer(),isOtherItem=!$submenu.is(targetSubmenu&&targetSubmenu._itemContainer()),$selectedItem=$submenu.find(".".concat(this._selectedItemClass()));if(isOtherItem&&$selectedItem.length||cleanAllSubmenus){$selectedItem.removeClass(this._selectedItemClass());var selectedItemData=this._getItemData($selectedItem);selectedItemData&&(selectedItemData.selected=!1),submenu._clearSelectedItems()}}))}_clearRootSelection(){var $prevSelectedItem=this.$element().find(".".concat("dx-menu-items-container")).first().children().children().filter(".".concat(this._selectedItemClass()));$prevSelectedItem.length&&(this._getItemData($prevSelectedItem).selected=!1,$prevSelectedItem.removeClass(this._selectedItemClass()))}_nestedItemOnItemClickHandler(e){this._actions.onItemClick(e)}_nestedItemOnItemRenderedHandler(e){this._actions.onItemRendered(e)}_attachSubmenuHandlers($rootItem,submenu){var submenus=submenu.getOverlayContent().find(".".concat("dx-submenu")),submenuMouseLeaveName=(0,events_utils.V4)(hover.u,this.NAME+"_submenu");submenu.option({onShowing:this._submenuOnShowingHandler.bind(this,$rootItem,submenu),onShown:this._submenuOnShownHandler.bind(this,$rootItem,submenu),onHiding:this._submenuOnHidingHandler.bind(this,$rootItem,submenu),onHidden:this._submenuOnHiddenHandler.bind(this,$rootItem,submenu)}),(0,iterator.S6)(submenus,((index,submenu)=>{events_engine.Z.off(submenu,submenuMouseLeaveName),events_engine.Z.on(submenu,submenuMouseLeaveName,null,this._submenuMouseLeaveHandler.bind(this,$rootItem))}))}_submenuOnShowingHandler($rootItem,submenu){var $border=$rootItem.children(".".concat("dx-context-menu-container-border"));this._actions.onSubmenuShowing({rootItem:(0,core_element.u)($rootItem),submenu}),$border.show(),$rootItem.addClass("dx-menu-item-expanded")}_submenuOnShownHandler($rootItem,submenu){this._actions.onSubmenuShown({rootItem:(0,core_element.u)($rootItem),submenu})}_submenuOnHidingHandler($rootItem,submenu,eventArgs){var $border=$rootItem.children(".".concat("dx-context-menu-container-border")),args=eventArgs;args.rootItem=(0,core_element.u)($rootItem),args.submenu=submenu,this._actions.onSubmenuHiding(args),(eventArgs=args).cancel||(this._visibleSubmenu===submenu&&(this._visibleSubmenu=null),$border.hide(),$rootItem.removeClass("dx-menu-item-expanded"))}_submenuOnHiddenHandler($rootItem,submenu){this._actions.onSubmenuHidden({rootItem:(0,core_element.u)($rootItem),submenu})}_submenuMouseLeaveHandler($rootItem,eventArgs){var target=(0,renderer.Z)(eventArgs.relatedTarget).parents(".".concat("dx-context-menu"))[0],contextMenu=this._getSubmenuByRootElement($rootItem).getOverlayContent()[0];this.option("hideSubmenuOnMouseLeave")&&target!==contextMenu&&(this._clearTimeouts(),setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")))}_hideSubmenuAfterTimeout(){if(this._visibleSubmenu){var isRootItemHovered=(0,renderer.Z)(this._visibleSubmenu.$element().context).hasClass("dx-state-hover"),isSubmenuItemHovered=this._visibleSubmenu.getOverlayContent().find(".".concat("dx-state-hover")).length;this._visibleSubmenu.getOverlayContent().get(0).querySelector(":hover")||isSubmenuItemHovered||isRootItemHovered||this._visibleSubmenu.hide()}}_getSubmenuByRootElement($rootItem){if(!$rootItem)return!1;var $submenu=$rootItem.children(".".concat("dx-context-menu"));return $submenu.length&&ui_submenu.getInstance($submenu)}getSubmenuPosition($rootItem){var isHorizontalMenu=this._isMenuHorizontal(),submenuDirection=this.option("submenuDirection").toLowerCase(),rtlEnabled=this.option("rtlEnabled"),submenuPosition={collision:"flip",of:$rootItem};switch(submenuDirection){case"leftortop":submenuPosition.at="left top",submenuPosition.my=isHorizontalMenu?"left bottom":"right top";break;case"rightorbottom":submenuPosition.at=isHorizontalMenu?"left bottom":"right top",submenuPosition.my="left top";break;default:isHorizontalMenu?(submenuPosition.at=rtlEnabled?"right bottom":"left bottom",submenuPosition.my=rtlEnabled?"right top":"left top"):(submenuPosition.at=rtlEnabled?"left top":"right top",submenuPosition.my=rtlEnabled?"right top":"left top")}return submenuPosition}_renderBorderElement($item){(0,renderer.Z)("<div>").appendTo($item).addClass("dx-context-menu-container-border").hide()}_itemPointerDownHandler(e){(0,renderer.Z)(e.target).closest(this._itemElements()).hasClass("dx-menu-item-has-submenu")?this.option("focusedElement",null):super._itemPointerDownHandler(e)}_hoverStartHandler(e){var mouseMoveEventName=(0,events_utils.V4)(pointer.Z.move,this.NAME),$item=this._getItemElementByEventArgs(e),node=this._dataAdapter.getNodeByItem(this._getItemData($item)),isSelectionActive=(0,utils_type.$K)(e.buttons)&&1===e.buttons||!(0,utils_type.$K)(e.buttons)&&1===e.which;if(!this._isItemDisabled($item))if(events_engine.Z.off($item,mouseMoveEventName),this._hasChildren(node)){if("onHover"===this._getShowFirstSubmenuMode()&&!isSelectionActive){var submenu=this._getSubmenuByElement($item);this._clearTimeouts(),submenu.isOverlayVisible()||(events_engine.Z.on($item,mouseMoveEventName,this._itemMouseMoveHandler.bind(this)),this._showSubmenuTimer=this._getDelay("hide"))}}else this._showSubmenuTimer=setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide"))}_hoverEndHandler(eventArg){var $item=this._getItemElementByEventArgs(eventArg),relatedTarget=(0,renderer.Z)(eventArg.relatedTarget);super._hoverEndHandler(eventArg),this._clearTimeouts(),this._isItemDisabled($item)||relatedTarget.hasClass("dx-context-menu-content-delimiter")||this.option("hideSubmenuOnMouseLeave")&&!relatedTarget.hasClass("dx-menu-items-container")&&(this._hideSubmenuTimer=setTimeout((()=>{this._hideSubmenuAfterTimeout()}),this._getDelay("hide")))}_hideVisibleSubmenu(){return!!this._visibleSubmenu&&(this._hideSubmenu(this._visibleSubmenu),!0)}_showSubmenu($itemElement){var submenu=this._getSubmenuByElement($itemElement);this._visibleSubmenu!==submenu&&this._hideVisibleSubmenu(),submenu&&(this._clearTimeouts(),this.focus(),submenu.show(),this.option("focusedElement",submenu.option("focusedElement"))),this._visibleSubmenu=submenu,this._hoveredRootItem=$itemElement}_hideSubmenu(submenu){submenu&&submenu.hide(),this._visibleSubmenu===submenu&&(this._visibleSubmenu=null),this._hoveredRootItem=null}_itemMouseMoveHandler(e){if(!e.pointers||!e.pointers.length){var $item=(0,renderer.Z)(e.currentTarget);(0,utils_type.$K)(this._showSubmenuTimer)&&(this._clearTimeouts(),this._showSubmenuTimer=setTimeout((()=>{var submenu=this._getSubmenuByElement($item);submenu&&!submenu.isOverlayVisible()&&this._showSubmenu($item)}),this._getDelay("show")))}}_clearTimeouts(){clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer)}_getSubmenuByElement($itemElement,itemData){var submenu=this._getSubmenuByRootElement($itemElement);if(submenu)return submenu;itemData=itemData||this._getItemData($itemElement);var node=this._dataAdapter.getNodeByItem(itemData);return this._hasChildren(node)&&this._renderSubmenuItems(node,$itemElement)}_updateSubmenuVisibilityOnClick(actionArgs){var args=actionArgs.args.length&&actionArgs.args[0];if(args&&!this._disabledGetter(args.itemData)){var $itemElement=(0,renderer.Z)(args.itemElement),currentSubmenu=this._getSubmenuByElement($itemElement,args.itemData);if(this._updateSelectedItemOnClick(actionArgs),this._visibleSubmenu){if(this._visibleSubmenu===currentSubmenu)return void("onClick"===this.option("showFirstSubmenuMode")&&this._hideSubmenu(this._visibleSubmenu));this._hideSubmenu(this._visibleSubmenu)}currentSubmenu&&(currentSubmenu.isOverlayVisible()||this._showSubmenu($itemElement))}}_optionChanged(args){if(ui_menu_ACTIONS.indexOf(args.name)>=0)this._initActions();else switch(args.name){case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":case"hideSubmenuOnMouseLeave":break;case"showSubmenuMode":this._changeSubmenusOption(args.name,args.value);break;case"adaptivityEnabled":args.value?this._initAdaptivity():this._removeAdaptivity();break;case"width":this._isAdaptivityEnabled()&&(this._treeView.option(args.name,args.value),this._overlay.option(args.name,args.value)),super._optionChanged(args),this._dimensionChanged();break;case"animation":this._isAdaptivityEnabled()&&this._treeView.option("animationEnabled",!!args.value),super._optionChanged(args);break;default:!this._isAdaptivityEnabled()||args.name!==args.fullName&&"items"!==args.name||this._treeView.option(args.fullName,args.value),super._optionChanged(args)}}_changeSubmenusOption(name,value){(0,iterator.S6)(this._submenus,((index,submenu)=>{submenu.option(name,value)}))}selectItem(itemElement){this._hideSubmenu(this._visibleSubmenu),super.selectItem(itemElement)}unselectItem(itemElement){this._hideSubmenu(this._visibleSubmenu),super.selectItem(itemElement)}}(0,component_registrator.Z)("dxMenu",Menu);const esm_ui_menu=Menu;var OPERATION_ICONS={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},OPERATION_DESCRIPTORS={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},BETWEEN_OPERATION_DATA_TYPES=["date","datetime","number"];function isOnClickApplyFilterMode(that){return"onClick"===that.option("filterRow.applyFilter")}var getEditorInstance=function($editorContainer){var $editor=$editorContainer&&$editorContainer.children(),componentNames=$editor&&$editor.data("dxComponents"),editor=componentNames&&componentNames.length&&$editor.data(componentNames[0]);if(editor instanceof editor_editor.Z)return editor},ColumnHeadersViewFilterRowExtender=function(){var getRangeTextByFilterValue=function(that,column){var result="",rangeEnd="",filterValue=getColumnFilterValue(that,column),formatOptions=ui_grid_core_utils.getFormatOptionsByColumn(column,"filterRow");return Array.isArray(filterValue)?(result=ui_grid_core_utils.formatValue(filterValue[0],formatOptions),""!==(rangeEnd=ui_grid_core_utils.formatValue(filterValue[1],formatOptions))&&(result+=" - "+rangeEnd)):(0,utils_type.$K)(filterValue)&&(result=ui_grid_core_utils.formatValue(filterValue,formatOptions)),result};function getColumnFilterValue(that,column){if(column)return isOnClickApplyFilterMode(that)&&void 0!==column.bufferedFilterValue?column.bufferedFilterValue:column.filterValue}var getColumnSelectedFilterOperation=function(that,column){if(column)return isOnClickApplyFilterMode(that)&&void 0!==column.bufferedSelectedFilterOperation?column.bufferedSelectedFilterOperation:column.selectedFilterOperation},getFilterValue=function(that,columnIndex,$editorContainer){var column=that._columnsController.columnOption(columnIndex),filterValue=getColumnFilterValue(that,column),isFilterRange=$editorContainer.closest("."+that.addWidgetPrefix("filter-range-overlay")).length,isRangeStart=$editorContainer.hasClass(that.addWidgetPrefix("filter-range-start"));return filterValue&&Array.isArray(filterValue)&&"between"===getColumnSelectedFilterOperation(that,column)?isRangeStart?filterValue[0]:filterValue[1]:!isFilterRange&&function(filterValue,column){return!(column&&BETWEEN_OPERATION_DATA_TYPES.indexOf(column.dataType)>=0&&Array.isArray(filterValue))&&void 0!==filterValue}(filterValue,column)?filterValue:null};return{_updateEditorValue:function(column,$editorContainer){var editor=getEditorInstance($editorContainer);editor&&editor.option("value",getFilterValue(this,column.index,$editorContainer))},_columnOptionChanged:function(e){var $cell,$editorContainer,$editorRangeElements,$menu,optionNames=e.optionNames;if(ui_grid_core_utils.checkChanges(optionNames,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&void 0!==e.columnIndex){var visibleIndex=this._columnsController.getVisibleIndex(e.columnIndex),column=this._columnsController.columnOption(e.columnIndex);if($editorContainer=($cell=this._getCellElement(this.element().find("."+this.addWidgetPrefix("filter-row")).index(),visibleIndex)||(0,renderer.Z)()).find(".dx-editor-container").first(),optionNames.filterValue||optionNames.bufferedFilterValue){this._updateEditorValue(column,$editorContainer);var overlayInstance=$cell.find("."+this.addWidgetPrefix("filter-range-overlay")).data("dxOverlay");overlayInstance&&($editorRangeElements=overlayInstance.$content().find(".dx-editor-container"),this._updateEditorValue(column,$editorRangeElements.first()),this._updateEditorValue(column,$editorRangeElements.last())),overlayInstance&&overlayInstance.option("visible")||this._updateFilterRangeContent($cell,getRangeTextByFilterValue(this,column))}(optionNames.selectedFilterOperation||optionNames.bufferedSelectedFilterOperation)&&visibleIndex>=0&&column&&($menu=$cell.find(".dx-menu")).length&&(this._updateFilterOperationChooser($menu,column,$editorContainer),"between"===getColumnSelectedFilterOperation(this,column)?this._renderFilterRangeContent($cell,column):$editorContainer.find(".dx-filter-range-content").length&&(this._renderEditor($editorContainer,this._getEditorOptions($editorContainer,column)),this._hideFilterRange()))}else this.callBase(e)},_renderCore:function(){return this._filterRangeOverlayInstance=null,this.callBase.apply(this,arguments)},_resizeCore:function(){this.callBase.apply(this,arguments),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.repaint()},isFilterRowVisible:function(){return this._isElementVisible(this.option("filterRow"))},isVisible:function(){return this.callBase()||this.isFilterRowVisible()},init:function(){this.callBase(),this._applyFilterViewController=this.getController("applyFilter")},_initFilterRangeOverlay:function($cell,column){var that=this,sharedData={},$editorContainer=$cell.find(".dx-editor-container"),filterRangeOverlayClass=that.addWidgetPrefix("filter-range-overlay"),$overlay=(0,renderer.Z)("<div>").addClass(filterRangeOverlayClass).appendTo($cell);return that._createComponent($overlay,ui_overlay.Z,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:filterRangeOverlayClass},animation:!1,position:{my:"top",at:"top",of:$editorContainer.length&&$editorContainer||$cell,offset:"0 -1"},contentTemplate:function(contentElement){var editorOptions,$editor=(0,renderer.Z)("<div>").addClass("dx-editor-container "+that.addWidgetPrefix("filter-range-start")).appendTo(contentElement);return column=that._columnsController.columnOption(column.index),(editorOptions=that._getEditorOptions($editor,column)).sharedData=sharedData,that._renderEditor($editor,editorOptions),events_engine.Z.on($editor.find("input:not([type='hidden'])"),"keydown",(function(e){var $prevElement=$cell.find("[tabindex]").not(e.target).first();"tab"===(0,events_utils.EV)(e)&&e.shiftKey&&(e.preventDefault(),that._hideFilterRange(),$prevElement.length||($prevElement=$cell.prev().find("[tabindex]").last()),events_engine.Z.trigger($prevElement,"focus"))})),$editor=(0,renderer.Z)("<div>").addClass("dx-editor-container "+that.addWidgetPrefix("filter-range-end")).appendTo(contentElement),(editorOptions=that._getEditorOptions($editor,column)).sharedData=sharedData,that._renderEditor($editor,editorOptions),events_engine.Z.on($editor.find("input:not([type='hidden'])"),"keydown",(function(e){"tab"!==(0,events_utils.EV)(e)||e.shiftKey||(e.preventDefault(),that._hideFilterRange(),events_engine.Z.trigger($cell.next().find("[tabindex]").first(),"focus"))})),(0,renderer.Z)(contentElement).addClass(that.getWidgetContainerClass())},onShown:function(e){var $editor=e.component.$content().find(".dx-editor-container").first();events_engine.Z.trigger($editor.find("input:not([type='hidden'])"),"focus")},onHidden:function(){column=that._columnsController.columnOption(column.index),$cell.find(".dx-menu").parent().addClass("dx-editor-with-menu"),"between"===getColumnSelectedFilterOperation(that,column)&&(that._updateFilterRangeContent($cell,getRangeTextByFilterValue(that,column)),that.component.updateDimensions())}})},_updateFilterRangeOverlay:function(options){var overlayInstance=this._filterRangeOverlayInstance;overlayInstance&&overlayInstance.option(options)},_showFilterRange:function($cell,column){var $overlay=$cell.children("."+this.addWidgetPrefix("filter-range-overlay")),overlayInstance=$overlay.length&&$overlay.data("dxOverlay");!overlayInstance&&column&&(overlayInstance=this._initFilterRangeOverlay($cell,column)),overlayInstance.option("visible")||(this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.hide(),this._filterRangeOverlayInstance=overlayInstance,this._updateFilterRangeOverlay({width:(0,size.Y_)($cell,!0)+1}),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.show())},_hideFilterRange:function(){var overlayInstance=this._filterRangeOverlayInstance;overlayInstance&&overlayInstance.hide()},getFilterRangeOverlayInstance:function(){return this._filterRangeOverlayInstance},_createRow:function(row){var $row=this.callBase(row);return"filter"===row.rowType&&($row.addClass(this.addWidgetPrefix("filter-row")),this.option("useLegacyKeyboardNavigation")||events_engine.Z.on($row,"keydown",(event=>selectView("filterRow",this,event)))),$row},_getRows:function(){var result=this.callBase();return this.isFilterRowVisible()&&result.push({rowType:"filter"}),result},_renderFilterCell:function(cell,options){var column=options.column,$cell=(0,renderer.Z)(cell);this.component.option("showColumnHeaders")&&this.setAria("describedby",column.headerId,$cell),this.setAria("label",message.Z.format("dxDataGrid-ariaFilterCell"),$cell),$cell.addClass("dx-editor-cell");var $container=(0,renderer.Z)("<div>").appendTo($cell),$editorContainer=(0,renderer.Z)("<div>").addClass("dx-editor-container").appendTo($container);if("between"===getColumnSelectedFilterOperation(this,column))this._renderFilterRangeContent($cell,column);else{var editorOptions=this._getEditorOptions($editorContainer,column);this._renderEditor($editorContainer,editorOptions)}var alignment=column.alignment;alignment&&"center"!==alignment&&$cell.find("input:not([type='hidden'])").first().css("textAlign",column.alignment),column.filterOperations&&column.filterOperations.length&&this._renderFilterOperationChooser($container,column,$editorContainer)},_renderCellContent:function($cell,options){var that=this,column=options.column;if("filter"===options.rowType)if(column.command)$cell.html("&nbsp;");else if(column.allowFiltering)return void that.renderTemplate($cell,that._renderFilterCell.bind(that),options).done((()=>{that._updateCell($cell,options)}));this.callBase.apply(this,arguments)},_getEditorOptions:function($editorContainer,column){var that=this,accessibilityOptions={editorOptions:{inputAttr:that._getFilterInputAccessibilityAttributes(column)}},result=(0,extend.l)(accessibilityOptions,column,{value:getFilterValue(that,column.index,$editorContainer),parentType:"filterRow",showAllText:that.option("filterRow.showAllText"),updateValueTimeout:"onClick"===that.option("filterRow.applyFilter")?0:700,width:null,setValue:function(value,notFireEvent){!function(that,options){var value=""===options.value?null:options.value,$editorContainer=options.container,column=that._columnsController.columnOption(options.column.index),filterValue=getFilterValue(that,column.index,$editorContainer);if((0,utils_type.$K)(filterValue)||(0,utils_type.$K)(value)){that._applyFilterViewController.setHighLight($editorContainer,filterValue!==value);var columnOptionName=isOnClickApplyFilterMode(that)?"bufferedFilterValue":"filterValue",normalizedValue=function(that,filterValue,column,$editorContainer){if("between"===getColumnSelectedFilterOperation(that,column)){var columnFilterValue=getColumnFilterValue(that,column);return $editorContainer.hasClass(that.addWidgetPrefix("filter-range-start"))?[filterValue,Array.isArray(columnFilterValue)?columnFilterValue[1]:void 0]:[Array.isArray(columnFilterValue)?columnFilterValue[0]:columnFilterValue,filterValue]}return filterValue}(that,value,column,$editorContainer),isBetween="between"===getColumnSelectedFilterOperation(that,column),notFireEvent=options.notFireEvent||isBetween&&Array.isArray(normalizedValue)&&normalizedValue.indexOf(void 0)>=0;that._columnsController.columnOption(column.index,columnOptionName,normalizedValue,notFireEvent)}}(that,{column,value,container:$editorContainer,notFireEvent})}});return"between"===getColumnSelectedFilterOperation(that,column)&&($editorContainer.hasClass(that.addWidgetPrefix("filter-range-start"))?result.placeholder=that.option("filterRow.betweenStartText"):result.placeholder=that.option("filterRow.betweenEndText")),result},_getFilterInputAccessibilityAttributes:function(column){var columnAriaLabel=message.Z.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":columnAriaLabel,"aria-describedby":column.headerId}:{"aria-label":columnAriaLabel}},_renderEditor:function($editorContainer,options){$editorContainer.empty();var $element=(0,renderer.Z)("<div>").appendTo($editorContainer),editorController=this.getController("editorFactory"),dataSource=this.getController("data").dataSource(),filterRowController=this.getController("applyFilter");if(options.lookup&&this.option("syncLookupFilterValues")){filterRowController.setCurrentColumnForFiltering(options);var filter=this.getController("data").getCombinedFilter();filterRowController.setCurrentColumnForFiltering(null);var lookupDataSource=ui_grid_core_utils.getWrappedLookupDataSource(options,dataSource,filter),lookupOptions=(0,esm_extends.Z)({},options,{lookup:(0,esm_extends.Z)({},options.lookup,{dataSource:lookupDataSource})});return editorController.createEditor($element,lookupOptions)}return editorController.createEditor($element,options)},_renderFilterRangeContent:function($cell,column){var that=this,$editorContainer=$cell.find(".dx-editor-container").first();$editorContainer.empty();var $filterRangeContent=(0,renderer.Z)("<div>").addClass("dx-filter-range-content").attr("tabindex",this.option("tabIndex"));events_engine.Z.on($filterRangeContent,"focusin",(function(){that._showFilterRange($cell,column)})),$filterRangeContent.appendTo($editorContainer),that._updateFilterRangeContent($cell,getRangeTextByFilterValue(that,column))},_updateFilterRangeContent:function($cell,value){var $filterRangeContent=$cell.find(".dx-filter-range-content");$filterRangeContent.length&&(""===value?$filterRangeContent.html("&nbsp;"):$filterRangeContent.text(value))},_updateFilterOperationChooser:function($menu,column,$editorContainer){var isCellWasFocused,that=this,restoreFocus=function(){var menu=esm_ui_menu.getInstance($menu);menu&&menu.option("focusedElement",null),isCellWasFocused&&that._focusEditor($editorContainer)};that._createComponent($menu,esm_ui_menu,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:that.getWidgetContainerClass()+" dx-cell-focus-disabled dx-filter-menu",showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{disabled:!column.filterOperations||!column.filterOperations.length,icon:OPERATION_ICONS[getColumnSelectedFilterOperation(that,column)||"default"],selectable:!1,items:that._getFilterOperationMenuItems(column)}],onItemClick:function(properties){var selectedFilterOperation=properties.itemData.name,columnSelectedFilterOperation=getColumnSelectedFilterOperation(that,column),notFocusEditor=!1,isOnClickMode=isOnClickApplyFilterMode(that),options={};if(!(properties.itemData.items||selectedFilterOperation&&selectedFilterOperation===columnSelectedFilterOperation)){if(selectedFilterOperation?(options[isOnClickMode?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=selectedFilterOperation,"between"!==selectedFilterOperation&&"between"!==columnSelectedFilterOperation||(notFocusEditor="between"===selectedFilterOperation,options[isOnClickMode?"bufferedFilterValue":"filterValue"]=null)):(options[isOnClickMode?"bufferedFilterValue":"filterValue"]=null,options[isOnClickMode?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=column.defaultSelectedFilterOperation||null),that._columnsController.columnOption(column.index,options),that._applyFilterViewController.setHighLight($editorContainer,!0),!selectedFilterOperation){var editor=getEditorInstance($editorContainer);editor&&"dxDateBox"===editor.NAME&&!editor.option("isValid")&&(editor.reset(),editor.option("isValid",!0))}notFocusEditor?that._showFilterRange($editorContainer.closest(".dx-editor-cell"),column):that._focusEditor($editorContainer)}},onSubmenuShowing:function(){isCellWasFocused=that._isEditorFocused($editorContainer),that.getController("editorFactory").loseFocus()},onSubmenuHiding:function(){events_engine.Z.trigger($menu,"blur"),restoreFocus()},onContentReady:function(e){events_engine.Z.on($menu,"blur",(()=>{e.component._hideSubmenuAfterTimeout(),restoreFocus()}))},rtlEnabled:that.option("rtlEnabled")})},_isEditorFocused:function($container){return $container.hasClass("dx-focused")||$container.parents(".dx-focused").length},_focusEditor:function($container){this.getController("editorFactory").focus($container),events_engine.Z.trigger($container.find("input:not([type='hidden'])"),"focus")},_renderFilterOperationChooser:function($container,column,$editorContainer){var $menu;this.option("filterRow.showOperationChooser")&&($container.addClass("dx-editor-with-menu"),$menu=(0,renderer.Z)("<div>").prependTo($container),this._updateFilterOperationChooser($menu,column,$editorContainer))},_getFilterOperationMenuItems:function(column){var that=this,result=[{}],filterRowOptions=that.option("filterRow"),operationDescriptions=filterRowOptions&&filterRowOptions.operationDescriptions||{};if(column.filterOperations&&column.filterOperations.length){var availableFilterOperations=column.filterOperations.filter((function(value){return(0,utils_type.$K)(OPERATION_DESCRIPTORS[value])}));(result=(0,iterator.UI)(availableFilterOperations,(function(value){var descriptionName=OPERATION_DESCRIPTORS[value];return{name:value,selected:(getColumnSelectedFilterOperation(that,column)||column.defaultFilterOperation)===value,text:operationDescriptions[descriptionName],icon:OPERATION_ICONS[value]}}))).push({name:null,text:filterRowOptions&&filterRowOptions.resetOperationText,icon:OPERATION_ICONS.default})}return result},_handleDataChanged:function(e){var _e$operationTypes,_e$operationTypes2,_e$operationTypes3;(this.callBase.apply(this,arguments),null!==(_e$operationTypes=e.operationTypes)&&void 0!==_e$operationTypes&&_e$operationTypes.filtering||null!==(_e$operationTypes2=e.operationTypes)&&void 0!==_e$operationTypes2&&_e$operationTypes2.fullReload)&&this.updateLookupDataSource(null===(_e$operationTypes3=e.operationTypes)||void 0===_e$operationTypes3?void 0:_e$operationTypes3.filtering)},updateLookupDataSource:function(filterChanged){if(this.option("syncLookupFilterValues")&&this.element()){var columns=this._columnsController.getVisibleColumns(),dataSource=this._dataController.dataSource(),applyFilterViewController=this._applyFilterViewController,rowIndex=this.element().find("."+this.addWidgetPrefix("filter-row")).index();-1!==rowIndex&&columns.forEach(((column,index)=>{if(column.lookup&&column.calculateCellValue===column.defaultCalculateCellValue){var $cell=this._getCellElement(rowIndex,index),editor=getEditorInstance(null==$cell?void 0:$cell.find(".dx-editor-container"));if(editor){applyFilterViewController.setCurrentColumnForFiltering(column);var filter=this._dataController.getCombinedFilter()||null;applyFilterViewController.setCurrentColumnForFiltering(null);var editorDataSource=editor.option("dataSource");if(!filterChanged||!(0,common.bY)(editorDataSource.__dataGridSourceFilter,filter)){var lookupDataSource=ui_grid_core_utils.getWrappedLookupDataSource(column,dataSource,filter);editor.option("dataSource",lookupDataSource)}}}}))}},optionChanged:function(args){switch(args.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),args.handled=!0;break;case"syncLookupFilterValues":args.value?this.updateLookupDataSource():this.render(),args.handled=!0;break;default:this.callBase(args)}}}}(),DataControllerFilterRowExtender={skipCalculateColumnFilters:function(){return!1},_calculateAdditionalFilter:function(){if(this.skipCalculateColumnFilters())return this.callBase();var filters=[this.callBase()],columns=this._columnsController.getVisibleColumns(null,!0),filterRowController=this.getController("applyFilter");return(0,iterator.S6)(columns,(function(){var _filterRowController$,shouldSkip=(null===(_filterRowController$=filterRowController.getCurrentColumnForFiltering())||void 0===_filterRowController$?void 0:_filterRowController$.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&(0,utils_type.$K)(this.filterValue)&&!shouldSkip){var filter=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");filters.push(filter)}})),ui_grid_core_utils.combineFilters(filters)}},filterRowModule={defaultOptions:function(){return{syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:message.Z.format("dxDataGrid-filterRowShowAllText"),resetOperationText:message.Z.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:message.Z.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:message.Z.format("dxDataGrid-filterRowOperationEquals"),notEqual:message.Z.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:message.Z.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:message.Z.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:message.Z.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:message.Z.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:message.Z.format("dxDataGrid-filterRowOperationStartsWith"),contains:message.Z.format("dxDataGrid-filterRowOperationContains"),notContains:message.Z.format("dxDataGrid-filterRowOperationNotContains"),endsWith:message.Z.format("dxDataGrid-filterRowOperationEndsWith"),between:message.Z.format("dxDataGrid-filterRowOperationBetween"),isBlank:message.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:message.Z.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:message.Z.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:message.Z.format("dxDataGrid-filterRowOperationBetweenEndText")}}},controllers:{applyFilter:ui_grid_core_modules.ViewController.inherit({_getHeaderPanel:function(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel},setHighLight:function($element,value){isOnClickApplyFilterMode(this)&&($element&&$element.toggleClass("dx-highlight-outline",value)&&$element.closest(".dx-editor-cell").toggleClass("dx-filter-modified",value),this._getHeaderPanel().enableApplyButton(value))},applyFilter:function(){var columnsController=this.getController("columns"),columns=columnsController.getColumns();columnsController.beginUpdate();for(var i=0;i<columns.length;i++){var column=columns[i];void 0!==column.bufferedFilterValue&&(columnsController.columnOption(i,"filterValue",column.bufferedFilterValue),column.bufferedFilterValue=void 0),void 0!==column.bufferedSelectedFilterOperation&&(columnsController.columnOption(i,"selectedFilterOperation",column.bufferedSelectedFilterOperation),column.bufferedSelectedFilterOperation=void 0)}columnsController.endUpdate(),this.removeHighLights()},removeHighLights:function(){if(isOnClickApplyFilterMode(this)){var columnHeadersViewElement=this.getView("columnHeadersView").element();columnHeadersViewElement.find("."+this.addWidgetPrefix("filter-row")+" .dx-highlight-outline").removeClass("dx-highlight-outline"),columnHeadersViewElement.find("."+this.addWidgetPrefix("filter-row")+" .dx-filter-modified").removeClass("dx-filter-modified"),this._getHeaderPanel().enableApplyButton(!1)}},setCurrentColumnForFiltering:function(column){this._currentColumn=column},getCurrentColumnForFiltering:function(){return this._currentColumn}})},extenders:{controllers:{data:DataControllerFilterRowExtender,columnsResizer:{_startResizing:function(){if(this.callBase.apply(this,arguments),this.isResizing()){var overlayInstance=this._columnHeadersView.getFilterRangeOverlayInstance();if(overlayInstance){var cellIndex=overlayInstance.$element().closest("td").index();cellIndex!==this._targetPoint.columnIndex&&cellIndex!==this._targetPoint.columnIndex+1||overlayInstance.$content().hide()}}},_endResizing:function(){var $cell;if(this.isResizing()){var overlayInstance=this._columnHeadersView.getFilterRangeOverlayInstance();overlayInstance&&($cell=overlayInstance.$element().closest("td"),this._columnHeadersView._updateFilterRangeOverlay({width:(0,size.Y_)($cell,!0)+1}),overlayInstance.$content().show())}this.callBase.apply(this,arguments)}},editing:{updateFieldValue(options){return options.column.lookup&&(this._needUpdateLookupDataSource=!0),this.callBase.apply(this,arguments)},_afterSaveEditData(cancel){var _this$getView;this._needUpdateLookupDataSource&&!cancel&&(null===(_this$getView=this.getView("columnHeadersView"))||void 0===_this$getView||_this$getView.updateLookupDataSource());return this._needUpdateLookupDataSource=!1,this.callBase.apply(this,arguments)},_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,this.callBase.apply(this,arguments)}}},views:{columnHeadersView:ColumnHeadersViewFilterRowExtender,headerPanel:{_getToolbarItems:function(){var items=this.callBase();return this._prepareFilterItem(items).concat(items)},_prepareFilterItem:function(){var that=this,filterItem=[];if(that._isShowApplyFilterButton()){var hintText=that.option("filterRow.applyFilterText"),toolbarItem={widget:"dxButton",options:{icon:"apply-filter",disabled:!that._columnsController.getColumns().filter((function(column){return void 0!==column.bufferedFilterValue})).length,onClick:function(){that._applyFilterViewController.applyFilter()},hint:hintText,text:hintText,onInitialized:function(e){(0,renderer.Z)(e.element).addClass(that._getToolbarButtonClass("dx-apply-button"))}},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10};filterItem.push(toolbarItem)}return filterItem},_isShowApplyFilterButton:function(){var filterRowOptions=this.option("filterRow");return filterRowOptions&&filterRowOptions.visible&&"onClick"===filterRowOptions.applyFilter},init:function(){this.callBase(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")},enableApplyButton:function(value){this.setToolbarItemDisabled("applyFilterButton",!value)},isVisible:function(){return this.callBase()||this._isShowApplyFilterButton()},optionChanged:function(args){"filterRow"===args.name?(this._invalidate(),args.handled=!0):this.callBase(args)}}}}};module_core.registerModule("filterRow",filterRowModule);__webpack_require__("./node_modules/devextreme/esm/ui/list/modules/search.js");function resetChildrenItemSelection(items){items=items||[];for(var i=0;i<items.length;i++)items[i].selected=!1,resetChildrenItemSelection(items[i].items)}function updateSelectAllState(e,filterValues){if(!e.component.option("searchValue")){var selectAllCheckBox=(0,renderer.Z)(e.element).find(".dx-list-select-all-checkbox").data("dxCheckBox");selectAllCheckBox&&filterValues&&filterValues.length&&selectAllCheckBox.option("value",void 0)}}function isSearchEnabled(that,options){var headerFilter=options.headerFilter;return headerFilter&&(0,utils_type.$K)(headerFilter.allowSearch)?headerFilter.allowSearch:that.option("headerFilter.allowSearch")}function updateHeaderFilterItemSelectionState(item,filterValuesMatch,isExcludeFilter){if(filterValuesMatch^isExcludeFilter){if(item.selected=!0,isExcludeFilter&&item.items)for(var j=0;j<item.items.length;j++)if(!item.items[j].selected){item.selected=void 0;break}}else(isExcludeFilter||item.selected)&&(item.selected=!1,resetChildrenItemSelection(item.items))}var HeaderFilterView=ui_grid_core_modules.View.inherit({getPopupContainer:function(){return this._popupContainer},getListContainer:function(){return this._listContainer},applyHeaderFilter:function(options){var list=this.getListContainer(),searchValue=list.option("searchValue"),filterValues=[];!searchValue&&!options.isFilterBuilder&&list.$element().find(".dx-checkbox").eq(0).hasClass("dx-checkbox-checked")?("tree"===options.type&&(options.filterType="exclude"),Array.isArray(options.filterValues)&&(options.filterValues=[])):"tree"===options.type&&(options.filterType&&(options.filterType="include"),function fillSelectedItemKeys(filterValues,items,isExclude){(0,iterator.S6)(items,(function(_,item){if(void 0!==item.selected&&!!item.selected^isExclude){var node=list._getNode(item),hasChildrenWithSelection=list._hasChildren(node)&&item.items&&item.items.some((item=>item.selected));if(!searchValue||!hasChildrenWithSelection)return void filterValues.push(item.value)}item.items&&item.items.length&&fillSelectedItemKeys(filterValues,item.items,isExclude)}))}(filterValues,list.option("items"),!1),options.filterValues=filterValues),options.filterValues&&!options.filterValues.length&&(options.filterValues=null),options.apply(),this.hideHeaderFilterMenu()},showHeaderFilterMenu:function($columnElement,options){if(options){this._initializePopupContainer(options);var popupContainer=this.getPopupContainer();this.hideHeaderFilterMenu(),this.updatePopup($columnElement,options),popupContainer.show()}},hideHeaderFilterMenu:function(){var headerFilterMenu=this.getPopupContainer();headerFilterMenu&&headerFilterMenu.hide()},updatePopup:function($element,options){var showColumnLines=this.option("showColumnLines"),alignment="right"===options.alignment^!showColumnLines?"left":"right";this._popupContainer.setAria({role:"dialog",label:message.Z.format("dxDataGrid-headerFilterLabel")}),this._popupContainer&&(this._cleanPopupContent(),this._popupContainer.option("position",{my:alignment+" top",at:alignment+" bottom",of:$element,collision:"fit fit"}))},_getSearchExpr:function(options){var lookup=options.lookup,useDefaultSearchExpr=options.useDefaultSearchExpr,headerFilterDataSource=options.headerFilter&&options.headerFilter.dataSource;if(useDefaultSearchExpr||(0,utils_type.$K)(headerFilterDataSource)&&!(0,utils_type.mf)(headerFilterDataSource))return"text";if(lookup)return lookup.displayExpr||"this";if(options.dataSource){var group=options.dataSource.group;if(Array.isArray(group)&&group.length>0)return group[0].selector;if((0,utils_type.mf)(group)&&!options.remoteFiltering)return group}return options.dataField||options.selector},_cleanPopupContent:function(){this._popupContainer&&this._popupContainer.$content().empty()},_initializePopupContainer:function(options){var that=this,$element=that.element(),headerFilterOptions=that.option("headerFilter"),dxPopupOptions={width:options.headerFilter&&options.headerFilter.width||headerFilterOptions&&headerFilterOptions.width,height:options.headerFilter&&options.headerFilter.height||headerFilterOptions&&headerFilterOptions.height,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:"dx-header-filter-menu"},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:headerFilterOptions.texts.ok,onClick:function(){that.applyHeaderFilter(options)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:headerFilterOptions.texts.cancel,onClick:function(){that.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing:function(e){e.component.$content().parent().addClass("dx-dropdowneditor-overlay"),that._initializeListContainer(options),options.onShowing&&options.onShowing(e)},onShown:function(){that.getListContainer().focus()},onHidden:options.onHidden,onInitialized:function(e){var component=e.component;component.option("animation",component._getDefaultOptions().animation)}};(0,utils_type.$K)(that._popupContainer)?that._popupContainer.option(dxPopupOptions):that._popupContainer=that._createComponent($element,ui_popup.Z,dxPopupOptions)},_initializeListContainer:function(options){var that=this,$content=that._popupContainer.$content(),widgetOptions={searchEnabled:isSearchEnabled(that,options),searchTimeout:that.option("headerFilter.searchTimeout"),searchMode:options.headerFilter&&options.headerFilter.searchMode||"",dataSource:options.dataSource,onContentReady:function(){that.renderCompleted.fire()},itemTemplate:function(data,_,element){var $element=(0,renderer.Z)(element);return options.encodeHtml?$element.text(data.text):$element.html(data.text)}};function onOptionChanged(e){"searchValue"!==e.fullName||options.isFilterBuilder||!1===that.option("headerFilter.hideSelectAllOnSearch")||("tree"===options.type?e.component.option("showCheckBoxesMode",e.value?"normal":"selectAll"):e.component.option("selectionMode",e.value?"multiple":"all"))}"tree"===options.type?that._listContainer=that._createComponent((0,renderer.Z)("<div>").appendTo($content),tree_view.Z,(0,extend.l)(widgetOptions,{showCheckBoxesMode:options.isFilterBuilder?"normal":"selectAll",onOptionChanged,keyExpr:"id"})):that._listContainer=that._createComponent((0,renderer.Z)("<div>").appendTo($content),list_light.Z,(0,extend.l)(widgetOptions,{searchExpr:that._getSearchExpr(options),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:options.isFilterBuilder?"multiple":"all",onOptionChanged,onSelectionChanged:function(e){var items=e.component.option("items"),selectedItems=e.component.option("selectedItems");if(!e.component._selectedItemsUpdating&&!e.component.option("searchValue")&&!options.isFilterBuilder){var filterValues=options.filterValues||[],isExclude="exclude"===options.filterType;0===selectedItems.length&&items.length&&(filterValues.length<=1||isExclude&&filterValues.length===items.length-1)?(options.filterType="include",options.filterValues=[]):selectedItems.length===items.length&&(options.filterType="exclude",options.filterValues=[])}(0,iterator.S6)(items,(function(index,item){var selected=ui_grid_core_utils.getIndexByKey(item,selectedItems,null)>=0;if(!!item.selected!==selected){item.selected=selected,options.filterValues=options.filterValues||[];var filterValueIndex=ui_grid_core_utils.getIndexByKey(item.value,options.filterValues,null);filterValueIndex>=0&&options.filterValues.splice(filterValueIndex,1),selected^"exclude"===options.filterType&&options.filterValues.push(item.value)}})),updateSelectAllState(e,options.filterValues)},onContentReady:function(e){var component=e.component,items=component.option("items"),selectedItems=[];(0,iterator.S6)(items,(function(){this.selected&&selectedItems.push(this)})),component._selectedItemsUpdating=!0,component.option("selectedItems",selectedItems),component._selectedItemsUpdating=!1,updateSelectAllState(e,options.filterValues)}}))},_renderCore:function(){this.element().addClass("dx-header-filter-menu")}}),allowHeaderFiltering=function(column){return(0,utils_type.$K)(column.allowHeaderFiltering)?column.allowHeaderFiltering:column.allowFiltering},headerFilterMixin={_applyColumnState:function(options){var $headerFilterIndicator,rootElement=options.rootElement,column=options.column;if("headerFilter"===options.name){if(rootElement.find(".dx-header-filter").remove(),allowHeaderFiltering(column)){$headerFilterIndicator=this.callBase(options).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(column)),this.option("useLegacyKeyboardNavigation")||$headerFilterIndicator.attr("tabindex",this.option("tabindex")||0);var indicatorLabel=message.Z.format("dxDataGrid-headerFilterIndicatorLabel",column.caption);$headerFilterIndicator.attr("aria-label",indicatorLabel),$headerFilterIndicator.attr("aria-haspopup","dialog"),$headerFilterIndicator.attr("role","button")}return $headerFilterIndicator}return this.callBase(options)},_isHeaderFilterEmpty:function(column){return!column.filterValues||!column.filterValues.length},_getIndicatorClassName:function(name){return"headerFilter"===name?"dx-header-filter":this.callBase(name)},_renderIndicator:function(options){var $container=options.container,$indicator=options.indicator;if("headerFilter"===options.name){var rtlEnabled=this.option("rtlEnabled");if($container.children().length&&(!rtlEnabled&&"right"===options.columnAlignment||rtlEnabled&&"left"===options.columnAlignment))return void $container.prepend($indicator)}this.callBase(options)},optionChanged:function(args){if("headerFilter"===args.name){var requireReady="columnHeadersView"===this.name;this._invalidate(requireReady,requireReady),args.handled=!0}else this.callBase(args)}},DATE_INTERVAL_FORMATS={month:function(value){return localization_date.getMonthNames()[value-1]},quarter:function(value){return localization_date.format(new Date(2e3,3*value-1),"quarter")}};function ungroupUTCDates(items,dateParts,dates){return dateParts=dateParts||[],dates=dates||[],items.forEach((item=>{if((0,utils_type.$K)(item.key)){var isMonthPart=1===dateParts.length;if(dateParts.push(isMonthPart?item.key-1:item.key),item.items)ungroupUTCDates(item.items,dateParts,dates);else{var date=new Date(Date.UTC.apply(Date,dateParts));dates.push(date)}dateParts.pop()}else dates.push(null)})),dates}function convertDataFromUTCToLocal(data,column){var dates=ungroupUTCDates(data),query=(0,data_query.Z)(dates),group=ui_grid_core_utils.getHeaderFilterGroupParameters((0,esm_extends.Z)({},column,{calculateCellValue:date=>date}));return store_helper.default.queryByOptions(query,{group}).toArray()}var HeaderFilterController=ui_grid_core_modules.ViewController.inherit({init:function(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")},_updateSelectedState:function(items,column){for(var i=items.length,isExclude="exclude"===column.filterType;i--;){var item=items[i];"items"in items[i]&&this._updateSelectedState(items[i].items,column),updateHeaderFilterItemSelectionState(item,ui_grid_core_utils.getIndexByKey(items[i].value,column.filterValues,null)>-1,isExclude)}},_normalizeGroupItem:function(item,currentLevel,options){var value,displayValue,path=options.path,valueSelector=options.valueSelector,displaySelector=options.displaySelector,column=options.column;return valueSelector&&displaySelector?(value=valueSelector(item),displayValue=displaySelector(item)):displayValue=value=item.key,item=(0,utils_type.Kn)(item)?(0,extend.l)({},item):{},path.push(value),1===path.length?item.value=path[0]:item.value=path.join("/"),item.text=this.getHeaderItemText(displayValue,column,currentLevel,options.headerFilterOptions),item},getHeaderItemText:function(displayValue,column,currentLevel,headerFilterOptions){var text=ui_grid_core_utils.formatValue(displayValue,function(value,column,currentLevel){var groupInterval=filtering.getGroupInterval(column),result=ui_grid_core_utils.getFormatOptionsByColumn(column,"headerFilter");return groupInterval&&(result.groupInterval=groupInterval[currentLevel],ui_grid_core_utils.isDateType(column.dataType)?result.format=DATE_INTERVAL_FORMATS[groupInterval[currentLevel]]:"number"===column.dataType&&(result.getDisplayFormat=function(){var formatOptions={format:column.format,target:"headerFilter"},firstValueText=ui_grid_core_utils.formatValue(value,formatOptions),secondValue=value+groupInterval[currentLevel],secondValueText=ui_grid_core_utils.formatValue(secondValue,formatOptions);return firstValueText&&secondValueText?firstValueText+" - "+secondValueText:""})),result}(displayValue,column,currentLevel));return text||(text=headerFilterOptions.texts.emptyValue),text},_processGroupItems:function(groupItems,currentLevel,path,options){var displaySelector,valueSelector,lookup=options.column.lookup,level=options.level;path=path||[],currentLevel=currentLevel||0,lookup&&(displaySelector=(0,data.vb)(lookup.displayExpr),valueSelector=(0,data.vb)(lookup.valueExpr));for(var i=0;i<groupItems.length;i++)groupItems[i]=this._normalizeGroupItem(groupItems[i],currentLevel,{column:options.column,headerFilterOptions:options.headerFilterOptions,displaySelector,valueSelector,path}),"items"in groupItems[i]&&(currentLevel!==level&&(0,utils_type.$K)(groupItems[i].value)?this._processGroupItems(groupItems[i].items,currentLevel+1,path,options):delete groupItems[i].items),path.pop()},getDataSource:function(column){var _column$headerFilter,dataSource=this._dataController.dataSource(),remoteGrouping=null==dataSource?void 0:dataSource.remoteOperations().grouping,group=ui_grid_core_utils.getHeaderFilterGroupParameters(column,remoteGrouping),headerFilterDataSource=null===(_column$headerFilter=column.headerFilter)||void 0===_column$headerFilter?void 0:_column$headerFilter.dataSource,headerFilterOptions=this.option("headerFilter"),isLookup=!1,options={component:this.component};if(dataSource){if((0,utils_type.$K)(headerFilterDataSource)&&!(0,utils_type.mf)(headerFilterDataSource))options.dataSource=(0,data_source_utils.aN)(headerFilterDataSource);else if(column.lookup)if(isLookup=!0,this.option("syncLookupFilterValues")){this._currentColumn=column;var filter=this._dataController.getCombinedFilter();this._currentColumn=null,options.dataSource=ui_grid_core_utils.getWrappedLookupDataSource(column,dataSource,filter)}else options.dataSource=ui_grid_core_utils.normalizeLookupDataSource(column.lookup);else{var cutoffLevel=Array.isArray(group)?group.length-1:0;this._currentColumn=column;var _filter=this._dataController.getCombinedFilter();this._currentColumn=null,options.dataSource={filter:_filter,group,useDefaultSearch:!0,load:options=>{var d=new utils_deferred.BH;return options.dataField=column.dataField||column.name,dataSource.load(options).done((function(data){remoteGrouping&&function isUTCFormat(format){return"Z"===(null==format?void 0:format.slice(-1))||"'Z'"===(null==format?void 0:format.slice(-3))}(column.serializationFormat)&&cutoffLevel>3&&(data=convertDataFromUTCToLocal(data,column)),that._processGroupItems(data,null,null,{level:cutoffLevel,column,headerFilterOptions}),d.resolve(data)})).fail(d.reject),d}}}(0,utils_type.mf)(headerFilterDataSource)&&headerFilterDataSource.call(column,options);var origPostProcess=options.dataSource.postProcess,that=this;return options.dataSource.postProcess=function(data){var items=data;return isLookup&&(items=items.filter((item=>null!==item[column.lookup.valueExpr])),0!==this.pageIndex()||this.searchValue()||(items=items.slice(0)).unshift(null),that._processGroupItems(items,null,null,{level:0,column,headerFilterOptions})),items=origPostProcess&&origPostProcess.call(this,items)||items,that._updateSelectedState(items,column),items},options.dataSource}},getCurrentColumn:function(){return this._currentColumn},showHeaderFilterMenu:function(columnIndex,isGroupPanel){var columnsController=this._columnsController,column=(0,extend.l)(!0,{},this._columnsController.getColumns()[columnIndex]);if(column){var visibleIndex=columnsController.getVisibleIndex(columnIndex),view=isGroupPanel?this.getView("headerPanel"):this.getView("columnHeadersView"),$columnElement=$columnElement||view.getColumnElements().eq(isGroupPanel?column.groupIndex:visibleIndex);this.showHeaderFilterMenuBase({columnElement:$columnElement,column,applyFilter:!0,apply:function(){columnsController.columnOption(columnIndex,{filterValues:this.filterValues,filterType:this.filterType})}})}},showHeaderFilterMenuBase:function(options){var that=this,column=options.column;if(column){var groupInterval=filtering.getGroupInterval(column),dataSource=that._dataController.dataSource(),remoteFiltering=dataSource&&dataSource.remoteOperations().filtering;(0,extend.l)(options,column,{type:groupInterval&&groupInterval.length>1?"tree":"list",remoteFiltering,onShowing:function(e){var dxResizableInstance=e.component.$overlayContent().dxResizable("instance");dxResizableInstance&&dxResizableInstance.option("onResizeEnd",(function(e){var columnsController=that.getController("columns"),headerFilterByColumn=columnsController.columnOption(options.dataField,"headerFilter");(headerFilterByColumn=headerFilterByColumn||{}).width=e.width,headerFilterByColumn.height=e.height,columnsController.columnOption(options.dataField,"headerFilter",headerFilterByColumn,!0)}))},onHidden:()=>restoreFocus(this)}),options.dataSource=that.getDataSource(options),options.isFilterBuilder&&(options.dataSource.filter=null,options.alignment="right"),that._headerFilterView.showHeaderFilterMenu(options.columnElement,options)}},hideHeaderFilterMenu:function(){this._headerFilterView.hideHeaderFilterMenu()}});var headerFilterModule={defaultOptions:function(){return{syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSearch:!1,searchTimeout:500,texts:{emptyValue:message.Z.format("dxDataGrid-headerFilterEmptyValue"),ok:message.Z.format("dxDataGrid-headerFilterOK"),cancel:message.Z.format("dxDataGrid-headerFilterCancel")}}}},controllers:{headerFilter:HeaderFilterController},views:{headerFilterView:HeaderFilterView},extenders:{controllers:{data:{skipCalculateColumnFilters:function(){return!1},_calculateAdditionalFilter:function(){if(this.skipCalculateColumnFilters())return this.callBase();var filters=[this.callBase()],columns=this._columnsController.getVisibleColumns(null,!0),currentColumn=this.getController("headerFilter").getCurrentColumn();return(0,iterator.S6)(columns,(function(_,column){var filter;if((!currentColumn||currentColumn.index!==column.index)&&allowHeaderFiltering(column)&&column.calculateFilterExpression&&Array.isArray(column.filterValues)&&column.filterValues.length){var filterValues=[];(0,iterator.S6)(column.filterValues,(function(_,filterValue){Array.isArray(filterValue)?filter=filterValue:(column.deserializeValue&&!ui_grid_core_utils.isDateType(column.dataType)&&"number"!==column.dataType&&(filterValue=column.deserializeValue(filterValue)),filter=column.createFilterExpression(filterValue,"=","headerFilter")),filter&&(filter.columnIndex=column.index),filterValues.push(filter)})),filterValues=ui_grid_core_utils.combineFilters(filterValues,"or"),filters.push("exclude"===column.filterType?["!",filterValues]:filterValues)}})),ui_grid_core_utils.combineFilters(filters)}}},views:{columnHeadersView:(0,extend.l)({},headerFilterMixin,{_renderCellContent:function($cell,options){var $headerFilterIndicator,column=options.column;!column.command&&allowHeaderFiltering(column)&&this.option("headerFilter.visible")&&"header"===options.rowType&&($headerFilterIndicator=this._applyColumnState({name:"headerFilter",rootElement:$cell,column,showColumnLines:this.option("showColumnLines")}))&&this._subscribeToIndicatorEvent($headerFilterIndicator,column,"headerFilter"),this.callBase.apply(this,arguments)},_subscribeToIndicatorEvent:function($indicator,column,indicatorName){"headerFilter"===indicatorName&&events_engine.Z.on($indicator,click.u,this.createAction((e=>{e.event.stopPropagation(),saveFocusedElementInfo($indicator,this),this.getController("headerFilter").showHeaderFilterMenu(column.index,!1)})))},_updateIndicator:function($cell,column,indicatorName){var $indicator=this.callBase($cell,column,indicatorName);$indicator&&this._subscribeToIndicatorEvent($indicator,column,indicatorName)},_updateHeaderFilterIndicators:function(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")},_needUpdateFilterIndicators:function(){return!0},_columnOptionChanged:function(e){var optionNames=e.optionNames;ui_grid_core_utils.checkChanges(optionNames,["filterValues","filterType"])?this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators():this.callBase(e)}}),headerPanel:(0,extend.l)({},headerFilterMixin,{_createGroupPanelItem:function($rootElement,groupColumn){var $headerFilterIndicator,that=this,$item=that.callBase.apply(that,arguments);return!groupColumn.command&&allowHeaderFiltering(groupColumn)&&that.option("headerFilter.visible")&&($headerFilterIndicator=that._applyColumnState({name:"headerFilter",rootElement:$item,column:{alignment:(0,utils_position.q)(that.option("rtlEnabled")),filterValues:groupColumn.filterValues,allowHeaderFiltering:!0},showColumnLines:!0}))&&events_engine.Z.on($headerFilterIndicator,click.u,that.createAction((function(e){e.event.stopPropagation(),that.getController("headerFilter").showHeaderFilterMenu(groupColumn.index,!0)}))),$item}})}}};module_core.registerModule("headerFilter",headerFilterModule);var data_errors=__webpack_require__("./node_modules/devextreme/esm/data/errors.js"),FILTER_BUILDER_RANGE_CLASS="dx-filterbuilder-range",FILTER_BUILDER_RANGE_START_CLASS=FILTER_BUILDER_RANGE_CLASS+"-start",FILTER_BUILDER_RANGE_END_CLASS=FILTER_BUILDER_RANGE_CLASS+"-end",FILTER_BUILDER_RANGE_SEPARATOR_CLASS=FILTER_BUILDER_RANGE_CLASS+"-separator",SEPARATOR="–";function editorTemplate(conditionInfo,container){var $editorStart=(0,renderer.Z)("<div>").addClass(FILTER_BUILDER_RANGE_START_CLASS),$editorEnd=(0,renderer.Z)("<div>").addClass(FILTER_BUILDER_RANGE_END_CLASS),values=conditionInfo.value||[],getStartValue=function(values){return values&&values.length>0?values[0]:null},getEndValue=function(values){return values&&2===values.length?values[1]:null};container.append($editorStart),container.append((0,renderer.Z)("<span>").addClass(FILTER_BUILDER_RANGE_SEPARATOR_CLASS).text(SEPARATOR)),container.append($editorEnd),container.addClass(FILTER_BUILDER_RANGE_CLASS),this._editorFactory.createEditor.call(this,$editorStart,(0,extend.l)({},conditionInfo.field,conditionInfo,{value:getStartValue(values),parentType:"filterBuilder",setValue:function(value){values=[value,getEndValue(values)],conditionInfo.setValue(values)}})),this._editorFactory.createEditor.call(this,$editorEnd,(0,extend.l)({},conditionInfo.field,conditionInfo,{value:getEndValue(values),parentType:"filterBuilder",setValue:function(value){values=[getStartValue(values),value],conditionInfo.setValue(values)}}))}function getConfig(caption,context){return{name:"between",caption,icon:"range",valueSeparator:SEPARATOR,dataTypes:["number","date","datetime"],editorTemplate:editorTemplate.bind(context),notForLookup:!0}}var ui_filter_operations_dictionary_OPERATION_ICONS={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},OPERATION_NAME={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};const ui_filter_operations_dictionary={getIconByFilterOperation:function(filterOperation){return ui_filter_operations_dictionary_OPERATION_ICONS[filterOperation]},getNameByFilterOperation:function(filterOperation){return OPERATION_NAME[filterOperation]}};var DEFAULT_DATA_TYPE="string",AND_GROUP_OPERATION="and",EQUAL_OPERATION="=",NOT_EQUAL_OPERATION="<>",DATATYPE_OPERATIONS={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},DEFAULT_FORMAT={date:"shortDate",datetime:"shortDateShortTime"},LOOKUP_OPERATIONS=["=","<>","isblank","isnotblank"],AVAILABLE_FIELD_PROPERTIES=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"];function isNegationGroup(group){return group&&group.length>1&&"!"===group[0]&&!isCondition(group)}function getGroupCriteria(group){return isNegationGroup(group)?group[1]:group}function setGroupValue(group,value){var i;return function convertGroupToNewStructure(group,value){!function(value){return-1!==value.indexOf("!")}(value)?isNegationGroup(group)&&function(group){var criteria=getGroupCriteria(group);group.length=0,[].push.apply(group,criteria)}(group):isNegationGroup(group)||function(group){var criteria=group.slice(0);group.length=0,group.push("!",criteria)}(group)}(group,value),function(criteria,value){for(i=0;i<criteria.length;i++)Array.isArray(criteria[i])||(criteria[i]=value)}(getGroupCriteria(group),value=function(value){return-1===value.indexOf("!")?value:value.substring(1)}(value)),group}function getCriteriaOperation(criteria){if(isCondition(criteria))return AND_GROUP_OPERATION;for(var value="",i=0;i<criteria.length;i++){var item=criteria[i];if(!Array.isArray(item)){if(value&&value!==item)throw new data_errors.R0.Error("E4019");"!"!==item&&(value=item)}}return value}function getGroupValue(group){var criteria=getGroupCriteria(group),value=getCriteriaOperation(criteria);return value||(value=AND_GROUP_OPERATION),criteria!==group&&(value="!"+value),value}function getFilterOperations(field){var result=function containItems(entity){return Array.isArray(entity)&&entity.length}(field.filterOperations)?field.filterOperations:function getDefaultFilterOperations(field){return field.lookup&&LOOKUP_OPERATIONS||DATATYPE_OPERATIONS[field.dataType||DEFAULT_DATA_TYPE]}(field);return(0,extend.l)([],result)}function getCaptionByOperation(operation,filterOperationDescriptions){var operationName=ui_filter_operations_dictionary.getNameByFilterOperation(operation);return filterOperationDescriptions&&filterOperationDescriptions[operationName]?filterOperationDescriptions[operationName]:operationName}function getCustomOperation(customOperations,name){var filteredOperations=customOperations.filter((function(item){return item.name===name}));return filteredOperations.length?filteredOperations[0]:null}function getDefaultOperation(field){return field.defaultFilterOperation||getFilterOperations(field)[0]}function removeItem(group,item){var criteria=getGroupCriteria(group),index=criteria.indexOf(item);return criteria.splice(index,1),1!==criteria.length&&criteria.splice(index,1),group}function createEmptyGroup(value){var isNegation=isNegationGroupOperation(value),groupOperation=isNegation?getGroupOperationFromNegationOperation(value):value;return isNegation?["!",[groupOperation]]:[groupOperation]}function addItem(item,group){var criteria=getGroupCriteria(group),groupValue=getGroupValue(criteria);return 1===criteria.length?criteria.unshift(item):criteria.push(item,groupValue),group}function getField(dataField,fields){for(var i=0;i<fields.length;i++){if(fields[i].name===dataField)return fields[i];if(fields[i].dataField.toLowerCase()===dataField.toLowerCase())return fields[i]}var extendedFields=getItems(fields,!0).filter((function(item){return item.dataField.toLowerCase()===dataField.toLowerCase()}));if(extendedFields.length>0)return extendedFields[0];throw new ui_errors.Z.Error("E1047",dataField)}function isGroup(criteria){return!!Array.isArray(criteria)&&(criteria.length<2||Array.isArray(criteria[0])||Array.isArray(criteria[1]))}function isCondition(criteria){return!!Array.isArray(criteria)&&(criteria.length>1&&!Array.isArray(criteria[0])&&!Array.isArray(criteria[1]))}function convertToInnerGroup(group,customOperations,defaultGroupOperation){defaultGroupOperation=defaultGroupOperation||AND_GROUP_OPERATION;for(var groupOperation=getCriteriaOperation(group).toLowerCase()||defaultGroupOperation,innerGroup=[],i=0;i<group.length;i++)isGroup(group[i])?(innerGroup.push(convertToInnerStructure(group[i],customOperations,defaultGroupOperation)),innerGroup=appendGroupOperationToGroup(innerGroup,groupOperation)):isCondition(group[i])&&(innerGroup.push(convertToInnerCondition(group[i],customOperations)),innerGroup=appendGroupOperationToGroup(innerGroup,groupOperation));return 0===innerGroup.length&&(innerGroup=appendGroupOperationToGroup(innerGroup,groupOperation)),innerGroup}function convertToInnerCondition(condition,customOperations){return function conditionHasCustomOperation(condition,customOperations){var customOperation=getCustomOperation(customOperations,condition[1]);return customOperation&&customOperation.name===condition[1]}(condition,customOperations)||condition.length<3&&(condition[2]=condition[1],condition[1]=EQUAL_OPERATION),condition}function isNegationGroupOperation(operation){return-1!==operation.indexOf("not")}function getGroupOperationFromNegationOperation(operation){return operation.substring(3).toLowerCase()}function appendGroupOperationToCriteria(criteria,groupOperation){var isNegation=isNegationGroupOperation(groupOperation);return groupOperation=isNegation?getGroupOperationFromNegationOperation(groupOperation):groupOperation,isNegation?["!",criteria,groupOperation]:[criteria,groupOperation]}function appendGroupOperationToGroup(group,groupOperation){var isNegation=isNegationGroupOperation(groupOperation);groupOperation=isNegation?getGroupOperationFromNegationOperation(groupOperation):groupOperation,group.push(groupOperation);var result=group;return isNegation&&(result=["!",result]),result}function convertToInnerStructure(value,customOperations,defaultGroupOperation){return defaultGroupOperation=defaultGroupOperation||AND_GROUP_OPERATION,value?isCondition(value=(0,extend.l)(!0,[],value))?appendGroupOperationToCriteria(convertToInnerCondition(value,customOperations),defaultGroupOperation):isNegationGroup(value)?["!",isCondition(value[1])?appendGroupOperationToCriteria(convertToInnerCondition(value[1],customOperations),defaultGroupOperation):isNegationGroup(value[1])?appendGroupOperationToCriteria(convertToInnerStructure(value[1],customOperations),defaultGroupOperation):convertToInnerGroup(value[1],customOperations,defaultGroupOperation)]:convertToInnerGroup(value,customOperations,defaultGroupOperation):createEmptyGroup(defaultGroupOperation)}function getConditionFilterExpression(condition,fields,customOperations,target){var field=getField(condition[0],fields),filterExpression=convertToInnerCondition(condition,customOperations),customOperation=customOperations.length&&getCustomOperation(customOperations,filterExpression[1]);return customOperation&&customOperation.calculateFilterExpression?customOperation.calculateFilterExpression.apply(customOperation,[filterExpression[2],field,fields]):field.createFilterExpression?field.createFilterExpression.apply(field,[filterExpression[2],filterExpression[1],target]):field.calculateFilterExpression?field.calculateFilterExpression.apply(field,[filterExpression[2],filterExpression[1],target]):field.defaultCalculateFilterExpression.apply(field,[filterExpression[2],filterExpression[1],target])}function getFilterExpression(value,fields,customOperations,target){if(!(0,utils_type.$K)(value))return null;if(isNegationGroup(value))return["!",getFilterExpression(value[1],fields,customOperations,target)];var criteria=getGroupCriteria(value);if(isCondition(criteria))return getConditionFilterExpression(criteria,fields,customOperations,target)||null;for(var _filterExpression,result=[],groupValue=getGroupValue(criteria),i=0;i<criteria.length;i++)isGroup(criteria[i])?(_filterExpression=getFilterExpression(criteria[i],fields,customOperations,target))&&(i&&result.push(groupValue),result.push(_filterExpression)):isCondition(criteria[i])&&(_filterExpression=getConditionFilterExpression(criteria[i],fields,customOperations,target))&&(result.length&&result.push(groupValue),result.push(_filterExpression));return 1===result.length&&(result=result[0]),result.length?result:null}function getNormalizedFilter(group){var i,criteria=getGroupCriteria(group);if(0===criteria.length)return null;var itemsForRemove=[];for(i=0;i<criteria.length;i++)if(isGroup(criteria[i])){var normalizedGroupValue=getNormalizedFilter(criteria[i]);normalizedGroupValue?criteria[i]=normalizedGroupValue:itemsForRemove.push(criteria[i])}else isCondition(criteria[i])&&""===criteria[i][2]&&itemsForRemove.push(criteria[i]);for(i=0;i<itemsForRemove.length;i++)removeItem(criteria,itemsForRemove[i]);return 1===criteria.length?null:(criteria.splice(criteria.length-1,1),1===criteria.length&&(group=function setGroupCriteria(group,criteria){return isNegationGroup(group)?group[1]=criteria:group=criteria,group}(group,criteria[0])),0===group.length?null:group)}function getCurrentLookupValueText(field,value,handler){if(""!==value){var lookup=field.lookup;if(lookup.items)handler(lookup.calculateCellValue(value)||"");else{var lookupDataSource=(0,utils_type.mf)(lookup.dataSource)?lookup.dataSource({}):lookup.dataSource;new data_source.o(lookupDataSource).loadSingle(lookup.valueExpr,value).done((function(result){var valueText="";result&&(valueText=lookup.displayExpr?(0,data.vb)(lookup.displayExpr)(result):result),field.customizeText&&(valueText=field.customizeText({value,valueText})),handler(valueText)})).fail((function(){handler("")}))}}else handler("")}function getPrimitiveValueText(field,value,customOperation,target,options){var valueText;return valueText=!0===value?field.trueText||message.Z.format("dxDataGrid-trueText"):!1===value?field.falseText||message.Z.format("dxDataGrid-falseText"):function getFormattedValueText(field,value){var fieldFormat=field.format||DEFAULT_FORMAT[field.dataType];return format_helper.format(value,fieldFormat)}(field,value),field.customizeText&&(valueText=field.customizeText.call(field,{value,valueText,target})),customOperation&&customOperation.customizeText&&(valueText=customOperation.customizeText.call(customOperation,{value,valueText,field,target},options)),valueText}function checkDefaultValue(value){return""===value||null===value}function getCurrentValueText(field,value,customOperation){var target=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(checkDefaultValue(value))return"";if(Array.isArray(value)){var result=new utils_deferred.BH;return utils_deferred.gx.apply(this,function getArrayValueText(field,value,customOperation,target){var options={values:value};return value.map((v=>getPrimitiveValueText(field,v,customOperation,target,options)))}(field,value,customOperation,target)).done((function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var text=args.some((item=>!checkDefaultValue(item)))?args.map((item=>checkDefaultValue(item)?"?":item)):"";result.resolve(text)})),result}return getPrimitiveValueText(field,value,customOperation,target)}function itemExists(plainItems,parentId){return plainItems.some((function(item){return item.dataField===parentId}))}function pushItemAndCheckParent(originalItems,plainItems,item){var dataField=item.dataField;hasParent(dataField)&&(item.parentId=getParentIdFromItemDataField(dataField),itemExists(plainItems,item.parentId)||itemExists(originalItems,item.parentId)||pushItemAndCheckParent(originalItems,plainItems,{id:item.parentId,dataType:"object",dataField:item.parentId,caption:generateCaptionByDataField(item.parentId,!0),filterOperations:["isblank","isnotblank"]})),plainItems.push(item)}function generateCaptionByDataField(dataField,allowHierarchicalFields){var caption="";if(allowHierarchicalFields)dataField=dataField.substring(dataField.lastIndexOf(".")+1);else if(hasParent(dataField))return dataField.split(".").forEach((function(field,index,arr){caption+=(0,inflector.GK)(field),index!==arr.length-1&&(caption+=".")})),caption;return(0,inflector.GK)(dataField)}function getItems(fields,allowHierarchicalFields){for(var items=[],i=0;i<fields.length;i++){var item=(0,extend.l)(!0,{caption:generateCaptionByDataField(fields[i].dataField,allowHierarchicalFields)},fields[i]);item.id=item.name||item.dataField,allowHierarchicalFields?pushItemAndCheckParent(fields,items,item):items.push(item)}return items}function hasParent(dataField){return-1!==dataField.lastIndexOf(".")}function getParentIdFromItemDataField(dataField){return dataField.substring(0,dataField.lastIndexOf("."))}function getCaptionWithParents(item,plainItems){if(hasParent(item.dataField))for(var parentId=getParentIdFromItemDataField(item.dataField),i=0;i<plainItems.length;i++)if(plainItems[i].dataField===parentId)return getCaptionWithParents(plainItems[i],plainItems)+"."+item.caption;return item.caption}function updateConditionByOperation(condition,operation,customOperations){var customOperation=getCustomOperation(customOperations,operation);return customOperation?(!1===customOperation.hasValue?(condition[1]=operation,condition.length=2):(condition[1]=operation,condition[2]=""),condition):("isblank"===operation?(condition[1]=EQUAL_OPERATION,condition[2]=null):"isnotblank"===operation?(condition[1]=NOT_EQUAL_OPERATION,condition[2]=null):(((customOperation=getCustomOperation(customOperations,condition[1]))||2===condition.length||null===condition[2])&&(condition[2]=""),condition[1]=operation),condition)}function getOperationValue(condition){return null===condition[2]?condition[1]===EQUAL_OPERATION?"isblank":"isnotblank":condition[1]}function isMatchedCondition(filter,addedFilterDataField){return filter[0]===addedFilterDataField}function removeFieldConditionsFromFilter(filter,dataField){return filter&&0!==filter.length?isCondition(filter)?isMatchedCondition(filter,dataField)?null:filter:syncConditionIntoGroup(filter,[dataField],!1):null}function syncConditionIntoGroup(filter,addedFilter,canPush){var result=[];return filter.forEach((function(item){isCondition(item)?isMatchedCondition(item,addedFilter[0])?canPush?(result.push(addedFilter),canPush=!1):result.splice(result.length-1,1):result.push(item):(result.length||isGroup(item))&&result.push(item)})),0===result.length?null:(canPush&&(result.push(AND_GROUP_OPERATION),result.push(addedFilter)),1===result.length?result[0]:result)}function syncFilters(filter,addedFilter){return null===filter||0===filter.length?addedFilter:isCondition(filter)?isMatchedCondition(filter,addedFilter[0])?addedFilter:[filter,AND_GROUP_OPERATION,addedFilter]:getGroupValue(filter)!==AND_GROUP_OPERATION?[addedFilter,"and",filter]:syncConditionIntoGroup(filter,addedFilter,!0)}function filterHasField(filter,dataField){return null!==filter&&0!==filter.length&&(isCondition(filter)?filter[0]===dataField:filter.some((function(item){return(isCondition(item)||isGroup(item))&&filterHasField(item,dataField)})))}var renderValueText=function($container,value,customOperation){if(Array.isArray(value)){var lastItemIndex=value.length-1;$container.empty(),value.forEach(((t,i)=>{(0,renderer.Z)("<span>").addClass("dx-filterbuilder-text-part").text(t).appendTo($container),i!==lastItemIndex&&(0,renderer.Z)("<span>").addClass("dx-filterbuilder-text-separator").text(customOperation&&customOperation.valueSeparator?customOperation.valueSeparator:"|").addClass("dx-filterbuilder-text-separator-empty").appendTo($container)}))}else value?$container.text(value):$container.text(message.Z.format("dxFilterBuilder-enterValueText"))};function baseOperation(grid){var getFullText=function(itemText,parentText){return parentText?parentText+"/"+itemText:itemText},headerFilterController=grid&&grid.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(filterValue,field,fields){var result=[],lastIndex=filterValue.length-1;return filterValue&&filterValue.forEach((function(value,index){if(isCondition(value)||isGroup(value)){var filterExpression=getFilterExpression(value,fields,[],"headerFilter");result.push(filterExpression)}else result.push(getFilterExpression([field.dataField,"=",value],fields,[],"headerFilter"));index!==lastIndex&&result.push("or")})),1===result.length&&(result=result[0]),result},editorTemplate:function(conditionInfo,container){var div=(0,renderer.Z)("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(container),column=(0,extend.l)(!0,{},grid.columnOption(conditionInfo.field.dataField));return renderValueText(div,conditionInfo.text&&conditionInfo.text.split("|")),column.filterType="include",column.filterValues=conditionInfo.value?conditionInfo.value.slice():[],headerFilterController.showHeaderFilterMenuBase({columnElement:div,column,apply:function(){var value;value=this.filterValues,conditionInfo.setValue(value),headerFilterController.hideHeaderFilterMenu(),conditionInfo.closeEditor()},onHidden:function(){conditionInfo.closeEditor()},isFilterBuilder:!0}),container},customizeText:function(fieldInfo,options){options=options||{};var value=fieldInfo.value,column=grid.columnOption(fieldInfo.field.dataField),headerFilter=column&&column.headerFilter,lookup=column&&column.lookup,values=options.values||[value];if(headerFilter&&headerFilter.dataSource||lookup&&lookup.dataSource){var result=new utils_deferred.BH,itemsDeferred=options.items||new utils_deferred.BH;if(!options.items){column=(0,extend.l)({},column,{filterType:"include",filterValues:values});var dataSourceOptions=headerFilterController.getDataSource(column);dataSourceOptions.paginate=!1;var dataSource=new data_source.o(dataSourceOptions),key=dataSource.store().key();if(key){var{values:_values}=options;if(_values&&_values.length>1){var filter=_values.reduce(((result,value)=>(result.length&&result.push("or"),result.push([key,"=",value]),result)),[]);dataSource.filter(filter)}else dataSource.filter([key,"=",fieldInfo.value])}else fieldInfo.field.calculateDisplayValue&&ui_errors.Z.log("W1017");options.items=itemsDeferred,dataSource.load().done(itemsDeferred.resolve)}return itemsDeferred.done((items=>{var index=values.indexOf(fieldInfo.value);result.resolve(function getSelectedItemsTexts(items,parentText){var result=[];return items.forEach((function(item){if(item.items){var selectedItemsTexts=getSelectedItemsTexts(item.items,getFullText(item.text,parentText));result=result.concat(selectedItemsTexts)}item.selected&&result.push(getFullText(item.text,parentText))})),result}(items)[index])})),result}return headerFilterController.getHeaderItemText(value,column,0,grid.option("headerFilter"))}}}function noneOf(grid){var baseOp=baseOperation(grid);return(0,extend.l)({},baseOp,{calculateFilterExpression:function(filterValue,field,fields){var baseFilter=baseOp.calculateFilterExpression(filterValue,field,fields);return baseFilter&&0!==baseFilter.length?"!"===baseFilter[0]?baseFilter:["!",baseFilter]:null},name:"noneof",icon:"unselectall",caption:message.Z.format("dxFilterBuilder-filterOperationNoneOf")})}var FILTER_ROW_OPERATIONS=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"];function getColumnIdentifier(column){return column.name||column.dataField}var canSyncHeaderFilterWithFilterRow,getConditionFromFilterRow,getConditionFromHeaderFilter,updateHeaderFilterCondition,updateFilterRowCondition,FilterSyncController=ui_grid_core_modules.Controller.inherit((canSyncHeaderFilterWithFilterRow=function(column){var filterValues=column.filterValues||[];return!filtering.getGroupInterval(column)&&!(column.headerFilter&&column.headerFilter.dataSource)||1===filterValues.length&&null===filterValues[0]},getConditionFromFilterRow=function(column){var value=column.filterValue;if((0,utils_type.$K)(value)){var operation=column.selectedFilterOperation||column.defaultFilterOperation||getDefaultOperation(column);return[getColumnIdentifier(column),operation,column.filterValue]}return null},getConditionFromHeaderFilter=function(column){var selectedOperation,value,filterValues=column.filterValues;return filterValues?(1===filterValues.length&&canSyncHeaderFilterWithFilterRow(column)&&!Array.isArray(filterValues[0])?(selectedOperation="exclude"===column.filterType?"<>":"=",value=filterValues[0]):(selectedOperation="exclude"===column.filterType?"noneof":"anyof",value=filterValues),[getColumnIdentifier(column),selectedOperation,value]):null},updateHeaderFilterCondition=function(columnsController,column,headerFilterCondition){var headerFilter=function(headerFilterCondition,column){if(!headerFilterCondition)return{filterType:"include",filterValues:void 0};var filterType,selectedFilterOperation=headerFilterCondition[1],value=headerFilterCondition[2],hasArrayValue=Array.isArray(value);if(!hasArrayValue&&!canSyncHeaderFilterWithFilterRow(column))return{filterType:"include",filterValues:void 0};switch(selectedFilterOperation){case"anyof":case"=":filterType="include";break;case"noneof":case"<>":filterType="exclude";break;default:return{filterType:"include",filterValues:void 0}}return{filterType,filterValues:hasArrayValue?value:[value]}}(headerFilterCondition,column);columnsController.columnOption(getColumnIdentifier(column),headerFilter)},updateFilterRowCondition=function(columnsController,column,condition){var filterRowOptions,selectedFilterOperation=null==condition?void 0:condition[1],filterValue=null==condition?void 0:condition[2],filterOperations=column.filterOperations||column.defaultFilterOperations;(!filterOperations||filterOperations.indexOf(selectedFilterOperation)>=0||selectedFilterOperation===column.defaultFilterOperation)&&FILTER_ROW_OPERATIONS.indexOf(selectedFilterOperation)>=0&&null!==filterValue?(selectedFilterOperation!==column.defaultFilterOperation||(0,utils_type.$K)(column.selectedFilterOperation)||(selectedFilterOperation=column.selectedFilterOperation),filterRowOptions={filterValue,selectedFilterOperation}):filterRowOptions={filterValue:void 0,selectedFilterOperation:void 0},columnsController.columnOption(getColumnIdentifier(column),filterRowOptions)},{syncFilterValue:function(){var that=this,columnsController=that.getController("columns"),columns=columnsController.getFilteringColumns();this._skipSyncColumnOptions=!0,columns.forEach((function(column){var filterConditions=function getMatchedConditions(filter,dataField){if(null===filter||0===filter.length)return[];if(isCondition(filter))return isMatchedCondition(filter,dataField)?[filter]:[];if(getGroupValue(filter)!==AND_GROUP_OPERATION)return[];var result=filter.filter((function(item){return isCondition(item)&&isMatchedCondition(item,dataField)}));return result}(that.option("filterValue"),getColumnIdentifier(column));if(1===filterConditions.length){var filterCondition=filterConditions[0];updateHeaderFilterCondition(columnsController,column,filterCondition),updateFilterRowCondition(columnsController,column,filterCondition)}else(0,utils_type.$K)(column.filterValues)&&updateHeaderFilterCondition(columnsController,column),(0,utils_type.$K)(column.filterValue)&&updateFilterRowCondition(columnsController,column)})),this._skipSyncColumnOptions=!1},_initSync:function(){var columns=this.getController("columns").getColumns(),dataController=this.getController("data"),pageIndex=dataController.pageIndex();if(function checkForErrors(columns){columns.forEach((column=>{var identifier=getColumnIdentifier(column);if(!(0,utils_type.$K)(identifier)&&column.allowFiltering)throw new ui_errors.Z.Error("E1049",column.caption)}))}(columns),!this.option("filterValue")){var filteringColumns=this.getController("columns").getFilteringColumns(),filterValue=this.getFilterValueFromColumns(filteringColumns);this.option("filterValue",filterValue)}this.syncFilterValue(),dataController.pageIndex(pageIndex)},init:function(){var dataController=this.getController("data");dataController.isFilterSyncActive()&&(this.getController("columns").isAllDataTypesDefined()?this._initSync():dataController.dataSourceChanged.add((()=>this._initSync())))},_getSyncFilterRow:function(filterValue,column){var filter=getConditionFromFilterRow(column);return(0,utils_type.$K)(filter)?syncFilters(filterValue,filter):removeFieldConditionsFromFilter(filterValue,getColumnIdentifier(column))},_getSyncHeaderFilter:function(filterValue,column){var filter=getConditionFromHeaderFilter(column);return filter?syncFilters(filterValue,filter):removeFieldConditionsFromFilter(filterValue,getColumnIdentifier(column))},getFilterValueFromColumns:function(columns){if(!this.getController("data").isFilterSyncActive())return null;var filterValue=["and"];return columns&&columns.forEach((column=>{var headerFilter=getConditionFromHeaderFilter(column),filterRow=getConditionFromFilterRow(column);headerFilter&&addItem(headerFilter,filterValue),filterRow&&addItem(filterRow,filterValue)})),getNormalizedFilter(filterValue)},syncFilterRow:function(column,value){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),column))},syncHeaderFilter:function(column){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),column))},getCustomFilterOperations:function(){var grid,filterBuilderCustomOperations=this.option("filterBuilder.customOperations")||[];return[(grid=this.component,(0,extend.l)(baseOperation(grid),{name:"anyof",icon:"selectall",caption:message.Z.format("dxFilterBuilder-filterOperationAnyOf")})),noneOf(this.component)].concat(filterBuilderCustomOperations)},publicMethods:function(){return["getCustomFilterOperations"]}})),filterSyncModule={defaultOptions:function(){return{filterValue:null,filterSyncEnabled:"auto"}},controllers:{filterSync:FilterSyncController},extenders:{controllers:{data:{isFilterSyncActive:function(){var filterSyncEnabledValue=this.option("filterSyncEnabled");return"auto"===filterSyncEnabledValue?this.option("filterPanel.visible"):filterSyncEnabledValue},skipCalculateColumnFilters:function(){var filterSyncController=this.getController("filterSync");return((0,utils_type.$K)(this.option("filterValue"))||filterSyncController._skipSyncColumnOptions)&&this.isFilterSyncActive()},_calculateAdditionalFilter:function(){if(!1===this.option("filterPanel.filterEnabled"))return this.callBase();var filters=[this.callBase()],columns=this.getController("columns").getFilteringColumns(),filterValue=this.option("filterValue");if(this.isFilterSyncActive()){var currentColumn=this.getController("headerFilter").getCurrentColumn();currentColumn&&filterValue&&(filterValue=removeFieldConditionsFromFilter(filterValue,getColumnIdentifier(currentColumn)))}var calculatedFilterValue=getFilterExpression(filterValue,columns,this.getController("filterSync").getCustomFilterOperations(),"filterBuilder");return calculatedFilterValue&&filters.push(calculatedFilterValue),ui_grid_core_utils.combineFilters(filters)},_parseColumnPropertyName:function(fullName){var matched=fullName.match(/.*\.(.*)/);return matched?matched[1]:null},clearFilter:function(filterName){this.component.beginUpdate(),arguments.length>0?("filterValue"===filterName&&this.option("filterValue",null),this.callBase(filterName)):(this.option("filterValue",null),this.callBase()),this.component.endUpdate()},optionChanged:function(args){switch(args.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this.getController("filterSync").syncFilterValue(),args.handled=!0;break;case"filterSyncEnabled":args.handled=!0;break;case"columns":if(this.isFilterSyncActive()){var column=this.getController("columns").getColumnByPath(args.fullName),filterSyncController=this.getController("filterSync");if(column&&!filterSyncController._skipSyncColumnOptions){var propertyName=this._parseColumnPropertyName(args.fullName);filterSyncController._skipSyncColumnOptions=!0,"filterType"===propertyName?"exclude"!==args.value&&"exclude"!==args.previousValue||filterSyncController.syncHeaderFilter(column):"filterValues"===propertyName?filterSyncController.syncHeaderFilter(column):["filterValue","selectedFilterOperation"].indexOf(propertyName)>-1&&filterSyncController.syncFilterRow(column,column.filterValue),filterSyncController._skipSyncColumnOptions=!1}}this.callBase(args);break;default:this.callBase(args)}}}},views:{columnHeadersView:{_isHeaderFilterEmpty:function(column){return this.getController("data").isFilterSyncActive()?!filterHasField(this.option("filterValue"),getColumnIdentifier(column)):this.callBase(column)},_needUpdateFilterIndicators:function(){return!this.getController("data").isFilterSyncActive()},optionChanged:function(args){"filterValue"===args.name?this._updateHeaderFilterIndicators():this.callBase(args)}}}}};module_core.registerModule("filterSync",filterSyncModule);var filter_builder_ACTIONS=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],OPERATORS={and:"and",or:"or",notAnd:"!and",notOr:"!or"},filter_builder_EditorFactory=core_class.Z.inherit(ui_editor_factory_mixin),FilterBuilder=ui_widget.default.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:message.Z.format("dxFilterBuilder-and"),or:message.Z.format("dxFilterBuilder-or"),notAnd:message.Z.format("dxFilterBuilder-notAnd"),notOr:message.Z.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:message.Z.format("dxFilterBuilder-filterOperationBetween"),equal:message.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:message.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:message.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:message.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:message.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:message.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:message.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:message.Z.format("dxFilterBuilder-filterOperationContains"),notContains:message.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:message.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:message.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:message.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}})},_optionChanged:function(args){switch(args.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(args.value!==args.previousValue){var disableInvalidateForValue=this._disableInvalidateForValue;disableInvalidateForValue||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:args.value,previousValue:args.previousValue}),this._disableInvalidateForValue=disableInvalidateForValue}break;default:this.callBase(args)}},getFilterExpression:function(){var fields=this._getNormalizedFields();return getFilterExpression(getNormalizedFilter((0,extend.l)(!0,[],this._model)),fields,this._customOperations,"filterBuilder")},_getNormalizedFields:function(){return function getNormalizedFields(fields){return fields.reduce((function(result,field){if((0,utils_type.$K)(field.dataField)){var normalizedField={};for(var key in field)field[key]&&AVAILABLE_FIELD_PROPERTIES.indexOf(key)>-1&&(normalizedField[key]=field[key]);normalizedField.defaultCalculateFilterExpression=filtering.defaultCalculateFilterExpression,(0,utils_type.$K)(normalizedField.dataType)||(normalizedField.dataType=DEFAULT_DATA_TYPE),(0,utils_type.$K)(normalizedField.trueText)||(normalizedField.trueText=message.Z.format("dxDataGrid-trueText")),(0,utils_type.$K)(normalizedField.falseText)||(normalizedField.falseText=message.Z.format("dxDataGrid-falseText")),result.push(normalizedField)}return result}),[])}(this.option("fields"))},_updateFilter:function(){this._disableInvalidateForValue=!0;var normalizedValue=getNormalizedFilter((0,extend.l)(!0,[],this._model)),oldValue=getNormalizedFilter(this._getModel(this.option("value")));JSON.stringify(oldValue)!==JSON.stringify(normalizedValue)&&this.option("value",normalizedValue),this._disableInvalidateForValue=!1,this._fireContentReadyAction()},_init:function(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),this.callBase()},_initEditorFactory:function(){this._editorFactory=new filter_builder_EditorFactory},_initCustomOperations:function(){this._customOperations=function getMergedOperations(customOperations,betweenCaption,context){var result=(0,extend.l)(!0,[],customOperations),betweenIndex=-1;return result.some((function(customOperation,index){if("between"===customOperation.name)return betweenIndex=index,!0})),-1!==betweenIndex?result[betweenIndex]=(0,extend.l)(getConfig(betweenCaption,context),result[betweenIndex]):result.unshift(getConfig(betweenCaption,context)),result}(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)},_getDefaultGroupOperation:function(){var _this$option$,_this$option;return null!==(_this$option$=null===(_this$option=this.option("groupOperations"))||void 0===_this$option?void 0:_this$option[0])&&void 0!==_this$option$?_this$option$:OPERATORS.and},_getModel:function(value){return convertToInnerStructure(value,this._customOperations,this._getDefaultGroupOperation())},_initModel:function(){this._model=this._getModel(this.option("value"))},_initActions:function(){var that=this;that._actions={},filter_builder_ACTIONS.forEach((function(action){var actionConfig=(0,extend.l)({},action.config);that._actions[action.name]=that._createActionByOption(action.name,actionConfig)}))},executeAction:function(actionName,options){var action=this._actions[actionName];return action&&action(options)},_initMarkup:function(){this.$element().addClass("dx-filterbuilder"),this.callBase(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())},_createConditionElement:function(condition,parent){return(0,renderer.Z)("<div>").addClass("dx-filterbuilder-group").append(this._createConditionItem(condition,parent))},_createGroupElementByCriteria:function(criteria,parent){for(var groupLevel=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,$group=this._createGroupElement(criteria,parent,groupLevel),$groupContent=$group.find(".dx-filterbuilder-group-content"),groupCriteria=getGroupCriteria(criteria),i=0;i<groupCriteria.length;i++){var innerCriteria=groupCriteria[i];isGroup(innerCriteria)?this._createGroupElementByCriteria(innerCriteria,criteria,groupLevel+1).appendTo($groupContent):isCondition(innerCriteria)&&this._createConditionElement(innerCriteria,criteria).appendTo($groupContent)}return $group},_createGroupElement:function(criteria,parent,groupLevel){var $groupItem=(0,renderer.Z)("<div>").addClass("dx-filterbuilder-group-item"),$groupContent=(0,renderer.Z)("<div>").addClass("dx-filterbuilder-group-content"),$group=(0,renderer.Z)("<div>").addClass("dx-filterbuilder-group").append($groupItem).append($groupContent);return null!=parent&&this._createRemoveButton((()=>{removeItem(parent,criteria),$group.remove(),this._updateFilter()})).appendTo($groupItem),this._createGroupOperationButton(criteria).appendTo($groupItem),this._createAddButton((()=>{var newGroup=createEmptyGroup(this._getDefaultGroupOperation());addItem(newGroup,criteria),this._createGroupElement(newGroup,criteria,groupLevel+1).appendTo($groupContent),this._updateFilter()}),(()=>{var newCondition=function createCondition(field,customOperations){var condition=[field.dataField,"",""];return updateConditionByOperation(condition,getDefaultOperation(field),customOperations),condition}(this.option("fields")[0],this._customOperations);addItem(newCondition,criteria),this._createConditionElement(newCondition,criteria).appendTo($groupContent),this._updateFilter()}),groupLevel).appendTo($groupItem),$group},_createButton:function(caption){return(0,renderer.Z)("<div>").text(caption)},_createGroupOperationButton:function(criteria){var groupOperations=this._getGroupOperations(criteria),groupMenuItem=function getGroupMenuItem(group,availableGroups){var groupValue=getGroupValue(group);return availableGroups.filter((function(item){return item.value===groupValue}))[0]}(criteria,groupOperations),caption=groupMenuItem.text,$operationButton=groupOperations&&groupOperations.length<2?this._createButton(caption).addClass("dx-state-disabled"):this._createButtonWithMenu({caption,menu:{items:groupOperations,displayExpr:"text",keyExpr:"value",onItemClick:e=>{groupMenuItem!==e.itemData&&(setGroupValue(criteria,e.itemData.value),$operationButton.text(e.itemData.text),groupMenuItem=e.itemData,this._updateFilter())},onContentReady:function(e){e.component.selectItem(groupMenuItem)},cssClass:"dx-filterbuilder-group-operations"}});return $operationButton.addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-group-operation").attr("tabindex",0)},_createButtonWithMenu:function(options){var handler,that=this,removeMenu=function(){that.$element().find(".dx-state-active").removeClass("dx-state-active"),that.$element().find(".dx-overlay .dx-treeview").remove(),that.$element().find(".dx-overlay").remove()},rtlEnabled=this.option("rtlEnabled"),position=rtlEnabled?"right":"left",$button=this._createButton(options.caption);return(0,extend.l)(options.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(handler=options.menu.onItemClick,function(e){handler(e),"dxclick"===e.event.type&&removeMenu()}),onHiding:function(e){$button.removeClass("dx-state-active")},position:{my:position+" top",at:position+" bottom",offset:"0 1",of:$button,collision:"flip"},animation:null,onHidden:function(){removeMenu()},cssClass:"dx-filterbuilder-overlay "+options.menu.cssClass,rtlEnabled}),options.popup={onShown:function(info){var treeViewElement=(0,renderer.Z)(info.component.content()).find(".dx-treeview"),treeView=treeViewElement.dxTreeView("instance");events_engine.Z.on(treeViewElement,"keyup keydown",(function(e){var keyName=(0,events_utils.EV)(e);("keydown"===e.type&&"tab"===keyName||"keyup"===e.type&&("escape"===keyName||"enter"===keyName))&&(info.component.hide(),events_engine.Z.trigger(options.menu.position.of,"focus"))})),treeView.focus(),treeView.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey($button,(function(){removeMenu(),that._createPopupWithTreeView(options,that.$element()),$button.addClass("dx-state-active")})),$button},_hasValueButton:function(condition){var customOperation=getCustomOperation(this._customOperations,condition[1]);return customOperation?!1!==customOperation.hasValue:null!==condition[2]},_createOperationButtonWithMenu:function(condition,field){var that=this,availableOperations=function getAvailableOperations(field,filterOperationDescriptions,customOperations){var filterOperations=getFilterOperations(field),isLookupField=!!field.lookup;return customOperations.forEach((function(customOperation){if(!field.filterOperations&&-1===filterOperations.indexOf(customOperation.name)){var dataTypes=customOperation&&customOperation.dataTypes;(!isLookupField||!customOperation.notForLookup)&&dataTypes&&dataTypes.indexOf(field.dataType||DEFAULT_DATA_TYPE)>=0&&filterOperations.push(customOperation.name)}})),filterOperations.map((function(operation){var customOperation=getCustomOperation(customOperations,operation);return customOperation?{icon:customOperation.icon||"icon-none",text:customOperation.caption||(0,inflector.GK)(customOperation.name),value:customOperation.name,isCustom:!0}:{icon:ui_filter_operations_dictionary.getIconByFilterOperation(operation)||"icon-none",text:getCaptionByOperation(operation,filterOperationDescriptions),value:operation}}))}(field,this.option("filterOperationDescriptions"),this._customOperations),currentOperation=function getOperationFromAvailable(operation,availableOperations){for(var i=0;i<availableOperations.length;i++)if(availableOperations[i].value===operation)return availableOperations[i];throw new ui_errors.Z.Error("E1048",operation)}(getOperationValue(condition),availableOperations),$operationButton=this._createButtonWithMenu({caption:currentOperation.text,menu:{items:availableOperations,displayExpr:"text",onItemRendered:function(e){e.itemData.isCustom&&(0,renderer.Z)(e.itemElement).addClass("dx-filterbuilder-menu-custom-operation")},onContentReady:function(e){e.component.selectItem(currentOperation)},onItemClick:e=>{if(currentOperation!==e.itemData){currentOperation=e.itemData,updateConditionByOperation(condition,currentOperation.value,that._customOperations);var $valueButton=$operationButton.siblings().filter(".dx-filterbuilder-item-value");that._hasValueButton(condition)?(0!==$valueButton.length&&$valueButton.remove(),that._createValueButton(condition,field).appendTo($operationButton.parent())):$valueButton.remove(),$operationButton.html(currentOperation.text),this._updateFilter()}},cssClass:"dx-filterbuilder-operations"}}).addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-operation").attr("tabindex",0);return $operationButton},_createOperationAndValueButtons:function(condition,field,$item){this._createOperationButtonWithMenu(condition,field).appendTo($item),this._hasValueButton(condition)&&this._createValueButton(condition,field).appendTo($item)},_createFieldButtonWithMenu:function(fields,condition,field){var that=this,allowHierarchicalFields=this.option("allowHierarchicalFields"),items=getItems(fields,allowHierarchicalFields),item=getField(field.name||field.dataField,items),getFullCaption=function(item,items){return allowHierarchicalFields?getCaptionWithParents(item,items):item.caption},$fieldButton=this._createButtonWithMenu({caption:getFullCaption(item,items),menu:{items,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:e=>{if(item!==e.itemData){item=e.itemData,condition[0]=item.name||item.dataField,condition[2]="object"===item.dataType?null:"",updateConditionByOperation(condition,getDefaultOperation(item),that._customOperations),$fieldButton.siblings().filter(".dx-filterbuilder-text").remove(),that._createOperationAndValueButtons(condition,item,$fieldButton.parent());var caption=getFullCaption(item,e.component.option("items"));$fieldButton.html(caption),this._updateFilter()}},onContentReady:function(e){e.component.selectItem(item)},cssClass:"dx-filterbuilder-fields"}}).addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-field").attr("tabindex",0);return $fieldButton},_createConditionItem:function(condition,parent){var $item=(0,renderer.Z)("<div>").addClass("dx-filterbuilder-group-item"),fields=this._getNormalizedFields(),field=getField(condition[0],fields);return this._createRemoveButton((()=>{removeItem(parent,condition),1===$item.parent().children().length?$item.parent().remove():$item.remove(),this._updateFilter()})).appendTo($item),this._createFieldButtonWithMenu(fields,condition,field).appendTo($item),this._createOperationAndValueButtons(condition,field,$item),$item},_getGroupOperations:function(criteria){var groupOperations=this.option("groupOperations"),groupOperationDescriptions=this.option("groupOperationDescriptions");return groupOperations&&groupOperations.length||(groupOperations=[getGroupValue(criteria).replace("!","not")]),groupOperations.map((operation=>({text:groupOperationDescriptions[operation],value:OPERATORS[operation]})))},_createRemoveButton:function(handler){var $removeButton=(0,renderer.Z)("<div>").addClass("dx-filterbuilder-action-icon").addClass("dx-icon-remove").addClass("dx-filterbuilder-action").attr("tabindex",0);return this._subscribeOnClickAndEnterKey($removeButton,handler),$removeButton},_createAddButton:function(addGroupHandler,addConditionHandler,groupLevel){var $button,maxGroupLevel=this.option("maxGroupLevel");return(0,utils_type.$K)(maxGroupLevel)&&groupLevel>=maxGroupLevel?($button=this._createButton(),this._subscribeOnClickAndEnterKey($button,addConditionHandler)):$button=this._createButtonWithMenu({menu:{items:[{caption:message.Z.format("dxFilterBuilder-addCondition"),click:addConditionHandler},{caption:message.Z.format("dxFilterBuilder-addGroup"),click:addGroupHandler}],displayExpr:"caption",onItemClick:function(e){e.itemData.click()},cssClass:"dx-filterbuilder-add-condition"}}),$button.addClass("dx-filterbuilder-action-icon").addClass("dx-icon-plus").addClass("dx-filterbuilder-action").attr("tabindex",0)},_createValueText:function(item,field,$container){var that=this,$text=(0,renderer.Z)("<div>").html("&nbsp;").addClass("dx-filterbuilder-item-value-text").attr("tabindex",0).appendTo($container),value=item[2],customOperation=getCustomOperation(that._customOperations,item[1]);return!customOperation&&field.lookup?getCurrentLookupValueText(field,value,(function(result){renderValueText($text,result)})):(0,utils_deferred.gx)(getCurrentValueText(field,value,customOperation)).done((result=>{renderValueText($text,result,customOperation)})),that._subscribeOnClickAndEnterKey($text,(function(e){"keyup"===e.type&&e.stopPropagation(),that._createValueEditorWithEvents(item,field,$container)})),$text},_updateConditionValue:function(item,value,callback){item[2]!==value&&(item[2]=value),callback(),this._updateFilter()},_addDocumentKeyUp:function($editor,handler){var isComposing=!1,hasCompositionJustEnded=!1,document=dom_adapter.Z.getDocument(),documentKeyUpHandler=e=>{isComposing||hasCompositionJustEnded?hasCompositionJustEnded=!1:handler(e)};events_engine.Z.on(document,"keyup",documentKeyUpHandler);var input=$editor.find("input");events_engine.Z.on(input,"compositionstart",(()=>{isComposing=!0})),events_engine.Z.on(input,"compositionend",(()=>{isComposing=!1,hasCompositionJustEnded=!0})),events_engine.Z.on(input,"keydown",(event=>{229!==event.which&&(hasCompositionJustEnded=!1)})),this._documentKeyUpHandler=documentKeyUpHandler},_addDocumentClick:function($editor,closeEditorFunc){var document=dom_adapter.Z.getDocument(),documentClickHandler=e=>{this._isFocusOnEditorParts($editor,e.target)||(events_engine.Z.trigger($editor.find("input"),"change"),closeEditorFunc())};events_engine.Z.on(document,"dxpointerdown",documentClickHandler),this._documentClickHandler=documentClickHandler},_isFocusOnEditorParts:function($editor,target){var activeElement=target||dom_adapter.Z.getActiveElement();return(0,renderer.Z)(activeElement).closest($editor.children()).length||(0,renderer.Z)(activeElement).closest(".dx-dropdowneditor-overlay").length},_removeEvents:function(){var document=dom_adapter.Z.getDocument();(0,utils_type.$K)(this._documentKeyUpHandler)&&events_engine.Z.off(document,"keyup",this._documentKeyUpHandler),(0,utils_type.$K)(this._documentClickHandler)&&events_engine.Z.off(document,"dxpointerdown",this._documentClickHandler)},_dispose:function(){this._removeEvents(),this.callBase()},_createValueEditorWithEvents:function(item,field,$container){var value=item[2],createValueText=()=>($container.empty(),this._removeEvents(),this._createValueText(item,field,$container)),closeEditor=()=>{this._updateConditionValue(item,value,(function(){createValueText()}))},options={value:""===value?null:value,filterOperation:getOperationValue(item),setValue:function(data){value=null===data?"":data},closeEditor,text:$container.text()};$container.empty();var $editor=this._createValueEditor($container,field,options);events_engine.Z.trigger($editor.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick($editor,closeEditor),this._addDocumentKeyUp($editor,(e=>{var keyName=(0,events_utils.EV)(e);if("tab"===keyName){if(this._isFocusOnEditorParts($editor))return;this._updateConditionValue(item,value,(function(){createValueText(),e.shiftKey&&events_engine.Z.trigger($container.prev(),"focus")}))}"escape"===keyName&&events_engine.Z.trigger(createValueText(),"focus"),"enter"===keyName&&this._updateConditionValue(item,value,(function(){events_engine.Z.trigger(createValueText(),"focus")}))})),this._fireContentReadyAction()},_createValueButton:function(item,field){var $valueButton=(0,renderer.Z)("<div>").addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-value");return this._createValueText(item,field,$valueButton),$valueButton},_createValueEditor:function($container,field,options){var $editor=(0,renderer.Z)("<div>").attr("tabindex",0).appendTo($container),customOperation=getCustomOperation(this._customOperations,options.filterOperation),editorTemplate=customOperation&&customOperation.editorTemplate?customOperation.editorTemplate:field.editorTemplate;editorTemplate?this._getTemplate(editorTemplate).render({model:(0,extend.l)({field},options),container:$editor}):this._editorFactory.createEditor.call(this,$editor,(0,extend.l)({},field,options,{parentType:"filterBuilder"}));return $editor},_createPopupWithTreeView:function(options,$container){var that=this,$popup=(0,renderer.Z)("<div>").addClass(options.menu.cssClass).appendTo($container);this._createComponent($popup,ui_popup.Z,{onHiding:options.menu.onHiding,onHidden:options.menu.onHidden,rtlEnabled:options.menu.rtlEnabled,position:options.menu.position,animation:options.menu.animation,contentTemplate:function(contentElement){var $menuContainer=(0,renderer.Z)("<div>").appendTo(contentElement);that._createComponent($menuContainer,tree_view.Z,options.menu),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:function(){return getElementMaxHeightByWindow(options.menu.position.of)},visible:!0,focusStateEnabled:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),hideOnOutsideClick:!0,onShown:options.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:options.menu.cssClass})},_subscribeOnClickAndEnterKey:function($button,handler){events_engine.Z.on($button,"dxclick",handler),events_engine.Z.on($button,"keyup",(function(e){"enter"===(0,events_utils.EV)(e)&&handler(e)}))}});(0,component_registrator.Z)("dxFilterBuilder",FilterBuilder);const ui_filter_builder=FilterBuilder;var scroll_view=__webpack_require__("./node_modules/devextreme/esm/ui/scroll_view.js"),filterBuilderModule={defaultOptions:function(){return{filterBuilder:{groupOperationDescriptions:{and:message.Z.format("dxFilterBuilder-and"),or:message.Z.format("dxFilterBuilder-or"),notAnd:message.Z.format("dxFilterBuilder-notAnd"),notOr:message.Z.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:message.Z.format("dxFilterBuilder-filterOperationBetween"),equal:message.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:message.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:message.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:message.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:message.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:message.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:message.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:message.Z.format("dxFilterBuilder-filterOperationContains"),notContains:message.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:message.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:message.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:message.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}},views:{filterBuilderView:ui_grid_core_modules.View.inherit({_renderCore:function(){this._updatePopupOptions()},_updatePopupOptions:function(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()},_disposePopup:function(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)},_initPopup:function(){var that=this;that._disposePopup(),that._filterBuilderPopup=that._createComponent(that.element(),ui_popup.Z,(0,extend.l)({title:message.Z.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:function($contentElement){return that._getPopupContentTemplate($contentElement)},onOptionChanged:function(args){"visible"===args.name&&that.option("filterBuilderPopup.visible",args.value)},toolbarItems:that._getPopupToolbarItems()},that.option("filterBuilderPopup"),{onHidden:function(e){restoreFocus(that),that._disposePopup()}}))},_getPopupContentTemplate:function(contentElement){var $contentElement=(0,renderer.Z)(contentElement),$filterBuilderContainer=(0,renderer.Z)("<div>").appendTo((0,renderer.Z)(contentElement));this._filterBuilder=this._createComponent($filterBuilderContainer,ui_filter_builder,(0,extend.l)({value:this.option("filterValue"),fields:this.getController("columns").getFilteringColumns()},this.option("filterBuilder"),{customOperations:this.getController("filterSync").getCustomFilterOperations()})),this._createComponent($contentElement,scroll_view.Z,{direction:"both"})},_getPopupToolbarItems:function(){var that=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:message.Z.format("OK"),onClick:function(e){var filter=that._filterBuilder.option("value");that.option("filterValue",filter),that._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:message.Z.format("Cancel"),onClick:function(e){that._filterBuilderPopup.hide()}}}]},optionChanged:function(args){switch(args.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),args.handled=!0;break;default:this.callBase(args)}}})}};module_core.registerModule("filterBuilder",filterBuilderModule);var FilterPanelView=ui_grid_core_modules.View.inherit({isVisible:function(){return this.option("filterPanel.visible")&&this.getController("data").dataSource()},init:function(){this.getController("data").dataSourceChanged.add((()=>this.render()))},_renderCore:function(){var $element=this.element();$element.empty().addClass(this.addWidgetPrefix("filter-panel"));var $leftContainer=(0,renderer.Z)("<div>").addClass(this.addWidgetPrefix("filter-panel-left")).appendTo($element);this.option("filterValue")||this._filterValueBuffer?($leftContainer.append(this._getCheckElement()).append(this._getFilterElement()).append(this._getTextElement()),$element.append(this._getRemoveButtonElement())):$leftContainer.append(this._getFilterElement()).append(this._getTextElement())},_getCheckElement:function(){var that=this,$element=(0,renderer.Z)("<div>").addClass(this.addWidgetPrefix("filter-panel-checkbox"));return that._createComponent($element,check_box.Z,{value:that.option("filterPanel.filterEnabled"),onValueChanged:function(e){that.option("filterPanel.filterEnabled",e.value)}}),$element.attr("title",this.option("filterPanel.texts.filterEnabledHint")),$element},_getFilterElement:function(){var that=this,$element=(0,renderer.Z)("<div>").addClass("dx-icon-filter");return events_engine.Z.on($element,"click",(()=>that._showFilterBuilder())),module_accessibility_registerKeyboardAction("filterPanel",that,$element,void 0,(()=>that._showFilterBuilder())),that._addTabIndexToElement($element),$element},_getTextElement:function(){var filterText,that=this,$textElement=(0,renderer.Z)("<div>").addClass(that.addWidgetPrefix("filter-panel-text")),filterValue=that.option("filterValue");return filterValue?(0,utils_deferred.gx)(that.getFilterText(filterValue,that.getController("filterSync").getCustomFilterOperations())).done((function(filterText){var customizeText=that.option("filterPanel.customizeText");if(customizeText){var customText=customizeText({component:that.component,filterValue,text:filterText});"string"==typeof customText&&(filterText=customText)}$textElement.text(filterText)})):(filterText=that.option("filterPanel.texts.createFilter"),$textElement.text(filterText)),events_engine.Z.on($textElement,"click",(()=>that._showFilterBuilder())),module_accessibility_registerKeyboardAction("filterPanel",that,$textElement,void 0,(()=>that._showFilterBuilder())),that._addTabIndexToElement($textElement),$textElement},_showFilterBuilder:function(){this.option("filterBuilderPopup.visible",!0)},_getRemoveButtonElement:function(){var that=this,clearFilterValue=()=>that.option("filterValue",null),$element=(0,renderer.Z)("<div>").addClass(that.addWidgetPrefix("filter-panel-clear-filter")).text(that.option("filterPanel.texts.clearFilter"));return events_engine.Z.on($element,"click",clearFilterValue),module_accessibility_registerKeyboardAction("filterPanel",this,$element,void 0,clearFilterValue),that._addTabIndexToElement($element),$element},_addTabIndexToElement:function($element){if(!this.option("useLegacyKeyboardNavigation")){var tabindex=this.option("tabindex")||0;$element.attr("tabindex",tabindex)}},optionChanged:function(args){switch(args.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),args.handled=!0;break;case"filterPanel":this._invalidate(),args.handled=!0;break;default:this.callBase(args)}},_getConditionText:function(fieldText,operationText,valueText){var result="[".concat(fieldText,"] ").concat(operationText);return(0,utils_type.$K)(valueText)&&(result+=valueText),result},_getValueMaskedText:function(value){return Array.isArray(value)?"('".concat(value.join("', '"),"')"):" '".concat(value,"'")},_getValueText:function(field,customOperation,value){var deferred=new utils_deferred.BH,hasCustomOperation=customOperation&&customOperation.customizeText;if((0,utils_type.$K)(value)||hasCustomOperation)if(!hasCustomOperation&&field.lookup)getCurrentLookupValueText(field,value,(data=>{deferred.resolve(this._getValueMaskedText(data))}));else{var displayValue=Array.isArray(value)?value:ui_grid_core_utils.getDisplayValue(field,value);(0,utils_deferred.gx)(getCurrentValueText(field,displayValue,customOperation,"filterPanel")).done((data=>{deferred.resolve(this._getValueMaskedText(data))}))}else deferred.resolve("");return deferred.promise()},getConditionText:function(filterValue,options){var operationText,that=this,operation=filterValue[1],deferred=new utils_deferred.BH,customOperation=getCustomOperation(options.customOperations,operation),field=getField(filterValue[0],options.columns),fieldText=field.caption||"",value=filterValue[2];return operationText=customOperation?customOperation.caption||(0,inflector.GK)(customOperation.name):getCaptionByOperation(null===value?"="===operation?"isblank":"isnotblank":operation,options.filterOperationDescriptions),this._getValueText(field,customOperation,value).done((valueText=>{deferred.resolve(that._getConditionText(fieldText,operationText,valueText))})),deferred},getGroupText:function(filterValue,options,isInnerGroup){var that=this,result=new utils_deferred.BH,textParts=[],groupValue=getGroupValue(filterValue);return filterValue.forEach((item=>{isCondition(item)?textParts.push(that.getConditionText(item,options)):isGroup(item)&&textParts.push(that.getGroupText(item,options,!0))})),utils_deferred.gx.apply(this,textParts).done((function(){for(var text,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if("!"===groupValue[0]){var groupText=options.groupOperationDescriptions["not"+groupValue.substring(1,2).toUpperCase()+groupValue.substring(2)].split(" ");text="".concat(groupText[0]," ").concat(args[0])}else text=args.join(" ".concat(options.groupOperationDescriptions[groupValue]," "));isInnerGroup&&(text="(".concat(text,")")),result.resolve(text)})),result},getFilterText:function(filterValue,customOperations){var options={customOperations,columns:this.getController("columns").getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return isCondition(filterValue)?this.getConditionText(filterValue,options):this.getGroupText(filterValue,options)}}),filterPanelModule={defaultOptions:function(){return{filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:message.Z.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:message.Z.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:message.Z.format("dxDataGrid-filterPanelFilterEnabledHint")}}}},views:{filterPanelView:FilterPanelView},extenders:{controllers:{data:{optionChanged:function(args){if("filterPanel"===args.name)this._applyFilter(),args.handled=!0;else this.callBase(args)}}}}};module_core.registerModule("filterPanel",filterPanelModule);var common_component=__webpack_require__("./node_modules/devextreme/esm/renovation/component_wrapper/common/component.js");class GridPagerWrapper extends common_component.Z{_optionChanged(args){switch(args.name){case"pageIndex":var pageIndexChanged=this.option("pageIndexChanged");pageIndexChanged&&pageIndexChanged(args.value);break;case"pageSize":var pageSizeChanged=this.option("pageSizeChanged");pageSizeChanged&&pageSizeChanged(args.value)}super._optionChanged(args)}}var objectWithoutPropertiesLoose=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),index_esm=__webpack_require__("./node_modules/inferno/index.esm.js"),inferno=__webpack_require__("./node_modules/@devextreme/runtime/esm/inferno/index.js"),resize_callbacks=__webpack_require__("./node_modules/devextreme/esm/core/utils/resize_callbacks.js"),get_computed_style=__webpack_require__("./node_modules/devextreme/esm/renovation/utils/get_computed_style.js"),type_conversion=__webpack_require__("./node_modules/devextreme/esm/renovation/utils/type_conversion.js");function getElementStyle(name,element){var _getElementComputedSt,computedStyle=null!==(_getElementComputedSt=(0,get_computed_style.Z)(element))&&void 0!==_getElementComputedSt?_getElementComputedSt:{};return(0,type_conversion.H)(computedStyle[name])}function get_element_width_getElementWidth(element){return getElementStyle("marginLeft",element)+getElementStyle("marginRight",element)+getElementStyle("width",element)}function getElementMinWidth(element){return getElementStyle("minWidth",element)}var _excluded=["contentTemplate","pagerProps"];function getElementsWidth(_ref4){var{info,pageSizes,pages,parent}=_ref4,parentWidth=function getElementContentWidth(element){var padding=getElementStyle("paddingLeft",element)+getElementStyle("paddingRight",element);return getElementStyle("width",element)-padding}(parent),pageSizesWidth=get_element_width_getElementWidth(pageSizes),infoWidth=get_element_width_getElementWidth(info),pagesHtmlWidth=get_element_width_getElementWidth(pages);return{parent:parentWidth,pageSizes:pageSizesWidth,info:infoWidth+getElementStyle("marginLeft",info)+getElementStyle("marginRight",info),pages:pagesHtmlWidth}}class ResizableContainer extends inferno.OS{constructor(props){super(props),this.parentRef=(0,index_esm.Vf)(),this.pageSizesRef=(0,index_esm.Vf)(),this.infoTextRef=(0,index_esm.Vf)(),this.pagesRef=(0,index_esm.Vf)(),this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}createEffects(){return[new inferno.b0(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new inferno.b0(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])]}updateEffects(){var _this$_effects$,_this$_effects$2;null===(_this$_effects$=this._effects[0])||void 0===_this$_effects$||_this$_effects$.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),null===(_this$_effects$2=this._effects[1])||void 0===_this$_effects$2||_this$_effects$2.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])}subscribeToResize(){var callback=()=>{this.parentWidth>0&&this.updateAdaptivityProps()};return resize_callbacks.Z.add(callback),()=>{resize_callbacks.Z.remove(callback)}}effectUpdateChildProps(){this.parentWidth>0&&this.updateAdaptivityProps()}get contentAttributes(){var{className,displayMode,gridCompatibility,hasKnownLastPage,infoText,label,lightModeEnabled,maxPagesCount,onKeyDown,pageCount,pageIndex,pageIndexChange,pageSize,pageSizeChange,pageSizes,pagesCountText,pagesNavigatorVisible,rtlEnabled,showInfo,showNavigationButtons,showPageSizes,totalCount,visible}=this.props.pagerProps;return(0,esm_extends.Z)({},this.restAttributes,{pageSize,pageIndex,pageIndexChange,pageSizeChange,gridCompatibility,className,showInfo,infoText,lightModeEnabled,displayMode,maxPagesCount,pageCount,pagesCountText,visible,hasKnownLastPage,pagesNavigatorVisible,showPageSizes,pageSizes,rtlEnabled,showNavigationButtons,totalCount,onKeyDown,label})}get parentWidth(){return this.parentRef.current?get_element_width_getElementWidth(this.parentRef.current):0}updateAdaptivityProps(){var currentElementsWidth=getElementsWidth({parent:this.parentRef.current,pageSizes:this.pageSizesRef.current,info:this.infoTextRef.current,pages:this.pagesRef.current});if(this.actualInfoTextVisible===this.state.infoTextVisible&&this.actualIsLargeDisplayMode===this.state.isLargeDisplayMode){var isEmpty=!(0,utils_type.$K)(this.elementsWidth);isEmpty&&(this.elementsWidth={}),(isEmpty||this.state.isLargeDisplayMode)&&(this.elementsWidth.pageSizes=currentElementsWidth.pageSizes,this.elementsWidth.pages=currentElementsWidth.pages),(isEmpty||this.state.infoTextVisible)&&(this.elementsWidth.info=currentElementsWidth.info),this.actualIsLargeDisplayMode=function calculateLargeDisplayMode(_ref2){var{pageSizes:pageSizesWidth,pages:pagesWidth,parent:parentWidth}=_ref2;return parentWidth-(pageSizesWidth+pagesWidth)>0}((0,esm_extends.Z)({parent:currentElementsWidth.parent},{pageSizes:this.elementsWidth.pageSizes,pages:this.elementsWidth.pages})),this.actualInfoTextVisible=function calculateInfoTextVisible(_ref3){var{info:infoWidth,pageSizes:pageSizesWidth,pages:pagesWidth,parent:parentWidth}=_ref3;return parentWidth-(pageSizesWidth+pagesWidth+infoWidth)>0}((0,esm_extends.Z)({},currentElementsWidth,{info:this.elementsWidth.info})),this.setState((__state_argument=>({infoTextVisible:this.actualInfoTextVisible}))),this.setState((__state_argument=>({isLargeDisplayMode:this.actualIsLargeDisplayMode})))}}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,_excluded)}render(){var TemplateProp,props=this.props;return(_ref=>{var{contentAttributes,infoTextRef,infoTextVisible,isLargeDisplayMode,pageSizesRef,pagesRef,parentRef,props:{contentTemplate:Content}}=_ref;return Content((0,esm_extends.Z)({rootElementRef:parentRef,pageSizesRef,infoTextRef,pagesRef,infoTextVisible,isLargeDisplayMode},contentAttributes))})({props:(0,esm_extends.Z)({},props,{contentTemplate:(TemplateProp=props.contentTemplate,TemplateProp&&(TemplateProp.defaultProps?props=>(0,index_esm.vs)((0,index_esm.Iz)(2,TemplateProp,(0,esm_extends.Z)({},props))):TemplateProp))}),infoTextVisible:this.state.infoTextVisible,isLargeDisplayMode:this.state.isLargeDisplayMode,parentRef:this.parentRef,pageSizesRef:this.pageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,contentAttributes:this.contentAttributes,parentWidth:this.parentWidth,updateAdaptivityProps:this.updateAdaptivityProps,restAttributes:this.restAttributes})}}ResizableContainer.defaultProps={};var BasePagerProps={gridCompatibility:!0,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:10,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizes:!0,pageSizes:Object.freeze([5,10]),showNavigationButtons:!1,totalCount:0,get label(){return message.Z.format("dxPager-ariaLabel")}},PagerProps=Object.create(Object.prototype,(0,esm_extends.Z)(Object.getOwnPropertyDescriptors(BasePagerProps),Object.getOwnPropertyDescriptors({defaultPageSize:5,pageSizeChange:()=>{},defaultPageIndex:1,pageIndexChange:()=>{}}))),InternalPagerProps=Object.create(Object.prototype,(0,esm_extends.Z)(Object.getOwnPropertyDescriptors(BasePagerProps),Object.getOwnPropertyDescriptors({pageSize:5,pageIndex:1}))),info_excluded=["infoText","pageCount","pageIndex","rootElementRef","totalCount"],InfoTextPropsType={get pageIndex(){return InternalPagerProps.pageIndex},get pageCount(){return InternalPagerProps.pageCount},get totalCount(){return InternalPagerProps.totalCount}};class InfoText extends inferno.Ul{constructor(props){super(props),this.state={}}get infoText(){var _this$props$infoText;return(null!==(_this$props$infoText=this.props.infoText)&&void 0!==_this$props$infoText?_this$props$infoText:"")||message.Z.getFormatter("dxPager-infoText")()}get text(){var{pageCount,pageIndex,totalCount}=this.props;return(0,string.WU)(this.infoText,(pageIndex+1).toString(),pageCount.toString(),totalCount.toString())}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,info_excluded)}render(){var props=this.props;return(_ref=>{var{props:{rootElementRef},text}=_ref;return(0,index_esm.Wm)(1,"div","dx-info",text,0,null,null,rootElementRef)})({props:(0,esm_extends.Z)({},props),infoText:this.infoText,text:this.text,restAttributes:this.restAttributes})}}InfoText.defaultProps=InfoTextPropsType;var subscribe_to_event=__webpack_require__("./node_modules/devextreme/esm/renovation/utils/subscribe_to_event.js"),KeyboardActionContext=(0,inferno.kr)(void 0),light_button_excluded=["children","className","label","onClick","selected","tabIndex"];class LightButton extends inferno.OS{constructor(props){super(props),this.state={},this.widgetRef=(0,index_esm.Vf)(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}get keyboardContext(){return this.context[KeyboardActionContext.id]?this.context[KeyboardActionContext.id]:KeyboardActionContext.defaultValue}createEffects(){return[new inferno.b0(this.keyboardEffect,[this.keyboardContext,this.props.onClick]),new inferno.b0(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var _this$_effects$,_this$_effects$2;null===(_this$_effects$=this._effects[0])||void 0===_this$_effects$||_this$_effects$.update([this.keyboardContext,this.props.onClick]),null===(_this$_effects$2=this._effects[1])||void 0===_this$_effects$2||_this$_effects$2.update([this.props.onClick])}keyboardEffect(){return this.keyboardContext.registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return(0,subscribe_to_event.OZ)(this.widgetRef.current,this.props.onClick)}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,light_button_excluded)}render(){var props=this.props;return(_ref=>{var{props:{children,className,label,selected,tabIndex},widgetRef}=_ref;return(0,index_esm.Wm)(1,"div",className,children,0,{tabIndex,role:"button","aria-label":label,"aria-current":selected?"page":void 0},null,widgetRef)})({props:(0,esm_extends.Z)({},props),widgetRef:this.widgetRef,keyboardContext:this.keyboardContext,restAttributes:this.restAttributes})}}LightButton.defaultProps={className:"",label:"",tabIndex:0,selected:!1};var PAGER_SELECTED_PAGE_SIZE_CLASS="".concat("dx-page-size"," ").concat("dx-selection"),combine_classes=__webpack_require__("./node_modules/devextreme/esm/renovation/utils/combine_classes.js"),page_excluded=["className","index","onClick","selected"],PageProps={index:0,selected:!1,className:"dx-page"};class Page extends inferno.Ul{constructor(props){super(props),this.state={}}get label(){return(0,string.WU)(message.Z.getFormatter("dxPager-page"),this.value)}get value(){return this.props.index+1}get className(){var{selected}=this.props;return(0,combine_classes.G)({["".concat(this.props.className)]:!!this.props.className,"dx-selection":!!selected})}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,page_excluded)}render(){var props=this.props;return(_ref=>{var{className,label,props:{onClick,selected},value}=_ref;return(0,index_esm.Iz)(2,LightButton,{className,label,onClick,selected,children:value})})({props:(0,esm_extends.Z)({},props),label:this.label,value:this.value,className:this.className,restAttributes:this.restAttributes})}}Page.defaultProps=PageProps;var config_context=__webpack_require__("./node_modules/devextreme/esm/renovation/common/config_context.js"),large_excluded=["pageIndexes"],_excluded2=["maxPagesCount","pageCount","pageIndex","pageIndexChange"];function getDelimiterType(startIndex,slidingWindowSize,pageCount){return 1===startIndex?"high":startIndex+slidingWindowSize===pageCount-1?"low":"both"}function createPageIndexesBySlidingWindowIndexes(slidingWindowIndexes,pageCount,delimiter){var pageIndexes=[],indexesForReuse=[];switch(delimiter){case"none":pageIndexes=[...slidingWindowIndexes];break;case"both":pageIndexes=[0,"low",...slidingWindowIndexes,"high",pageCount-1],indexesForReuse=slidingWindowIndexes.slice(1,-1);break;case"high":pageIndexes=[0,...slidingWindowIndexes,"high",pageCount-1],indexesForReuse=slidingWindowIndexes.slice(0,-1);break;case"low":pageIndexes=[0,"low",...slidingWindowIndexes,pageCount-1],indexesForReuse=slidingWindowIndexes.slice(1)}return{slidingWindowIndexes,indexesForReuse,pageIndexes}}function createPageIndexes(startIndex,slidingWindowSize,pageCount,delimiter){for(var slidingWindowIndexes=[],i=0;i<slidingWindowSize;i+=1)slidingWindowIndexes.push(i+startIndex);return createPageIndexesBySlidingWindowIndexes(slidingWindowIndexes,pageCount,delimiter)}var PagesLargePropsType={get pageIndex(){return InternalPagerProps.pageIndex},get maxPagesCount(){return InternalPagerProps.maxPagesCount},get pageCount(){return InternalPagerProps.pageCount}};class PagesLarge extends inferno.Ul{constructor(props){super(props),this.state={},this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}get config(){return this.context[config_context.E.id]?this.context[config_context.E.id]:config_context.E.defaultValue}get slidingWindowState(){var slidingWindowState=this.slidingWindowStateHolder;return slidingWindowState||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(currentPageCount,pageIndex){var{indexesForReuse}=this.slidingWindowState,lastPageIsFartherThanWindow=indexesForReuse.slice(-1)[0]<currentPageCount-1,pageIndexExistInIndexes=indexesForReuse.includes(pageIndex);return lastPageIsFartherThanWindow&&pageIndexExistInIndexes}generatePageIndexes(){var{pageCount,pageIndex}=this.props,startIndex=0,{slidingWindowIndexes}=this.slidingWindowState,_createPageIndexes=createPageIndexes(startIndex=pageIndex===slidingWindowIndexes[0]?pageIndex-1:pageIndex===slidingWindowIndexes[slidingWindowIndexes.length-1]?pageIndex+2-4:pageIndex<4?1:pageIndex>=pageCount-4?pageCount-4-1:pageIndex-1,4,pageCount,getDelimiterType(startIndex,4,pageCount)),{pageIndexes}=_createPageIndexes,slidingWindowState=(0,objectWithoutPropertiesLoose.Z)(_createPageIndexes,large_excluded);return this.slidingWindowStateHolder=slidingWindowState,pageIndexes}isSlidingWindowMode(){var{maxPagesCount,pageCount}=this.props;return pageCount<=4||pageCount<=maxPagesCount}onPageClick(pageIndex){this.props.pageIndexChange(pageIndex)}get pageIndexes(){var{pageCount}=this.props;if(this.isSlidingWindowMode())return createPageIndexes(0,pageCount,pageCount,"none").pageIndexes;if(this.canReuseSlidingWindow(pageCount,this.props.pageIndex)){var{slidingWindowIndexes}=this.slidingWindowState;return createPageIndexesBySlidingWindowIndexes(slidingWindowIndexes,pageCount,getDelimiterType(slidingWindowIndexes[0],4,pageCount)).pageIndexes}return this.generatePageIndexes()}get pages(){var _this$config,{pageIndex}=this.props,createPage=index=>{var pagerProps="low"===index||"high"===index?null:{index,onClick:()=>this.onPageClick(index),selected:pageIndex===index};return{key:index.toString(),pageProps:pagerProps}};return(null!==(_this$config=this.config)&&void 0!==_this$config&&_this$config.rtlEnabled?[...this.pageIndexes].reverse():this.pageIndexes).map((index=>createPage(index)))}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,_excluded2)}render(){var props=this.props;return(_ref=>{var{pages}=_ref,PagesMarkup=pages.map((_ref2=>{var{key,pageProps}=_ref2;return pageProps?(0,index_esm.Iz)(2,Page,{index:pageProps.index,selected:pageProps.selected,onClick:pageProps.onClick},key):(0,index_esm.Wm)(1,"div","dx-separator",". . .",16,null,key)}));return(0,index_esm.xJ)(PagesMarkup,0)})({props:(0,esm_extends.Z)({},props),config:this.config,pageIndexes:this.pageIndexes,pages:this.pages,restAttributes:this.restAttributes})}}PagesLarge.defaultProps=PagesLargePropsType;var dom_component_wrapper=__webpack_require__("./node_modules/devextreme/esm/renovation/ui/common/dom_component_wrapper.js"),editor=__webpack_require__("./node_modules/devextreme/esm/renovation/ui/editors/common/editor.js"),EditorStateProps={hoverStateEnabled:!0,activeStateEnabled:!0,get focusStateEnabled(){return"desktop"===devices.Z.real().deviceType&&!devices.Z.isSimulator()}},EditorLabelProps={label:"",get labelMode(){return(0,themes.x2)((0,themes.Vk)())?"floating":"static"}},number_box_excluded=["accessKey","activeStateEnabled","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","invalidValueMessage","isValid","label","labelMode","max","min","mode","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","showSpinButtons","step","tabIndex","useLargeSpinButtons","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],NumberBoxProps=Object.create(Object.prototype,(0,esm_extends.Z)(Object.getOwnPropertyDescriptors(editor.nY),Object.getOwnPropertyDescriptors({defaultValue:0,isReactComponentWrapper:!0}))),NumberBoxPropsType={get defaultValue(){return NumberBoxProps.defaultValue},get readOnly(){return NumberBoxProps.readOnly},get name(){return NumberBoxProps.name},get validationError(){return NumberBoxProps.validationError},get validationErrors(){return NumberBoxProps.validationErrors},get validationMessageMode(){return NumberBoxProps.validationMessageMode},get validationMessagePosition(){return NumberBoxProps.validationMessagePosition},get validationStatus(){return NumberBoxProps.validationStatus},get isValid(){return NumberBoxProps.isValid},get className(){return NumberBoxProps.className},get activeStateEnabled(){return EditorStateProps.activeStateEnabled},get disabled(){return NumberBoxProps.disabled},get focusStateEnabled(){return EditorStateProps.focusStateEnabled},get hoverStateEnabled(){return EditorStateProps.hoverStateEnabled},get tabIndex(){return NumberBoxProps.tabIndex},get visible(){return NumberBoxProps.visible},get label(){return EditorLabelProps.label},get labelMode(){return EditorLabelProps.labelMode},isReactComponentWrapper:!0};class NumberBox extends inferno.Ul{constructor(props){super(props),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,esm_extends.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var _this$props$value=(0,esm_extends.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,objectWithoutPropertiesLoose.Z)(_this$props$value,number_box_excluded)}render(){var props=this.props;return(_ref=>{var{componentProps,restAttributes}=_ref;return(0,index_esm.vs)((0,index_esm.Iz)(2,dom_component_wrapper.Ag,(0,esm_extends.Z)({componentType:ui_number_box,componentProps,templateNames:[]},restAttributes)))})({props:(0,esm_extends.Z)({},props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}NumberBox.defaultProps=NumberBoxPropsType;function calculateValuesFittedWidth(minWidth,values){return minWidth+10*Math.max(...values).toString().length}var small_excluded=["pageCount","pageIndex","pageIndexChange","pagesCountText"],PAGER_INFO_TEXT_CLASS="".concat("dx-info","  dx-info-text"),PagerSmallProps={get pageIndex(){return InternalPagerProps.pageIndex},get pageCount(){return InternalPagerProps.pageCount}};class PagesSmall extends inferno.OS{constructor(props){super(props),this.pageIndexRef=(0,index_esm.Vf)(),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}createEffects(){return[new inferno.b0(this.updateWidth,[this.state.minWidth])]}updateEffects(){var _this$_effects$;null===(_this$_effects$=this._effects[0])||void 0===_this$_effects$||_this$_effects$.update([this.state.minWidth])}updateWidth(){var _this$pageIndexRef$cu,el=null===(_this$pageIndexRef$cu=this.pageIndexRef.current)||void 0===_this$pageIndexRef$cu?void 0:_this$pageIndexRef$cu.querySelector(".".concat("dx-page-index"));this.setState((__state_argument=>({minWidth:el&&getElementMinWidth(el)||__state_argument.minWidth})))}get value(){return this.props.pageIndex+1}get width(){var{pageCount}=this.props;return calculateValuesFittedWidth(this.state.minWidth,[pageCount])}get pagesCountText(){var _this$props$pagesCoun;return(null!==(_this$props$pagesCoun=this.props.pagesCountText)&&void 0!==_this$props$pagesCoun?_this$props$pagesCoun:"")||message.Z.getFormatter("dxPager-pagesCountText")()}selectLastPageIndex(){this.props.pageIndexChange(this.props.pageCount-1)}valueChange(value){this.props.pageIndexChange(value-1)}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,small_excluded)}render(){var props=this.props;return(_ref=>{var{pageIndexRef,pagesCountText,props:{pageCount},selectLastPageIndex,value,valueChange,width}=_ref;return(0,index_esm.Wm)(1,"div","dx-light-pages",[(0,index_esm.Iz)(2,NumberBox,{className:"dx-page-index",min:1,max:pageCount,width,value,valueChange}),(0,index_esm.Wm)(1,"span",PAGER_INFO_TEXT_CLASS,pagesCountText,0),(0,index_esm.Iz)(2,Page,{className:"dx-pages-count",selected:!1,index:pageCount-1,onClick:selectLastPageIndex})],4,null,null,pageIndexRef)})({props:(0,esm_extends.Z)({},props),pageIndexRef:this.pageIndexRef,value:this.value,width:this.width,pagesCountText:this.pagesCountText,selectLastPageIndex:this.selectLastPageIndex,valueChange:this.valueChange,restAttributes:this.restAttributes})}}PagesSmall.defaultProps=PagerSmallProps;var page_index_selector_excluded=["hasKnownLastPage","isLargeDisplayMode","maxPagesCount","pageCount","pageIndex","pageIndexChange","pagesCountText","showNavigationButtons","totalCount"],classNames={nextEnabledClass:"".concat("dx-navigate-button"," ").concat("dx-next-button"),prevEnabledClass:"".concat("dx-navigate-button"," ").concat("dx-prev-button"),nextDisabledClass:"".concat("dx-button-disable"," ").concat("dx-navigate-button"," ").concat("dx-next-button"),prevDisabledClass:"".concat("dx-button-disable"," ").concat("dx-navigate-button"," ").concat("dx-prev-button")},reverseDirections={next:"prev",prev:"next"};var PageIndexSelectorProps_isLargeDisplayMode=!0,PageIndexSelectorPropsType={get pageIndex(){return InternalPagerProps.pageIndex},get maxPagesCount(){return InternalPagerProps.maxPagesCount},get pageCount(){return InternalPagerProps.pageCount},get hasKnownLastPage(){return InternalPagerProps.hasKnownLastPage},get showNavigationButtons(){return InternalPagerProps.showNavigationButtons},get totalCount(){return InternalPagerProps.totalCount},get isLargeDisplayMode(){return PageIndexSelectorProps_isLargeDisplayMode}};class PageIndexSelector extends inferno.Ul{constructor(props){super(props),this.state={},this.__getterCache={},this.pageIndexChange=this.pageIndexChange.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}get config(){return this.context[config_context.E.id]?this.context[config_context.E.id]:config_context.E.defaultValue}pageIndexChange(pageIndex){this.canNavigateToPage(pageIndex)&&this.props.pageIndexChange(pageIndex)}getButtonProps(direction){var _this$config,rtlAwareDirection=null!==(_this$config=this.config)&&void 0!==_this$config&&_this$config.rtlEnabled?reverseDirections[direction]:direction,canNavigate=this.canNavigateTo(rtlAwareDirection);return{className:classNames["".concat(direction).concat(canNavigate?"Enabled":"Disabled","Class")],tabIndex:canNavigate?0:-1,navigate:()=>this.navigateToPage(rtlAwareDirection)}}canNavigateToPage(pageIndex){return this.props.hasKnownLastPage?pageIndex>=0&&pageIndex<=this.props.pageCount-1:pageIndex>=0}getNextPageIndex(direction){return this.props.pageIndex+function getIncrement(direction){return"next"===direction?1:-1}(direction)}canNavigateTo(direction){return this.canNavigateToPage(this.getNextPageIndex(direction))}navigateToPage(direction){this.pageIndexChange(this.getNextPageIndex(direction))}get renderPrevButton(){var{isLargeDisplayMode,showNavigationButtons}=this.props;return!isLargeDisplayMode||showNavigationButtons}get renderNextButton(){return this.renderPrevButton||!this.props.hasKnownLastPage}get prevButtonProps(){return void 0!==this.__getterCache.prevButtonProps?this.__getterCache.prevButtonProps:this.__getterCache.prevButtonProps=(()=>this.getButtonProps("prev"))()}get nextButtonProps(){return void 0!==this.__getterCache.nextButtonProps?this.__getterCache.nextButtonProps:this.__getterCache.nextButtonProps=(()=>this.getButtonProps("next"))()}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,page_index_selector_excluded)}componentWillUpdate(nextProps,nextState,context){this.context[config_context.E.id]===context[config_context.E.id]&&this.props.hasKnownLastPage===nextProps.hasKnownLastPage&&this.props.pageCount===nextProps.pageCount&&this.props.pageIndex===nextProps.pageIndex&&this.props.pageIndexChange===nextProps.pageIndexChange||(this.__getterCache.prevButtonProps=void 0),this.context[config_context.E.id]===context[config_context.E.id]&&this.props.hasKnownLastPage===nextProps.hasKnownLastPage&&this.props.pageCount===nextProps.pageCount&&this.props.pageIndex===nextProps.pageIndex&&this.props.pageIndexChange===nextProps.pageIndexChange||(this.__getterCache.nextButtonProps=void 0)}render(){var props=this.props;return(_ref=>{var{nextButtonProps,pageIndexChange,prevButtonProps,props:{isLargeDisplayMode,maxPagesCount,pageCount,pageIndex,pagesCountText},renderNextButton,renderPrevButton}=_ref;return(0,index_esm.xJ)([renderPrevButton&&(0,index_esm.Iz)(2,LightButton,{label:message.Z.getFormatter("dxPager-prevPage")(),className:prevButtonProps.className,tabIndex:prevButtonProps.tabIndex,onClick:prevButtonProps.navigate}),isLargeDisplayMode&&(0,index_esm.Iz)(2,PagesLarge,{maxPagesCount,pageCount,pageIndex,pageIndexChange}),!isLargeDisplayMode&&(0,index_esm.Iz)(2,PagesSmall,{pageCount,pageIndex,pageIndexChange,pagesCountText}),renderNextButton&&(0,index_esm.Iz)(2,LightButton,{label:message.Z.getFormatter("dxPager-nextPage")(),className:nextButtonProps.className,tabIndex:nextButtonProps.tabIndex,onClick:nextButtonProps.navigate})],0)})({props:(0,esm_extends.Z)({},props),config:this.config,pageIndexChange:this.pageIndexChange,renderPrevButton:this.renderPrevButton,renderNextButton:this.renderNextButton,prevButtonProps:this.prevButtonProps,nextButtonProps:this.nextButtonProps,restAttributes:this.restAttributes})}}PageIndexSelector.defaultProps=PageIndexSelectorPropsType;var select_box_excluded=["accessKey","activeStateEnabled","className","dataSource","defaultValue","disabled","displayExpr","focusStateEnabled","height","hint","hoverStateEnabled","isValid","label","labelMode","name","onClick","onFocusIn","onKeyDown","placeholder","readOnly","rtlEnabled","searchEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","valueExpr","visible","width"],SelectBoxProps=Object.create(Object.prototype,(0,esm_extends.Z)(Object.getOwnPropertyDescriptors(editor.nY),Object.getOwnPropertyDescriptors({placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,defaultValue:null,isReactComponentWrapper:!0}))),SelectBoxPropsType={get placeholder(){return SelectBoxProps.placeholder},get hoverStateEnabled(){return EditorStateProps.hoverStateEnabled},get searchEnabled(){return SelectBoxProps.searchEnabled},get defaultValue(){return SelectBoxProps.defaultValue},get readOnly(){return SelectBoxProps.readOnly},get name(){return SelectBoxProps.name},get validationError(){return SelectBoxProps.validationError},get validationErrors(){return SelectBoxProps.validationErrors},get validationMessageMode(){return SelectBoxProps.validationMessageMode},get validationMessagePosition(){return SelectBoxProps.validationMessagePosition},get validationStatus(){return SelectBoxProps.validationStatus},get isValid(){return SelectBoxProps.isValid},get className(){return SelectBoxProps.className},get activeStateEnabled(){return EditorStateProps.activeStateEnabled},get disabled(){return SelectBoxProps.disabled},get focusStateEnabled(){return EditorStateProps.focusStateEnabled},get tabIndex(){return SelectBoxProps.tabIndex},get visible(){return SelectBoxProps.visible},get label(){return EditorLabelProps.label},get labelMode(){return EditorLabelProps.labelMode},isReactComponentWrapper:!0};class select_box_SelectBox extends inferno.Ul{constructor(props){super(props),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,esm_extends.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var _this$props$value=(0,esm_extends.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,objectWithoutPropertiesLoose.Z)(_this$props$value,select_box_excluded)}render(){var props=this.props;return(_ref=>{var{componentProps,restAttributes}=_ref;return(0,index_esm.vs)((0,index_esm.Iz)(2,dom_component_wrapper.Ag,(0,esm_extends.Z)({componentType:select_box,componentProps,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]},restAttributes)))})({props:(0,esm_extends.Z)({},props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}select_box_SelectBox.defaultProps=SelectBoxPropsType;var page_size_small_excluded=["pageSize","pageSizeChange","pageSizes","parentRef"],PageSizeSmallPropsType={get pageSize(){return InternalPagerProps.pageSize}};class PageSizeSmall extends inferno.OS{constructor(props){super(props),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this)}createEffects(){return[new inferno.b0(this.updateWidth,[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes])]}updateEffects(){var _this$_effects$;null===(_this$_effects$=this._effects[0])||void 0===_this$_effects$||_this$_effects$.update([this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes])}updateWidth(){this.setState((__state_argument=>({minWidth:getElementMinWidth(this.props.parentRef.current)||__state_argument.minWidth})))}get width(){return calculateValuesFittedWidth(this.state.minWidth,this.props.pageSizes.map((p=>p.value)))}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,page_size_small_excluded)}render(){var props=this.props;return(_ref=>{var{props:{pageSize,pageSizeChange,pageSizes},width}=_ref;return(0,index_esm.Iz)(2,select_box_SelectBox,{displayExpr:"text",valueExpr:"value",dataSource:pageSizes,value:pageSize,valueChange:pageSizeChange,width})})({props:(0,esm_extends.Z)({},props),width:this.width,restAttributes:this.restAttributes})}}PageSizeSmall.defaultProps=PageSizeSmallPropsType;var page_size_large_excluded=["pageSize","pageSizeChange","pageSizes"],PageSizeLargePropsType={get pageSize(){return InternalPagerProps.pageSize}};class PageSizeLarge extends inferno.Ul{constructor(props){super(props),this.state={},this.__getterCache={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}get pageSizesText(){return void 0!==this.__getterCache.pageSizesText?this.__getterCache.pageSizesText:this.__getterCache.pageSizesText=(()=>{var{pageSize,pageSizes}=this.props;return pageSizes.map(((_ref3,index)=>{var{text,value:processedPageSize}=_ref3,selected=processedPageSize===pageSize;return{className:(0,combine_classes.G)({[selected?PAGER_SELECTED_PAGE_SIZE_CLASS:"dx-page-size"]:!0,"dx-first-child":0===index}),click:this.onPageSizeChange(processedPageSize),label:(0,string.WU)(message.Z.getFormatter("dxPager-pageSize"),processedPageSize||message.Z.getFormatter("dxPager-pageSizesAllText")),text}}))})()}onPageSizeChange(processedPageSize){return()=>(this.props.pageSizeChange(processedPageSize),this.props.pageSize)}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,page_size_large_excluded)}componentWillUpdate(nextProps,nextState,context){this.props.pageSize===nextProps.pageSize&&this.props.pageSizes===nextProps.pageSizes&&this.props.pageSizeChange===nextProps.pageSizeChange||(this.__getterCache.pageSizesText=void 0)}render(){var props=this.props;return(_ref=>{var{pageSizesText}=_ref;return(0,index_esm.xJ)(pageSizesText.map((_ref2=>{var{className,click,label,text}=_ref2;return(0,index_esm.Iz)(2,LightButton,{className,label,onClick:click,children:text},text)})),0)})({props:(0,esm_extends.Z)({},props),pageSizesText:this.pageSizesText,restAttributes:this.restAttributes})}}PageSizeLarge.defaultProps=PageSizeLargePropsType;var selector_excluded=["isLargeDisplayMode","pageSize","pageSizeChange","pageSizes","rootElementRef"];var PageSizeSelectorProps_isLargeDisplayMode=!0,PageSizeSelectorPropsType={get pageSize(){return InternalPagerProps.pageSize},get pageSizes(){return InternalPagerProps.pageSizes},get isLargeDisplayMode(){return PageSizeSelectorProps_isLargeDisplayMode}};class PageSizeSelector extends inferno.OS{constructor(props){super(props),this.state={},this.htmlRef=(0,index_esm.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new inferno.b0(this.setRootElementRef,[])]}setRootElementRef(){var{rootElementRef}=this.props;rootElementRef&&(rootElementRef.current=this.htmlRef.current)}get normalizedPageSizes(){return void 0!==this.__getterCache.normalizedPageSizes?this.__getterCache.normalizedPageSizes:this.__getterCache.normalizedPageSizes=(()=>{var{pageSizes}=this.props;return pageSizes.map((p=>"all"===p||0===p?{text:message.Z.getFormatter("dxPager-pageSizesAllText")(),value:0}:{text:String(p),value:p}))})()}get restAttributes(){var _this$props=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props,selector_excluded)}componentWillUpdate(nextProps,nextState,context){super.componentWillUpdate(),this.props.pageSizes!==nextProps.pageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){var props=this.props;return(_ref=>{var{htmlRef,normalizedPageSizes,props:{isLargeDisplayMode,pageSize,pageSizeChange}}=_ref;return(0,index_esm.Wm)(1,"div","dx-page-sizes",[isLargeDisplayMode&&(0,index_esm.Iz)(2,PageSizeLarge,{pageSizes:normalizedPageSizes,pageSize,pageSizeChange}),!isLargeDisplayMode&&(0,index_esm.Iz)(2,PageSizeSmall,{parentRef:htmlRef,pageSizes:normalizedPageSizes,pageSize,pageSizeChange})],0,null,null,htmlRef)})({props:(0,esm_extends.Z)({},props),htmlRef:this.htmlRef,normalizedPageSizes:this.normalizedPageSizes,restAttributes:this.restAttributes})}}PageSizeSelector.defaultProps=PageSizeSelectorPropsType;var widget=__webpack_require__("./node_modules/devextreme/esm/renovation/ui/common/widget.js"),content_excluded=["className","displayMode","gridCompatibility","hasKnownLastPage","infoText","infoTextRef","infoTextVisible","isLargeDisplayMode","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pageSizesRef","pagesCountText","pagesNavigatorVisible","pagesRef","rootElementRef","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],PagerContentProps=Object.create(Object.prototype,(0,esm_extends.Z)(Object.getOwnPropertyDescriptors(InternalPagerProps),Object.getOwnPropertyDescriptors({infoTextVisible:!0,isLargeDisplayMode:!0})));class PagerContent extends inferno.OS{constructor(props){super(props),this.state={},this.widgetRootElementRef=(0,index_esm.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new inferno.b0(this.setRootElementRef,[])]}getChildContext(){return(0,esm_extends.Z)({},this.context,{[KeyboardActionContext.id]:this.keyboardAction||KeyboardActionContext.defaultValue})}setRootElementRef(){var{rootElementRef}=this.props;rootElementRef&&(rootElementRef.current=this.widgetRootElementRef.current)}createFakeInstance(){return{option:()=>!1,element:()=>this.widgetRootElementRef.current,_createActionByOption:()=>e=>{var _this$props$onKeyDown,_this$props;null===(_this$props$onKeyDown=(_this$props=this.props).onKeyDown)||void 0===_this$props$onKeyDown||_this$props$onKeyDown.call(_this$props,e)}}}get keyboardAction(){return void 0!==this.__getterCache.keyboardAction?this.__getterCache.keyboardAction:this.__getterCache.keyboardAction=(()=>({registerKeyboardAction:(element,action)=>registerKeyboardAction("pager",this.createFakeInstance(),element,void 0,action)}))()}get infoVisible(){var{infoTextVisible,showInfo}=this.props;return showInfo&&infoTextVisible}get pageIndexSelectorVisible(){return 0!==this.props.pageSize}get normalizedDisplayMode(){var{displayMode,lightModeEnabled}=this.props;return"adaptive"===displayMode&&void 0!==lightModeEnabled?lightModeEnabled?"compact":"full":displayMode}get pagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}get pagesContainerVisibility(){if("auto"===this.props.pagesNavigatorVisible&&1===this.props.pageCount&&this.props.hasKnownLastPage)return"hidden"}get isLargeDisplayMode(){var displayMode=this.normalizedDisplayMode;return"adaptive"===displayMode?this.props.isLargeDisplayMode:"full"===displayMode}get classes(){var classesMap={["".concat(this.props.className)]:!!this.props.className,"dx-pager":!0,"dx-light-mode":!this.isLargeDisplayMode};return(0,combine_classes.G)(classesMap)}get aria(){return{role:"navigation",label:this.props.label}}get restAttributes(){var _this$props2=this.props;return(0,objectWithoutPropertiesLoose.Z)(_this$props2,content_excluded)}componentWillUpdate(nextProps,nextState,context){super.componentWillUpdate(),this.props.onKeyDown!==nextProps.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){var props=this.props;return(_ref=>{var{aria,classes,infoVisible,isLargeDisplayMode,pageIndexSelectorVisible,pagesContainerVisibility,pagesContainerVisible,props:{hasKnownLastPage,infoText,infoTextRef,maxPagesCount,pageCount,pageIndex,pageIndexChange,pageSize,pageSizeChange,pageSizes,pageSizesRef,pagesCountText,pagesRef,rtlEnabled,showNavigationButtons,showPageSizes,totalCount,visible},restAttributes,widgetRootElementRef}=_ref;return(0,index_esm.vs)((0,index_esm.Iz)(2,widget.$L,(0,esm_extends.Z)({rootElementRef:widgetRootElementRef,rtlEnabled,classes,visible,aria},restAttributes,{children:[showPageSizes&&(0,index_esm.Iz)(2,PageSizeSelector,{rootElementRef:pageSizesRef,isLargeDisplayMode,pageSize,pageSizeChange,pageSizes}),pagesContainerVisible&&(0,index_esm.Wm)(1,"div","dx-pages",[infoVisible&&(0,index_esm.Iz)(2,InfoText,{rootElementRef:infoTextRef,infoText,pageCount,pageIndex,totalCount}),pageIndexSelectorVisible&&(0,index_esm.Wm)(1,"div","dx-page-indexes",(0,index_esm.Iz)(2,PageIndexSelector,{hasKnownLastPage,isLargeDisplayMode,maxPagesCount,pageCount,pageIndex,pageIndexChange,pagesCountText,showNavigationButtons,totalCount}),2,null,null,pagesRef)],0,{style:(0,inferno.jk)({visibility:pagesContainerVisibility})})]})))})({props:(0,esm_extends.Z)({},props),widgetRootElementRef:this.widgetRootElementRef,keyboardAction:this.keyboardAction,infoVisible:this.infoVisible,pageIndexSelectorVisible:this.pageIndexSelectorVisible,pagesContainerVisible:this.pagesContainerVisible,pagesContainerVisibility:this.pagesContainerVisibility,isLargeDisplayMode:this.isLargeDisplayMode,classes:this.classes,aria:this.aria,restAttributes:this.restAttributes})}}PagerContent.defaultProps=PagerContentProps;var pager_excluded=["className","defaultPageIndex","defaultPageSize","displayMode","gridCompatibility","hasKnownLastPage","infoText","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pagesCountText","pagesNavigatorVisible","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"];class pager_Pager extends inferno.DZ{constructor(props){super(props),this.__getterCache={},this.state={pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.props.defaultPageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.props.defaultPageIndex},this.pageIndexChange=this.pageIndexChange.bind(this),this.pageSizeChange=this.pageSizeChange.bind(this)}createEffects(){return[(0,inferno.gt)()]}pageIndexChange(newPageIndex){var __newValue,_newValue;this.props.gridCompatibility?(this.setState((__state_argument=>({pageIndex:__newValue=newPageIndex+1}))),this.props.pageIndexChange(__newValue)):(this.setState((__state_argument=>({pageIndex:_newValue=newPageIndex}))),this.props.pageIndexChange(_newValue))}get pageIndex(){return this.props.gridCompatibility?(void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex)-1:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}pageSizeChange(newPageSize){var __newValue;this.setState((__state_argument=>({pageSize:__newValue=newPageSize}))),this.props.pageSizeChange(__newValue)}get className(){return this.props.gridCompatibility?(0,combine_classes.G)({"dx-datagrid-pager":!0,["".concat(this.props.className)]:!!this.props.className}):this.props.className}get pagerProps(){return void 0!==this.__getterCache.pagerProps?this.__getterCache.pagerProps:this.__getterCache.pagerProps=(()=>(0,esm_extends.Z)({},(0,esm_extends.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),{className:this.className,pageIndex:this.pageIndex,pageIndexChange:pageIndex=>this.pageIndexChange(pageIndex),pageSizeChange:pageSize=>this.pageSizeChange(pageSize)}))()}get restAttributes(){var _this$props$pageSize$=(0,esm_extends.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex});return(0,objectWithoutPropertiesLoose.Z)(_this$props$pageSize$,pager_excluded)}componentWillUpdate(nextProps,nextState,context){super.componentWillUpdate(),this.props===nextProps&&this.props.gridCompatibility===nextProps.gridCompatibility&&this.props.className===nextProps.className&&this.state.pageIndex===nextState.pageIndex&&this.props.pageIndex===nextProps.pageIndex&&this.props.pageIndexChange===nextProps.pageIndexChange&&this.props.pageSizeChange===nextProps.pageSizeChange||(this.__getterCache.pagerProps=void 0)}render(){var props=this.props;return(_ref=>{var{pagerProps,restAttributes}=_ref;return(0,index_esm.vs)((0,index_esm.Iz)(2,ResizableContainer,(0,esm_extends.Z)({contentTemplate:PagerContent,pagerProps},restAttributes)))})({props:(0,esm_extends.Z)({},props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),pageIndexChange:this.pageIndexChange,pageIndex:this.pageIndex,pageSizeChange:this.pageSizeChange,className:this.className,pagerProps:this.pagerProps,restAttributes:this.restAttributes})}}pager_Pager.defaultProps=PagerProps;class Pager extends GridPagerWrapper{getProps(){var props=super.getProps();return props.onKeyDown=this._wrapKeyDownHandler(props.onKeyDown),props}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChange"],["pageIndex","defaultPageIndex","pageIndexChange"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChange","defaultPageIndex","pageIndexChange","gridCompatibility","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizes","pageSizes","rtlEnabled","showNavigationButtons","totalCount","label","onKeyDown","pageSize","pageIndex"]}}get _viewComponent(){return pager_Pager}}(0,component_registrator.Z)("dxPager",Pager);const pager=Pager,getPageIndex=function(dataController){return 1+(parseInt(dataController.pageIndex())||0)},PagerView=modules.View.inherit({init(){const dataController=this.getController("data");dataController.changed.add((e=>{if(e&&e.repaintChangesOnly){const pager=this._pager;pager?pager.option({pageIndex:getPageIndex(dataController),pageSize:dataController.pageSize(),pageCount:dataController.pageCount(),totalCount:dataController.totalCount(),hasKnownLastPage:dataController.hasKnownLastPage()}):this.render()}else(!e||"update"!==e.changeType&&"updateSelection"!==e.changeType&&"updateFocusedRow"!==e.changeType)&&(this._pager=null,this.render())}))},_renderCore(){const that=this,$element=that.element().addClass(that.addWidgetPrefix("pager")),pagerOptions=that.option("pager")||{},dataController=that.getController("data"),keyboardController=that.getController("keyboardNavigation"),options={maxPagesCount:10,pageIndex:getPageIndex(dataController),pageCount:dataController.pageCount(),pageSize:dataController.pageSize(),showPageSizes:pagerOptions.showPageSizeSelector,showInfo:pagerOptions.showInfo,displayMode:pagerOptions.displayMode,pagesNavigatorVisible:pagerOptions.visible,showNavigationButtons:pagerOptions.showNavigationButtons,label:pagerOptions.label,pageSizes:that.getPageSizes(),totalCount:dataController.totalCount(),hasKnownLastPage:dataController.hasKnownLastPage(),pageIndexChanged(pageIndex){dataController.pageIndex()!==pageIndex-1&&dataController.pageIndex(pageIndex-1)},pageSizeChanged(pageSize){dataController.pageSize(pageSize)},onKeyDown:e=>keyboardController&&keyboardController.executeAction("onKeyDown",e),useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};(0,utils_type.$K)(pagerOptions.infoText)&&(options.infoText=pagerOptions.infoText),this._pager?this._pager.repaint():(0,utils_window.Ym)()?this._pager=that._createComponent($element,pager,options):$element.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')},getPager(){return this._pager},getPageSizes(){const that=this,dataController=that.getController("data"),pagerOptions=that.option("pager"),allowedPageSizes=pagerOptions&&pagerOptions.allowedPageSizes,pageSize=dataController.pageSize();return(0,utils_type.$K)(that._pageSizes)&&that._pageSizes.includes(pageSize)||(that._pageSizes=[],pagerOptions&&(Array.isArray(allowedPageSizes)?that._pageSizes=allowedPageSizes:allowedPageSizes&&pageSize>1&&(that._pageSizes=[Math.floor(pageSize/2),pageSize,2*pageSize]))),that._pageSizes},isVisible(){const dataController=this.getController("data"),pagerOptions=this.option("pager");let pagerVisible=pagerOptions&&pagerOptions.visible;const scrolling=this.option("scrolling");return"auto"===pagerVisible&&(pagerVisible=(!scrolling||"virtual"!==scrolling.mode&&"infinite"!==scrolling.mode)&&(dataController.pageCount()>1||dataController.isLoaded()&&!dataController.hasKnownLastPage())),pagerVisible},getHeight(){return this.getElementHeight()},optionChanged(args){const{name}=args,isPager="pager"===name,isPaging="paging"===name,isDataSource="dataSource"===name,isScrolling="scrolling"===name,dataController=this.getController("data");if(isPager||isPaging||isScrolling||isDataSource){if(args.handled=!0,dataController.skipProcessingPagingChange(args.fullName))return;(isPager||isPaging)&&(this._pageSizes=null),isDataSource||(this._pager=null,this._invalidate(),(0,utils_window.Ym)()&&isPager&&this.component&&this.component.resize())}},dispose(){this._pager=null}}),pagerModule={defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:message.Z.format("dxPager-ariaLabel")}}),views:{pagerView:PagerView}};module_core.registerModule("pager",pagerModule);var drag=__webpack_require__("./node_modules/devextreme/esm/events/drag.js"),swatch_container=__webpack_require__("./node_modules/devextreme/esm/ui/widget/swatch_container.js"),allowResizing=function(that){return that.option("allowColumnResizing")||that.getController("columns").isColumnOptionUsed("allowResizing")},allowReordering=function(that){return that.option("allowColumnReordering")||that.getController("columns").isColumnOptionUsed("allowReordering")},TrackerView=ui_grid_core_modules.View.inherit({_renderCore:function(){var deferred=this.callBase();return this.element().addClass(this.addWidgetPrefix("tracker")),this.hide(),deferred},_unsubscribeFromCallback:function(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)},_subscribeToCallback:function(){var that=this;that._positionChanged=function(position){var $element=that.element();$element&&$element.hasClass(that.addWidgetPrefix("tracker"))&&($element.css({top:position.top}),(0,size.QQ)($element,position.height))},this._tablePositionController.positionChanged.add(that._positionChanged)},optionChanged:function(args){"allowColumnResizing"===args.name&&(this._unsubscribeFromCallback(),args.value&&(this._subscribeToCallback(),this._invalidate())),this.callBase(args)},init:function(){this.callBase(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()},isVisible:function(){return allowResizing(this)},show:function(){this.element().show()},hide:function(){this.element()&&this.element().hide()},setHeight:function(value){(0,size.QQ)(this.element(),value)},dispose:function(){this._unsubscribeFromCallback(),this.callBase()}}),SeparatorView=ui_grid_core_modules.View.inherit({_renderSeparator:function(){},_renderCore:function(options){var deferred=this.callBase(options);return this._isShown=!0,this._renderSeparator(),this.hide(),deferred},show:function(){this._isShown=!0},hide:function(){this._isShown=!1},height:function(value){var $element=this.element();if($element){if(!(0,utils_type.$K)(value))return(0,size.Cr)($element);(0,size.QQ)($element,value)}},width:function(value){var $element=this.element();if($element){if(!(0,utils_type.$K)(value))return(0,size.dz)($element);(0,size.cl)($element,value)}}}),ColumnsSeparatorView=SeparatorView.inherit({_renderSeparator:function(){this.callBase(),this.element().addClass(this.addWidgetPrefix("columns-separator"))},_subscribeToCallback:function(){var $element,that=this;that._positionChanged=function(position){($element=that.element())&&($element.css({top:position.top}),(0,size.QQ)($element,position.height))},that._tablePositionController.positionChanged.add(that._positionChanged)},_unsubscribeFromCallback:function(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)},_init:function(){this._isTransparent=allowResizing(this),this.isVisible()&&this._subscribeToCallback()},isVisible:function(){return this.option("showColumnHeaders")&&(allowReordering(this)||allowResizing(this))},optionChanged:function(args){"allowColumnResizing"===args.name&&(args.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=allowResizing(this),this.hide(!0))),this.callBase(args)},init:function(){this.callBase(),this._tablePositionController=this.getController("tablePosition"),this._init()},show:function(){var $element=this.element();$element&&!this._isShown&&(this._isTransparent?$element.removeClass(this.addWidgetPrefix("columns-separator-transparent")):$element.show()),this.callBase()},hide:function(force){var $element=this.element(),columnsSeparatorTransparent=this.addWidgetPrefix("columns-separator-transparent");$element&&(this._isShown||force)&&(this._isTransparent?($element.addClass(columnsSeparatorTransparent),$element.css("left",""),$element.show()):($element.hasClass(columnsSeparatorTransparent)&&$element.removeClass(columnsSeparatorTransparent),$element.hide())),this.callBase()},moveByX:function(outerX){var $element=this.element();$element&&$element.css("left",null===outerX?0:outerX-this._parentElement().offset().left)},changeCursor:function(cursorName){cursorName=(0,utils_type.$K)(cursorName)?cursorName:"";var $element=this.element();$element&&$element.css("cursor",cursorName)},dispose:function(){this._unsubscribeFromCallback(),this.callBase()}}),BlockSeparatorView=SeparatorView.inherit({init:function(){var that=this;this.callBase(),this.getController("data").loadingChanged.add((function(isLoading){isLoading||that.hide()}))},_renderSeparator:function(){this.callBase(),this.element().addClass("dx-block-separator").html("&nbsp;")},hide:function(){var $parent=this._parentElement(),$element=this.element();$element&&this._isShown&&$element.css("display","none"),$parent&&!$parent.children(".dx-block-separator").length&&$parent.prepend(this.element()),this.callBase()},isVisible:function(){var groupPanelOptions=this.option("groupPanel"),columnChooserOptions=this.option("columnChooser");return groupPanelOptions&&groupPanelOptions.visible||columnChooserOptions&&columnChooserOptions.enabled},show:function(targetLocation){var $element=this.element(),startAnimate=function(toOptions){fx.Z.stop($element,!0),fx.Z.animate($element,{type:"slide",from:{width:0,display:toOptions.display},to:toOptions,duration:300,easing:"swing"})};if($element&&!this._isShown)switch(targetLocation){case"group":startAnimate({width:"50px",display:"inline-block"});break;case"columnChooser":startAnimate({width:"100%",display:"block"});break;default:$element.css("display","")}this.callBase()}}),DraggingHeaderView=ui_grid_core_modules.View.inherit({_isDragging:!1,isDragging:function(){return this._isDragging},_getDraggingPanelByPos:function(pos){var result;return(0,iterator.S6)(this._dragOptions.draggingPanels,(function(index,draggingPanel){if(draggingPanel){var boundingRect=draggingPanel.getBoundingRect();if(boundingRect&&(void 0===boundingRect.bottom||pos.y<boundingRect.bottom)&&(void 0===boundingRect.top||pos.y>boundingRect.top)&&(void 0===boundingRect.left||pos.x>boundingRect.left)&&(void 0===boundingRect.right||pos.x<boundingRect.right))return result=draggingPanel,!1}})),result},_renderCore:function(){this.element().addClass(this.addWidgetPrefix("drag-header")+" "+this.addWidgetPrefix("text-content")+" dx-widget").hide()},_resetTargetColumnOptions:function(){var params=this._dropOptions;params.targetColumnIndex=-1,delete params.targetColumnElement,delete params.isLast,delete params.posX,delete params.posY},_getVisibleIndexObject:function(rowIndex,visibleIndex){return(0,utils_type.$K)(rowIndex)?{columnIndex:visibleIndex,rowIndex}:visibleIndex},dispose:function(){var element=this.element();this._dragOptions=null,element&&element.parent().find("."+this.addWidgetPrefix("drag-header")).remove()},isVisible:function(){var commonColumnSettings=this.getController("columns").getCommonSettings();return this.option("showColumnHeaders")&&(allowReordering(this)||commonColumnSettings.allowGrouping||commonColumnSettings.allowHiding)},init:function(){var that=this;this.callBase(),this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this.getController("data").loadingChanged.add((function(isLoading){var element=that.element();!isLoading&&element&&element.hide()}))},dragHeader:function(options){var columnElement=options.columnElement,isCommandColumn=!!options.sourceColumn.type;this._isDragging=!0,this._dragOptions=options,this._dropOptions={sourceIndex:options.index,sourceColumnIndex:this._getVisibleIndexObject(options.rowIndex,options.columnIndex),sourceColumnElement:options.columnElement,sourceLocation:options.sourceLocation};var document=dom_adapter.Z.getDocument();this._onSelectStart=document.onselectstart,document.onselectstart=function(){return!1},this._controller.drag(this._dropOptions),this.element().css({textAlign:columnElement&&columnElement.css("textAlign"),height:columnElement&&(isCommandColumn&&columnElement.get(0).clientHeight||(0,size.Cr)(columnElement)),width:columnElement&&(isCommandColumn&&columnElement.get(0).clientWidth||(0,size.dz)(columnElement)),whiteSpace:columnElement&&columnElement.css("whiteSpace")}).addClass(this.addWidgetPrefix("drag-action")).toggleClass("dx-drag-command-cell",isCommandColumn).text(isCommandColumn?"":options.sourceColumn.caption),this.element().appendTo(swatch_container.Z.getSwatchContainer(columnElement))},moveHeader:function(args){var e=args.event,that=e.data.that,eventData=(0,events_utils.a0)(e),isResizing=!!that._columnsResizerViewController&&that._columnsResizerViewController.isResizing(),dragOptions=that._dragOptions;if(that._isDragging&&!isResizing){var $element=that.element(),moveDeltaX=Math.abs(eventData.x-dragOptions.columnElement.offset().left-dragOptions.deltaX),moveDeltaY=Math.abs(eventData.y-dragOptions.columnElement.offset().top-dragOptions.deltaY);if($element.is(":visible")||moveDeltaX>5||moveDeltaY>5){$element.show();var newLeft=eventData.x-dragOptions.deltaX,newTop=eventData.y-dragOptions.deltaY;$element.css({left:newLeft,top:newTop}),that.dockHeader(eventData)}e.preventDefault()}},dockHeader:function(eventData){var targetDraggingPanel=this._getDraggingPanelByPos(eventData),controller=this._controller,params=this._dropOptions,dragOptions=this._dragOptions;if(targetDraggingPanel){var rtlEnabled=this.option("rtlEnabled"),isVerticalOrientation="columnChooser"===targetDraggingPanel.getName(),axisName=isVerticalOrientation?"y":"x",targetLocation=targetDraggingPanel.getName(),rowIndex="headers"===targetLocation?dragOptions.rowIndex:void 0,sourceColumn=dragOptions.sourceColumn,columnElements=targetDraggingPanel.getColumnElements(rowIndex,null==sourceColumn?void 0:sourceColumn.ownerBand)||[],pointsByTarget=dragOptions.pointsByTarget=dragOptions.pointsByTarget||{},pointsByColumns="columnChooser"===targetLocation?[]:pointsByTarget[targetLocation]||controller._generatePointsByColumns((0,extend.l)({},dragOptions,{targetDraggingPanel,columns:targetDraggingPanel.getColumns(rowIndex),columnElements,isVerticalOrientation,startColumnIndex:"headers"===targetLocation&&(0,renderer.Z)(columnElements[0]).index()}));if(pointsByTarget[targetLocation]=pointsByColumns,params.targetLocation=targetLocation,pointsByColumns.length>0)for(var i=0;i<pointsByColumns.length;i++){var centerPosition=pointsByColumns[i+1]&&(pointsByColumns[i][axisName]+pointsByColumns[i+1][axisName])/2;if(void 0===centerPosition||(rtlEnabled&&"x"===axisName?eventData[axisName]>centerPosition:eventData[axisName]<centerPosition)){params.targetColumnIndex=this._getVisibleIndexObject(rowIndex,pointsByColumns[i].columnIndex),columnElements[i]?(params.targetColumnElement=columnElements.eq(i),params.isLast=!1):(params.targetColumnElement=columnElements.last(),params.isLast=!0),params.posX=pointsByColumns[i].x,params.posY=pointsByColumns[i].y,controller.dock(params);break}}else this._resetTargetColumnOptions(),controller.dock(params)}},dropHeader:function(args){var that=args.event.data.that,controller=that._controller;that.element().hide(),controller&&that._isDragging&&controller.drop(that._dropOptions),that.element().appendTo(that._parentElement()),that._dragOptions=null,that._dropOptions=null,that._isDragging=!1,dom_adapter.Z.getDocument().onselectstart=that._onSelectStart||null}}),isNextColumnResizingMode=function(that){return"widget"!==that.option("columnResizingMode")},ColumnsResizerViewController=ui_grid_core_modules.ViewController.inherit({_isHeadersRowArea:function(posY){if(this._columnHeadersView){var element=this._columnHeadersView.element();if(element){var offsetTop=element.offset().top,headersRowHeight=this._columnHeadersView.getHeadersRowHeight();return posY>=offsetTop&&posY<=offsetTop+headersRowHeight}}return!1},_isRtlParentStyle:function(){var _this$_$parentContain;return this.option("rtlEnabled")&&"rtl"===(null===(_this$_$parentContain=this._$parentContainer)||void 0===_this$_$parentContain?void 0:_this$_$parentContain.parent().css("direction"))},_pointCreated:function(point,cellsLength,columns){var isNextColumnMode=isNextColumnResizingMode(this),rtlEnabled=this.option("rtlEnabled"),isRtlParentStyle=this._isRtlParentStyle(),firstPointColumnIndex=isNextColumnMode||!rtlEnabled||isRtlParentStyle?1:0;if(point.index>=firstPointColumnIndex&&point.index<cellsLength+(isNextColumnMode||rtlEnabled&&!isRtlParentStyle?0:1)){point.columnIndex-=firstPointColumnIndex;var currentColumn=columns[point.columnIndex]||{},nextColumn=columns[point.columnIndex+1]||{};return!(isNextColumnMode?currentColumn.allowResizing&&nextColumn.allowResizing:currentColumn.allowResizing)}return!0},_getTargetPoint:function(pointsByColumns,currentX,deltaX){if(pointsByColumns)for(var i=0;i<pointsByColumns.length;i++)if((pointsByColumns[i].x!==pointsByColumns[0].x||!pointsByColumns[i+1]||pointsByColumns[i].x!==pointsByColumns[i+1].x)&&pointsByColumns[i].x-deltaX<=currentX&&currentX<=pointsByColumns[i].x+deltaX)return pointsByColumns[i];return null},_moveSeparator:function(args){var _that$_draggingHeader,e=args.event,that=e.data,columnsSeparatorWidth=that._columnsSeparatorView.width(),isNextColumnMode=isNextColumnResizingMode(that),deltaX=columnsSeparatorWidth/2,parentOffset=that._$parentContainer.offset(),parentOffsetLeft=parentOffset.left,eventData=(0,events_utils.a0)(e),rtlEnabled=that.option("rtlEnabled"),isRtlParentStyle=this._isRtlParentStyle(),isDragging=null===(_that$_draggingHeader=that._draggingHeaderView)||void 0===_that$_draggingHeader?void 0:_that$_draggingHeader.isDragging();if(that._isResizing&&that._resizingInfo){if((parentOffsetLeft<=eventData.x||!isNextColumnMode&&isRtlParentStyle)&&(!isNextColumnMode||eventData.x<=parentOffsetLeft+(0,size.dz)(that._$parentContainer))&&that._updateColumnsWidthIfNeeded(eventData.x)){var $cell=that._columnHeadersView.getColumnElements().eq(that._resizingInfo.currentColumnIndex),cell=$cell[0];if(cell){var outerWidth=cell.getBoundingClientRect().width;that._columnsSeparatorView.moveByX($cell.offset().left+((isNextColumnMode||isRtlParentStyle)&&rtlEnabled?0:outerWidth)),that._tablePositionController.update(that._targetPoint.y),e.preventDefault()}}}else isDragging||(that._isHeadersRowArea(eventData.y)?(that._previousParentOffset&&(that._previousParentOffset.left===parentOffset.left&&that._previousParentOffset.top===parentOffset.top||that.pointsByColumns(null)),that._targetPoint=that._getTargetPoint(that.pointsByColumns(),eventData.x,columnsSeparatorWidth),that._previousParentOffset=parentOffset,that._isReadyResizing=!1,that._targetPoint?(that._columnsSeparatorView.changeCursor("col-resize"),that._columnsSeparatorView.moveByX(that._targetPoint.x-deltaX),that._tablePositionController.update(that._targetPoint.y),that._isReadyResizing=!0,e.preventDefault()):(that._columnsSeparatorView.changeCursor(),that._columnsSeparatorView.moveByX(null))):(that.pointsByColumns(null),that._isReadyResizing=!1,that._columnsSeparatorView.changeCursor(),that._columnsSeparatorView.moveByX(null)))},_endResizing:function(args){var that=args.event.data;that._isResizing&&(that.pointsByColumns(null),that._resizingInfo=null,that._columnsSeparatorView.hide(),that._columnsSeparatorView.changeCursor(),that._trackerView.hide(),that._isReadyResizing=!1,that._isResizing=!1)},_getNextColumnIndex:function(currentColumnIndex){return currentColumnIndex+1},_setupResizingInfo:function(posX){var currentColumnIndex=this._targetPoint.columnIndex,nextColumnIndex=this._getNextColumnIndex(currentColumnIndex),currentHeader=this._columnHeadersView.getHeaderElement(currentColumnIndex),nextHeader=this._columnHeadersView.getHeaderElement(nextColumnIndex);this._resizingInfo={startPosX:posX,currentColumnIndex,currentColumnWidth:currentHeader&&currentHeader.length>0?(0,utils_position.l)(currentHeader[0]).width:0,nextColumnIndex,nextColumnWidth:nextHeader&&nextHeader.length>0?(0,utils_position.l)(nextHeader[0]).width:0}},_startResizing:function(args){var e=args.event,that=e.data,eventData=(0,events_utils.a0)(e);if((0,events_utils.z6)(e)&&(that._isHeadersRowArea(eventData.y)?(that._targetPoint=that._getTargetPoint(that.pointsByColumns(),eventData.x,10),that._targetPoint&&(that._columnsSeparatorView.moveByX(that._targetPoint.x-that._columnsSeparatorView.width()/2),that._isReadyResizing=!0)):that._isReadyResizing=!1),that._isReadyResizing){that._setupResizingInfo(eventData.x),that._isResizing=!0,that._tablePositionController.update(that._targetPoint.y),that._columnsSeparatorView.show(),that._trackerView.show();var scrollable=that.component.getScrollable();scrollable&&that._isRtlParentStyle()&&(that._scrollRight=(0,size.dz)(scrollable.$content())-(0,size.dz)(scrollable.container())-scrollable.scrollLeft()),e.preventDefault(),e.stopPropagation()}this.isResizing()&&this.getController("editorFactory").loseFocus()},_generatePointsByColumns:function(){var that=this,columns=that._columnsController?that._columnsController.getVisibleColumns():[],cells=that._columnHeadersView.getColumnElements(),pointsByColumns=[];cells&&cells.length>0&&(pointsByColumns=ui_grid_core_utils.getPointsByColumns(cells,(function(point){return that._pointCreated(point,cells.length,columns)}))),that._pointsByColumns=pointsByColumns},_unsubscribeFromEvents:function(){this._moveSeparatorHandler&&events_engine.Z.off(dom_adapter.Z.getDocument(),(0,events_utils.V4)(pointer.Z.move,"dxDataGridResizingReordering"),this._moveSeparatorHandler),this._startResizingHandler&&events_engine.Z.off(this._$parentContainer,(0,events_utils.V4)(pointer.Z.down,"dxDataGridResizingReordering"),this._startResizingHandler),this._endResizingHandler&&(events_engine.Z.off(this._columnsSeparatorView.element(),(0,events_utils.V4)(pointer.Z.up,"dxDataGridResizingReordering"),this._endResizingHandler),events_engine.Z.off(dom_adapter.Z.getDocument(),(0,events_utils.V4)(pointer.Z.up,"dxDataGridResizingReordering"),this._endResizingHandler))},_subscribeToEvents:function(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),events_engine.Z.on(dom_adapter.Z.getDocument(),(0,events_utils.V4)(pointer.Z.move,"dxDataGridResizingReordering"),this,this._moveSeparatorHandler),events_engine.Z.on(this._$parentContainer,(0,events_utils.V4)(pointer.Z.down,"dxDataGridResizingReordering"),this,this._startResizingHandler),events_engine.Z.on(this._columnsSeparatorView.element(),(0,events_utils.V4)(pointer.Z.up,"dxDataGridResizingReordering"),this,this._endResizingHandler),events_engine.Z.on(dom_adapter.Z.getDocument(),(0,events_utils.V4)(pointer.Z.up,"dxDataGridResizingReordering"),this,this._endResizingHandler)},_updateColumnsWidthIfNeeded:function(posX){var deltaX,needUpdate,contentWidth=this._rowsView.contentWidth(),resizingInfo=this._resizingInfo,columnsController=this._columnsController,visibleColumns=columnsController.getVisibleColumns(),columnsSeparatorWidth=this._columnsSeparatorView.width(),isNextColumnMode=isNextColumnResizingMode(this),adaptColumnWidthByRatio=isNextColumnMode&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),rtlEnabled=this.option("rtlEnabled"),isRtlParentStyle=this._isRtlParentStyle(),column=visibleColumns[resizingInfo.currentColumnIndex],nextColumn=visibleColumns[resizingInfo.nextColumnIndex];function isPercentWidth(width){return(0,utils_type.HD)(width)&&"%"===width.slice(-1)}function setColumnWidth(column,columnWidth,contentWidth,adaptColumnWidthByRatio){if(column){var oldColumnWidth=column.width;oldColumnWidth&&(adaptColumnWidthByRatio=isPercentWidth(oldColumnWidth)),adaptColumnWidthByRatio?(columnsController.columnOption(column.index,"visibleWidth",columnWidth),columnsController.columnOption(column.index,"width",(columnWidth/contentWidth*100).toFixed(3)+"%")):(columnsController.columnOption(column.index,"visibleWidth",null),columnsController.columnOption(column.index,"width",columnWidth))}}deltaX=posX-resizingInfo.startPosX,(isNextColumnMode||isRtlParentStyle)&&rtlEnabled&&(deltaX=-deltaX);var{cellWidth,nextCellWidth}=function(delta){var nextMinWidth,nextCellWidth,needCorrectionNextCellWidth,cellWidth=resizingInfo.currentColumnWidth+delta,minWidth=column&&column.minWidth||columnsSeparatorWidth,result={};return cellWidth>=minWidth?result.cellWidth=cellWidth:(result.cellWidth=minWidth,needCorrectionNextCellWidth=!0),isNextColumnMode&&((nextCellWidth=resizingInfo.nextColumnWidth-delta)>=(nextMinWidth=nextColumn&&nextColumn.minWidth||columnsSeparatorWidth)?result.nextCellWidth=needCorrectionNextCellWidth?resizingInfo.nextColumnWidth-(delta+minWidth-cellWidth):nextCellWidth:(result.nextCellWidth=nextMinWidth,result.cellWidth=resizingInfo.currentColumnWidth+(delta-nextMinWidth+nextCellWidth))),result}(deltaX);if(needUpdate=column.width!==cellWidth){if(columnsController.beginUpdate(),cellWidth=Math.floor(cellWidth),contentWidth=function(contentWidth,visibleColumns){var allColumnsHaveWidth=visibleColumns.every((column=>column.width));if(allColumnsHaveWidth){var totalPercent=visibleColumns.reduce(((sum,column)=>(isPercentWidth(column.width)&&(sum+=parseFloat(column.width)),sum)),0);totalPercent>100&&(contentWidth=contentWidth/totalPercent*100)}return contentWidth}(contentWidth,visibleColumns),setColumnWidth(column,cellWidth,contentWidth,adaptColumnWidthByRatio),isNextColumnMode)nextCellWidth=Math.floor(nextCellWidth),setColumnWidth(nextColumn,nextCellWidth,contentWidth,adaptColumnWidthByRatio);else{var columnWidths=this._columnHeadersView.getColumnWidths();if(columnWidths[resizingInfo.currentColumnIndex]=cellWidth,!(columnWidths.reduce(((totalWidth,width)=>totalWidth+width),0)>this._rowsView.contentWidth())){var lastColumnIndex=ui_grid_core_utils.getLastResizableColumnIndex(visibleColumns);lastColumnIndex>=0&&columnsController.columnOption(visibleColumns[lastColumnIndex].index,"visibleWidth","auto")}for(var i=0;i<columnWidths.length;i++)visibleColumns[i]&&visibleColumns[i]!==column&&void 0===visibleColumns[i].width&&columnsController.columnOption(visibleColumns[i].index,"width",columnWidths[i])}if(columnsController.endUpdate(),!isNextColumnMode){this.component.updateDimensions();var scrollable=this.component.getScrollable();if(scrollable&&isRtlParentStyle){var left=(0,size.dz)(scrollable.$content())-(0,size.dz)(scrollable.container())-this._scrollRight;scrollable.scrollTo({left})}}}return needUpdate},_subscribeToCallback:function(callback,handler){callback.add(handler),this._subscribesToCallbacks.push({callback,handler})},_unsubscribeFromCallbacks:function(){for(var i=0;i<this._subscribesToCallbacks.length;i++){var subscribe=this._subscribesToCallbacks[i];subscribe.callback.remove(subscribe.handler)}this._subscribesToCallbacks=[]},_unsubscribes:function(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()},_init:function(){var that=this,generatePointsByColumnsHandler=function(){that._isResizing||that.pointsByColumns(null)},generatePointsByColumnsScrollHandler=function(offset){that._scrollLeft!==offset.left&&(that._scrollLeft=offset.left,that.pointsByColumns(null))};that._columnsSeparatorView=that.getView("columnsSeparatorView"),that._columnHeadersView=that.getView("columnHeadersView"),that._trackerView=that.getView("trackerView"),that._rowsView=that.getView("rowsView"),that._columnsController=that.getController("columns"),that._tablePositionController=that.getController("tablePosition"),that._$parentContainer=that.component.$element(),that._draggingHeaderView=that.component.getView("draggingHeaderView"),that._subscribeToCallback(that._columnHeadersView.renderCompleted,generatePointsByColumnsHandler),that._subscribeToCallback(that._columnHeadersView.resizeCompleted,generatePointsByColumnsHandler),that._subscribeToCallback(that._columnsSeparatorView.renderCompleted,(function(){that._unsubscribeFromEvents(),that._subscribeToEvents()})),that._subscribeToCallback(that._rowsView.renderCompleted,(function(){that._rowsView.scrollChanged.remove(generatePointsByColumnsScrollHandler),that._rowsView.scrollChanged.add(generatePointsByColumnsScrollHandler)}));var previousScrollbarVisibility=0!==that._rowsView.getScrollbarWidth(),previousTableHeight=0;that._subscribeToCallback(that.getController("tablePosition").positionChanged,(function(e){if(that._isResizing&&!that._rowsView.isResizing){var scrollbarVisibility=0!==that._rowsView.getScrollbarWidth();previousScrollbarVisibility!==scrollbarVisibility||previousTableHeight&&previousTableHeight!==e.height?(previousScrollbarVisibility=scrollbarVisibility,previousTableHeight=e.height,that.component.updateDimensions()):that._rowsView.updateFreeSpaceRowHeight()}previousTableHeight=e.height}))},optionChanged:function(args){this.callBase(args),"allowColumnResizing"===args.name&&(args.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())},isResizing:function(){return this._isResizing},init:function(){this._subscribesToCallbacks=[],allowResizing(this)&&this._init()},pointsByColumns:function(value){if(void 0===value)return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns;this._pointsByColumns=value},dispose:function(){this._unsubscribes(),this.callBase()}}),TablePositionViewController=ui_grid_core_modules.ViewController.inherit({update:function(top){var params={},$element=this._columnHeadersView.element(),offset=$element&&$element.offset(),offsetTop=offset&&offset.top||0,diffOffsetTop=(0,utils_type.$K)(top)?Math.abs(top-offsetTop):0,columnsHeadersHeight=this._columnHeadersView?this._columnHeadersView.getHeight():0,scrollBarWidth=this._rowsView.getScrollbarWidth(!0),rowsHeight=this._rowsView?this._rowsView.height()-scrollBarWidth:0,columnsResizerController=this.component.getController("columnsResizer"),draggingHeaderView=this.component.getView("draggingHeaderView");params.height=columnsHeadersHeight,(columnsResizerController.isResizing()||draggingHeaderView.isDragging())&&(params.height+=rowsHeight-diffOffsetTop),null!==top&&$element&&$element.length&&(params.top=$element[0].offsetTop+diffOffsetTop),this.positionChanged.fire(params)},init:function(){var that=this;that.callBase(),that._columnHeadersView=this.getView("columnHeadersView"),that._rowsView=this.getView("rowsView"),that._pagerView=this.getView("pagerView"),that._rowsView.resizeCompleted.add((function(){if(that.option("allowColumnResizing")){var targetPoint=that.getController("columnsResizer")._targetPoint;that.update(targetPoint?targetPoint.y:null)}}))},ctor:function(component){this.callBase(component),this.positionChanged=(0,callbacks.Z)()}}),columnsResizingReorderingModule={views:{columnsSeparatorView:ColumnsSeparatorView,blockSeparatorView:BlockSeparatorView,draggingHeaderView:DraggingHeaderView,trackerView:TrackerView},controllers:{draggingHeader:ui_grid_core_modules.ViewController.inherit({_generatePointsByColumns:function(options){var that=this;return ui_grid_core_utils.getPointsByColumns(options.columnElements,(function(point){return that._pointCreated(point,options.columns,options.targetDraggingPanel.getName(),options.sourceColumn)}),options.isVerticalOrientation,options.startColumnIndex)},_pointCreated:function(point,columns,location,sourceColumn){var targetColumn=columns[point.columnIndex],prevColumn=columns[point.columnIndex-1];switch(location){case"columnChooser":return!0;case"headers":return sourceColumn&&!sourceColumn.allowReordering||(!targetColumn||!targetColumn.allowReordering)&&(!prevColumn||!prevColumn.allowReordering);default:return 0===columns.length}},_subscribeToEvents:function(draggingHeader,draggingPanels){var that=this;(0,iterator.S6)(draggingPanels,(function(_,draggingPanel){if(draggingPanel)for(var columns,rowCount=draggingPanel.getRowCount?draggingPanel.getRowCount():1,nameDraggingPanel=draggingPanel.getName(),subscribeToEvents=function(index,columnElement){if(columnElement){var $columnElement=(0,renderer.Z)(columnElement),column=columns[index];draggingPanel.allowDragging(column,nameDraggingPanel,draggingPanels)&&($columnElement.addClass(that.addWidgetPrefix("drag-action")),events_engine.Z.on($columnElement,(0,events_utils.V4)(drag.BL,"dxDataGridResizingReordering"),that.createAction((function(args){var e=args.event,eventData=(0,events_utils.a0)(e);draggingHeader.dragHeader({deltaX:eventData.x-(0,renderer.Z)(e.currentTarget).offset().left,deltaY:eventData.y-(0,renderer.Z)(e.currentTarget).offset().top,sourceColumn:column,index:column.index,columnIndex:index,columnElement:$columnElement,sourceLocation:nameDraggingPanel,draggingPanels,rowIndex:that._columnsController.getRowIndex(column.index,!0)})}))),events_engine.Z.on($columnElement,(0,events_utils.V4)(drag.pB,"dxDataGridResizingReordering"),{that:draggingHeader},that.createAction(draggingHeader.moveHeader)),events_engine.Z.on($columnElement,(0,events_utils.V4)(drag.ut,"dxDataGridResizingReordering"),{that:draggingHeader},that.createAction(draggingHeader.dropHeader)))}},i=0;i<rowCount;i++){var columnElements=draggingPanel.getColumnElements(i)||[];columnElements.length&&(columns=draggingPanel.getColumns(i)||[],(0,iterator.S6)(columnElements,subscribeToEvents))}}))},_unsubscribeFromEvents:function(draggingHeader,draggingPanels){var that=this;(0,iterator.S6)(draggingPanels,(function(_,draggingPanel){if(draggingPanel){var columnElements=draggingPanel.getColumnElements()||[];(0,iterator.S6)(columnElements,(function(index,columnElement){var $columnElement=(0,renderer.Z)(columnElement);events_engine.Z.off($columnElement,(0,events_utils.V4)(drag.BL,"dxDataGridResizingReordering")),events_engine.Z.off($columnElement,(0,events_utils.V4)(drag.pB,"dxDataGridResizingReordering")),events_engine.Z.off($columnElement,(0,events_utils.V4)(drag.ut,"dxDataGridResizingReordering")),$columnElement.removeClass(that.addWidgetPrefix("drag-action"))}))}}))},_getSeparator:function(targetLocation){return"headers"===targetLocation?this._columnsSeparatorView:this._blockSeparatorView},hideSeparators:function(type){var blockSeparator=this._blockSeparatorView,columnsSeparator=this._columnsSeparatorView;this._animationColumnIndex=null,blockSeparator&&blockSeparator.hide(),"block"!==type&&columnsSeparator&&columnsSeparator.hide()},init:function(){var that=this;that.callBase(),that._columnsController=that.getController("columns"),that._columnHeadersView=that.getView("columnHeadersView"),that._columnsSeparatorView=that.getView("columnsSeparatorView"),that._draggingHeaderView=that.getView("draggingHeaderView"),that._rowsView=that.getView("rowsView"),that._blockSeparatorView=that.getView("blockSeparatorView"),that._headerPanelView=that.getView("headerPanel"),that._columnChooserView=that.getView("columnChooserView");var subscribeToEvents=function(){if(that._draggingHeaderView){var draggingPanels=[that._columnChooserView,that._columnHeadersView,that._headerPanelView];that._unsubscribeFromEvents(that._draggingHeaderView,draggingPanels),that._subscribeToEvents(that._draggingHeaderView,draggingPanels)}};that._columnHeadersView.renderCompleted.add(subscribeToEvents),that._headerPanelView&&that._headerPanelView.renderCompleted.add(subscribeToEvents),that._columnChooserView&&that._columnChooserView.renderCompleted.add(subscribeToEvents)},allowDrop:function(parameters){return this._columnsController.allowMoveColumn(parameters.sourceColumnIndex,parameters.targetColumnIndex,parameters.sourceLocation,parameters.targetLocation)},drag:function(parameters){var sourceIndex=parameters.sourceIndex,sourceLocation=parameters.sourceLocation,sourceColumnElement=parameters.sourceColumnElement,headersView=this._columnHeadersView,rowsView=this._rowsView;sourceColumnElement&&(sourceColumnElement.css({opacity:.5}),"headers"===sourceLocation&&(headersView&&headersView.setRowsOpacity(sourceIndex,.5),rowsView&&rowsView.setRowsOpacity(sourceIndex,.5)))},dock:function(parameters){var that=this,targetColumnIndex=(0,utils_type.Kn)(parameters.targetColumnIndex)?parameters.targetColumnIndex.columnIndex:parameters.targetColumnIndex,sourceLocation=parameters.sourceLocation,targetLocation=parameters.targetLocation,separator=that._getSeparator(targetLocation),hasTargetVisibleIndex=targetColumnIndex>=0;that._columnHeadersView.element().find(".dx-header-row").toggleClass(that.addWidgetPrefix("drop-highlight"),"headers"!==sourceLocation&&"headers"===targetLocation&&!hasTargetVisibleIndex),separator&&(that.allowDrop(parameters)&&hasTargetVisibleIndex?"group"===targetLocation||"columnChooser"===targetLocation?that._animationColumnIndex!==targetColumnIndex&&(that.hideSeparators(),separator.element()[parameters.isLast?"insertAfter":"insertBefore"](parameters.targetColumnElement),that._animationColumnIndex=targetColumnIndex,separator.show(targetLocation)):(that.hideSeparators("block"),that.getController("tablePosition").update(parameters.posY),separator.moveByX(parameters.posX-separator.width()),separator.show()):that.hideSeparators())},drop:function(parameters){var sourceColumnElement=parameters.sourceColumnElement;if(sourceColumnElement&&(sourceColumnElement.css({opacity:""}),this._columnHeadersView.setRowsOpacity(parameters.sourceIndex,""),this._rowsView.setRowsOpacity(parameters.sourceIndex,""),this._columnHeadersView.element().find(".dx-header-row").removeClass(this.addWidgetPrefix("drop-highlight"))),this.allowDrop(parameters)){var separator=this._getSeparator(parameters.targetLocation);separator&&separator.hide(),this._columnsController.moveColumn(parameters.sourceColumnIndex,parameters.targetColumnIndex,parameters.sourceLocation,parameters.targetLocation)}},dispose:function(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}}),tablePosition:TablePositionViewController,columnsResizer:ColumnsResizerViewController},extenders:{views:{rowsView:{_needUpdateRowHeight:function(itemCount){var wordWrapEnabled=this.option("wordWrapEnabled"),isResizing=this.getController("columnsResizer").isResizing();return this.callBase.apply(this,arguments)||itemCount>0&&wordWrapEnabled&&isResizing}}},controllers:{editorFactory:{renderFocusOverlay:function(){if(!this.getController("columnsResizer").isResizing())return this.callBase.apply(this,arguments)}}}}};module_core.registerModule("columnsResizingReordering",columnsResizingReorderingModule);var wheel=__webpack_require__("./node_modules/devextreme/esm/events/core/wheel.js"),getTransparentColumnIndex=function(fixedColumns){var transparentColumnIndex=-1;return(0,iterator.S6)(fixedColumns,(function(index,column){if("transparent"===column.command)return transparentColumnIndex=index,!1})),transparentColumnIndex},normalizeColumnWidths=function(fixedColumns,widths,fixedWidths){var fixedColumnIndex=0;if(fixedColumns&&widths&&fixedWidths)for(var i=0;i<fixedColumns.length;i++)"transparent"===fixedColumns[i].command?fixedColumnIndex+=fixedColumns[i].colspan:(widths[fixedColumnIndex]<fixedWidths[i]&&(widths[fixedColumnIndex]=fixedWidths[i]),fixedColumnIndex++);return widths},baseFixedColumns={init:function(){this.callBase(),this._isFixedTableRendering=!1,this._isFixedColumns=!1},_createCol:function(column){return this.callBase(column).toggleClass("dx-col-fixed",!(!this._isFixedTableRendering||!(column.fixed||column.command&&"transparent"!==column.command)))},_correctColumnIndicesForFixedColumns:function(fixedColumns,change){var transparentColumnIndex=getTransparentColumnIndex(fixedColumns),transparentColspan=fixedColumns[transparentColumnIndex].colspan,columnIndices=change&&change.columnIndices;columnIndices&&(change.columnIndices=columnIndices.map((function(columnIndices){if(columnIndices)return columnIndices.map((function(columnIndex){return columnIndex<transparentColumnIndex?columnIndex:columnIndex>=transparentColumnIndex+transparentColspan?columnIndex-transparentColspan+1:-1})).filter((function(columnIndex){return columnIndex>=0}))})))},_partialUpdateFixedTable(fixedColumns){var fixedTableElement=this._fixedTableElement,$rows=this._getRowElementsCore(fixedTableElement);fixedTableElement.children("colgroup").replaceWith(this._createColGroup(fixedColumns));for(var i=0;i<$rows.length;i++)this._partialUpdateFixedRow((0,renderer.Z)($rows[i]),fixedColumns)},_partialUpdateFixedRow($row,fixedColumns){var groupCellOptions,cellElements=$row.get(0).childNodes,transparentColumnIndex=getTransparentColumnIndex(fixedColumns),transparentColumn=fixedColumns[transparentColumnIndex],colIndex=this._columnsController.getColumnIndexOffset()+1,colspan=transparentColumn.colspan;if($row.hasClass("dx-master-detail-row")){var _this$_columnsControl;cellElements[0].setAttribute("colspan",null===(_this$_columnsControl=this._columnsController.getVisibleColumns())||void 0===_this$_columnsControl?void 0:_this$_columnsControl.length)}else{$row.hasClass("dx-group-row")&&(colspan=(groupCellOptions=this._getGroupCellOptions({row:$row.data("options"),columns:this._columnsController.getVisibleColumns()})).colspan-Math.max(0,cellElements.length-(groupCellOptions.columnIndex+2)));for(var j=0;j<cellElements.length;j++){var needUpdateColspan=groupCellOptions?j===groupCellOptions.columnIndex+1:j===transparentColumnIndex;cellElements[j].setAttribute("aria-colindex",colIndex),needUpdateColspan?(cellElements[j].setAttribute("colspan",colspan),colIndex+=colspan):colIndex++}}},_renderTable:function(options){var $fixedTable,fixedColumns=this.getFixedColumns();this._isFixedColumns=!!fixedColumns.length;var $table=this.callBase(options);if(this._isFixedColumns){var change=null==options?void 0:options.change;if(this._isFixedTableRendering=!0,null!=change&&change.virtualColumnsScrolling&&!0!==this.option("scrolling.legacyMode"))this._partialUpdateFixedTable(fixedColumns),this._isFixedTableRendering=!1;else{var columnIndices=null==change?void 0:change.columnIndices;this._correctColumnIndicesForFixedColumns(fixedColumns,change),$fixedTable=this._createTable(fixedColumns),this._renderRows($fixedTable,(0,extend.l)({},options,{columns:fixedColumns})),this._updateContent($fixedTable,change,!0),columnIndices&&(change.columnIndices=columnIndices),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return $table},_renderRow:function($table,options){var fixedCorrection,cells=options.row.cells;if(this.callBase.apply(this,arguments),this._isFixedTableRendering&&cells&&cells.length){fixedCorrection=0;var fixedCells=options.row.cells||[];cells=cells.slice(),options.row.cells=cells;for(var i=0;i<fixedCells.length;i++)fixedCells[i].column&&"transparent"===fixedCells[i].column.command?fixedCorrection=(fixedCells[i].column.colspan||1)-1:cells[i+fixedCorrection]=fixedCells[i]}},_createCell:function(options){var fixedColumns,prevFixedColumn,transparentColumnIndex,column=options.column,columnCommand=column&&column.command,rowType=options.rowType,$cell=this.callBase.apply(this,arguments);(this._isFixedTableRendering||"filter"===rowType)&&(prevFixedColumn=(fixedColumns=this.getFixedColumns())[(transparentColumnIndex=getTransparentColumnIndex(fixedColumns))-1]),this._isFixedTableRendering?"transparent"===columnCommand&&($cell.addClass("dx-pointer-events-none").toggleClass("dx-first-cell",0===transparentColumnIndex||prevFixedColumn&&"expand"===prevFixedColumn.command).toggleClass("dx-last-cell",fixedColumns.length&&transparentColumnIndex===fixedColumns.length-1),"freeSpace"!==rowType&&ui_grid_core_utils.setEmptyText($cell)):"filter"===rowType&&$cell.toggleClass("dx-first-cell",options.columnIndex===transparentColumnIndex);var isRowAltStyle=this.option("rowAlternationEnabled")&&options.isAltRow,isSelectAllCell="multiple"===this.option("selection.mode")&&0===options.columnIndex&&"header"===options.rowType;return browser.Z.mozilla&&options.column.fixed&&"group"!==options.rowType&&!isRowAltStyle&&!isSelectAllCell&&$cell.addClass("dx-col-fixed"),$cell},_wrapTableInScrollContainer:function($table,isFixedTableRendering){var $scrollContainer=this.callBase.apply(this,arguments);return(this._isFixedTableRendering||isFixedTableRendering)&&$scrollContainer.addClass(this.addWidgetPrefix("content-fixed")),$scrollContainer},_renderCellContent:function($cell,options){var isEmptyCell,column=options.column,isFixedTableRendering=this._isFixedTableRendering,isGroupCell="group"===options.rowType&&(0,utils_type.$K)(column.groupIndex);if(isFixedTableRendering&&isGroupCell&&!column.command&&!column.groupCellTemplate&&$cell.css("pointerEvents","none"),!isFixedTableRendering&&this._isFixedColumns){if(isEmptyCell=column.fixed||column.command&&!1!==column.fixed,isGroupCell&&(isEmptyCell=!1,options.row.summaryCells&&options.row.summaryCells.length)){var columns=this._columnsController.getVisibleColumns(),alignByFixedColumnCellCount=this._getAlignByColumnCellCount?this._getAlignByColumnCellCount(column.colspan,{columns,row:options.row,isFixed:!0}):0;if(alignByFixedColumnCellCount>0){var transparentColumnIndex=getTransparentColumnIndex(this._columnsController.getFixedColumns());isEmptyCell=columns.length-alignByFixedColumnCellCount<transparentColumnIndex}}if(isEmptyCell){if(column.command&&"buttons"!==column.type||"group"===options.rowType)return void $cell.html("&nbsp;").addClass(column.cssClass);$cell.addClass("dx-hidden-cell")}}"transparent"!==column.command&&this.callBase.apply(this,arguments)},_getCellElementsCore:function(rowIndex){var cellElements=this.callBase.apply(this,arguments),isGroupRow=cellElements.parent().hasClass("dx-group-row"),headerRowIndex="columnHeadersView"===this.name?rowIndex:void 0;if(this._fixedTableElement&&cellElements){var fixedColumns=this.getFixedColumns(headerRowIndex),fixedCellElements=this._getRowElements(this._fixedTableElement).eq(rowIndex).children("td");(0,iterator.S6)(fixedCellElements,((columnIndex,cell)=>{if(isGroupRow)cellElements[columnIndex]&&"hidden"!==cell.style.visibility&&(cellElements[columnIndex]=cell);else{var fixedColumn=fixedColumns[columnIndex];if(fixedColumn)if("transparent"===fixedColumn.command)fixedCellElements.eq(columnIndex).hasClass("dx-master-detail-cell")&&(cellElements[columnIndex]=cell||cellElements[columnIndex]);else{var fixedColumnIndex=this._columnsController.getVisibleIndexByColumn(fixedColumn,headerRowIndex);cellElements[fixedColumnIndex]=cell||cellElements[fixedColumnIndex]}}}))}return cellElements},getColumnWidths:function(){var result=this.callBase(),fixedColumns=this.getFixedColumns(),fixedWidths=this._fixedTableElement&&result.length?this.callBase(this._fixedTableElement):void 0;return normalizeColumnWidths(fixedColumns,result,fixedWidths)},getTableElement:function(isFixedTableRendering){return(isFixedTableRendering=this._isFixedTableRendering||isFixedTableRendering)?this._fixedTableElement:this.callBase()},setTableElement:function(tableElement,isFixedTableRendering){this._isFixedTableRendering||isFixedTableRendering?this._fixedTableElement=tableElement.addClass("dx-pointer-events-none"):this.callBase(tableElement)},getColumns:function(rowIndex,$tableElement){return $tableElement=$tableElement||this.getTableElement(),this._isFixedTableRendering||$tableElement&&$tableElement.closest("table").parent("."+this.addWidgetPrefix("content-fixed")).length?this.getFixedColumns(rowIndex):this.callBase(rowIndex,$tableElement)},getRowIndex:function($row){var $fixedTable=this._fixedTableElement;return $fixedTable&&$fixedTable.find($row).length?this._getRowElements($fixedTable).index($row):this.callBase($row)},getTableElements:function(){var result=this.callBase.apply(this,arguments);return this._fixedTableElement&&(result=(0,renderer.Z)([result.get(0),this._fixedTableElement.get(0)])),result},getFixedColumns:function(rowIndex){return this._columnsController.getFixedColumns(rowIndex)},getFixedColumnsOffset:function(){var $transparentColumn,offset={left:0,right:0};if(this._fixedTableElement){var positionTransparentColumn=($transparentColumn=this.getTransparentColumnElement()).position();offset={left:positionTransparentColumn.left,right:(0,size.Y_)(this.element(),!0)-((0,size.Y_)($transparentColumn,!0)+positionTransparentColumn.left)}}return offset},getTransparentColumnElement:function(){return this._fixedTableElement&&this._fixedTableElement.find(".dx-pointer-events-none").first()},getFixedTableElement:function(){return this._fixedTableElement},isFixedColumns:function(){return this._isFixedColumns},_resizeCore:function(){this.callBase(),this.synchronizeRows()},setColumnWidths:function(options){var columns,visibleColumns=this._columnsController.getVisibleColumns(),widths=options.widths,isWidthsSynchronized=widths&&widths.length&&(0,utils_type.$K)(visibleColumns[0].visibleWidth),optionNames=options.optionNames,isColumnWidthChanged=optionNames&&optionNames.width;(this.callBase.apply(this,arguments),this._fixedTableElement)&&(widths&&widths.some((function(width){return"auto"===width}))&&(!isWidthsSynchronized||!this.isScrollbarVisible(!0))&&(columns=visibleColumns),this.callBase((0,extend.l)({},options,{$tableElement:this._fixedTableElement,columns,fixed:!0})));(isWidthsSynchronized||isColumnWidthChanged&&this.option("wordWrapEnabled"))&&this.synchronizeRows()},_createColGroup:function(columns){if(this._isFixedTableRendering&&!this.option("columnAutoWidth")){var visibleColumns=this._columnsController.getVisibleColumns();visibleColumns.filter((function(column){return!column.width})).length&&(columns=visibleColumns)}return this.callBase(columns)},_getClientHeight:function(element){var boundingClientRectElement=element.getBoundingClientRect&&(0,utils_position.l)(element);return boundingClientRectElement&&boundingClientRectElement.height?boundingClientRectElement.height:element.clientHeight},synchronizeRows:function(){var rowIndex,$rowElements,$fixedRowElements,$contentElement,rowHeights=[],fixedRowHeights=[];this.waitAsyncTemplates(!0).done((()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){var heightTable=this._getClientHeight(this._tableElement.get(0)),heightFixedTable=this._getClientHeight(this._fixedTableElement.get(0));if($rowElements=this._getRowElements(this._tableElement),$fixedRowElements=this._getRowElements(this._fixedTableElement),$contentElement=this._findContentElement(),heightTable!==heightFixedTable){for($contentElement&&$contentElement.css("height",heightTable),$rowElements.css("height",""),$fixedRowElements.css("height",""),rowIndex=0;rowIndex<$rowElements.length;rowIndex++)rowHeights.push(this._getClientHeight($rowElements.get(rowIndex))),fixedRowHeights.push(this._getClientHeight($fixedRowElements.get(rowIndex)));for(rowIndex=0;rowIndex<$rowElements.length;rowIndex++){var rowHeight=rowHeights[rowIndex],fixedRowHeight=fixedRowHeights[rowIndex];rowHeight>fixedRowHeight?$fixedRowElements.eq(rowIndex).css("height",rowHeight):rowHeight<fixedRowHeight&&$rowElements.eq(rowIndex).css("height",fixedRowHeight)}$contentElement&&$contentElement.css("height","")}}}))},setScrollerSpacing:function(width){var rtlEnabled=this.option("rtlEnabled");this.callBase(width),this.element().children("."+this.addWidgetPrefix("content-fixed")).css({paddingLeft:rtlEnabled?width:"",paddingRight:rtlEnabled?"":width})}},ColumnHeadersViewFixedColumnsExtender=(0,extend.l)({},baseFixedColumns,{_getRowVisibleColumns:function(rowIndex){return this._isFixedTableRendering?this.getFixedColumns(rowIndex):this.callBase(rowIndex)},getContextMenuItems:function(options){var column=options.column,columnFixingOptions=this.option("columnFixing"),items=this.callBase(options);if(options.row&&"header"===options.row.rowType&&!0===columnFixingOptions.enabled&&column&&column.allowFixing){var onItemClick=params=>{switch(params.itemData.value){case"none":this._columnsController.columnOption(column.index,"fixed",!1);break;case"left":this._columnsController.columnOption(column.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(column.index,{fixed:!0,fixedPosition:"right"})}};(items=items||[]).push({text:columnFixingOptions.texts.fix,beginGroup:!0,items:[{text:columnFixingOptions.texts.leftPosition,value:"left",disabled:column.fixed&&(!column.fixedPosition||"left"===column.fixedPosition),onItemClick},{text:columnFixingOptions.texts.rightPosition,value:"right",disabled:column.fixed&&"right"===column.fixedPosition,onItemClick}]},{text:columnFixingOptions.texts.unfix,value:"none",disabled:!column.fixed,onItemClick})}return items},getFixedColumnElements:function(rowIndex){if((0,utils_type.$K)(rowIndex))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(rowIndex).children();var columnElements=this.getColumnElements(),$transparentColumnElement=this.getTransparentColumnElement();if(columnElements&&$transparentColumnElement&&$transparentColumnElement.length){var transparentColumnIndex=getTransparentColumnIndex(this.getFixedColumns());columnElements.splice(transparentColumnIndex,$transparentColumnElement.get(0).colSpan,$transparentColumnElement.get(0))}return columnElements},getColumnWidths:function(){var fixedWidths,result=this.callBase(),$fixedColumnElements=this.getFixedColumnElements(),fixedColumns=this.getFixedColumns();return this._fixedTableElement&&(fixedWidths=$fixedColumnElements&&$fixedColumnElements.length?this._getWidths($fixedColumnElements):this.callBase(this._fixedTableElement)),normalizeColumnWidths(fixedColumns,result,fixedWidths)}}),RowsViewFixedColumnsExtender=(0,extend.l)({},baseFixedColumns,{_detachHoverEvents:function(){this._fixedTableElement&&events_engine.Z.off(this._fixedTableElement,"mouseover mouseout",".dx-data-row"),this._tableElement&&events_engine.Z.off(this._tableElement,"mouseover mouseout",".dx-data-row")},_attachHoverEvents:function(){var that=this,attachHoverEvent=function($table){events_engine.Z.on($table,"mouseover mouseout",".dx-data-row",that.createAction((function(args){var event=args.event,rowIndex=that.getRowIndex((0,renderer.Z)(event.target).closest(".dx-row")),isHover="mouseover"===event.type;rowIndex>=0&&(that._tableElement&&that._getRowElements(that._tableElement).eq(rowIndex).toggleClass("dx-state-hover",isHover),that._fixedTableElement&&that._getRowElements(that._fixedTableElement).eq(rowIndex).toggleClass("dx-state-hover",isHover))})))};that._fixedTableElement&&that._tableElement&&(attachHoverEvent(that._fixedTableElement),attachHoverEvent(that._tableElement))},_getScrollDelay:function(){var _this$getController;return(null===(_this$getController=this.getController("resizing"))||void 0===_this$getController?void 0:_this$getController.hasResizeTimeout())?this.option("scrolling.updateTimeout"):browser.Z.mozilla?60:0},_findContentElement:function(isFixedTableRendering){var $content,scrollTop,contentClass=this.addWidgetPrefix("content"),element=this.element();if(isFixedTableRendering=this._isFixedTableRendering||isFixedTableRendering,element&&isFixedTableRendering){$content=element.children("."+contentClass);var scrollable=this.getScrollable();return!$content.length&&scrollable&&($content=(0,renderer.Z)("<div>").addClass(contentClass),events_engine.Z.on($content,"scroll",(e=>{var target=e.target,scrollDelay=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout((()=>{scrollTop=(0,renderer.Z)(target).scrollTop(),scrollable.scrollTo({y:scrollTop})}),scrollDelay)})),events_engine.Z.on($content,wheel.u,(e=>{var $nearestScrollable=(0,renderer.Z)(e.target).closest(".dx-scrollable"),shouldScroll=!1;if(scrollable&&scrollable.$element().is($nearestScrollable))shouldScroll=!0;else{var nearestScrollableInstance=$nearestScrollable.length&&ui_scrollable.Z.getInstance($nearestScrollable.get(0)),nearestScrollableHasVerticalScrollbar=nearestScrollableInstance&&nearestScrollableInstance.scrollHeight()-nearestScrollableInstance.clientHeight()>0;shouldScroll=nearestScrollableInstance&&!nearestScrollableHasVerticalScrollbar}if(shouldScroll){scrollTop=scrollable.scrollTop(),scrollable.scrollTo({y:scrollTop-e.delta});var scrollableTop=scrollable.scrollTop()+scrollable.clientHeight(),scrollableHeight=scrollable.scrollHeight()+this.getScrollbarWidth();if(scrollable.scrollTop()>0&&scrollableTop<scrollableHeight)return!1}})),$content.appendTo(element)),$content}return this.callBase()},_updateScrollable:function(){this.callBase();var scrollable=this.getScrollable();if(null==scrollable||!scrollable._disposed){var scrollTop=scrollable&&scrollable.scrollOffset().top;this._updateFixedTablePosition(scrollTop)}},_renderContent:function(contentElement,tableElement,isFixedTableRendering){return this._isFixedTableRendering||isFixedTableRendering?contentElement.empty().addClass(this.addWidgetPrefix("content")+" "+this.addWidgetPrefix("content-fixed")).append(tableElement):this.callBase(contentElement,tableElement)},_getGroupCellOptions:function(options){return this._isFixedTableRendering?this.callBase((0,extend.l)({},options,{columns:this._columnsController.getVisibleColumns()})):this.callBase(options)},_renderGroupedCells:function($row,options){return this.callBase($row,(0,extend.l)({},options,{columns:this._columnsController.getVisibleColumns()}))},_renderGroupSummaryCells:function($row,options){this._isFixedTableRendering?this.callBase($row,(0,extend.l)({},options,{columns:this._columnsController.getVisibleColumns()})):this.callBase($row,options)},_hasAlignByColumnSummaryItems:function(columnIndex,options){var result=this.callBase.apply(this,arguments),column=options.columns[columnIndex];return options.isFixed?column.fixed&&(result||"right"===column.fixedPosition):result&&(!this._isFixedColumns||!column.fixed)},_renderGroupSummaryCellsCore:function($groupCell,options,groupCellColSpan,alignByColumnCellCount){var alignByFixedColumnCellCount;if(this._isFixedTableRendering){options.isFixed=!0,alignByFixedColumnCellCount=this._getAlignByColumnCellCount(groupCellColSpan,options),options.isFixed=!1;var startColumnIndex=options.columns.length-alignByFixedColumnCellCount;options=(0,extend.l)({},options,{columns:this.getFixedColumns()});var transparentColumnIndex=getTransparentColumnIndex(options.columns);startColumnIndex<transparentColumnIndex?(alignByFixedColumnCellCount-=options.columns[transparentColumnIndex].colspan-1||0,groupCellColSpan-=options.columns[transparentColumnIndex].colspan-1||0):alignByColumnCellCount>0&&$groupCell.css("visibility","hidden"),alignByColumnCellCount=alignByFixedColumnCellCount}this.callBase($groupCell,options,groupCellColSpan,alignByColumnCellCount)},_getSummaryCellIndex:function(columnIndex,columns){if(this._isFixedTableRendering){var transparentColumnIndex=getTransparentColumnIndex(columns);return columnIndex>transparentColumnIndex&&(columnIndex+=columns[transparentColumnIndex].colspan-1),columnIndex}return this.callBase.apply(this,arguments)},_renderCore:function(change){this._detachHoverEvents();var deferred=this.callBase(change),isFixedColumns=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",isFixedColumns),this.option("hoverStateEnabled")&&isFixedColumns&&deferred.done((()=>{this._attachHoverEvents()})),deferred},setRowsOpacity:function(columnIndex,value){this.callBase(columnIndex,value);var $rows=this._getRowElements(this._fixedTableElement);this._setRowsOpacityCore($rows,this.getFixedColumns(),columnIndex,value)},optionChanged:function(args){this.callBase(args),"hoverStateEnabled"===args.name&&this._isFixedColumns&&(args.value?this._attachHoverEvents():this._detachHoverEvents())},getCellIndex:function($cell){var $fixedTable=this._fixedTableElement,cellIndex=0;if($fixedTable&&$cell.is("td")&&$cell.closest($fixedTable).length){var columns=this.getFixedColumns();return(0,iterator.S6)(columns,(function(index,column){if(index===$cell[0].cellIndex)return!1;column.colspan?cellIndex+=column.colspan:cellIndex++})),cellIndex}return this.callBase.apply(this,arguments)},_updateFixedTablePosition:function(scrollTop,needFocus){if(this._fixedTableElement&&this._tableElement){var $focusedElement,editorFactory=this.getController("editorFactory");this._fixedTableElement.parent().scrollTop(scrollTop),needFocus&&editorFactory&&($focusedElement=editorFactory.focus())&&editorFactory.focus($focusedElement)}},setScrollerSpacing:function(vWidth,hWidth){var styles={marginBottom:0},$fixedContent=this.element().children("."+this.addWidgetPrefix("content-fixed"));$fixedContent.length&&this._fixedTableElement&&($fixedContent.css(styles),this._fixedTableElement.css(styles),styles[this.option("rtlEnabled")?"marginLeft":"marginRight"]=vWidth,styles.marginBottom=hWidth,(this._scrollable&&this._scrollable.option("useNative")?$fixedContent:this._fixedTableElement).css(styles))},_getElasticScrollTop:function(e){var elasticScrollTop=0;if(e.scrollOffset.top<0)elasticScrollTop=-e.scrollOffset.top;else if(e.reachedBottom){var $scrollableContent=(0,renderer.Z)(e.component.content()),$scrollableContainer=(0,renderer.Z)(e.component.container());elasticScrollTop=Math.max($scrollableContent.get(0).clientHeight-$scrollableContainer.get(0).clientHeight,0)-e.scrollOffset.top}return Math.floor(elasticScrollTop)},_applyElasticScrolling:function(e){if(this._fixedTableElement){var elasticScrollTop=this._getElasticScrollTop(e);0!==Math.ceil(elasticScrollTop)?(0,translator.pB)(this._fixedTableElement,{top:elasticScrollTop}):this._fixedTableElement.css("transform","")}},_handleScroll:function(e){this._updateFixedTablePosition(e.scrollOffset.top,!0),this._applyElasticScrolling(e),this.callBase(e)},_updateContentPosition:function(isRender){this.callBase.apply(this,arguments),isRender||this._updateFixedTablePosition(this._scrollTop)},_afterRowPrepared:function(e){this._isFixedTableRendering||this.callBase(e)},_scrollToElement:function($element){this.callBase($element,this.getFixedColumnsOffset())},dispose:function(){this.callBase.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}}),columnFixingModule={defaultOptions:function(){return{columnFixing:{enabled:!1,texts:{fix:message.Z.format("dxDataGrid-columnFixingFix"),unfix:message.Z.format("dxDataGrid-columnFixingUnfix"),leftPosition:message.Z.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:message.Z.format("dxDataGrid-columnFixingRightPosition")}}}},extenders:{views:{columnHeadersView:ColumnHeadersViewFixedColumnsExtender,rowsView:RowsViewFixedColumnsExtender,footerView:baseFixedColumns},controllers:{draggingHeader:{_generatePointsByColumns:function(options){var visibleColumns=options.columns,targetDraggingPanel=options.targetDraggingPanel;if(targetDraggingPanel&&"headers"===targetDraggingPanel.getName()&&targetDraggingPanel.isFixedColumns()&&options.sourceColumn.fixed){options.rowIndex||(options.columnElements=targetDraggingPanel.getFixedColumnElements(0)),options.columns=targetDraggingPanel.getFixedColumns(options.rowIndex);var pointsByColumns=this.callBase(options);return function(columns,fixedColumns,pointsByColumns){var transparentColumnIndex=getTransparentColumnIndex(fixedColumns),correctIndex=columns.length-fixedColumns.length;(0,iterator.S6)(pointsByColumns,(function(_,point){point.index>transparentColumnIndex&&(point.columnIndex+=correctIndex,point.index+=correctIndex)}))}(visibleColumns,options.columns,pointsByColumns),pointsByColumns}return this.callBase(options)},_pointCreated:function(point,columns,location,sourceColumn){var result=this.callBase.apply(this,arguments),targetColumn=columns[point.columnIndex],$transparentColumn=this._columnHeadersView.getTransparentColumnElement();if(!result&&"headers"===location&&$transparentColumn&&$transparentColumn.length){var boundingRect=(0,utils_position.l)($transparentColumn.get(0));return sourceColumn&&sourceColumn.fixed?"right"===sourceColumn.fixedPosition?point.x<boundingRect.right:point.x>boundingRect.left:!(!targetColumn||!targetColumn.fixed||"right"===targetColumn.fixedPosition)||(point.x<boundingRect.left||point.x>boundingRect.right)}return result}},columnsResizer:{_generatePointsByColumns:function(){var that=this,columnsController=that._columnsController,columns=columnsController&&that._columnsController.getVisibleColumns(),fixedColumns=columnsController&&that._columnsController.getFixedColumns(),transparentColumnIndex=getTransparentColumnIndex(fixedColumns),correctIndex=columns.length-fixedColumns.length,cells=that._columnHeadersView.getFixedColumnElements();that.callBase(),cells&&cells.length>0&&(that._pointsByFixedColumns=ui_grid_core_utils.getPointsByColumns(cells,(function(point){return point.index>transparentColumnIndex&&(point.columnIndex+=correctIndex,point.index+=correctIndex),that._pointCreated(point,columns.length,columns)})))},_getTargetPoint:function(pointsByColumns,currentX,deltaX){var $transparentColumn=this._columnHeadersView.getTransparentColumnElement();if($transparentColumn&&$transparentColumn.length){var boundingRect=(0,utils_position.l)($transparentColumn.get(0));if(currentX<=boundingRect.left||currentX>=boundingRect.right)return this.callBase(this._pointsByFixedColumns,currentX,deltaX)}return this.callBase(pointsByColumns,currentX,deltaX)}}}}};module_core.registerModule("columnFixing",columnFixingModule);const COLUMN_VIEWS=["columnHeadersView","rowsView","footerView"];function getColumnId(that,column){return that._columnsController.getColumnId(column)}function adaptiveCellTemplate(container,options){let $adaptiveColumnButton;const $container=(0,renderer.Z)(container),adaptiveColumnsController=options.component.getController("adaptiveColumns");"data"===options.rowType?($adaptiveColumnButton=(0,renderer.Z)("<span>").addClass(adaptiveColumnsController.addWidgetPrefix("adaptive-more")),events_engine.Z.on($adaptiveColumnButton,(0,events_utils.V4)(click.u,"dxDataGridAdaptivity"),adaptiveColumnsController.createAction((()=>{adaptiveColumnsController.toggleExpandAdaptiveDetailRow(options.key)}))),$adaptiveColumnButton.appendTo($container)):module_utils.setEmptyText($container)}function focusCellHandler(e){var _a;const $nextCell=null===(_a=e.data)||void 0===_a?void 0:_a.$nextCell;events_engine.Z.off($nextCell,"focus",focusCellHandler),events_engine.Z.trigger($nextCell,"dxclick")}const adaptiveColumnsControllerMembers={_isRowEditMode(){return"row"===this._getEditMode()},_isItemModified(item,cellOptions){const columnIndex=this._columnsController.getVisibleIndex(item.column.index),rowIndex=this._dataController.getRowIndexByKey(cellOptions.key),row=this._dataController.items()[rowIndex+1];return row&&row.modifiedValues&&(0,utils_type.$K)(row.modifiedValues[columnIndex])},_renderFormViewTemplate(item,cellOptions,$container){const that=this,{column}=item,focusAction=that.createAction((()=>{that._editingController.isEditing()&&events_engine.Z.trigger($container,click.u)})),rowData=cellOptions.row.data,value=column.calculateCellValue(rowData),displayValue=module_utils.getDisplayValue(column,value,rowData,cellOptions.rowType),text=module_utils.formatValue(displayValue,column),isCellOrBatchEditMode=this._editingController.isCellOrBatchEditMode(),rowsView=that._rowsView;if(column.allowEditing&&that.getController("keyboardNavigation").isKeyboardEnabled()&&($container.attr("tabIndex",that.option("tabIndex")),isCellOrBatchEditMode&&(events_engine.Z.off($container,"focus",focusAction),events_engine.Z.on($container,"focus",focusAction))),column.cellTemplate){const templateOptions=(0,extend.l)({},cellOptions,{value,displayValue,text,column});rowsView.renderTemplate($container,column.cellTemplate,templateOptions,(0,dom.al)($container)).done((()=>{rowsView._cellPrepared($container,cellOptions)}))}else{const container=$container.get(0);column.encodeHtml?container.textContent=text:container.innerHTML=text,$container.addClass("dx-adaptive-item-text"),(0,utils_type.$K)(text)&&""!==text||$container.html("&nbsp;"),that._isRowEditMode()||that._isItemModified(item,cellOptions)&&$container.addClass("dx-item-modified"),rowsView._cellPrepared($container,cellOptions)}},_getTemplate(item,cellOptions){const that=this,{column}=item,editingController=this.getController("editing");return function(options,container){const $container=(0,renderer.Z)(container),columnIndex=that._columnsController.getVisibleIndex(column.index),templateOptions=(0,extend.l)({},cellOptions),renderFormTemplate=function(){const isItemEdited=that._isItemEdited(item);templateOptions.value=cellOptions.row.values[columnIndex],isItemEdited||column.showEditorAlways?editingController.renderFormEditorTemplate(templateOptions,item,options,$container,!isItemEdited):(templateOptions.column=column,templateOptions.columnIndex=columnIndex,that._renderFormViewTemplate(item,templateOptions,$container))};renderFormTemplate(),templateOptions.watch&&templateOptions.watch((()=>({isItemEdited:that._isItemEdited(item),value:cellOptions.row.values[columnIndex]})),(()=>{$container.contents().remove(),$container.removeClass("dx-adaptive-item-text"),renderFormTemplate()}))}},_isVisibleColumnsValid:visibleColumns=>!(visibleColumns<2)&&!(visibleColumns.length-function(){let result=0;for(let j=0;j<visibleColumns.length;j++){visibleColumns[j].command&&result++}return result}()<=1),_calculatePercentWidths(widths,visibleColumns){const that=this;let percentWidths=0;return visibleColumns.forEach(((item,index)=>{"adaptiveHidden"!==widths[index]&&(percentWidths+=that._getItemPercentWidth(item))})),percentWidths},_isPercentWidth:width=>(0,utils_type.HD)(width)&&width.endsWith("%"),_isColumnHidden(column){return this._hiddenColumns.filter((hiddenColumn=>hiddenColumn.index===column.index)).length>0},_getAverageColumnsWidth(containerWidth,columns,columnsCanFit){const that=this;let fixedColumnsWidth=0,columnsWithoutFixedWidthCount=0;return columns.forEach((column=>{if(!that._isColumnHidden(column)){const{width}=column;(0,utils_type.$K)(width)&&!isNaN(parseFloat(width))?fixedColumnsWidth+=that._isPercentWidth(width)?that._calculatePercentWidth({visibleIndex:column.visibleIndex,columnsCount:columns.length,columnsCanFit,bestFitWidth:column.bestFitWidth,columnWidth:width,containerWidth}):parseFloat(width):columnsWithoutFixedWidthCount++}})),(containerWidth-fixedColumnsWidth)/columnsWithoutFixedWidthCount},_calculateColumnWidth(column,containerWidth,contentColumns,columnsCanFit){const columnId=getColumnId(this,column),widthOption=this._columnsController.columnOption(columnId,"width"),bestFitWidth=this._columnsController.columnOption(columnId,"bestFitWidth"),columnsCount=contentColumns.length;let colWidth;if(widthOption&&"auto"!==widthOption){if(!this._isPercentWidth(widthOption))return parseFloat(widthOption);colWidth=this._calculatePercentWidth({visibleIndex:column.visibleIndex,columnsCount,columnsCanFit,bestFitWidth,columnWidth:widthOption,containerWidth})}else{colWidth=this.option("columnAutoWidth")||column.command?bestFitWidth:this._getAverageColumnsWidth(containerWidth,contentColumns,columnsCanFit)}return colWidth},_calculatePercentWidth(options){const columnFitted=options.visibleIndex<options.columnsCount-1&&options.columnsCanFit,partialWidth=options.containerWidth*parseFloat(options.columnWidth)/100,resultWidth=options.columnsCanFit&&partialWidth<options.bestFitWidth?options.bestFitWidth:partialWidth;return columnFitted?options.containerWidth*parseFloat(options.columnWidth)/100:resultWidth},_getNotTruncatedColumnWidth(column,containerWidth,contentColumns,columnsCanFit){const columnId=getColumnId(this,column),widthOption=this._columnsController.columnOption(columnId,"width"),bestFitWidth=this._columnsController.columnOption(columnId,"bestFitWidth");if(widthOption&&"auto"!==widthOption&&!this._isPercentWidth(widthOption))return parseFloat(widthOption);const colWidth=this._calculateColumnWidth(column,containerWidth,contentColumns,columnsCanFit);return colWidth<bestFitWidth?null:colWidth},_getItemPercentWidth(item){let result=0;return item.width&&this._isPercentWidth(item.width)&&(result=parseFloat(item.width)),result},_getCommandColumnsWidth(){const that=this,columns=that._columnsController.getVisibleColumns();let colWidth=0;return(0,iterator.S6)(columns,((index,column)=>{(column.index<0||column.command)&&(colWidth+=that._columnsController.columnOption(getColumnId(that,column),"bestFitWidth")||0)})),colWidth},_isItemEdited(item){if(this.isFormOrPopupEditMode())return!1;if(!this._isRowEditMode()){const rowIndex=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,columnIndex=this._columnsController.getVisibleIndex(item.column.index);return this._editingController.isEditCell(rowIndex,columnIndex)}{const editRowKey=this.option("editing.editRowKey");if((0,common.bY)(editRowKey,this._dataController.adaptiveExpandedKey()))return!0}},_getFormItemsByHiddenColumns(hiddenColumns){const items=[];return(0,iterator.S6)(hiddenColumns,((_,column)=>{items.push({column,name:column.name,dataField:column.dataField,visibleIndex:column.visibleIndex})})),items},_getAdaptiveColumnVisibleIndex(visibleColumns){for(let i=0;i<visibleColumns.length;i++){if("adaptive"===visibleColumns[i].command)return i}},_hideAdaptiveColumn(resultWidths,visibleColumns){const visibleIndex=this._getAdaptiveColumnVisibleIndex(visibleColumns);(0,utils_type.$K)(visibleIndex)&&(resultWidths[visibleIndex]="adaptiveHidden",this._hideVisibleColumn({isCommandColumn:!0,visibleIndex}))},_showHiddenCellsInView({$cells,isCommandColumn}){let cssClassNameToRemove=this.addWidgetPrefix("hidden-column");isCommandColumn?(cssClassNameToRemove="dx-command-adaptive-hidden",$cells.attr({tabIndex:0,"aria-hidden":null}).removeClass(cssClassNameToRemove)):$cells.removeClass(cssClassNameToRemove)},_showHiddenColumns(){for(let i=0;i<COLUMN_VIEWS.length;i++){const view=this.getView(COLUMN_VIEWS[i]);if(view&&view.isVisible()&&view.element()){const viewName=view.name,$hiddenCommandCells=view.element().find(".dx-command-adaptive-hidden");this._showHiddenCellsInView({viewName,$cells:$hiddenCommandCells,isCommandColumn:!0});const $hiddenCells=view.element().find("."+this.addWidgetPrefix("hidden-column"));this._showHiddenCellsInView({viewName,$cells:$hiddenCells})}}},_isCellValid:$cell=>$cell&&$cell.length&&!$cell.hasClass("dx-master-detail-cell")&&!$cell.hasClass("dx-group-cell"),_hideVisibleColumn({isCommandColumn,visibleIndex}){const that=this;COLUMN_VIEWS.forEach((viewName=>{const view=that.getView(viewName);view&&that._hideVisibleColumnInView({view,isCommandColumn,visibleIndex})}))},_hideVisibleColumnInView({view,isCommandColumn,visibleIndex}){const viewName=view.name;let $cellElement;const column=this._columnsController.getVisibleColumns()[visibleIndex],editFormRowIndex=this._editingController&&this._editingController.getEditFormRowIndex();if(view&&view.isVisible()&&column){const rowsCount=view.getRowsCount(),$rowElements=view._getRowElements();for(let rowIndex=0;rowIndex<rowsCount;rowIndex++){if(!(rowIndex===editFormRowIndex&&"rowsView"===viewName&&"popup"!==this.option("editing.mode"))){const currentVisibleIndex="columnHeadersView"===viewName?this._columnsController.getVisibleIndex(column.index,rowIndex):visibleIndex;if(currentVisibleIndex>=0){const $rowElement=$rowElements.eq(rowIndex);$cellElement=this._findCellElementInRow($rowElement,currentVisibleIndex),this._isCellValid($cellElement)&&this._hideVisibleCellInView({viewName,isCommandColumn,$cell:$cellElement})}}}}},_findCellElementInRow($rowElement,visibleColumnIndex){const $rowCells=$rowElement.children();let visibleIndex=visibleColumnIndex,cellIsInsideGroup=!1;if($rowElement.hasClass("dx-group-row")){const $groupCell=$rowElement.find(".dx-group-cell"),colSpan=$groupCell.attr("colspan");if($groupCell.length&&(0,utils_type.$K)(colSpan)){const groupCellLength=parseInt(colSpan);visibleColumnIndex>$groupCell.index()+groupCellLength-1?visibleIndex=visibleColumnIndex-groupCellLength+1:cellIsInsideGroup=!0}}return cellIsInsideGroup?void 0:$rowCells.eq(visibleIndex)},_hideVisibleCellInView({$cell,isCommandColumn}){const cssClassNameToAdd=isCommandColumn?"dx-command-adaptive-hidden":this.addWidgetPrefix("hidden-column");$cell.attr({tabIndex:-1,"aria-hidden":!0}).addClass(cssClassNameToAdd)},_getEditMode(){return this._editingController.getEditMode()},isFormOrPopupEditMode(){const editMode=this._getEditMode();return"form"===editMode||"popup"===editMode},hideRedundantColumns(resultWidths,visibleColumns,hiddenQueue){const that=this;if(this._hiddenColumns=[],that._isVisibleColumnsValid(visibleColumns)&&hiddenQueue.length){let totalWidth=0;const $rootElement=that.component.$element();let rootElementWidth=(0,size.dz)($rootElement)-that._getCommandColumnsWidth();const getVisibleContentColumns=function(){return visibleColumns.filter((item=>!item.command&&0===this._hiddenColumns.filter((i=>i.index===item.index)).length))}.bind(this);let visibleContentColumns=getVisibleContentColumns();const contentColumnsCount=visibleContentColumns.length;let i,hasHiddenColumns,needHideColumn;do{needHideColumn=!1,totalWidth=0;const percentWidths=that._calculatePercentWidths(resultWidths,visibleColumns),columnsCanFit=percentWidths<100&&0!==percentWidths;for(i=0;i<visibleColumns.length;i++){const visibleColumn=visibleColumns[i];let columnWidth=that._getNotTruncatedColumnWidth(visibleColumn,rootElementWidth,visibleContentColumns,columnsCanFit);const columnId=getColumnId(that,visibleColumn),widthOption=that._columnsController.columnOption(columnId,"width"),minWidth=that._columnsController.columnOption(columnId,"minWidth"),columnBestFitWidth=that._columnsController.columnOption(columnId,"bestFitWidth");if("adaptiveHidden"!==resultWidths[i]){if(!columnWidth&&!visibleColumn.command&&!visibleColumn.fixed){needHideColumn=!0;break}widthOption&&"auto"!==widthOption||(columnWidth=Math.max(columnBestFitWidth||0,minWidth||0)),("adaptive"!==visibleColumn.command||hasHiddenColumns)&&(totalWidth+=columnWidth)}else hasHiddenColumns=!0}if(needHideColumn=needHideColumn||totalWidth>(0,size.dz)($rootElement),needHideColumn){const column=hiddenQueue.pop(),visibleIndex=that._columnsController.getVisibleIndex(column.index);rootElementWidth+=that._calculateColumnWidth(column,rootElementWidth,visibleContentColumns,columnsCanFit),that._hideVisibleColumn({visibleIndex}),resultWidths[visibleIndex]="adaptiveHidden",this._hiddenColumns.push(column),visibleContentColumns=getVisibleContentColumns()}}while(needHideColumn&&visibleContentColumns.length>1&&hiddenQueue.length);contentColumnsCount===visibleContentColumns.length&&that._hideAdaptiveColumn(resultWidths,visibleColumns)}else that._hideAdaptiveColumn(resultWidths,visibleColumns)},getAdaptiveDetailItems(){return this._$itemContents},getItemContentByColumnIndex(visibleColumnIndex){let $itemContent;for(let i=0;i<this._$itemContents.length;i++){$itemContent=this._$itemContents.eq(i);const item=$itemContent.data("dx-form-item");if(item&&item.column&&this._columnsController.getVisibleIndex(item.column.index)===visibleColumnIndex)return $itemContent}},toggleExpandAdaptiveDetailRow(key,alwaysExpanded){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this.getController("data").toggleExpandAdaptiveDetailRow(key,alwaysExpanded)},createFormByHiddenColumns(container,options){const that=this,$container=(0,renderer.Z)(container),userFormOptions={items:that._getFormItemsByHiddenColumns(that._hiddenColumns),formID:"dx-"+new guid.Z},defaultFormOptions=(0,themes.x2)()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:userFormOptions}),that._$itemContents=null,that._form=that._createComponent((0,renderer.Z)("<div>").appendTo($container),esm_ui_form,(0,extend.l)(defaultFormOptions,userFormOptions,{customizeItem(item){const column=item.column||that._columnsController.columnOption(item.name||item.dataField);column&&(item.label=item.label||{},item.label.text=item.label.text||column.caption,item.column=column,item.template=that._getTemplate(item,options,that.updateForm.bind(that))),userFormOptions.customizeItem&&userFormOptions.customizeItem.call(this,item)},onContentReady(e){userFormOptions.onContentReady&&userFormOptions.onContentReady.call(this,e),that._$itemContents=$container.find(".dx-field-item-content")}}))},hasAdaptiveDetailRowExpanded(){return(0,utils_type.$K)(this._dataController.adaptiveExpandedKey())},updateForm(hiddenColumns){this.hasAdaptiveDetailRowExpanded()&&this._form&&(0,utils_type.$K)(this._form._contentReadyAction)&&(hiddenColumns&&hiddenColumns.length?this._form.option("items",this._getFormItemsByHiddenColumns(hiddenColumns)):this._form.repaint())},updateHidingQueue(columns){const that=this,hideableColumns=columns.filter((column=>column.visible&&!column.type&&!column.fixed&&!((0,utils_type.$K)(column.groupIndex)&&column.groupIndex>=0)));let columnsHasHidingPriority,i;if(that._hidingColumnsQueue=[],that.option("allowColumnResizing")&&"widget"===that.option("columnResizingMode"))return that._hidingColumnsQueue;for(i=0;i<hideableColumns.length;i++)(0,utils_type.$K)(hideableColumns[i].hidingPriority)&&hideableColumns[i].hidingPriority>=0&&(columnsHasHidingPriority=!0,that._hidingColumnsQueue[hideableColumns[i].hidingPriority]=hideableColumns[i]);if(columnsHasHidingPriority)that._hidingColumnsQueue.reverse();else if(that.option("columnHidingEnabled"))for(i=0;i<hideableColumns.length;i++){const visibleIndex=that._columnsController.getVisibleIndex(hideableColumns[i].index);that._hidingColumnsQueue[visibleIndex]=hideableColumns[i]}return that._hidingColumnsQueue=that._hidingColumnsQueue.filter(Object),that._hidingColumnsQueue},getHiddenColumns(){return this._hiddenColumns},hasHiddenColumns(){return this._hiddenColumns.length>0},getHidingColumnsQueue(){return this._hidingColumnsQueue},init(){const that=this;that._columnsController=that.getController("columns"),that._dataController=that.getController("data"),that._rowsView=that.getView("rowsView"),that._columnsController.addCommandColumn({type:"adaptive",command:"adaptive",visible:!0,adaptiveHidden:!0,cssClass:"dx-command-adaptive",alignment:"center",width:"auto",cellTemplate:adaptiveCellTemplate,fixedPosition:"right"}),that._columnsController.columnsChanged.add((()=>{const isAdaptiveVisible=!!that.updateHidingQueue(that._columnsController.getColumns()).length;that._columnsController.columnOption("command:adaptive","adaptiveHidden",!isAdaptiveVisible,!0)})),that._editingController=that.getController("editing"),that._hidingColumnsQueue=[],that._hiddenColumns=[],that.createAction("onAdaptiveDetailRowPreparing"),that.callBase()},optionChanged(args){"columnHidingEnabled"===args.name&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!args.value),this.callBase(args)},publicMethods:()=>["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"],isAdaptiveDetailRowExpanded(key){return this._dataController.adaptiveExpandedKey()&&(0,common.bY)(this._dataController.adaptiveExpandedKey(),key)},expandAdaptiveDetailRow(key){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(key)},collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()},updateCommandAdaptiveAriaLabel(key,label){const rowIndex=this._dataController.getRowIndexByKey(key);if(-1===rowIndex)return;const $row=(0,renderer.Z)(this.component.getRowElement(rowIndex));this.setCommandAdaptiveAriaLabel($row,label)},setCommandAdaptiveAriaLabel($row,labelName){$row.find(".dx-command-adaptive").attr("aria-label",message.Z.format(labelName))}},adaptivityModule={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:modules.ViewController.inherit(adaptiveColumnsControllerMembers)},extenders:{views:{rowsView:{_getCellTemplate(options){const that=this,{column}=options;return"detailAdaptive"===options.rowType&&"detail"===column.command?function(container,options){that._adaptiveColumnsController.createFormByHiddenColumns((0,renderer.Z)(container),options)}:that.callBase(options)},_createRow(row){const $row=this.callBase.apply(this,arguments);return row&&"detailAdaptive"===row.rowType&&row.key===this._dataController.adaptiveExpandedKey()&&$row.addClass("dx-adaptive-detail-row"),$row},_renderCells($row,options){this.callBase($row,options);const adaptiveColumnsController=this._adaptiveColumnsController,hidingColumnsQueueLength=adaptiveColumnsController.getHidingColumnsQueue().length,hiddenColumnsLength=adaptiveColumnsController.getHiddenColumns().length;hidingColumnsQueueLength&&!hiddenColumnsLength&&function getDataCellElements($row){return $row.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}($row).last().addClass("dx-last-data-cell"),"data"===options.row.rowType&&adaptiveColumnsController.setCommandAdaptiveAriaLabel($row,"dxDataGrid-ariaAdaptiveExpand")},_getColumnIndexByElementCore($element){const $itemContent=$element.closest(".dx-field-item-content");if($itemContent.length&&$itemContent.closest(this.component.$element()).length){const formItem=$itemContent.length?$itemContent.first().data("dx-form-item"):null;return formItem&&formItem.column&&this._columnsController.getVisibleIndex(formItem.column.index)}return this.callBase($element)},_cellPrepared($cell,options){this.callBase.apply(this,arguments),"detailAdaptive"!==options.row.rowType&&"adaptiveHidden"===options.column.visibleWidth&&$cell.addClass(this.addWidgetPrefix("hidden-column"))},getCell(cellPosition,rows){const item=this._dataController.items()[null==cellPosition?void 0:cellPosition.rowIndex];if("detailAdaptive"===(null==item?void 0:item.rowType)){const $adaptiveDetailItems=this._adaptiveColumnsController.getAdaptiveDetailItems();return this.callBase(cellPosition,rows,$adaptiveDetailItems)}return this.callBase.apply(this,arguments)},_getCellElement(rowIndex,columnIdentifier){const item=this._dataController.items()[rowIndex];return item&&"detailAdaptive"===item.rowType?this._adaptiveColumnsController.getItemContentByColumnIndex(columnIdentifier):this.callBase.apply(this,arguments)},getContextMenuItems(options){if(options.row&&"detailAdaptive"===options.row.rowType){const view=this.component.getView("columnHeadersView"),formItem=(0,renderer.Z)(options.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return options.column=formItem?formItem.column:options.column,view.getContextMenuItems&&view.getContextMenuItems(options)}return this.callBase&&this.callBase(options)},isClickableElement($target){return!!this.callBase&&this.callBase($target)||!!$target.closest(".dx-command-adaptive").length},init(){this.callBase(),this._adaptiveColumnsController=this.getController("adaptiveColumns")}}},controllers:{export:{_updateColumnWidth(column,width){this.callBase(column,"adaptiveHidden"===column.visibleWidth?column.bestFitWidth:width)}},columnsResizer:{_pointCreated(point,cellsLength,columns){const result=this.callBase(point,cellsLength,columns),currentColumn=columns[point.columnIndex]||{},nextColumnIndex=this._getNextColumnIndex(point.columnIndex),nextColumn=columns[nextColumnIndex]||{},hasHiddenColumnsOnly=nextColumnIndex!==point.columnIndex+1&&nextColumn.command,hasAdaptiveHiddenWidth="adaptiveHidden"===currentColumn.visibleWidth||hasHiddenColumnsOnly;return result||hasAdaptiveHiddenWidth},_getNextColumnIndex(currentColumnIndex){const visibleColumns=this._columnsController.getVisibleColumns();let index=this.callBase(currentColumnIndex);for(;visibleColumns[index]&&"adaptiveHidden"===visibleColumns[index].visibleWidth;)index++;return index}},draggingHeader:{_pointCreated(point,columns,location,sourceColumn){const result=this.callBase(point,columns,location,sourceColumn),hasAdaptiveHiddenWidth="adaptiveHidden"===(columns[point.columnIndex-1]||{}).visibleWidth;return result||hasAdaptiveHiddenWidth}},editing:{_isRowEditMode(){return"row"===this.getEditMode()},_getFormEditItemTemplate(cellOptions,column){return"row"!==this.getEditMode()&&"detailAdaptive"===cellOptions.rowType?(cellOptions.columnIndex=this._columnsController.getVisibleIndex(column.index),this.getColumnTemplate(cellOptions)):this.callBase(cellOptions,column)},_closeEditItem($targetElement){const $itemContents=$targetElement.closest(".dx-field-item-content"),rowIndex=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,formItem=$itemContents.length?$itemContents.first().data("dx-form-item"):null,columnIndex=formItem&&formItem.column&&this._columnsController.getVisibleIndex(formItem.column.index);this.isEditCell(rowIndex,columnIndex)||this.callBase($targetElement)},_beforeUpdateItems(rowIndices,rowIndex){if(!this._adaptiveController.isFormOrPopupEditMode()&&this._adaptiveController.hasHiddenColumns()){const items=this._dataController.items(),item=items[rowIndex],oldExpandRowIndex=module_utils.getIndexByKey(this._dataController.adaptiveExpandedKey(),items);this._isForceRowAdaptiveExpand=!this._adaptiveController.hasAdaptiveDetailRowExpanded(),oldExpandRowIndex>=0&&rowIndices.push(oldExpandRowIndex+1),rowIndices.push(rowIndex+1),this._dataController.adaptiveExpandedKey(item.key)}},_afterInsertRow(key){this.callBase.apply(this,arguments),this._adaptiveController.hasHiddenColumns()&&(this._adaptiveController.toggleExpandAdaptiveDetailRow(key,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)},_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)},_cancelEditAdaptiveDetailRow(){this._adaptiveController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()},_afterSaveEditData(){this.callBase.apply(this,arguments);const deferred=new utils_deferred.BH;return this._isRowEditMode()&&this._adaptiveController.hasHiddenColumns()?(0,utils_deferred.gx)(this.getController("validating").validate(!0)).done((isValid=>{isValid&&this._cancelEditAdaptiveDetailRow(),deferred.resolve()})):deferred.resolve(),deferred.promise()},_beforeCancelEditData(){this.callBase(),this._cancelEditAdaptiveDetailRow()},_getRowIndicesForCascadeUpdating(row){const rowIndices=this.callBase.apply(this,arguments);return this._adaptiveController.isAdaptiveDetailRowExpanded(row.key)&&rowIndices.push("detailAdaptive"===row.rowType?row.rowIndex-1:row.rowIndex+1),rowIndices},_beforeCloseEditCellInBatchMode(rowIndices){const expandedKey=this._dataController._adaptiveExpandedKey;if(expandedKey){const rowIndex=module_utils.getIndexByKey(expandedKey,this._dataController.items());rowIndex>-1&&rowIndices.unshift(rowIndex)}},editRow(rowIndex){this._adaptiveController.isFormOrPopupEditMode()&&this._adaptiveController.collapseAdaptiveDetailRow(),this.callBase(rowIndex)},deleteRow(rowIndex){const rowKey=this._dataController.getKeyByRowIndex(rowIndex);"batch"===this.getEditMode()&&this._adaptiveController.isAdaptiveDetailRowExpanded(rowKey)&&this._adaptiveController.collapseAdaptiveDetailRow(),this.callBase(rowIndex)},init(){this.callBase(),this._adaptiveController=this.getController("adaptiveColumns")}},resizing:{_needBestFit(){return this.callBase()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length},_correctColumnWidths(resultWidths,visibleColumns){const adaptiveController=this._adaptiveColumnsController,oldHiddenColumns=adaptiveController.getHiddenColumns(),hidingColumnsQueue=adaptiveController.updateHidingQueue(this._columnsController.getColumns());adaptiveController.hideRedundantColumns(resultWidths,visibleColumns,hidingColumnsQueue);const hiddenColumns=adaptiveController.getHiddenColumns();return adaptiveController.hasAdaptiveDetailRowExpanded()&&oldHiddenColumns.length!==hiddenColumns.length&&adaptiveController.updateForm(hiddenColumns),!hiddenColumns.length&&adaptiveController.collapseAdaptiveDetailRow(),this.callBase.apply(this,arguments)},_toggleBestFitMode(isBestFit){isBestFit&&this._adaptiveColumnsController._showHiddenColumns(),this.callBase(isBestFit)},_needStretch(){const adaptiveColumnsController=this._adaptiveColumnsController;return this.callBase.apply(this,arguments)||adaptiveColumnsController.getHidingColumnsQueue().length||adaptiveColumnsController.hasHiddenColumns()},init(){this._adaptiveColumnsController=this.getController("adaptiveColumns"),this.callBase()},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}},data:{_processItems(items,change){const{changeType}=change;if(items=this.callBase.apply(this,arguments),"loadingAll"===changeType||!(0,utils_type.$K)(this._adaptiveExpandedKey))return items;const expandRowIndex=module_utils.getIndexByKey(this._adaptiveExpandedKey,items),newMode=!1===this.option("scrolling.legacyMode");if(expandRowIndex>=0){const item=items[expandRowIndex];items.splice(expandRowIndex+1,0,{visible:!0,rowType:"detailAdaptive",key:item.key,data:item.data,node:item.node,modifiedValues:item.modifiedValues,isNewRow:item.isNewRow,values:item.values})}else"refresh"!==changeType||newMode&&change.repaintChangesOnly||(this._adaptiveExpandedKey=void 0);return items},_getRowIndicesForExpand(key){const rowIndices=this.callBase.apply(this,arguments);if(this.getController("adaptiveColumns").isAdaptiveDetailRowExpanded(key)){const lastRowIndex=rowIndices[rowIndices.length-1];rowIndices.push(lastRowIndex+1)}return rowIndices},adaptiveExpandedKey(value){if(!(0,utils_type.$K)(value))return this._adaptiveExpandedKey;this._adaptiveExpandedKey=value},toggleExpandAdaptiveDetailRow(key,alwaysExpanded){let oldExpandLoadedRowIndex=module_utils.getIndexByKey(this._adaptiveExpandedKey,this._items),newExpandLoadedRowIndex=module_utils.getIndexByKey(key,this._items);oldExpandLoadedRowIndex>=0&&oldExpandLoadedRowIndex===newExpandLoadedRowIndex&&!alwaysExpanded&&(key=void 0,newExpandLoadedRowIndex=-1);const oldKey=this._adaptiveExpandedKey;this._adaptiveExpandedKey=key,oldExpandLoadedRowIndex>=0&&oldExpandLoadedRowIndex++,newExpandLoadedRowIndex>=0&&newExpandLoadedRowIndex++;const rowIndexDelta=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[oldExpandLoadedRowIndex-rowIndexDelta,newExpandLoadedRowIndex-rowIndexDelta]});const adaptiveColumnsController=this.getController("adaptiveColumns");adaptiveColumnsController.updateCommandAdaptiveAriaLabel(key,"dxDataGrid-ariaAdaptiveCollapse"),adaptiveColumnsController.updateCommandAdaptiveAriaLabel(oldKey,"dxDataGrid-ariaAdaptiveExpand")},init(){this.callBase(),this._adaptiveExpandedKey=void 0}},editorFactory:{_needHideBorder($element){return this.callBase($element)||(null==$element?void 0:$element.hasClass("dx-field-item-content"))&&(null==$element?void 0:$element.find(".dx-checkbox").length)},_getFocusCellSelector(){return this.callBase()+", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content"},_getRevertTooltipsSelector(){return`${this.callBase()}, .dx-field-item-content .${this.addWidgetPrefix("revert-tooltip")}`}},columns:{_isColumnVisible(column){return this.callBase(column)&&!column.adaptiveHidden}},keyboardNavigation:{_isCellValid($cell){return this.callBase.apply(this,arguments)&&!$cell.hasClass(this.addWidgetPrefix("hidden-column"))&&!$cell.hasClass("dx-command-adaptive-hidden")},_processNextCellInMasterDetail($nextCell,$cell){this.callBase($nextCell);const isCellOrBatchMode=this._editingController.isCellOrBatchEditMode();this._editingController.isEditing()&&$nextCell&&isCellOrBatchMode&&!this._isInsideEditForm($nextCell)&&(events_engine.Z.off($nextCell,"focus",focusCellHandler),events_engine.Z.on($nextCell,"focus",{$nextCell},focusCellHandler),events_engine.Z.trigger($cell,"focus"))},_isCellElement($cell){return this.callBase.apply(this,arguments)||$cell.hasClass("dx-adaptive-item-text")},init(){this.callBase(),this._adaptiveController=this.getController("adaptiveColumns")}}}}};module_core.registerModule("adaptivity",adaptivityModule);var selection_selection=__webpack_require__("./node_modules/devextreme/esm/ui/selection/selection.js");const SHOW_CHECKBOXES_MODE="selection.showCheckBoxesMode",processLongTap=function(that,dxEvent){const selectionController=that.getController("selection"),rowsView=that.getView("rowsView"),$row=(0,renderer.Z)(dxEvent.target).closest(".dx-data-row"),rowIndex=rowsView.getRowIndex($row);rowIndex<0||("onLongTap"===that.option(SHOW_CHECKBOXES_MODE)?selectionController.isSelectionWithCheckboxes()?selectionController.stopSelectionWithCheckboxes():selectionController.startSelectionWithCheckboxes():("onClick"===that.option(SHOW_CHECKBOXES_MODE)&&selectionController.startSelectionWithCheckboxes(),"always"!==that.option(SHOW_CHECKBOXES_MODE)&&selectionController.changeItemSelection(rowIndex,{control:!0})))},SelectionController=modules.Controller.inherit(function(){const selectionCellTemplate=(container,options)=>{const{component}=options,rowsView=component.getView("rowsView");component.option("renderAsync")&&!component.option("selection.deferred")&&(options.value=component.isRowSelected(options.row.key)),rowsView.renderSelectCheckBoxContainer((0,renderer.Z)(container),options)},selectionHeaderTemplate=(container,options)=>{const{column}=options,$cellElement=(0,renderer.Z)(container),columnHeadersView=options.component.getView("columnHeadersView");$cellElement.addClass("dx-editor-cell"),columnHeadersView._renderSelectAllCheckBox($cellElement,column),columnHeadersView._attachSelectAllCheckBoxClickEvent($cellElement)};return{init(){const{deferred,selectAllMode,mode}=this.option("selection")||{};"infinite"!==this.option("scrolling.mode")||deferred||"multiple"!==mode||"allPages"!==selectAllMode||ui_errors.Z.log("W1018"),this._dataController=this.getController("data"),this._selectionMode=mode,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataController&&this._dataController.pushed.add(this._handleDataPushed.bind(this))},_handleDataPushed(changes){let removedKeys=changes.filter((change=>"remove"===change.type)).map((change=>change.key));if(this.option("selection.deferred")){const selectedKeys=this._dataController.items().filter((item=>item.isSelected)).map((item=>item.key));removedKeys=removedKeys.filter((key=>selectedKeys.find((selectedKey=>(0,common.bY)(selectedKey,key)))))}removedKeys.length&&this.deselectRows(removedKeys)},_getSelectionConfig(){const dataController=this._dataController,columnsController=this.getController("columns"),selectionOptions=this.option("selection")||{},{deferred}=selectionOptions,scrollingMode=this.option("scrolling.mode"),virtualPaging="virtual"===scrollingMode||"infinite"===scrollingMode,allowSelectAll=this.option("selection.allowSelectAll"),legacyScrollingMode=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred,maxFilterLengthInRequest:selectionOptions.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,allowLoadByRange(){const hasGroupColumns=columnsController.getGroupColumns().length>0;return virtualPaging&&!legacyScrollingMode&&!hasGroupColumns&&allowSelectAll&&!deferred},key:()=>null==dataController?void 0:dataController.key(),keyOf:item=>null==dataController?void 0:dataController.keyOf(item),dataFields(){var _a;return null===(_a=dataController.dataSource())||void 0===_a?void 0:_a.select()},load(options){var _a;return(null===(_a=dataController.dataSource())||void 0===_a?void 0:_a.load(options))||(new utils_deferred.BH).resolve([])},plainItems:()=>dataController.items(!0),isItemSelected:item=>item.selected,isSelectableItem:item=>"data"===(null==item?void 0:item.rowType)&&!item.isNewRow,getItemData:item=>(0,utils_type.$K)(null==item?void 0:item.rowType)?(null==item?void 0:item.oldData)||(null==item?void 0:item.data):item,filter:()=>dataController.getCombinedFilter(deferred),totalCount:()=>dataController.totalCount(),getLoadOptions(loadItemIndex,focusedItemIndex,shiftItemIndex){var _a,_b;const{sort,filter}=null!==(_b=null===(_a=dataController.dataSource())||void 0===_a?void 0:_a.lastLoadOptions())&&void 0!==_b?_b:{};let minIndex=Math.min(loadItemIndex,focusedItemIndex),maxIndex=Math.max(loadItemIndex,focusedItemIndex);(0,utils_type.$K)(shiftItemIndex)&&(minIndex=Math.min(shiftItemIndex,minIndex),maxIndex=Math.max(shiftItemIndex,maxIndex));return{skip:minIndex,take:maxIndex-minIndex+1,filter,sort}},onSelectionChanged:this._updateSelectedItems.bind(this)}},_updateSelectColumn(){const columnsController=this.getController("columns"),isSelectColumnVisible=this.isSelectColumnVisible();columnsController.addCommandColumn({type:"selection",command:"select",visible:isSelectColumnVisible,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:"dx-command-select",width:"auto",cellTemplate:selectionCellTemplate,headerCellTemplate:selectionHeaderTemplate}),columnsController.columnOption("command:select","visible",isSelectColumnVisible)},_createSelection(){const options=this._getSelectionConfig();return new selection_selection.Z(options)},_fireSelectionChanged(options){const argument=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(argument),options&&this.executeAction("onSelectionChanged",options)},_updateCheckboxesState(options){const{isDeferredMode}=options,{selectionFilter}=options,{selectedItemKeys}=options,{removedItemKeys}=options;"onClick"===this.option(SHOW_CHECKBOXES_MODE)&&((isDeferredMode?selectionFilter&&function(that,selectionFilter){let keyIndex=0;const store=that._dataController.store(),key=store&&store.key(),isComplexKey=Array.isArray(key);if(!selectionFilter.length)return!1;if(isComplexKey&&Array.isArray(selectionFilter[0])&&"and"===selectionFilter[1]){for(let i=0;i<selectionFilter.length;i++)if(Array.isArray(selectionFilter[i])){if(selectionFilter[i][0]!==key[keyIndex]||"="!==selectionFilter[i][1])return!0;keyIndex++}return!1}return key!==selectionFilter[0]}(this,selectionFilter):selectedItemKeys.length>1)?this.startSelectionWithCheckboxes():(isDeferredMode?selectionFilter&&!selectionFilter.length:0===selectedItemKeys.length&&removedItemKeys.length)&&this.stopSelectionWithCheckboxes())},_updateSelectedItems(args){const that=this;let selectionChangedOptions;const isDeferredMode=that.option("selection.deferred"),selectionFilter=that._selection.selectionFilter(),dataController=that._dataController,items=dataController.items(!0),visibleItems=dataController.items();if(!items)return;const isSelectionWithCheckboxes=that.isSelectionWithCheckboxes(),changedItemIndexes=that.getChangedItemIndexes(items),visibleChangedItemIndexes=that.getChangedItemIndexes(visibleItems);that._updateCheckboxesState({selectedItemKeys:args.selectedItemKeys,removedItemKeys:args.removedItemKeys,selectionFilter,isDeferredMode}),(changedItemIndexes.length||isSelectionWithCheckboxes!==that.isSelectionWithCheckboxes())&&dataController.updateItems({changeType:"updateSelection",itemIndexes:visibleChangedItemIndexes}),isDeferredMode?(that.option("selectionFilter",selectionFilter),selectionChangedOptions={}):(args.addedItemKeys.length||args.removedItemKeys.length)&&(that._selectedItemsInternalChange=!0,that.option("selectedRowKeys",args.selectedItemKeys.slice(0)),that._selectedItemsInternalChange=!1,selectionChangedOptions={selectedRowsData:args.selectedItems.slice(0),selectedRowKeys:args.selectedItemKeys.slice(0),currentSelectedRowKeys:args.addedItemKeys.slice(0),currentDeselectedRowKeys:args.removedItemKeys.slice(0)}),that._fireSelectionChanged(selectionChangedOptions)},getChangedItemIndexes(items){const that=this,itemIndexes=[],isDeferredSelection=this.option("selection.deferred");for(let i=0,{length}=items;i<length;i++){const row=items[i],isItemSelected=that.isRowSelected(isDeferredSelection?row.data:row.key);that._selection.isDataItem(row)&&row.isSelected!==isItemSelected&&itemIndexes.push(i)}return itemIndexes},callbackNames:()=>["selectionChanged"],optionChanged(args){switch(this.callBase(args),args.name){case"selection":{const oldSelectionMode=this._selectionMode;if(this.init(),"selection.showCheckBoxesMode"!==args.fullName){const selectionMode=this._selectionMode;let selectedRowKeys=this.option("selectedRowKeys");oldSelectionMode!==selectionMode&&("single"===selectionMode?selectedRowKeys.length>1&&(selectedRowKeys=[selectedRowKeys[0]]):"multiple"!==selectionMode&&(selectedRowKeys=[])),this.selectRows(selectedRowKeys).always((()=>{this._fireSelectionChanged()}))}this.getController("columns").updateColumns(),args.handled=!0;break}case"selectionFilter":this._selection.selectionFilter(args.value),args.handled=!0;break;case"selectedRowKeys":{const value=args.value||[];!Array.isArray(value)||this._selectedItemsInternalChange||!this.component.getDataSource()&&value.length||this.selectRows(value),args.handled=!0;break}}},publicMethods:()=>["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"],isRowSelected(arg){return this._selection.isItemSelected(arg)},isSelectColumnVisible(){return"multiple"===this.option("selection.mode")&&("always"===this.option(SHOW_CHECKBOXES_MODE)||"onClick"===this.option(SHOW_CHECKBOXES_MODE)||this._isSelectionWithCheckboxes)},_isOnePageSelectAll(){return"page"===this.option("selection.selectAllMode")},isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())},selectAll(){return"onClick"===this.option(SHOW_CHECKBOXES_MODE)&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())},deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())},clearSelection(){return this.selectedItemKeys([])},refresh(){const selectedRowKeys=this.option("selectedRowKeys")||[];return!this.option("selection.deferred")&&selectedRowKeys.length?this.selectedItemKeys(selectedRowKeys):(new utils_deferred.BH).resolve().promise()},selectedItemKeys(value,preserve,isDeselect,isSelectAll){return this._selection.selectedItemKeys(value,preserve,isDeselect,isSelectAll)},getSelectedRowKeys(){return this._selection.getSelectedItemKeys()},selectRows(keys,preserve){return this.selectedItemKeys(keys,preserve)},deselectRows(keys){return this.selectedItemKeys(keys,!0,!0)},selectRowsByIndexes(indexes){const items=this._dataController.items(),keys=[];return Array.isArray(indexes)||(indexes=Array.prototype.slice.call(arguments,0)),(0,iterator.S6)(indexes,(function(){const item=items[this];item&&"data"===item.rowType&&keys.push(item.key)})),this.selectRows(keys)},getSelectedRowsData(){return this._selection.getSelectedItems()},changeItemSelection(visibleItemIndex,keys,setFocusOnly){keys=keys||{},this.isSelectionWithCheckboxes()&&(keys.control=!0);const loadedItemIndex=visibleItemIndex+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(loadedItemIndex,keys,setFocusOnly)},focusedItemIndex(itemIndex){const that=this;if(!(0,utils_type.$K)(itemIndex))return that._selection._focusedItemIndex;that._selection._focusedItemIndex=itemIndex},isSelectionWithCheckboxes(){return"multiple"===this.option("selection.mode")&&("always"===this.option(SHOW_CHECKBOXES_MODE)||this._isSelectionWithCheckboxes)},startSelectionWithCheckboxes(){const that=this;return"multiple"===that.option("selection.mode")&&!that.isSelectionWithCheckboxes()&&(that._isSelectionWithCheckboxes=!0,that._updateSelectColumn(),!0)},stopSelectionWithCheckboxes(){const that=this;return!!that._isSelectionWithCheckboxes&&(that._isSelectionWithCheckboxes=!1,that._updateSelectColumn(),!0)}}}()),selectionModule={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",maxFilterLengthInRequest:1500,deferred:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:SelectionController},extenders:{controllers:{data:{init(){const selectionController=this.getController("selection"),isDeferredMode=this.option("selection.deferred");this.callBase.apply(this,arguments),isDeferredMode&&selectionController._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})},_loadDataSource(){const that=this;return that.callBase().always((()=>{that.getController("selection").refresh()}))},_processDataItem(item,options){const selectionController=this.getController("selection"),hasSelectColumn=selectionController.isSelectColumnVisible(),isDeferredSelection=options.isDeferredSelection=void 0===options.isDeferredSelection?this.option("selection.deferred"):options.isDeferredSelection,dataItem=this.callBase.apply(this,arguments);if(dataItem.isSelected=selectionController.isRowSelected(isDeferredSelection?dataItem.data:dataItem.key),hasSelectColumn&&dataItem.values)for(let i=0;i<options.visibleColumns.length;i++)if("select"===options.visibleColumns[i].command){dataItem.values[i]=dataItem.isSelected;break}return dataItem},refresh(options){const that=this,d=new utils_deferred.BH;return this.callBase.apply(this,arguments).done((()=>{!options||options.selection?that.getController("selection").refresh().done(d.resolve).fail(d.reject):d.resolve()})).fail(d.reject),d.promise()},_handleDataChanged(e){this.callBase.apply(this,arguments),e&&"refresh"!==e.changeType||this._repaintChangesOnly||this.getController("selection").focusedItemIndex(-1)},_applyChange(change){if(!change||"updateSelection"!==change.changeType)return this.callBase.apply(this,arguments);change.items.forEach(((item,index)=>{const currentItem=this._items[index];currentItem&&(currentItem.isSelected=item.isSelected,currentItem.values=item.values)}))},_endUpdateCore(){const changes=this._changes;if(changes.length>1&&changes.every((change=>"updateSelection"===change.changeType))){const itemIndexes=changes.map((change=>change.itemIndexes||[])).reduce(((a,b)=>a.concat(b)));this._changes=[{changeType:"updateSelection",itemIndexes}]}this.callBase.apply(this,arguments)}},contextMenu:{_contextMenuPrepared(options){const dxEvent=options.event;dxEvent.originalEvent&&"dxhold"!==dxEvent.originalEvent.type||options.items&&options.items.length>0||processLongTap(this,dxEvent)}}},views:{columnHeadersView:{init(){this.callBase(),this.getController("selection").selectionChanged.add(this._updateSelectAllValue.bind(this))},_updateSelectAllValue(){const that=this,$element=that.element(),$editor=$element&&$element.find(".dx-select-checkbox");if($element&&$editor.length&&"multiple"===that.option("selection.mode")){const selectAllValue=that.getController("selection").isSelectAll(),hasSelection=!1!==selectAllValue,isVisible=that.option("selection.allowSelectAll")?!that.getController("data").isEmpty():hasSelection;$editor.dxCheckBox("instance").option({visible:isVisible,value:selectAllValue})}},_handleDataChanged(e){this.callBase(e),(!e||"refresh"===e.changeType||e.repaintChangesOnly&&"update"===e.changeType)&&this.waitAsyncTemplates().done((()=>{this._updateSelectAllValue()}))},_renderSelectAllCheckBox($container,column){const that=this,selectionController=that.getController("selection"),isEmptyData=that.getController("data").isEmpty(),groupElement=(0,renderer.Z)("<div>").appendTo($container).addClass("dx-select-checkbox");return that.setAria("label",message.Z.format("dxDataGrid-ariaSelectAll"),groupElement),that.getController("editorFactory").createEditor(groupElement,(0,extend.l)({},column,{parentType:"headerRow",dataType:"boolean",value:selectionController.isSelectAll(),editorOptions:{visible:!isEmptyData&&(that.option("selection.allowSelectAll")||!1!==selectionController.isSelectAll())},tabIndex:that.option("useLegacyKeyboardNavigation")?-1:that.option("tabIndex")||0,setValue(value,e){const allowSelectAll=that.option("selection.allowSelectAll");e.component.option("visible",allowSelectAll||!1!==e.component.option("value")),e.event&&selectionController.isSelectAll()!==value&&(e.value&&!allowSelectAll?e.component.option("value",!1):e.value?selectionController.selectAll():selectionController.deselectAll(),e.event.preventDefault())}})),groupElement},_attachSelectAllCheckBoxClickEvent($element){events_engine.Z.on($element,click.u,this.createAction((e=>{const{event}=e;(0,renderer.Z)(event.target).closest(".dx-select-checkbox").length||events_engine.Z.trigger((0,renderer.Z)(event.currentTarget).children(".dx-select-checkbox"),click.u),event.preventDefault()})))}},rowsView:{renderSelectCheckBoxContainer($container,options){"data"!==options.rowType||options.row.isNewRow?module_utils.setEmptyText($container):($container.addClass("dx-editor-cell"),this._attachCheckBoxClickEvent($container),this._renderSelectCheckBox($container,options))},_renderSelectCheckBox(container,options){const groupElement=(0,renderer.Z)("<div>").addClass("dx-select-checkbox").appendTo(container);return this.setAria("label",message.Z.format("dxDataGrid-ariaSelectRow"),groupElement),this.getController("editorFactory").createEditor(groupElement,(0,extend.l)({},options.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:options.value,setValue(value,e){var _a;"keydown"===(null===(_a=null==e?void 0:e.event)||void 0===_a?void 0:_a.type)&&events_engine.Z.trigger(e.element,click.u,e)},row:options.row})),groupElement},_attachCheckBoxClickEvent($element){events_engine.Z.on($element,click.u,this.createAction((function(e){const selectionController=this.getController("selection"),{event}=e,rowIndex=this.getRowIndex((0,renderer.Z)(event.currentTarget).closest(".dx-row"));rowIndex>=0&&(selectionController.startSelectionWithCheckboxes(),selectionController.changeItemSelection(rowIndex,{shift:event.shiftKey}),(0,renderer.Z)(event.target).closest(".dx-select-checkbox").length&&this.getController("data").updateItems({changeType:"updateSelection",itemIndexes:[rowIndex]}))})))},_update(change){const that=this,tableElements=that.getTableElements();"updateSelection"===change.changeType?tableElements.length>0&&((0,iterator.S6)(tableElements,((_,tableElement)=>{(0,iterator.S6)(change.itemIndexes||[],((_,index)=>{let $row;if(change.items[index]&&($row=that._getRowElements((0,renderer.Z)(tableElement)).eq(index),$row.length)){const{isSelected}=change.items[index];$row.toggleClass("dx-selection",void 0!==isSelected&&isSelected).find(".dx-select-checkbox").dxCheckBox("option","value",isSelected),that.setAria("selected",isSelected,$row)}}))})),that._updateCheckboxesClass()):that.callBase(change)},_createTable(){const that=this,selectionMode=that.option("selection.mode"),$table=that.callBase.apply(that,arguments);return"none"!==selectionMode&&("onLongTap"!==that.option(SHOW_CHECKBOXES_MODE)&&support.touch||events_engine.Z.on($table,(0,events_utils.V4)(hold.Z.name,"dxDataGridRowsView"),".dx-data-row",that.createAction((e=>{processLongTap(that.component,e.event),e.event.stopPropagation()}))),events_engine.Z.on($table,"mousedown selectstart",that.createAction((e=>{const{event}=e;event.shiftKey&&event.preventDefault()})))),$table},_createRow(row){const $row=this.callBase.apply(this,arguments);if(row){const{isSelected}=row;isSelected&&$row.addClass("dx-selection");"none"!==this.option("selection.mode")&&this.setAria("selected",isSelected,$row)}return $row},_rowClick(e){const that=this,dxEvent=e.event,isSelectionDisabled=(0,renderer.Z)(dxEvent.target).closest(".dx-selection-disabled").length;that.isClickableElement((0,renderer.Z)(dxEvent.target))||(isSelectionDisabled||"multiple"===that.option("selection.mode")&&"always"===that.option(SHOW_CHECKBOXES_MODE)||that.getController("selection").changeItemSelection(e.rowIndex,{control:(0,events_utils.j1)(dxEvent),shift:dxEvent.shiftKey})&&(dxEvent.preventDefault(),e.handled=!0),that.callBase(e))},isClickableElement:$target=>!!$target.closest(".dx-command-select").length,_renderCore(change){const deferred=this.callBase(change);return this._updateCheckboxesClass(),deferred},_updateCheckboxesClass(){const tableElements=this.getTableElements(),selectionController=this.getController("selection"),isCheckBoxesHidden=selectionController.isSelectColumnVisible()&&!selectionController.isSelectionWithCheckboxes();(0,iterator.S6)(tableElements,((_,tableElement)=>{(0,renderer.Z)(tableElement).toggleClass("dx-select-checkboxes-hidden",isCheckBoxesHidden)}))}}}}},module_originalRowClick=selectionModule.extenders.views.rowsView._rowClick,originalHandleDataChanged=selectionModule.extenders.controllers.data._handleDataChanged,nodeExists=function(array,currentKey){return!!array.filter((key=>key===currentKey)).length};module_core.registerModule("selection",(0,extend.l)(!0,{},selectionModule,{defaultOptions:()=>(0,extend.l)(!0,selectionModule.defaultOptions(),{selection:{showCheckBoxesMode:"always",recursive:!1}}),extenders:{controllers:{data:{_handleDataChanged(e){const selectionController=this.getController("selection");!selectionController.isRecursiveSelection()||e&&"updateSelectionState"===e.changeType||selectionController.updateSelectionState({selectedItemKeys:this.option("selectedRowKeys")}),originalHandleDataChanged.apply(this,arguments)},loadDescendants(){const that=this,d=that.callBase.apply(that,arguments),selectionController=that.getController("selection");return selectionController.isRecursiveSelection()&&d.done((()=>{selectionController.updateSelectionState({selectedItemKeys:that.option("selectedRowKeys")})})),d}},selection:{init(){this.callBase.apply(this,arguments),this._selectionStateByKey={}},_getSelectionConfig(){const config=this.callBase.apply(this,arguments),{plainItems}=config;return config.plainItems=cached=>{let result;return cached&&(result=this._dataController.getCachedStoreData()),result||(result=plainItems.apply(this,arguments).map((item=>item.data))),result||[]},config.isItemSelected=item=>{const key=this._dataController.keyOf(item);return this.isRowSelected(key)},config.isSelectableItem=item=>!!item,config.getItemData=item=>item,config.allowLoadByRange=()=>!1,config},renderSelectCheckBoxContainer($container,model){const rowsView=this.component.getView("rowsView");$container.addClass("dx-cell-focus-disabled");const $checkbox=rowsView._renderSelectCheckBox($container,{value:model.row.isSelected,row:model.row,column:model.column});rowsView._attachCheckBoxClickEvent($checkbox)},_updateSelectColumn:common.ZT,_getSelectAllNodeKeys(){const{component}=this,root=component.getRootNode(),cache={},keys=[],isRecursiveSelection=this.isRecursiveSelection();return root&&module_core.foreachNodes(root.children,(node=>(void 0!==node.key&&(node.visible||isRecursiveSelection)&&keys.push(node.key),!node.visible||!isRecursiveSelection&&component.isRowExpanded(node.key,cache)))),keys},isSelectAll(){if(0===(this.option("selectedRowKeys")||[]).length)return!1;const{component}=this,visibleKeys=this._getSelectAllNodeKeys(),isRecursiveSelection=this.isRecursiveSelection();let hasIndeterminateState=!1;const selectedVisibleKeys=visibleKeys.filter((key=>{const isRowSelected=component.isRowSelected(key,isRecursiveSelection);return void 0===isRowSelected&&(hasIndeterminateState=!0),isRowSelected}));return selectedVisibleKeys.length?selectedVisibleKeys.length===visibleKeys.length||void 0:!!hasIndeterminateState&&void 0},selectAll(){const visibleKeys=this._getSelectAllNodeKeys().filter((key=>!this.isRowSelected(key)));return this.focusedItemIndex(-1),this.selectRows(visibleKeys,!0)},deselectAll(){const visibleKeys=this._getSelectAllNodeKeys();return this.focusedItemIndex(-1),this.deselectRows(visibleKeys)},selectedItemKeys(value,preserve,isDeselect,isSelectAll){const that=this,selectedRowKeys=that.option("selectedRowKeys"),normalizedArgs=this.isRecursiveSelection()&&that._normalizeSelectionArgs({keys:(0,utils_type.$K)(value)?value:[]},preserve,!isDeselect);return normalizedArgs&&!(0,common.bY)(normalizedArgs.selectedRowKeys,selectedRowKeys)?(that._isSelectionNormalizing=!0,this.callBase(normalizedArgs.selectedRowKeys,!1,!1,!1).always((()=>{that._isSelectionNormalizing=!1})).done((items=>{normalizedArgs.selectedRowsData=items,that._fireSelectionChanged(normalizedArgs)}))):this.callBase(value,preserve,isDeselect,isSelectAll)},changeItemSelection(itemIndex,keyboardKeys){if(this.isRecursiveSelection()&&!keyboardKeys.shift){const key=this._dataController.getKeyByRowIndex(itemIndex);return this.selectedItemKeys(key,!0,this.isRowSelected(key)).done((()=>{this.isRowSelected(key)&&this.callBase(itemIndex,keyboardKeys,!0)}))}return this.callBase.apply(this,arguments)},_updateParentSelectionState(node,isSelected){const that=this;let state=isSelected;const parentNode=node.parent;if(parentNode){if(parentNode.children.length>1)if(!1===isSelected){state=!!parentNode.children.some((childNode=>that._selectionStateByKey[childNode.key]))&&void 0}else if(!0===isSelected){state=!parentNode.children.some((childNode=>!that._selectionStateByKey[childNode.key]))||void 0}this._selectionStateByKey[parentNode.key]=state,parentNode.parent&&parentNode.parent.level>=0&&this._updateParentSelectionState(parentNode,state)}},_updateChildrenSelectionState(node,isSelected){const that=this,{children}=node;children&&children.forEach((childNode=>{that._selectionStateByKey[childNode.key]=isSelected,childNode.children.length>0&&that._updateChildrenSelectionState(childNode,isSelected)}))},_updateSelectionStateCore(keys,isSelected){const dataController=this._dataController;for(let i=0;i<keys.length;i++){this._selectionStateByKey[keys[i]]=isSelected;const node=dataController.getNodeByKey(keys[i]);node&&(this._updateParentSelectionState(node,isSelected),this._updateChildrenSelectionState(node,isSelected))}},_getSelectedParentKeys(key,selectedItemKeys,useCash){let selectedParentNode;const node=this._dataController.getNodeByKey(key);let parentNode=node&&node.parent,result=[];for(;parentNode&&parentNode.level>=0;){result.unshift(parentNode.key);if(useCash?!nodeExists(selectedItemKeys,parentNode.key)&&this.isRowSelected(parentNode.key):selectedItemKeys.indexOf(parentNode.key)>=0){selectedParentNode=parentNode,result=this._getSelectedParentKeys(selectedParentNode.key,selectedItemKeys,useCash).concat(result);break}if(useCash)break;parentNode=parentNode.parent}return selectedParentNode&&result||[]},_getSelectedChildKeys(key,keysToIgnore){const childKeys=[],node=this._dataController.getNodeByKey(key);return node&&module_core.foreachNodes(node.children,(childNode=>{const ignoreKeyIndex=keysToIgnore.indexOf(childNode.key);return ignoreKeyIndex<0&&childKeys.push(childNode.key),ignoreKeyIndex>0||ignoreKeyIndex<0&&void 0===this._selectionStateByKey[childNode.key]})),childKeys},_normalizeParentKeys(key,args){const that=this;let keysToIgnore=[key];const parentNodeKeys=that._getSelectedParentKeys(key,args.selectedRowKeys);if(parentNodeKeys.length){keysToIgnore=keysToIgnore.concat(parentNodeKeys),keysToIgnore.forEach((key=>{const index=args.selectedRowKeys.indexOf(key);index>=0&&args.selectedRowKeys.splice(index,1)}));const childKeys=that._getSelectedChildKeys(parentNodeKeys[0],keysToIgnore);args.selectedRowKeys=args.selectedRowKeys.concat(childKeys)}},_normalizeChildrenKeys(key,args){const node=this._dataController.getNodeByKey(key);node&&node.children.forEach((childNode=>{const index=args.selectedRowKeys.indexOf(childNode.key);index>=0&&args.selectedRowKeys.splice(index,1),this._normalizeChildrenKeys(childNode.key,args)}))},_normalizeSelectedRowKeysCore(keys,args,preserve,isSelect){const that=this;keys.forEach((key=>{if(preserve&&that.isRowSelected(key)===isSelect)return;that._normalizeChildrenKeys(key,args);const index=args.selectedRowKeys.indexOf(key);isSelect?(index<0&&args.selectedRowKeys.push(key),args.currentSelectedRowKeys.push(key)):(index>=0&&args.selectedRowKeys.splice(index,1),args.currentDeselectedRowKeys.push(key),that._normalizeParentKeys(key,args))}))},_normalizeSelectionArgs(args,preserve,isSelect){let result;const keys=Array.isArray(args.keys)?args.keys:[args.keys],selectedRowKeys=this.option("selectedRowKeys")||[];return keys.length&&(result={currentSelectedRowKeys:[],currentDeselectedRowKeys:[],selectedRowKeys:preserve?selectedRowKeys.slice(0):[]},this._normalizeSelectedRowKeysCore(keys,result,preserve,isSelect)),result},_updateSelectedItems(args){this.updateSelectionState(args),this.callBase(args)},_fireSelectionChanged(){this._isSelectionNormalizing||this.callBase.apply(this,arguments)},_isModeLeavesOnly:mode=>"leavesOnly"===mode,_removeDuplicatedKeys(keys){const result=[],processedKeys={};return keys.forEach((key=>{processedKeys[key]||(processedKeys[key]=!0,result.push(key))})),result},_getAllChildKeys(key){const childKeys=[],node=this._dataController.getNodeByKey(key);return node&&module_core.foreachNodes(node.children,(childNode=>{childKeys.push(childNode.key)}),!0),childKeys},_getAllSelectedRowKeys(keys){let result=[];return keys.forEach((key=>{const parentKeys=this._getSelectedParentKeys(key,[],!0),childKeys=this._getAllChildKeys(key);result.push.apply(result,parentKeys.concat([key],childKeys))})),result=this._removeDuplicatedKeys(result),result},_getParentSelectedRowKeys(keys){const that=this,result=[];return keys.forEach((key=>{!that._getSelectedParentKeys(key,keys).length&&result.push(key)})),result},_getLeafSelectedRowKeys(keys){const result=[],dataController=this._dataController;return keys.forEach((key=>{const node=dataController.getNodeByKey(key);node&&!node.hasChildren&&result.push(key)})),result},isRecursiveSelection(){const selectionMode=this.option("selection.mode"),isRecursive=this.option("selection.recursive");return"multiple"===selectionMode&&isRecursive},updateSelectionState(options){const removedItemKeys=options.removedItemKeys||[],selectedItemKeys=options.selectedItemKeys||[];this.isRecursiveSelection()&&(this._updateSelectionStateCore(removedItemKeys,!1),this._updateSelectionStateCore(selectedItemKeys,!0))},isRowSelected(key,isRecursiveSelection){const result=this.callBase.apply(this,arguments);return isRecursiveSelection=null!=isRecursiveSelection?isRecursiveSelection:this.isRecursiveSelection(),!result&&isRecursiveSelection?key in this._selectionStateByKey&&this._selectionStateByKey[key]:result},getSelectedRowKeys(mode){const that=this;if(!that._dataController)return[];let selectedRowKeys=that.callBase.apply(that,arguments);return mode&&(this.isRecursiveSelection()&&(selectedRowKeys=this._getAllSelectedRowKeys(selectedRowKeys)),"all"!==mode&&("excludeRecursive"===mode?selectedRowKeys=that._getParentSelectedRowKeys(selectedRowKeys):that._isModeLeavesOnly(mode)&&(selectedRowKeys=that._getLeafSelectedRowKeys(selectedRowKeys)))),selectedRowKeys},getSelectedRowsData(mode){const dataController=this._dataController,selectedKeys=this.getSelectedRowKeys(mode)||[],selectedRowsData=[];return selectedKeys.forEach((key=>{const node=dataController.getNodeByKey(key);node&&selectedRowsData.push(node.data)})),selectedRowsData},refresh(){return this._selectionStateByKey={},this.callBase.apply(this,arguments)}}},views:{columnHeadersView:{_processTemplate(template,options){const that=this;let resultTemplate;const renderingTemplate=this.callBase(template,options),firstDataColumnIndex=that._columnsController.getFirstDataColumnIndex();return resultTemplate=renderingTemplate&&"header"===options.rowType&&options.column.index===firstDataColumnIndex?{render(options){"multiple"===that.option("selection.mode")&&that.renderSelectAll(options.container,options.model),renderingTemplate.render(options)}}:renderingTemplate,resultTemplate},renderSelectAll($cell,options){$cell.addClass("dx-treelist-select-all"),this._renderSelectAllCheckBox($cell)},_isSortableElement($target){return this.callBase($target)&&!$target.closest(".dx-select-checkbox").length}},rowsView:{_renderIcons($iconContainer,options){return this.callBase.apply(this,arguments),options.row.isNewRow||"multiple"!==this.option("selection.mode")||this.getController("selection").renderSelectCheckBoxContainer($iconContainer,options),$iconContainer},_rowClick(e){const $targetElement=(0,renderer.Z)(e.event.target);this.isExpandIcon($targetElement)?this.callBase.apply(this,arguments):module_originalRowClick.apply(this,arguments)}}}}}));function allowSearch(column){return(0,utils_type.$K)(column.allowSearch)?column.allowSearch:column.allowFiltering}function parseValue(column,text){const{lookup}=column;return column.parseValue?lookup?column.parseValue.call(lookup,text):column.parseValue(text):text}const searchModule={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:message.Z.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:{publicMethods(){return this.callBase().concat(["searchByText"])},_calculateAdditionalFilter(){const filter=this.callBase(),searchFilter=function(that,text){let i,column;const columns=that._columnsController.getColumns(),searchVisibleColumnsOnly=that.option("searchPanel.searchVisibleColumnsOnly");let lookup;const filters=[];if(!text)return null;function onQueryDone(items){const valueGetter=(0,data.vb)(lookup.valueExpr);for(let i=0;i<items.length;i++){const value=valueGetter(items[i]);filters.push(column.createFilterExpression(value,null,"search"))}}for(i=0;i<columns.length;i++)if(column=columns[i],(!searchVisibleColumnsOnly||column.visible)&&allowSearch(column)&&column.calculateFilterExpression){lookup=column.lookup;const filterValue=parseValue(column,text);lookup&&lookup.items?(0,data_query.Z)(lookup.items).filter(column.createFilterExpression.call({dataField:lookup.displayExpr,dataType:lookup.dataType,calculateFilterExpression:column.calculateFilterExpression},filterValue,null,"search")).enumerate().done(onQueryDone):void 0!==filterValue&&filters.push(column.createFilterExpression(filterValue,null,"search"))}return 0===filters.length?["!"]:module_utils.combineFilters(filters,"or")}(this,this.option("searchPanel.text"));return module_utils.combineFilters([filter,searchFilter])},searchByText(text){this.option("searchPanel.text",text)},optionChanged(args){const that=this;switch(args.fullName){case"searchPanel.text":case"searchPanel":that._applyFilter(),args.handled=!0;break;default:that.callBase(args)}}}},views:{headerPanel:function(){const getSearchPanelOptions=function(that){return that.option("searchPanel")};return{_getToolbarItems(){const items=this.callBase();return this._prepareSearchItem(items)},_prepareSearchItem(items){const that=this,dataController=that.getController("data"),searchPanelOptions=getSearchPanelOptions(that);if(searchPanelOptions&&searchPanelOptions.visible){const toolbarItem={template(data,index,container){const $search=(0,renderer.Z)("<div>").addClass(that.addWidgetPrefix("search-panel")).appendTo(container);that.getController("editorFactory").createEditor($search,{width:searchPanelOptions.width,placeholder:searchPanelOptions.placeholder,parentType:"searchPanel",value:that.option("searchPanel.text"),updateValueTimeout:700,setValue(value){dataController.searchByText(value)},editorOptions:{inputAttr:{"aria-label":message.Z.format(that.component.NAME+"-ariaSearchInGrid")}}}),that.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40};items.push(toolbarItem)}return items},getSearchTextEditor(){const that=this,$element=that.element(),$searchPanel=$element.find("."+that.addWidgetPrefix("search-panel")).filter((function(){return(0,renderer.Z)(this).closest("."+that.addWidgetPrefix("header-panel")).is($element)}));return $searchPanel.length?$searchPanel.dxTextBox("instance"):null},isVisible(){const searchPanelOptions=getSearchPanelOptions(this);return this.callBase()||searchPanelOptions&&searchPanelOptions.visible},optionChanged(args){if("searchPanel"===args.name){if("searchPanel.text"===args.fullName){const editor=this.getSearchTextEditor();editor&&editor.option("value",args.value)}else this._invalidate();args.handled=!0}else this.callBase(args)}}}(),rowsView:{init(){this.callBase.apply(this,arguments),this._searchParams=[]},_getFormattedSearchText(column,searchText){const value=parseValue(column,searchText),formatOptions=module_utils.getFormatOptionsByColumn(column,"search");return module_utils.formatValue(value,formatOptions)},_getStringNormalizer(){const isCaseSensitive=this.option("searchPanel.highlightCaseSensitive");return function(str){return isCaseSensitive?str:str.toLowerCase()}},_findHighlightingTextNodes(column,cellElement,searchText){const that=this;let $items,$parent=cellElement.parent();const stringNormalizer=this._getStringNormalizer(),normalizedSearchText=stringNormalizer(searchText),resultTextNodes=[];if($parent.length){if(column)if(column.groupIndex>=0&&!column.showWhenGrouped)$items=cellElement;else{const columnIndex=that._columnsController.getVisibleIndex(column.index);$items=$parent.children("td").eq(columnIndex).find("*")}}else $parent=(0,renderer.Z)("<div>").append(cellElement);return $items=(null==$items?void 0:$items.length)?$items:$parent.find("*"),$items.each(((_,element)=>{const $contents=(0,renderer.Z)(element).contents();for(let i=0;i<$contents.length;i++){const node=$contents.get(i);if(3===node.nodeType){stringNormalizer(node.textContent||node.nodeValue).indexOf(normalizedSearchText)>-1&&resultTextNodes.push(node)}}})),resultTextNodes},_highlightSearchTextCore($textNode,searchText){const that=this,$searchTextSpan=(0,renderer.Z)("<span>").addClass(that.addWidgetPrefix("search-text")),text=$textNode.text(),firstContentElement=$textNode[0],stringNormalizer=this._getStringNormalizer(),index=stringNormalizer(text).indexOf(stringNormalizer(searchText));if(index>=0)return firstContentElement.textContent?firstContentElement.textContent=text.substr(0,index):firstContentElement.nodeValue=text.substr(0,index),$textNode.after($searchTextSpan.text(text.substr(index,searchText.length))),$textNode=(0,renderer.Z)(dom_adapter.Z.createTextNode(text.substr(index+searchText.length))).insertAfter($searchTextSpan),that._highlightSearchTextCore($textNode,searchText)},_highlightSearchText(cellElement,isEquals,column){const that=this,stringNormalizer=this._getStringNormalizer();let searchText=that.option("searchPanel.text");if(isEquals&&column&&(searchText=searchText&&that._getFormattedSearchText(column,searchText)),searchText&&that.option("searchPanel.highlightSearchText")){that._findHighlightingTextNodes(column,cellElement,searchText).forEach((textNode=>{isEquals?stringNormalizer((0,renderer.Z)(textNode).text())===stringNormalizer(searchText)&&(0,renderer.Z)(textNode).replaceWith((0,renderer.Z)("<span>").addClass(that.addWidgetPrefix("search-text")).text((0,renderer.Z)(textNode).text())):that._highlightSearchTextCore((0,renderer.Z)(textNode),searchText)}))}},_renderCore(){const deferred=this.callBase.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout((()=>{this._highlightSearchText(this.getTableElement())}))):this._highlightSearchText(this.getTableElement())),deferred},_updateCell($cell,parameters){const{column}=parameters,isEquals="string"!==(column.lookup&&column.lookup.dataType||column.dataType);allowSearch(column)&&!parameters.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout((()=>{this._searchParams.forEach((params=>{this._highlightSearchText.apply(this,params)})),this._searchParams=[]}))),this._searchParams.push([$cell,isEquals,column])):this._highlightSearchText($cell,isEquals,column)),this.callBase($cell,parameters)},dispose(){clearTimeout(this._highlightTimer),this.callBase()}}}}};module_core.registerModule("search",searchModule);var events_short=__webpack_require__("./node_modules/devextreme/esm/events/short.js");const ATTRIBUTES_ariaColIndex="aria-colindex",ATTRIBUTES_dragCell="dx-drag-cell",GridCoreKeyboardNavigationDom_isDragCell=$cell=>void 0!==$cell.attr(ATTRIBUTES_dragCell),GridCoreKeyboardNavigationDom_getCellToFocus=($cellElements,columnIndex)=>$cellElements.filter(`[${ATTRIBUTES_ariaColIndex}="${columnIndex+1}"]:not([${ATTRIBUTES_dragCell}])`).first(),INTERACTIVE_ELEMENTS_SELECTOR="input:not([type='hidden']), textarea, a, select, button, [tabindex], .dx-checkbox",NON_FOCUSABLE_ELEMENTS_SELECTOR=INTERACTIVE_ELEMENTS_SELECTOR+", .dx-dropdowneditor-icon",FUNCTIONAL_KEYS=["shift","control","alt"];function module_isGroupRow($row){return $row&&$row.hasClass("dx-group-row")}function isDetailRow($row){return $row&&$row.hasClass("dx-master-detail-row")}function isDataRow($row){return $row&&!module_isGroupRow($row)&&!isDetailRow($row)}function isEditorCell(that,$cell){return!that._isRowEditMode()&&$cell&&!$cell.hasClass("dx-command-select")&&$cell.hasClass("dx-editor-cell")}function isElementDefined($element){return(0,utils_type.$K)($element)&&$element.length>0}function isMobile(){return"desktop"!==devices.Z.current().deviceType}function isCellInHeaderRow($cell){return!!$cell.parent(".dx-header-row").length}const keyboardNavigationMembers={init(){if(this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._columnsController=this.getController("columns"),this._editorFactory=this.getController("editorFactory"),this.isKeyboardEnabled()){!function subscribeVisibilityChange(){events_engine.Z.on(dom_adapter.Z.getDocument(),"visibilitychange",onDocumentVisibilityChange)}(),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._focusedCellPosition={},this._canceledCellPosition=null;const elementFocused=$element=>{this.setupFocusedView(),this._isNeedScroll&&$element.is(":visible")&&this._focusedView&&this._focusedView.getScrollable&&(this._focusedView._scrollToElement($element),this._isNeedScroll=!1)};this._editorFactory.focused.add(elementFocused),this._initViewHandlers(),this._initDocumentHandlers(),this.createAction("onKeyDown")}},_initViewHandlers(){const rowsView=this.getView("rowsView"),rowsViewFocusHandler=event=>{const $element=(0,renderer.Z)(event.target),isRelatedTargetInRowsView=(0,renderer.Z)(event.relatedTarget).closest(rowsView.element()).length,isLink=$element.is("a");if(event.relatedTarget&&isLink&&!isRelatedTargetInRowsView&&this._isEventInCurrentGrid(event)){let $focusedCell=this._getFocusedCell();$focusedCell=isElementDefined($focusedCell)?$focusedCell:rowsView.getCellElements(0).filter("[tabindex]").eq(0),$element.closest($focusedCell).length||(event.preventDefault(),events_engine.Z.trigger($focusedCell,"focus"))}};rowsView.renderCompleted.add((e=>{const $rowsView=rowsView.element(),isFullUpdate=!e||"refresh"===e.changeType,isFocusedViewCorrect=this._focusedView&&this._focusedView.name===rowsView.name;let needUpdateFocus=!1;const isAppend=e&&("append"===e.changeType||"prepend"===e.changeType),$focusedElement=(0,renderer.Z)(dom_adapter.Z.getRootNode($rowsView.get&&$rowsView.get(0))).find(":focus"),isFocusedElementCorrect=!$focusedElement.length||$focusedElement.closest($rowsView).length;events_engine.Z.off($rowsView,"focusin",rowsViewFocusHandler),events_engine.Z.on($rowsView,"focusin",rowsViewFocusHandler),this._initPointerEventHandler(),this._initKeyDownHandler(),this._setRowsViewAttributes(),isFocusedViewCorrect&&isFocusedElementCorrect&&(needUpdateFocus=this._isNeedFocus?!isAppend:this._isHiddenFocus&&isFullUpdate&&!(null==e?void 0:e.virtualColumnsScrolling),needUpdateFocus&&this._updateFocus(!0))}))},_initDocumentHandlers(){const document=dom_adapter.Z.getDocument();this._documentClickHandler=this.createAction((e=>{const $target=(0,renderer.Z)(e.event.target),isCurrentRowsViewClick=this._isEventInCurrentGrid(e.event)&&$target.closest("."+this.addWidgetPrefix("rowsview")).length,isEditorOverlay=$target.closest(".dx-dropdowneditor-overlay").length,columnsResizerController=this.getController("columnsResizer"),isColumnResizing=!!columnsResizerController&&columnsResizerController.isResizing();if(!isCurrentRowsViewClick&&!isEditorOverlay&&!isColumnResizing){!(!!this._focusedView&&$target.parents().filter(this._focusedView.element()).length>0)&&this._resetFocusedCell(!0),this._resetFocusedView()}})),events_engine.Z.on(document,(0,events_utils.V4)(pointer.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)},_setRowsViewAttributes(){const $rowsView=this._getRowsViewElement();!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement($rowsView)},_initPointerEventHandler(){const pointerEventName=isMobile()?click.u:pointer.Z.down,$rowsView=this._getRowsViewElement();(0,utils_type.$K)(this._pointerEventAction)||(this._pointerEventAction=this.createAction(this._pointerEventHandler)),events_engine.Z.off($rowsView,(0,events_utils.V4)(pointerEventName,"dxDataGridKeyboardNavigation"),this._pointerEventAction),events_engine.Z.on($rowsView,(0,events_utils.V4)(pointerEventName,"dxDataGridKeyboardNavigation"),".dx-row > td, .dx-row",this._pointerEventAction)},_initKeyDownHandler(){const $rowsView=this._getRowsViewElement();events_short.dG.off(this._keyDownListener),this._keyDownListener=events_short.dG.on($rowsView,null,(e=>this._keyDownHandler(e)))},dispose(){this.callBase(),this._resetFocusedView(),events_short.dG.off(this._keyDownListener),events_engine.Z.off(dom_adapter.Z.getDocument(),(0,events_utils.V4)(pointer.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),function unsubscribeVisibilityChange(){events_engine.Z.off(dom_adapter.Z.getDocument(),"visibilitychange",onDocumentVisibilityChange)}()},optionChanged(args){const that=this;switch(args.name){case"keyboardNavigation":case"useLegacyKeyboardNavigation":args.handled=!0;break;default:that.callBase(args)}},isRowFocusType(){return"row"===this.focusType},isCellFocusType(){return"cell"===this.focusType},setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType="row")},setCellFocusType(){this.focusType="cell"},_keyDownHandler(e){var _a;let needStopPropagation=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;let isHandled=this._processOnKeyDown(e);const isEditing=null===(_a=this._editingController)||void 0===_a?void 0:_a.isEditing(),{originalEvent}=e;if(originalEvent.isDefaultPrevented())return this._isNeedFocus=!1,void(this._isNeedScroll=!1);if(!FUNCTIONAL_KEYS.includes(e.keyName)&&this._updateFocusedCellPositionByTarget(originalEvent.target),!isHandled){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,isEditing),isHandled=!0;break;case"upArrow":case"downArrow":e.ctrl?selectView("rowsView",this,originalEvent):this._upDownKeysHandler(e,isEditing),isHandled=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e),isHandled=!0;break;case"space":isHandled=this._spaceKeyHandler(e,isEditing);break;case"A":(0,events_utils.j1)(e.originalEvent)?(this._ctrlAKeyHandler(e,isEditing),isHandled=!0):isHandled=this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e,isEditing),isHandled=!0;break;case"enter":this._enterKeyHandler(e,isEditing),isHandled=!0;break;case"escape":this._escapeKeyHandler(e,isEditing),isHandled=!0;break;case"F":(0,events_utils.j1)(e.originalEvent)?(this._ctrlFKeyHandler(e),isHandled=!0):isHandled=this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler(),isHandled=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(isHandled=this._beginFastEditing(originalEvent,!0))}isHandled||this._beginFastEditing(originalEvent)||(this._isNeedFocus=!1,this._isNeedScroll=!1,needStopPropagation=!1),needStopPropagation&&originalEvent.stopPropagation()}},_processOnKeyDown(eventArgs){const{originalEvent}=eventArgs,args={handled:!1,event:originalEvent};return this.executeAction("onKeyDown",args),eventArgs.ctrl=originalEvent.ctrlKey,eventArgs.alt=originalEvent.altKey,eventArgs.shift=originalEvent.shiftKey,!!args.handled},_closeEditCell(){setTimeout((()=>{this._editingController.closeEditCell()}))},_leftRightKeysHandler(eventArgs,isEditing){const rowIndex=this.getVisibleRowIndex(),$event=eventArgs.originalEvent,$row=this._focusedView&&this._focusedView.getRow(rowIndex),directionCode=this._getDirectionCodeByKey(eventArgs.keyName),isEditingNavigationMode=this._isFastEditingStarted();if((!isEditing||isEditingNavigationMode)&&isDataRow($row)){this.setCellFocusType(),isEditingNavigationMode&&this._closeEditCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(directionCode);const $cell=this._getNextCell(directionCode);isElementDefined($cell)&&this._arrowKeysHandlerFocusCell($event,$cell,directionCode),$event&&$event.preventDefault()}},_upDownKeysHandler(eventArgs,isEditing){var _a,_b;const visibleRowIndex=this.getVisibleRowIndex(),$row=this._focusedView&&this._focusedView.getRow(visibleRowIndex),$event=eventArgs.originalEvent,isUpArrow="upArrow"===eventArgs.keyName,dataSource=this._dataController.dataSource(),isRowEditingInCurrentRow=null===(_b=null===(_a=this._editingController)||void 0===_a?void 0:_a.isEditRowByIndex)||void 0===_b?void 0:_b.call(_a,visibleRowIndex),isEditingNavigationMode=this._isFastEditingStarted();if((!isRowEditingInCurrentRow||!isEditing||isEditingNavigationMode)&&$row&&!isDetailRow($row)){if(isEditingNavigationMode&&this._closeEditCell(),!this._navigateNextCell($event,eventArgs.keyName)&&this._isVirtualRowRender()&&isUpArrow&&dataSource&&!dataSource.isLoading()){const rowHeight=(0,size.zp)($row),rowIndex=this._focusedCellPosition.rowIndex-1;this._scrollBy(0,-rowHeight,rowIndex,$event)}$event&&$event.preventDefault()}},_pageUpDownKeyHandler(eventArgs){const pageIndex=this._dataController.pageIndex(),pageCount=this._dataController.pageCount(),pagingEnabled=this.option("paging.enabled"),isPageUp="pageUp"===eventArgs.keyName,pageStep=isPageUp?-1:1,scrollable=this.getView("rowsView").getScrollable();pagingEnabled&&!this._isVirtualScrolling()?(isPageUp?pageIndex>0:pageIndex<pageCount-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(pageIndex+pageStep),eventArgs.originalEvent.preventDefault()):scrollable&&(0,size.Cr)(scrollable.container())<(0,size.Cr)(scrollable.$content())&&(this._scrollBy(0,(0,size.Cr)(scrollable.container())*pageStep),eventArgs.originalEvent.preventDefault())},_spaceKeyHandler(eventArgs,isEditing){const rowIndex=this.getVisibleRowIndex(),$target=(0,renderer.Z)(eventArgs.originalEvent&&eventArgs.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!isEditing){const isFocusedRowElement="row"===this._getElementType($target)&&this.isRowFocusType()&&isDataRow($target);return $target.hasClass("dx-command-select")&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),!!(isFocusedRowElement||$target.parent().hasClass("dx-data-row")||$target.hasClass(this.addWidgetPrefix("rowsview")))&&(this._selectionController.changeItemSelection(rowIndex,{shift:eventArgs.shift,control:eventArgs.ctrl}),eventArgs.originalEvent.preventDefault(),!0)}return this._beginFastEditing(eventArgs.originalEvent)},_ctrlAKeyHandler(eventArgs,isEditing){isEditing||eventArgs.alt||"multiple"!==this.option("selection.mode")||!this.option("selection.allowSelectAll")||(this._selectionController.selectAll(),eventArgs.originalEvent.preventDefault())},_tabKeyHandler(eventArgs,isEditing){const editingOptions=this.option("editing"),direction=eventArgs.shift?"previous":"next";let isOriginalHandlerRequired=!((0,utils_type.$K)(this._focusedCellPosition)&&!(0,utils_type.Qr)(this._focusedCellPosition))||!eventArgs.shift&&this._isLastValidCell(this._focusedCellPosition)||eventArgs.shift&&this._isFirstValidCell(this._focusedCellPosition);const eventTarget=eventArgs.originalEvent.target,focusedViewElement=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(eventTarget,direction)){if((0,renderer.Z)(focusedViewElement).addClass("dx-state-focused"),editingOptions&&eventTarget&&!isOriginalHandlerRequired)if((0,renderer.Z)(eventTarget).hasClass(this.addWidgetPrefix("rowsview"))&&this._resetFocusedCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(direction),isEditing){if(!this._editingCellTabHandler(eventArgs,direction))return}else this._targetCellTabHandler(eventArgs,direction)&&(isOriginalHandlerRequired=!0);isOriginalHandlerRequired?(this._editorFactory.loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell())):eventArgs.originalEvent.preventDefault()}},_getMaxHorizontalOffset(){const scrollable=this.component.getScrollable(),rowsView=this.getView("rowsView");return scrollable?scrollable.scrollWidth()-(0,size.dz)(rowsView.element()):0},_isColumnRendered(columnIndex){const allVisibleColumns=this._columnsController.getVisibleColumns(null,!0),renderedVisibleColumns=this._columnsController.getVisibleColumns(),column=allVisibleColumns[columnIndex];let result=!1;return column&&(result=renderedVisibleColumns.indexOf(column)>=0),result},_isFixedColumn(columnIndex){const column=this._columnsController.getVisibleColumns(null,!0)[columnIndex];return!!column&&!!column.fixed},_isColumnVirtual(columnIndex){const localColumnIndex=columnIndex-this._columnsController.getColumnIndexOffset(),column=this._columnsController.getVisibleColumns()[localColumnIndex];return!!column&&"virtual"===column.command},_processVirtualHorizontalPosition(direction){const scrollable=this.component.getScrollable(),columnIndex=this.getColumnIndex();let nextColumnIndex,horizontalScrollPosition=0,needToScroll=!1;switch(direction){case"next":case"nextInRow":{const columnsCount=this._getVisibleColumnCount();nextColumnIndex=columnIndex+1,horizontalScrollPosition=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,needToScroll="next"===direction?columnsCount===nextColumnIndex||this._isFixedColumn(columnIndex)&&!this._isColumnRendered(nextColumnIndex):columnsCount>nextColumnIndex&&this._isFixedColumn(columnIndex)&&!this._isColumnRendered(nextColumnIndex);break}case"previous":case"previousInRow":if(nextColumnIndex=columnIndex-1,horizontalScrollPosition=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),"previous"===direction){const columnIndexOffset=this._columnsController.getColumnIndexOffset();needToScroll=nextColumnIndex<0&&0===columnIndexOffset||this._isFixedColumn(columnIndex)&&!this._isColumnRendered(nextColumnIndex)}else needToScroll=nextColumnIndex>=0&&this._isFixedColumn(columnIndex)&&!this._isColumnRendered(nextColumnIndex)}needToScroll?scrollable.scrollTo({left:horizontalScrollPosition}):(0,utils_type.$K)(nextColumnIndex)&&(0,utils_type.$K)(direction)&&this._isColumnVirtual(nextColumnIndex)&&(horizontalScrollPosition=this._getHorizontalScrollPositionOffset(direction),0!==horizontalScrollPosition&&scrollable.scrollBy({left:horizontalScrollPosition,top:0}))},_getHorizontalScrollPositionOffset(direction){let positionOffset=0;const $currentCell=this._getCell(this._focusedCellPosition),currentCellWidth=$currentCell&&(0,size.Y_)($currentCell);if(currentCellWidth>0){const rtlMultiplier=this.option("rtlEnabled")?-1:1;positionOffset="nextInRow"===direction||"next"===direction?currentCellWidth*rtlMultiplier:currentCellWidth*rtlMultiplier*-1}return positionOffset},_editingCellTabHandler(eventArgs,direction){const eventTarget=eventArgs.originalEvent.target;let isEditingAllowed,$cell=this._getCellElementFromTarget(eventTarget);const $event=eventArgs.originalEvent,elementType=this._getElementType(eventTarget);if($cell.is("[class^=dx-command]"))return!this._targetCellTabHandler(eventArgs,direction);this._updateFocusedCellPosition($cell);const nextCellInfo=this._getNextCellByTabKey($event,direction,elementType);if($cell=nextCellInfo.$cell,!$cell||this._handleTabKeyOnMasterDetailCell($cell,direction))return!1;const columnsController=this._columnsController,columnIndex=this.getView("rowsView").getCellIndex($cell)+columnsController.getColumnIndexOffset(),column=columnsController.getVisibleColumns(null,!0)[columnIndex],$row=$cell.parent(),rowIndex=this._getRowIndex($row),row=this._dataController.items()[rowIndex],editingController=this._editingController;if(column&&column.allowEditing){const isDataRow=!row||"data"===row.rowType;isEditingAllowed=editingController.allowUpdating({row})?isDataRow:row&&row.isNewRow}return isEditingAllowed||this._closeEditCell(),this._focusCell($cell,!nextCellInfo.isHighlighted)&&(!this._isRowEditMode()&&isEditingAllowed?this._editFocusedCell():this._focusInteractiveElement($cell,eventArgs.shift)),!0},_targetCellTabHandler(eventArgs,direction){const $event=eventArgs.originalEvent;let eventTarget=$event.target,$cell=this._getCellElementFromTarget(eventTarget);const $lastInteractiveElement=this._getInteractiveElement($cell,!eventArgs.shift);let elementType,isOriginalHandlerRequired=!1;if(!isEditorCell(this,$cell)&&$lastInteractiveElement.length&&eventTarget!==$lastInteractiveElement.get(0))isOriginalHandlerRequired=!0;else{void 0===this._focusedCellPosition.rowIndex&&(0,renderer.Z)(eventTarget).hasClass("dx-row")&&this._updateFocusedCellPosition($cell),elementType=this._getElementType(eventTarget),this.isRowFocusType()&&(this.setCellFocusType(),"row"===elementType&&isDataRow((0,renderer.Z)(eventTarget))&&(eventTarget=this.getFirstValidCellInRow((0,renderer.Z)(eventTarget)),elementType=this._getElementType(eventTarget)));const nextCellInfo=this._getNextCellByTabKey($event,direction,elementType);if($cell=nextCellInfo.$cell,!$cell)return!1;if($cell=this._checkNewLineTransition($event,$cell),!$cell)return!1;this._focusCell($cell,!nextCellInfo.isHighlighted),isEditorCell(this,$cell)||this._focusInteractiveElement($cell,eventArgs.shift)}return isOriginalHandlerRequired},_getNextCellByTabKey($event,direction,elementType){let $cell=this._getNextCell(direction,elementType);const args=$cell&&this._fireFocusedCellChanging($event,$cell,!0);return!args||args.cancel?{}:(args.$newCellElement&&($cell=args.$newCellElement),{$cell,isHighlighted:args.isHighlighted})},_checkNewLineTransition($event,$cell){const rowIndex=this.getVisibleRowIndex(),$row=$cell.parent();if(rowIndex!==this._getRowIndex($row)){const cellPosition=this._getCellPosition($cell),args=this._fireFocusedRowChanging($event,$row);if(args.cancel)return;args.rowIndexChanged&&(this.setFocusedColumnIndex(cellPosition.columnIndex),$cell=this._getFocusedCell())}return $cell},_enterKeyHandler(eventArgs,isEditing){const $cell=this._getFocusedCell(),rowIndex=this.getVisibleRowIndex(),$row=this._focusedView&&this._focusedView.getRow(rowIndex);if(this.option("grouping.allowCollapsing")&&module_isGroupRow($row)||this.option("masterDetail.enabled")&&$cell&&$cell.hasClass("dx-command-expand")){const key=this._dataController.getKeyByRowIndex(rowIndex),item=this._dataController.items()[rowIndex];void 0!==key&&item&&item.data&&!item.data.isContinuation&&this._dataController.changeRowExpand(key)}else this._processEnterKeyForDataCell(eventArgs,isEditing)},_processEnterKeyForDataCell(eventArgs,isEditing){const direction=this._getEnterKeyDirection(eventArgs),allowEditingOnEnterKey=this._allowEditingOnEnterKey();isEditing||!allowEditingOnEnterKey&&direction?(this._handleEnterKeyEditingCell(eventArgs.originalEvent),"next"===direction||"previous"===direction?this._targetCellTabHandler(eventArgs,direction):"upArrow"!==direction&&"downArrow"!==direction||this._navigateNextCell(eventArgs.originalEvent,direction)):allowEditingOnEnterKey&&this._startEditing(eventArgs)},_getEnterKeyDirection(eventArgs){const enterKeyDirection=this.option("keyboardNavigation.enterKeyDirection"),isShift=eventArgs.shift;return"column"===enterKeyDirection?isShift?"upArrow":"downArrow":"row"===enterKeyDirection?isShift?"previous":"next":void 0},_handleEnterKeyEditingCell(event){const{target}=event,$cell=this._getCellElementFromTarget(target),isRowEditMode=this._isRowEditMode();this._updateFocusedCellPosition($cell),isRowEditMode?(this._focusEditFormCell($cell),setTimeout(this._editingController.saveEditData.bind(this._editingController))):(events_engine.Z.trigger((0,renderer.Z)(target),"change"),this._closeEditCell(),event.preventDefault())},_escapeKeyHandler(eventArgs,isEditing){const $cell=this._getCellElementFromTarget(eventArgs.originalEvent.target);isEditing&&(this._updateFocusedCellPosition($cell),this._isRowEditMode()?(this._focusEditFormCell($cell),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),eventArgs.originalEvent.preventDefault())},_ctrlFKeyHandler(eventArgs){if(this.option("searchPanel.visible")){const searchTextEditor=this._headerPanel.getSearchTextEditor();searchTextEditor&&(searchTextEditor.focus(),eventArgs.originalEvent.preventDefault())}},_f2KeyHandler(){const isEditing=this._editingController.isEditing(),rowIndex=this.getVisibleRowIndex(),$row=this._focusedView&&this._focusedView.getRow(rowIndex);!isEditing&&isDataRow($row)&&this._startEditing()},_navigateNextCell($event,keyCode){const $cell=this._getNextCell(keyCode),directionCode=this._getDirectionCodeByKey(keyCode);return!!($cell&&this._isCellValid($cell))&&this._arrowKeysHandlerFocusCell($event,$cell,directionCode)},_arrowKeysHandlerFocusCell($event,$nextCell,direction){const isVerticalDirection="prevRow"===direction||"nextRow"===direction,args=this._fireFocusChangingEvents($event,$nextCell,isVerticalDirection,!0);return $nextCell=args.$newCellElement,!(args.cancel||!this._isCellValid($nextCell))&&(this._focus($nextCell,!args.isHighlighted),!0)},_beginFastEditing(originalEvent,isDeleting){if(!this._isFastEditingAllowed()||originalEvent.altKey||originalEvent.ctrlKey||this._editingController.isEditing())return!1;if(isDeleting)this._startEditing(originalEvent,"delete");else{const{key}=originalEvent,keyCode=originalEvent.keyCode||originalEvent.which,fastEditingKey=key||keyCode&&String.fromCharCode(keyCode);!fastEditingKey||1!==fastEditingKey.length&&"delete"!==fastEditingKey||this._startEditing(originalEvent,fastEditingKey)}return!0},_pointerEventHandler(e){const event=e.event||e;let $target=(0,renderer.Z)(event.currentTarget);const rowsView=this.getView("rowsView"),focusedViewElement=rowsView&&rowsView.element(),$parent=$target.parent(),isInteractiveElement=(0,renderer.Z)(event.target).is(INTERACTIVE_ELEMENTS_SELECTOR),isRevertButton=!!(0,renderer.Z)(event.target).closest(".dx-revert-button").length,isExpandCommandCell=$target.hasClass("dx-command-expand");this._isEventInCurrentGrid(event)&&(isRevertButton||!this._isCellValid($target,!isInteractiveElement)&&!isExpandCommandCell?$target.is("td")&&this._resetFocusedCell():($target=this._isInsideEditForm($target)?(0,renderer.Z)(event.target):$target,this._focusView(),(0,renderer.Z)(focusedViewElement).removeClass("dx-state-focused"),$parent.hasClass("dx-freespace-row")?(this._updateFocusedCellPosition($target),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this._isMasterDetailCell($target)?this._updateFocusedCellPosition($target):this._clickTargetCellHandler(event,$target)))},_clickTargetCellHandler(event,$cell){const columnIndex=this.getView("rowsView").getCellIndex($cell),column=this._columnsController.getVisibleColumns()[columnIndex],isCellEditMode=this._isCellEditMode();this.setCellFocusType();const args=this._fireFocusChangingEvents(event,$cell,!0);if($cell=args.$newCellElement,args.cancel)this.setRowFocusType(),this.setFocusedRowIndex(args.prevRowIndex),this._editingController.isEditing()&&isCellEditMode&&this._closeEditCell();else{if(args.resetFocusedRow)return void this.getController("focus")._resetFocusedRow();if(args.rowIndexChanged&&($cell=this._getFocusedCell()),args.isHighlighted||isCellEditMode||this.setRowFocusType(),this._updateFocusedCellPosition($cell),this._allowRowUpdating()&&isCellEditMode&&column&&column.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{$cell=this._getFocusedCell();const $target=event&&(0,renderer.Z)(event.target).closest(NON_FOCUSABLE_ELEMENTS_SELECTOR+", td"),skipFocusEvent=$target&&$target.not($cell).is(NON_FOCUSABLE_ELEMENTS_SELECTOR),isDisabled=!(!!column&&!column.command&&$cell.hasClass("dx-editor-cell"))&&(!args.isHighlighted||skipFocusEvent);this._focus($cell,isDisabled,skipFocusEvent)}}},_allowRowUpdating(){const rowIndex=this.getVisibleRowIndex(),row=this._dataController.items()[rowIndex];return this._editingController.allowUpdating({row},"click")},focus(element){let activeElementSelector;const focusedRowEnabled=this.option("focusedRowEnabled"),isHighlighted=this._isCellElement((0,renderer.Z)(element));element||(activeElementSelector=".dx-datagrid-rowsview .dx-row[tabindex]",focusedRowEnabled||(activeElementSelector+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),element=this.component.$element().find(activeElementSelector).first()),element&&this._focusElement((0,renderer.Z)(element),isHighlighted)},getFocusedView(){return this._focusedView},setupFocusedView(){this.isKeyboardEnabled()&&!(0,utils_type.$K)(this._focusedView)&&this._focusView()},_focusElement($element,isHighlighted){const rowsViewElement=(0,renderer.Z)(this._getRowsViewElement()),$focusedView=$element.closest(rowsViewElement),isRowFocusType=this.isRowFocusType();let args={};!$focusedView.length||this._isCellElement($element)&&!this._isCellValid($element)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement($element)||module_isGroupRow($element))&&(this.setCellFocusType(),args=this._fireFocusChangingEvents(null,$element,!1,isHighlighted),$element=args.$newCellElement,isRowFocusType&&!args.isHighlighted&&this.setRowFocusType()),args.cancel||(this._focus($element,!args.isHighlighted),this._focusInteractiveElement($element)))},_getFocusedViewByElement($element){const view=this.getFocusedView(),$view=view&&(0,renderer.Z)(view.element());return $element&&0!==$element.closest($view).length},_focusView(){this._focusedView=this.getView("rowsView")},_resetFocusedView(){this.setRowFocusType(),this._focusedView=null},_focusInteractiveElement($cell,isLast){if(!$cell)return;const $focusedElement=this._getInteractiveElement($cell,isLast);this._testInteractiveElement=$focusedElement,module_utils.focusAndSelectElement(this,$focusedElement)},_focus($cell,disableFocus,skipFocusEvent){const $row=$cell&&!$cell.hasClass("dx-row")?$cell.closest(".dx-row"):$cell;if($row&&function isNotFocusedRow($row){return!$row||$row.hasClass("dx-freespace-row")||$row.hasClass("dx-virtual-row")}($row))return;const focusedView=this._focusedView,$focusViewElement=focusedView&&focusedView.element();let $focusElement;this._isHiddenFocus=disableFocus;const isRowFocus=module_isGroupRow($row)||this.isRowFocusType();isRowFocus?($focusElement=$row,focusedView&&this.setFocusedRowIndex(this._getRowIndex($row))):this._isCellElement($cell)&&($focusElement=$cell,this._updateFocusedCellPosition($cell)),$focusElement&&($focusViewElement&&$focusViewElement.find(".dx-row[tabindex], .dx-row > td[tabindex]").not($focusElement).removeClass("dx-cell-focus-disabled").removeAttr("tabindex"),events_engine.Z.one($focusElement,"blur",(e=>{e.relatedTarget&&$focusElement.removeClass("dx-cell-focus-disabled")})),skipFocusEvent||(this._applyTabIndexToElement($focusElement),events_engine.Z.trigger($focusElement,"focus")),disableFocus?($focusElement.addClass("dx-cell-focus-disabled"),isRowFocus&&$cell.addClass("dx-cell-focus-disabled")):this._editorFactory.focus($focusElement))},_updateFocus(isRenderView){this._updateFocusTimeout=setTimeout((()=>{const editingController=this._editingController,isCellEditMode="cell"===editingController.getEditMode(),isBatchEditMode="batch"===editingController.getEditMode();if(isCellEditMode&&editingController.hasChanges()||isBatchEditMode&&editingController.isNewRowInEditMode())return void editingController._focusEditingCell();let $cell=this._getFocusedCell();const isEditing=editingController.isEditing();if($cell&&(!this._isMasterDetailCell($cell)||this._isRowEditMode())){if(this._hasSkipRow($cell.parent())){const direction=this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow";$cell=this._getNextCell(direction)}if(isElementDefined($cell))if($cell.is("td")||$cell.hasClass(this.addWidgetPrefix("edit-form-item"))){const isCommandCell=$cell.is("[class^=dx-command]"),$focusedElementInsideCell=$cell.find(":focus"),isFocusedElementDefined=isElementDefined($focusedElementInsideCell);if(!isRenderView&&isCommandCell||!this._editorFactory.focus())isFocusedElementDefined||!this._isNeedFocus&&!this._isHiddenFocus||this._focus($cell,this._isHiddenFocus);else{if(isCommandCell&&isFocusedElementDefined)return void module_utils.focusAndSelectElement(this,$focusedElementInsideCell);!isFocusedElementDefined&&this._focus($cell)}isEditing&&this._focusInteractiveElement.bind(this)($cell)}else events_engine.Z.trigger($cell,"focus")}}))},_getFocusedCell(){return(0,renderer.Z)(this._getCell(this._focusedCellPosition))},_updateFocusedCellPositionByTarget(target){var _a;if("row"===this._getElementType(target)&&(0,utils_type.$K)(null===(_a=this._focusedCellPosition)||void 0===_a?void 0:_a.columnIndex)){const $row=(0,renderer.Z)(target);this._focusedView&&module_isGroupRow($row)&&this.setFocusedRowIndex(this._getRowIndex($row))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(target))},_updateFocusedCellPosition($cell,direction){const position=this._getCellPosition($cell,direction);return position&&(!$cell.length||position.rowIndex>=0&&position.columnIndex>=0)&&this.setFocusedCellPosition(position.rowIndex,position.columnIndex),position},_getFocusedColumnIndexOffset(columnIndex){let offset=0;const column=this._columnsController.getVisibleColumns()[columnIndex];return column&&column.fixed?offset=this._getFixedColumnIndexOffset(column):columnIndex>=0&&(offset=this._columnsController.getColumnIndexOffset()),offset},_getFixedColumnIndexOffset(column){const offset=function isFixedColumnIndexOffsetRequired(that,column){let result=!1;return result=that.option("rtlEnabled")?!("right"===column.fixedPosition||(0,utils_type.$K)(column.command)&&!(0,utils_type.$K)(column.fixedPosition)):!(!(0,utils_type.$K)(column.fixedPosition)||"left"===column.fixedPosition),result}(this,column)?this._getVisibleColumnCount()-this._columnsController.getVisibleColumns().length:0;return offset},_getCellPosition($cell,direction){let columnIndex;const $row=isElementDefined($cell)&&$cell.closest("tr"),rowsView=this.getView("rowsView");if(isElementDefined($row)){const rowIndex=this._getRowIndex($row);return columnIndex=rowsView.getCellIndex($cell,rowIndex),columnIndex+=this._getFocusedColumnIndexOffset(columnIndex),direction&&(columnIndex="previous"===direction?columnIndex-1:columnIndex+1,columnIndex=this._applyColumnIndexBoundaries(columnIndex)),{rowIndex,columnIndex}}},_focusCell($cell,isDisabled){if(this._isCellValid($cell))return this._focus($cell,isDisabled),!0},_focusEditFormCell($cell){$cell.hasClass("dx-master-detail-cell")&&this._editorFactory.focus($cell,!0)},_resetFocusedCell(preventScroll){var _a;const $cell=this._getFocusedCell();isElementDefined($cell)&&$cell.removeAttr("tabindex"),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),null===(_a=this._focusedView)||void 0===_a||_a.renderFocusState({preventScroll})},restoreFocusableElement(rowIndex,$event){const that=this;let args,$rowElement;const isUpArrow=(0,utils_type.$K)(rowIndex),rowsView=that.getView("rowsView"),$rowsViewElement=rowsView.element(),{columnIndex}=that._focusedCellPosition,rowIndexOffset=that._dataController.getRowIndexOffset();rowIndex=isUpArrow?rowIndex:rowsView.getTopVisibleItemIndex()+rowIndexOffset,isUpArrow?($rowElement=rowsView.getRow(rowIndex-rowIndexOffset),args=that._fireFocusedRowChanging($event,$rowElement),!args.cancel&&args.rowIndexChanged&&(rowIndex=args.newRowIndex)):(that._editorFactory.loseFocus(),that._applyTabIndexToElement($rowsViewElement),events_engine.Z.trigger($rowsViewElement,"focus")),isUpArrow&&args.cancel||that.setFocusedCellPosition(rowIndex,columnIndex),isUpArrow&&that._updateFocus()},_getNewPositionByCode(cellPosition,elementType,code){let visibleColumnsCount,{columnIndex}=cellPosition,{rowIndex}=cellPosition;if(void 0===cellPosition.rowIndex&&"next"===code)return{columnIndex:0,rowIndex:0};switch(code){case"nextInRow":case"next":visibleColumnsCount=this._getVisibleColumnCount(),columnIndex<visibleColumnsCount-1&&"row"!==elementType&&this._hasValidCellAfterPosition({columnIndex,rowIndex})?columnIndex++:this._isLastRow(rowIndex)||"next"!==code||(columnIndex=0,rowIndex++);break;case"previousInRow":case"previous":columnIndex>0&&"row"!==elementType&&this._hasValidCellBeforePosition({columnIndex,rowIndex})?columnIndex--:rowIndex>0&&"previous"===code&&(rowIndex--,visibleColumnsCount=this._getVisibleColumnCount(),columnIndex=visibleColumnsCount-1);break;case"upArrow":rowIndex=rowIndex>0?rowIndex-1:rowIndex;break;case"downArrow":rowIndex=this._isLastRow(rowIndex)?rowIndex:rowIndex+1}return{columnIndex,rowIndex}},setFocusedCellPosition(rowIndex,columnIndex){this.setFocusedRowIndex(rowIndex),this.setFocusedColumnIndex(columnIndex)},setFocusedRowIndex(rowIndex){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=rowIndex},setFocusedColumnIndex(columnIndex){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=columnIndex},getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1},getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1},getVisibleRowIndex(){const rowIndex=this._focusedCellPosition&&this._focusedCellPosition.rowIndex;return!(0,utils_type.$K)(rowIndex)||rowIndex<0?-1:rowIndex-this._dataController.getRowIndexOffset()},getVisibleColumnIndex(){const columnIndex=this._focusedCellPosition&&this._focusedCellPosition.columnIndex;return(0,utils_type.$K)(columnIndex)?columnIndex-this._columnsController.getColumnIndexOffset():-1},_applyColumnIndexBoundaries(columnIndex){const visibleColumnsCount=this._getVisibleColumnCount();return columnIndex<0?columnIndex=0:columnIndex>=visibleColumnsCount&&(columnIndex=visibleColumnsCount-1),columnIndex},_isCellByPositionValid(cellPosition){const $cell=(0,renderer.Z)(this._getCell(cellPosition));return this._isCellValid($cell)},_isLastRow(rowIndex){const dataController=this._dataController,visibleItems=dataController.items().filter((item=>!1!==item.visible));return this._isVirtualRowRender()?rowIndex>=dataController.getMaxRowIndex():rowIndex===visibleItems.length-1},_isFirstValidCell(cellPosition){let isFirstValidCell=!1;return 0===cellPosition.rowIndex&&cellPosition.columnIndex>=0&&(isFirstValidCell=isFirstValidCell||!this._hasValidCellBeforePosition(cellPosition)),isFirstValidCell},_hasValidCellBeforePosition(cellPosition){let{columnIndex}=cellPosition,hasValidCells=!1;for(;columnIndex>0&&!hasValidCells;){const checkingPosition={columnIndex:--columnIndex,rowIndex:cellPosition.rowIndex};hasValidCells=this._isCellByPositionValid(checkingPosition)}return hasValidCells},_hasValidCellAfterPosition(cellPosition){let{columnIndex}=cellPosition,hasValidCells=!1;const visibleColumnCount=this._getVisibleColumnCount();for(;columnIndex<visibleColumnCount-1&&!hasValidCells;){const checkingPosition={columnIndex:++columnIndex,rowIndex:cellPosition.rowIndex};hasValidCells=this._isCellByPositionValid(checkingPosition)}return hasValidCells},_isLastValidCell(cellPosition){const nextColumnIndex=cellPosition.columnIndex>=0?cellPosition.columnIndex+1:0,{rowIndex}=cellPosition,checkingPosition={columnIndex:nextColumnIndex,rowIndex},visibleRows=this._dataController.getVisibleRows(),row=visibleRows&&visibleRows[rowIndex];return!!this._isLastRow(rowIndex)&&(!!(row&&"group"===row.rowType&&cellPosition.columnIndex>0)||(cellPosition.columnIndex===this._getVisibleColumnCount()-1||!this._isCellByPositionValid(checkingPosition)&&this._isLastValidCell(checkingPosition)))},_isCellValid($cell,isClick){if(isElementDefined($cell)){const rowsView=this.getView("rowsView"),$row=$cell.parent(),columnsController=this._columnsController,columnIndex=rowsView.getCellIndex($cell)+columnsController.getColumnIndexOffset(),column=columnsController.getVisibleColumns(null,!0)[columnIndex],visibleColumnCount=this._getVisibleColumnCount(),editingController=this._editingController,isMasterDetailRow=isDetailRow($row),isShowWhenGrouped=column&&column.showWhenGrouped,isDataCell=column&&!$cell.hasClass("dx-command-expand")&&isDataRow($row),isValidGroupSpaceColumn=function(){return!isMasterDetailRow&&column&&(!(0,utils_type.$K)(column.groupIndex)||isShowWhenGrouped&&isDataCell)||parseInt($cell.attr("colspan"))>1};if(GridCoreKeyboardNavigationDom_isDragCell($cell))return!1;if(this._isMasterDetailCell($cell))return!0;if(visibleColumnCount>columnIndex&&isValidGroupSpaceColumn()){const rowItems=this._dataController.items(),visibleRowIndex=rowsView.getRowIndex($row),row=rowItems[visibleRowIndex],isCellEditing=editingController&&this._isCellEditMode()&&editingController.isEditing(),isRowEditingInCurrentRow=editingController&&editingController.isEditRow(visibleRowIndex),isEditing=isRowEditingInCurrentRow||isCellEditing;return column.command?this._isLegacyNavigation()?!isEditing&&"expand"===column.command:!isCellEditing&&(isRowEditingInCurrentRow?"select"!==column.command:!isEditing):(!isCellEditing||!row||"data"===row.rowType)&&(!isEditing||column.allowEditing||isClick)}}},getFirstValidCellInRow($row,columnIndex){const that=this,$cells=$row.find("> td");let $cell,$result;for(let i=columnIndex=columnIndex||0;i<$cells.length;++i)if($cell=$cells.eq(i),that._isCellValid($cell)){$result=$cell;break}return $result},_getNextCell(keyCode,elementType,cellPosition){const focusedCellPosition=cellPosition||this._focusedCellPosition,isRowFocusType=this.isRowFocusType(),includeCommandCells=isRowFocusType||["next","previous"].includes(keyCode);let $cell,$row;if(this._focusedView&&focusedCellPosition){const newFocusedCellPosition=this._getNewPositionByCode(focusedCellPosition,elementType,keyCode);$cell=(0,renderer.Z)(this._getCell(newFocusedCellPosition));const isLastCellOnDirection="previous"===keyCode?this._isFirstValidCell(newFocusedCellPosition):this._isLastValidCell(newFocusedCellPosition);if(isElementDefined($cell)&&!this._isCellValid($cell)&&this._isCellInRow(newFocusedCellPosition,includeCommandCells)&&!isLastCellOnDirection&&($cell=isRowFocusType?this.getFirstValidCellInRow($cell.parent(),newFocusedCellPosition.columnIndex):this._getNextCell(keyCode,"cell",newFocusedCellPosition)),$row=isElementDefined($cell)&&$cell.parent(),this._hasSkipRow($row)){const rowIndex=this._getRowIndex($row);if(this._isLastRow(rowIndex))return null;$cell=this._getNextCell(keyCode,"row",{columnIndex:focusedCellPosition.columnIndex,rowIndex})}return isElementDefined($cell)?$cell:null}return null},_startEditing(eventArgs,fastEditingKey){const focusedCellPosition=this._focusedCellPosition,visibleRowIndex=this.getVisibleRowIndex(),visibleColumnIndex=this.getVisibleColumnIndex(),row=this._dataController.items()[visibleRowIndex],column=this._columnsController.getVisibleColumns()[visibleColumnIndex];this._isAllowEditing(row,column)&&(this._isRowEditMode()?this._editingController.editRow(visibleRowIndex):focusedCellPosition&&this._startEditCell(eventArgs,fastEditingKey))},_isAllowEditing(row,column){return this._editingController.allowUpdating({row})&&column&&column.allowEditing},_editFocusedCell(){const rowIndex=this.getVisibleRowIndex(),colIndex=this.getVisibleColumnIndex();return this._editingController.editCell(rowIndex,colIndex)},_startEditCell(eventArgs,fastEditingKey){this._fastEditingStarted=(0,utils_type.$K)(fastEditingKey);const editResult=this._editFocusedCell();if(this._isFastEditingStarted())if(!0===editResult)this._editingCellHandler(eventArgs,fastEditingKey);else if(editResult&&editResult.done){const editorValue="delete"!==fastEditingKey?fastEditingKey:"";editResult.done((()=>this._editingCellHandler(eventArgs,editorValue)))}},_editingCellHandler(eventArgs,editorValue){var _a,_b;const $input=this._getFocusedCell().find(INTERACTIVE_ELEMENTS_SELECTOR).eq(0),keyDownEvent=(0,events_utils.yM)(eventArgs,{type:"keydown",target:$input.get(0)}),keyPressEvent=(0,events_utils.yM)(eventArgs,{type:"keypress",target:$input.get(0)}),inputEvent=(0,events_utils.yM)(eventArgs,{type:"input",target:$input.get(0)});if(inputEvent.originalEvent&&(inputEvent.originalEvent=(0,events_utils.yM)(inputEvent.originalEvent,{data:editorValue})),null===(_b=(_a=$input.get(0)).select)||void 0===_b||_b.call(_a),events_engine.Z.trigger($input,keyDownEvent),!keyDownEvent.isDefaultPrevented()&&(events_engine.Z.trigger($input,keyPressEvent),!keyPressEvent.isDefaultPrevented())){const timeout=browser.Z.mozilla?25:0;setTimeout((()=>{$input.val(editorValue);const $widgetContainer=$input.closest(".dx-widget");events_engine.Z.off($widgetContainer,"focusout"),events_engine.Z.one($widgetContainer,"focusout",(()=>{events_engine.Z.trigger($input,"change")})),events_engine.Z.trigger($input,inputEvent)}),timeout)}},_fireFocusChangingEvents($event,$cell,fireRowEvent,isHighlighted){let args={};const cellPosition=this._getCellPosition($cell)||{};return this.isCellFocusType()&&(args=this._fireFocusedCellChanging($event,$cell,isHighlighted),args.cancel||(cellPosition.columnIndex=args.newColumnIndex,cellPosition.rowIndex=args.newRowIndex,isHighlighted=args.isHighlighted,$cell=(0,renderer.Z)(this._getCell(cellPosition)))),!args.cancel&&fireRowEvent&&$cell&&(args=this._fireFocusedRowChanging($event,$cell.parent()),args.cancel||(cellPosition.rowIndex=args.newRowIndex,args.isHighlighted=isHighlighted)),args.$newCellElement=(0,renderer.Z)(this._getCell(cellPosition)),args.$newCellElement.length||(args.$newCellElement=$cell),args},_fireFocusedCellChanging($event,$cellElement,isHighlighted){const prevCellIndex=this.option("focusedColumnIndex"),prevRowIndex=this.option("focusedRowIndex"),cellPosition=this._getCellPosition($cellElement),columnIndex=cellPosition?cellPosition.columnIndex:-1,rowIndex=cellPosition?cellPosition.rowIndex:-1,args={cellElement:$cellElement,prevColumnIndex:prevCellIndex,prevRowIndex,newColumnIndex:columnIndex,newRowIndex:rowIndex,rows:this._dataController.getVisibleRows(),columns:this._columnsController.getVisibleColumns(),event:$event,isHighlighted:isHighlighted||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",args),args.newColumnIndex===columnIndex&&args.newRowIndex===rowIndex||(args.$newCellElement=(0,renderer.Z)(this._getCell({columnIndex:args.newColumnIndex,rowIndex:args.newRowIndex}))),args.cancel&&(this._canceledCellPosition={rowIndex,columnIndex}),args},_fireFocusedCellChanged($cellElement,prevCellIndex,prevRowIndex){const that=this,dataController=that._dataController,columnIndex=that.getView("rowsView").getCellIndex($cellElement),rowIndex=this._getRowIndex($cellElement&&$cellElement.parent()),localRowIndex=Math.min(rowIndex-dataController.getRowIndexOffset(),dataController.items().length-1),isEditingCell=that._editingController.isEditCell(localRowIndex,columnIndex),row=dataController.items()[localRowIndex];isEditingCell||prevCellIndex===columnIndex&&prevRowIndex===rowIndex||that.executeAction("onFocusedCellChanged",{cellElement:$cellElement,columnIndex,rowIndex,row,column:that._columnsController.getVisibleColumns()[columnIndex]})},_fireFocusedRowChanging(eventArgs,$newFocusedRow){const newRowIndex=this._getRowIndex($newFocusedRow),dataController=this._dataController,prevFocusedRowIndex=this.option("focusedRowIndex"),loadingOperationTypes=dataController.loadingOperationTypes(),args={rowElement:$newFocusedRow,prevRowIndex:prevFocusedRowIndex,newRowIndex,event:eventArgs,rows:dataController.getVisibleRows(),cancel:!1};return!dataController||dataController.isLoading()&&(loadingOperationTypes.reload||loadingOperationTypes.paging)?(args.cancel=!0,args):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",args),args.cancel||args.newRowIndex===newRowIndex||(args.resetFocusedRow=args.newRowIndex<0,args.resetFocusedRow||this.setFocusedRowIndex(args.newRowIndex),args.rowIndexChanged=!0)),args)},_fireFocusedRowChanged($rowElement){let row;const focusedRowKey=this.option("focusedRowKey"),focusController=this.getController("focus"),focusedRowIndex=null==focusController?void 0:focusController.getFocusedRowIndexByKey(focusedRowKey);if(this.option("focusedRowEnabled")){if(focusedRowIndex>=0){const dataController=this._dataController;row=focusedRowIndex>=0&&dataController.getVisibleRows()[focusedRowIndex-dataController.getRowIndexOffset()]}this.executeAction("onFocusedRowChanged",{rowElement:$rowElement,rowIndex:focusedRowIndex,row})}},_isEventInCurrentGrid(event){return module_utils.isElementInCurrentGrid(this,(0,renderer.Z)(event.target))},_isRowEditMode(){const editMode=this._editingController.getEditMode();return"row"===editMode||"form"===editMode},_isCellEditMode(){const editMode=this._editingController.getEditMode();return"cell"===editMode||"batch"===editMode},_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")},_getInteractiveElement($cell,isLast){const $focusedElement=$cell.find(INTERACTIVE_ELEMENTS_SELECTOR).filter(":visible");return isLast?$focusedElement.last():$focusedElement.first()},_applyTabIndexToElement($element){const tabIndex=this.option("tabIndex")||0;$element.attr("tabindex",(0,utils_type.$K)(tabIndex)?tabIndex:0)},_getCell(cellPosition){if(this._focusedView&&cellPosition){const rowIndexOffset=this._dataController.getRowIndexOffset(),column=this._columnsController.getVisibleColumns(null,!0)[cellPosition.columnIndex],columnIndexOffset=column&&column.fixed?this._getFixedColumnIndexOffset(column):this._columnsController.getColumnIndexOffset(),rowIndex=cellPosition.rowIndex>=0?cellPosition.rowIndex-rowIndexOffset:-1,columnIndex=cellPosition.columnIndex>=0?cellPosition.columnIndex-columnIndexOffset:-1;return this._focusedView.getCell({rowIndex,columnIndex})}},_getRowIndex($row){let rowIndex=this.getView("rowsView").getRowIndex($row);return rowIndex>=0&&(rowIndex+=this._dataController.getRowIndexOffset()),rowIndex},_hasSkipRow($row){const row=$row&&$row.get(0);return row&&("none"===row.style.display||$row.hasClass(this.addWidgetPrefix("group-footer"))||isDetailRow($row)&&!$row.hasClass(this.addWidgetPrefix("edit-form")))},_allowEditingOnEnterKey(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")},_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")},_getDirectionCodeByKey(key){let directionCode;switch(key){case"upArrow":directionCode="prevRow";break;case"downArrow":directionCode="nextRow";break;case"leftArrow":directionCode=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":directionCode=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return directionCode},_isVirtualScrolling(){const scrollingMode=this.option("scrolling.mode");return"virtual"===scrollingMode||"infinite"===scrollingMode},_isVirtualRowRender(){return this._isVirtualScrolling()||module_utils.isVirtualRowRendering(this)},_isVirtualColumnRender(){return"virtual"===this.option("scrolling.columnRenderingMode")},_scrollBy(left,top,rowIndex,$event){const that=this,scrollable=this.getView("rowsView").getScrollable();if(that._focusedCellPosition){const scrollHandler=function(){scrollable.off("scroll",scrollHandler),setTimeout(that.restoreFocusableElement.bind(that,rowIndex,$event))};scrollable.on("scroll",scrollHandler)}return scrollable.scrollBy({left,top})},_isInsideEditForm(element){const $editForm=(0,renderer.Z)(element).closest("."+this.addWidgetPrefix("edit-form"));return $editForm.length&&this.elementIsInsideGrid($editForm)},_isMasterDetailCell(element){const $masterDetailCell=(0,renderer.Z)(element).closest(".dx-master-detail-cell");return $masterDetailCell.length&&this.elementIsInsideGrid($masterDetailCell)},_processNextCellInMasterDetail($nextCell){!this._isInsideEditForm($nextCell)&&$nextCell&&this._applyTabIndexToElement($nextCell)},_handleTabKeyOnMasterDetailCell(target,direction){if(this._isMasterDetailCell(target)){this._updateFocusedCellPosition((0,renderer.Z)(target),direction);const $nextCell=this._getNextCell(direction,"row");return this._processNextCellInMasterDetail($nextCell,(0,renderer.Z)(target)),!0}return!1},_getElementType:target=>(0,renderer.Z)(target).is("tr")?"row":"cell",_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted},_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length},_isCellInRow(cellPosition,includeCommandCells){const{columnIndex}=cellPosition,visibleColumnsCount=this._getVisibleColumnCount();return includeCommandCells?columnIndex>=0&&columnIndex<=visibleColumnsCount-1:columnIndex>0&&columnIndex<visibleColumnsCount-1},_isCellElement:$element=>$element.length&&"TD"===$element[0].tagName,_getCellElementFromTarget(target){const elementType=this._getElementType(target),$targetElement=(0,renderer.Z)(target);let $cell;return $cell="cell"===elementType?$targetElement.closest(".dx-row > td"):$targetElement.children().not(".dx-command-expand").first(),$cell},_getRowsViewElement(){const rowsView=this.getView("rowsView");return rowsView&&rowsView.element()},isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")},_processCanceledEditCellPosition(rowIndex,columnIndex){if(this._canceledCellPosition){const isCanceled=this._canceledCellPosition.rowIndex===rowIndex&&this._canceledCellPosition.columnIndex===columnIndex;return this._canceledCellPosition=null,isCanceled}},updateFocusedRowIndex(){const dataController=this._dataController,visibleRowIndex=this.getVisibleRowIndex(),visibleItems=dataController.items(),lastVisibleIndex=visibleItems.length?visibleItems.length-1:-1,rowIndexOffset=dataController.getRowIndexOffset();lastVisibleIndex>=0&&visibleRowIndex>lastVisibleIndex&&this.setFocusedRowIndex(lastVisibleIndex+rowIndexOffset)}},keyboardNavigationModule={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:modules.ViewController.inherit(keyboardNavigationMembers)},extenders:{views:{rowsView:{_rowClick(e){const editRowIndex=this.getController("editing").getEditRowIndex(),keyboardController=this.getController("keyboardNavigation"),isKeyboardEnabled=keyboardController.isKeyboardEnabled();editRowIndex===e.rowIndex&&keyboardController.setCellFocusType();(isMobile()||!isKeyboardEnabled)&&this.option("focusedRowEnabled")&&this._triggerPointerDownEventHandler(e,!isKeyboardEnabled),this.callBase.apply(this,arguments)},_triggerPointerDownEventHandler(e,force){const{originalEvent}=e.event;if(originalEvent){const keyboardController=this.getController("keyboardNavigation"),$cell=(0,renderer.Z)(originalEvent.target),columnIndex=this.getCellIndex($cell),column=this.getController("columns").getVisibleColumns()[columnIndex],row=this.getController("data").items()[e.rowIndex];if(keyboardController._isAllowEditing(row,column)||force){const eventArgs=(0,events_utils.yM)(originalEvent,{currentTarget:originalEvent.target});keyboardController._pointerEventHandler(eventArgs)}}},renderFocusState(params){const{preventScroll,pageSizeChanged}=null!=params?params:{},keyboardController=this.getController("keyboardNavigation"),$rowsViewElement=this.element();$rowsViewElement&&!(0,selectors.si)($rowsViewElement)&&$rowsViewElement.attr("tabindex",null),pageSizeChanged&&keyboardController.updateFocusedRowIndex();let rowIndex=keyboardController.getVisibleRowIndex();(!(0,utils_type.$K)(rowIndex)||rowIndex<0)&&(rowIndex=0);const cellElements=this.getCellElements(rowIndex);keyboardController.isKeyboardEnabled()&&cellElements.length&&this.updateFocusElementTabIndex(cellElements,preventScroll)},updateFocusElementTabIndex(cellElements){const keyboardController=this.getController("keyboardNavigation"),$row=cellElements.eq(0).parent();if(module_isGroupRow($row))keyboardController._applyTabIndexToElement($row);else{let columnIndex=keyboardController.getColumnIndex();(!(0,utils_type.$K)(columnIndex)||columnIndex<0)&&(columnIndex=0),this._updateFocusedCellTabIndex(cellElements,columnIndex)}},_updateFocusedCellTabIndex(cellElements,columnIndex){const keyboardController=this.getController("keyboardNavigation"),cellElementsLength=cellElements?cellElements.length:-1,updateCellTabIndex=function($cell){const isMasterDetailCell=keyboardController._isMasterDetailCell($cell),isValidCell=keyboardController._isCellValid($cell);if(!isMasterDetailCell&&isValidCell&&keyboardController._isCellElement($cell))return keyboardController._applyTabIndexToElement($cell),keyboardController.setCellFocusType(),!0},$cell=GridCoreKeyboardNavigationDom_getCellToFocus(cellElements,columnIndex);if($cell.length)updateCellTabIndex($cell);else{cellElementsLength<=columnIndex&&(columnIndex=cellElementsLength-1);for(let i=columnIndex;i<cellElementsLength&&!updateCellTabIndex((0,renderer.Z)(cellElements[i]));++i);}},renderDelayedTemplates(change){this.callBase.apply(this,arguments),this._renderFocusByChange(change)},_renderFocusByChange(change){const{operationTypes,repaintChangesOnly}=null!=change?change:{},{fullReload,pageSize}=null!=operationTypes?operationTypes:{};if(!change||!repaintChangesOnly||fullReload||pageSize){const preventScroll=function shouldPreventScroll(that){const keyboardController=that.getController("keyboardNavigation");return!!keyboardController._isVirtualScrolling()&&that.option("focusedRowIndex")===keyboardController.getRowIndex()}(this);this.renderFocusState({preventScroll,pageSizeChanged:pageSize})}},_renderCore(change){const deferred=this.callBase.apply(this,arguments);return this._renderFocusByChange(change),deferred},_editCellPrepared($cell){const editorInstance=this._getEditorInstance($cell),keyboardController=this.getController("keyboardNavigation"),isEditingNavigationMode=keyboardController&&keyboardController._isFastEditingStarted();editorInstance&&isEditingNavigationMode&&this._handleEditingNavigationMode(editorInstance),this.callBase.apply(this,arguments)},_handleEditingNavigationMode(editorInstance){["downArrow","upArrow"].forEach((keyName=>{const originalKeyHandler=editorInstance._supportedKeys()[keyName];editorInstance.registerKeyHandler(keyName,(e=>{if("true"===editorInstance._input().attr("aria-expanded"))return originalKeyHandler&&originalKeyHandler.call(editorInstance,e)}))})),editorInstance.registerKeyHandler("leftArrow",common.ZT),editorInstance.registerKeyHandler("rightArrow",common.ZT);"dxDateBox"===editorInstance.NAME&&editorInstance.option("useMaskBehavior")&&editorInstance.registerKeyHandler("enter",common.ZT)},_getEditorInstance($cell){const $editor=$cell.find(".dx-texteditor").eq(0);return module_utils.getWidgetInstance($editor)}}},controllers:{editing:{editCell(rowIndex,columnIndex){const keyboardController=this.getController("keyboardNavigation");if(keyboardController._processCanceledEditCellPosition(rowIndex,columnIndex))return!1;const isCellEditing=this.callBase(rowIndex,columnIndex);return isCellEditing&&keyboardController.setupFocusedView(),isCellEditing},editRow(rowIndex){const keyboardController=this.getController("keyboardNavigation"),visibleColumnIndex=keyboardController.getVisibleColumnIndex(),column=this._columnsController.getVisibleColumns()[visibleColumnIndex];(column&&column.type||"form"===this.option("editing.mode"))&&keyboardController._resetFocusedCell(),this.callBase(rowIndex)},addRow(parentKey){const keyboardController=this.getController("keyboardNavigation");return keyboardController.setupFocusedView(),keyboardController.setCellFocusType(),this.callBase.apply(this,arguments)},getFocusedCellInRow(rowIndex){const keyboardNavigationController=this.getController("keyboardNavigation");let $cell=this.callBase(rowIndex);if(keyboardNavigationController.isKeyboardEnabled()&&keyboardNavigationController._focusedCellPosition.rowIndex===rowIndex){const $focusedCell=keyboardNavigationController._getFocusedCell();isElementDefined($focusedCell)&&!$focusedCell.hasClass("dx-command-edit")&&($cell=$focusedCell)}return $cell},_processCanceledEditingCell(){this.closeEditCell().done((()=>{this.getController("keyboardNavigation")._updateFocus()}))},init(){this.callBase(),this._keyboardNavigationController=this.getController("keyboardNavigation")},closeEditCell(){const keyboardNavigation=this._keyboardNavigationController;keyboardNavigation._fastEditingStarted=!1;const result=this.callBase.apply(this,arguments);return keyboardNavigation._updateFocus(),result},_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,this.callBase.apply(this,arguments)},_isEditingStart(){const keyboardNavigation=this.getController("keyboardNavigation"),cancel=this.callBase.apply(this,arguments);if(cancel&&!keyboardNavigation._isNeedFocus){const $cell=keyboardNavigation._getFocusedCell();keyboardNavigation._focus($cell,!0)}return cancel}},data:{_correctRowIndices(getRowIndexCorrection){const keyboardNavigationController=this.getController("keyboardNavigation"),editorFactory=this.getController("editorFactory"),focusedCellPosition=keyboardNavigationController._focusedCellPosition;if(this.callBase.apply(this,arguments),focusedCellPosition&&focusedCellPosition.rowIndex>=0){const focusedRowIndexCorrection=getRowIndexCorrection(focusedCellPosition.rowIndex);focusedRowIndexCorrection&&(focusedCellPosition.rowIndex+=focusedRowIndexCorrection,editorFactory.refocus())}},getMaxRowIndex(){let result=this.items().length-1;const virtualItemsCount=this.virtualItemsCount();if(virtualItemsCount){result+=this.getRowIndexOffset()+virtualItemsCount.end}return result}},adaptiveColumns:{_showHiddenCellsInView({viewName,$cells,isCommandColumn}){this.callBase.apply(this,arguments),"columnHeadersView"===viewName&&!isCommandColumn&&$cells.each(((_,cellElement)=>{const $cell=(0,renderer.Z)(cellElement);isCellInHeaderRow($cell)&&$cell.attr("tabindex",0)}))},_hideVisibleCellInView({viewName,$cell,isCommandColumn}){this.callBase.apply(this,arguments),"columnHeadersView"===viewName&&!isCommandColumn&&isCellInHeaderRow($cell)&&$cell.removeAttr("tabindex")}}}}};function foreachColumnInfo(info,callback,rowIndex,offsets,columnCount,lastProcessedIndexes){lastProcessedIndexes=lastProcessedIndexes||[],(offsets=offsets||[])[rowIndex=rowIndex||0]=offsets[rowIndex]||0;var colIndex,row=info[rowIndex],startIndex=lastProcessedIndexes[rowIndex]+1||0,processedColumnCount=0;if(row){for(colIndex=startIndex;colIndex<row.length;colIndex++){var cell=row[colIndex],visibleIndex=colIndex+offsets[rowIndex],colspan=cell.colspan||1;if(foreachColumnInfo(info,callback,rowIndex+(cell.rowspan||1),offsets,colspan,lastProcessedIndexes),offsets[rowIndex]+=colspan-1,processedColumnCount+=colspan,cell.rowspan)for(var i=rowIndex+1;i<rowIndex+cell.rowspan;i++)offsets[i]=offsets[i]||0,offsets[i]+=cell.colspan||1;if(!1===callback(cell,visibleIndex,rowIndex,colIndex))break;if(void 0!==columnCount&&processedColumnCount>=columnCount)break}lastProcessedIndexes[rowIndex]=colIndex}}function createColumnsInfo(info,startIndex,endIndex){var newInfo=[];foreachColumnInfo(info,(function(columnInfo,visibleIndex,rowIndex){var colspan,cell=columnInfo,cellColspan=cell.colspan||1,isVisible=visibleIndex+cellColspan-1>=startIndex&&visibleIndex<endIndex;if(newInfo[rowIndex]=newInfo[rowIndex]||[],isVisible)visibleIndex<startIndex?(colspan=cellColspan-(startIndex-visibleIndex),visibleIndex=startIndex):colspan=cellColspan,visibleIndex+colspan>endIndex&&(colspan=endIndex-visibleIndex),colspan!==cellColspan&&(cell=(0,extend.l)({},cell,{colspan})),newInfo[rowIndex].push(cell);else if(visibleIndex>endIndex)return!1}));for(var i=0;i<newInfo.length;i++)newInfo[i]=newInfo[i]||[];return newInfo}module_core.registerModule("keyboardNavigation",(0,extend.l)(!0,{},keyboardNavigationModule,{extenders:{controllers:{keyboardNavigation:{_leftRightKeysHandler(eventArgs,isEditing){const rowIndex=this.getVisibleRowIndex(),dataController=this._dataController;if(!eventArgs.ctrl)return this.callBase.apply(this,arguments);{const directionCode=this._getDirectionCodeByKey(eventArgs.keyName),key=dataController.getKeyByRowIndex(rowIndex);"nextInRow"===directionCode?dataController.expandRow(key):dataController.collapseRow(key)}}}}}}));var ui_grid_core_virtual_columns_VirtualScrollingRowsViewExtender={_resizeCore:function(){this.callBase.apply(this,arguments),this._columnsController.resize()},_handleScroll:function(e){var scrollable=this.getScrollable(),left=e.scrollOffset.left;this.callBase.apply(this,arguments),this.option("rtlEnabled")&&scrollable&&(left=(0,size.dz)(scrollable.$content())-(0,size.dz)(scrollable.$element())-left),this._columnsController.setScrollPosition(left)}},ColumnsControllerExtender=function(){var getWidths=function(columns){return columns.map((column=>column.visibleWidth||parseFloat(column.width)||50))},members={init:function(){this.callBase.apply(this,arguments),this._beginPageIndex=null,this._endPageIndex=null,this._position=0,this._virtualVisibleColumns={}},resetColumnsCache:function(){this.callBase(),this._virtualVisibleColumns={}},getBeginPageIndex:function(position){for(var visibleColumns=this.getVisibleColumns(void 0,!0),widths=getWidths(visibleColumns),currentPosition=0,index=0;index<widths.length;index++){if(currentPosition>=position)return Math.floor(index/this.getColumnPageSize());currentPosition+=widths[index]}return 0},getTotalWidth:function(){var width=this.option("width");return"number"==typeof width?width:this.getController("resizing")._lastWidth||(0,size.Y_)(this.component.$element())},getEndPageIndex:function(position){var visibleColumns=this.getVisibleColumns(void 0,!0),widths=getWidths(visibleColumns),currentPosition=0;position+=this.getTotalWidth();for(var index=0;index<widths.length;index++){if(currentPosition>=position)return Math.ceil(index/this.getColumnPageSize());currentPosition+=widths[index]}return Math.ceil(widths.length/this.getColumnPageSize())},getColumnPageSize:function(){return this.option("scrolling.columnPageSize")},_fireColumnsChanged:function(){var date=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2}}),this._renderTime=new Date-date},getScrollingTimeout:function(){var renderingThreshold=this.option("scrolling.columnRenderingThreshold"),renderAsync=this.option("scrolling.renderAsync"),scrollingTimeout=0;return(!(0,utils_type.$K)(renderAsync)&&this._renderTime>renderingThreshold||renderAsync)&&(scrollingTimeout=this.option("scrolling.timeout")),scrollingTimeout},setScrollPosition:function(position){var scrollingTimeout=this.getScrollingTimeout();scrollingTimeout>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout((()=>{this._setScrollPositionCore(position)}),scrollingTimeout)):this._setScrollPositionCore(position)},isVirtualMode:function(){return(0,utils_window.Ym)()&&"virtual"===this.option("scrolling.columnRenderingMode")},resize:function(){this._setScrollPositionCore(this._position)},_setScrollPositionCore:function(position){if(this.isVirtualMode()){var beginPageIndex=this.getBeginPageIndex(position),endPageIndex=this.getEndPageIndex(position),needColumnsChanged=position<this._position?this._beginPageIndex>beginPageIndex:this._endPageIndex<endPageIndex;this._position=position,needColumnsChanged&&(this._beginPageIndex=beginPageIndex,this._endPageIndex=endPageIndex,this._fireColumnsChanged())}},getFixedColumns:function(rowIndex,isBase){var fixedColumns=this.callBase(rowIndex);if(this.isVirtualMode()&&!isBase&&fixedColumns.length){var transparentColumnIndex=fixedColumns.map((c=>c.command)).indexOf("transparent");return fixedColumns[transparentColumnIndex].colspan=this.getVisibleColumns().length-this.callBase().length+1,fixedColumns}return fixedColumns},_compileVisibleColumns:function(rowIndex,isBase){var _this$_columns;if(isBase||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return this.callBase(rowIndex);null===(_this$_columns=this._columns)||void 0===_this$_columns||!_this$_columns.length||(0,utils_type.$K)(this._beginPageIndex)||(0,utils_type.$K)(this._endPageIndex)||(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));var beginPageIndex=this._beginPageIndex,endPageIndex=this._endPageIndex,visibleColumnsHash=rowIndex+"-"+beginPageIndex+"-"+endPageIndex;if(this._virtualVisibleColumns[visibleColumnsHash])return this._virtualVisibleColumns[visibleColumnsHash];var visibleColumns=this.callBase(),rowCount=this.getRowCount(),pageSize=this.getColumnPageSize(),startIndex=beginPageIndex*pageSize,endIndex=endPageIndex*pageSize,fixedColumns=this.getFixedColumns(void 0,!0),transparentColumnIndex=fixedColumns.map((c=>c.command)).indexOf("transparent"),beginFixedColumnCount=fixedColumns.length?transparentColumnIndex:0,beginFixedColumns=visibleColumns.slice(0,beginFixedColumnCount),beginColumns=visibleColumns.slice(beginFixedColumnCount,startIndex),beginWidth=getWidths(beginColumns).reduce(((a,b)=>a+b),0);beginWidth||(startIndex=0);var endFixedColumnCount=fixedColumns.length?fixedColumns.length-transparentColumnIndex-1:0,endFixedColumns=visibleColumns.slice(visibleColumns.length-endFixedColumnCount),endColumns=visibleColumns.slice(endIndex,visibleColumns.length-endFixedColumnCount),endWidth=getWidths(endColumns).reduce(((a,b)=>a+b),0);if(endWidth||(endIndex=visibleColumns.length),rowCount>1&&"number"==typeof rowIndex){for(var columnsInfo=[],i=0;i<rowCount;i++)columnsInfo.push(this.callBase(i));beginFixedColumns=createColumnsInfo(columnsInfo,0,beginFixedColumns.length)[rowIndex]||[],endFixedColumns=createColumnsInfo(columnsInfo,visibleColumns.length-endFixedColumns.length,visibleColumns.length)[rowIndex]||[],visibleColumns=createColumnsInfo(columnsInfo,startIndex,endIndex)[rowIndex]||[]}else visibleColumns=visibleColumns.slice(startIndex,endIndex);return beginWidth&&(visibleColumns.unshift({command:"virtual",width:beginWidth}),visibleColumns=beginFixedColumns.concat(visibleColumns)),endWidth&&(visibleColumns.push({command:"virtual",width:endWidth}),visibleColumns=visibleColumns.concat(endFixedColumns)),this._virtualVisibleColumns[visibleColumnsHash]=visibleColumns,visibleColumns},getColumnIndexOffset:function(){var offset=0;if(this._beginPageIndex>0){var transparentColumnIndex=this.getFixedColumns().map((c=>c.command)).indexOf("transparent"),leftFixedColumnCount=transparentColumnIndex>=0?transparentColumnIndex:0;offset=this._beginPageIndex*this.getColumnPageSize()-leftFixedColumnCount-1}return offset>0?offset:0},dispose:function(){clearTimeout(this._changedTimeout),this.callBase.apply(this,arguments)}};return members}(),virtualColumnsModule={defaultOptions:function(){return{scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}},extenders:{controllers:{columns:ColumnsControllerExtender},views:{columnHeadersView:{_renderCore:function(){var deferred=this.callBase.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),deferred}},rowsView:ui_grid_core_virtual_columns_VirtualScrollingRowsViewExtender}}};module_core.registerModule("virtualColumns",virtualColumnsModule);var UiGridCoreFocusUtils_getSortFilterValue=(sortInfo,rowData,_ref)=>{var{isRemoteFiltering,dateSerializationFormat,getSelector}=_ref,{selector}=sortInfo,getter=(0,utils_type.mf)(selector)?selector:getSelector(selector),rawValue=getter?getter(rowData):rowData[selector];return{getter,rawValue,safeValue:isRemoteFiltering&&(0,utils_type.J_)(rawValue)?date_serialization.serializeDate(rawValue,dateSerializationFormat):rawValue}},focusModule={defaultOptions:function(){return{focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}},controllers:{focus:ui_grid_core_modules.ViewController.inherit({init:function(){this._dataController=this.getController("data"),this._keyboardController=this.getController("keyboardNavigation"),this.component._optionsByReference.focusedRowKey=!0},optionChanged:function(args){if("focusedRowIndex"===args.name){var focusedRowKey=this.option("focusedRowKey");this._focusRowByIndex(args.value),this._triggerFocusedRowChangedIfNeed(focusedRowKey,args.value),args.handled=!0}else if("focusedRowKey"===args.name){if(args.handled=!0,Array.isArray(args.value)&&JSON.stringify(args.value)===JSON.stringify(args.previousValue))return;var focusedRowIndex=this.option("focusedRowIndex");this._focusRowByKey(args.value),this._triggerFocusedRowChangedIfNeed(args.value,focusedRowIndex)}else"focusedColumnIndex"===args.name||"focusedRowEnabled"===args.name||"autoNavigateToFocusedRow"===args.name?args.handled=!0:this.callBase(args)},_triggerFocusedRowChangedIfNeed:function(focusedRowKey,focusedRowIndex){if(focusedRowIndex===this.getFocusedRowIndexByKey(focusedRowKey)){var rowIndex=this._dataController.getRowIndexByKey(focusedRowKey);if(rowIndex>=0){var $rowElement=(0,renderer.Z)(this.getView("rowsView").getRowElement(rowIndex));this.getController("keyboardNavigation")._fireFocusedRowChanged($rowElement,focusedRowIndex)}}},isAutoNavigateToFocusedRow:function(){return"infinite"!==this.option("scrolling.mode")&&this.option("autoNavigateToFocusedRow")},_focusRowByIndex:function(index,operationTypes){this.option("focusedRowEnabled")&&((index=void 0!==index?index:this.option("focusedRowIndex"))<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(index,operationTypes))},_focusRowByIndexCore:function(index,operationTypes){var dataController=this.getController("data"),pageSize=dataController.pageSize(),setKeyByIndex=()=>{if(this._isValidFocusedRowIndex(index)){var rowIndex=index-dataController.getRowIndexOffset(!0);if(!operationTypes||operationTypes.paging&&!operationTypes.filtering){var lastItemIndex=dataController._getLastItemIndex();rowIndex=Math.min(rowIndex,lastItemIndex)}var focusedRowKey=dataController.getKeyByRowIndex(rowIndex,!0);(0,utils_type.$K)(focusedRowKey)&&!this.isRowFocused(focusedRowKey)&&this.option("focusedRowKey",focusedRowKey)}};if(pageSize>=0)if(this._isLocalRowIndex(index))setKeyByIndex();else{var pageIndex=Math.floor(index/dataController.pageSize());(0,utils_deferred.gx)(dataController.pageIndex(pageIndex),dataController.waitReady()).done((()=>{setKeyByIndex()}))}},_isLocalRowIndex(index){var dataController=this.getController("data");if(this.getController("keyboardNavigation")._isVirtualScrolling()){var pageIndex=Math.floor(index/dataController.pageSize()),virtualItems=dataController.virtualItemsCount(),virtualItemsBegin=virtualItems?virtualItems.begin:-1,visibleRowsCount=dataController.getVisibleRows().length+dataController.getRowIndexOffset(),visiblePagesCount=Math.ceil(visibleRowsCount/dataController.pageSize());return virtualItemsBegin<=index&&visiblePagesCount>pageIndex}return!0},_setFocusedRowKeyByIndex:function(index){var dataController=this.getController("data");if(this._isValidFocusedRowIndex(index)){var rowIndex=Math.min(index-dataController.getRowIndexOffset(),dataController.items().length-1),focusedRowKey=dataController.getKeyByRowIndex(rowIndex);(0,utils_type.$K)(focusedRowKey)&&!this.isRowFocused(focusedRowKey)&&this.option("focusedRowKey",focusedRowKey)}},_focusRowByKey:function(key){(0,utils_type.$K)(key)?this._navigateToRow(key,!0):this._resetFocusedRow()},_resetFocusedRow:function(){var focusedRowKey=this.option("focusedRowKey"),isFocusedRowKeyDefined=(0,utils_type.$K)(focusedRowKey);if(isFocusedRowKeyDefined||!(this.option("focusedRowIndex")<0)){var keyboardController=this.getController("keyboardNavigation");isFocusedRowKeyDefined&&this.option("focusedRowKey",null),keyboardController.setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this.getController("data").updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),keyboardController._fireFocusedRowChanged(void 0,-1)}},_isValidFocusedRowIndex:function(rowIndex){var row=this.getController("data").getVisibleRows()[rowIndex];return!row||"data"===row.rowType||"group"===row.rowType},publicMethods:function(){return["navigateToRow","isRowFocused"]},navigateToRow:function(key){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(key)},_navigateToRow:function(key,needFocusRow){var that=this,dataController=that.getController("data"),isAutoNavigate=that.isAutoNavigateToFocusedRow(),d=new utils_deferred.BH;if(void 0===key||!dataController.dataSource())return d.reject().promise();var rowIndexByKey=that.getFocusedRowIndexByKey(key);return!isAutoNavigate&&needFocusRow||rowIndexByKey>=0?that._navigateTo(key,d,needFocusRow):dataController.getPageIndexByKey(key).done((function(pageIndex){pageIndex<0?d.resolve(-1):pageIndex===dataController.pageIndex()?dataController.reload().done((function(){that.isRowFocused(key)&&dataController.getRowIndexByKey(key)>=0?d.resolve(that.getFocusedRowIndexByKey(key)):that._navigateTo(key,d,needFocusRow)})).fail(d.reject):dataController.pageIndex(pageIndex).done((function(){that._navigateTo(key,d,needFocusRow)})).fail(d.reject)})).fail(d.reject),d.promise()},_navigateTo:function(key,deferred,needFocusRow){var visibleRowIndex=this.getController("data").getRowIndexByKey(key),isVirtualRowRenderingMode=ui_grid_core_utils.isVirtualRowRendering(this);this.isAutoNavigateToFocusedRow()&&isVirtualRowRenderingMode&&visibleRowIndex<0?this._navigateToVirtualRow(key,deferred,needFocusRow):this._navigateToVisibleRow(key,deferred,needFocusRow)},_navigateToVisibleRow:function(key,deferred,needFocusRow){if(needFocusRow)this._triggerUpdateFocusedRow(key,deferred);else{var focusedRowIndex=this.getFocusedRowIndexByKey(key);this.getView("rowsView").scrollToRowElement(key,deferred).done((function(){deferred.resolve(focusedRowIndex)}))}},_navigateToVirtualRow:function(key,deferred,needFocusRow){var that=this,dataController=this.getController("data"),rowsScrollController=dataController._rowsScrollController,rowIndex=ui_grid_core_utils.getIndexByKey(key,dataController.items(!0)),scrollable=that.getView("rowsView").getScrollable();if(rowsScrollController&&scrollable&&rowIndex>=0){var focusedRowIndex=rowIndex+dataController.getRowIndexOffset(!0),offset=rowsScrollController.getItemOffset(focusedRowIndex);that.component.on("contentReady",(function triggerUpdateFocusedRow(){that.component.off("contentReady",triggerUpdateFocusedRow),needFocusRow?that._triggerUpdateFocusedRow(key,deferred):deferred.resolve(focusedRowIndex)})),this.getView("rowsView").scrollTopPosition(offset)}else deferred.resolve(-1)},_triggerUpdateFocusedRow:function(key,deferred){var d,dataController=this.getController("data"),focusedRowIndex=this.getFocusedRowIndexByKey(key);this._isValidFocusedRowIndex(focusedRowIndex)?(this.option("focusedRowEnabled")?dataController.updateItems({changeType:"updateFocusedRow",focusedRowKey:key}):d=this.getView("rowsView").scrollToRowElement(key),(0,utils_deferred.gx)(d).done((()=>{this.getController("keyboardNavigation").setFocusedRowIndex(focusedRowIndex),deferred&&deferred.resolve(focusedRowIndex)}))):deferred&&deferred.resolve(-1)},getFocusedRowIndexByKey:function(key){var dataController=this.getController("data"),loadedRowIndex=dataController.getRowIndexByKey(key,!0);return loadedRowIndex>=0?loadedRowIndex+dataController.getRowIndexOffset(!0):-1},_focusRowByKeyOrIndex:function(){var focusedRowKey=this.option("focusedRowKey"),currentFocusedRowIndex=this.option("focusedRowIndex"),keyboardController=this.getController("keyboardNavigation"),dataController=this.getController("data");if((0,utils_type.$K)(focusedRowKey)){var visibleRowIndex=dataController.getRowIndexByKey(focusedRowKey);visibleRowIndex>=0?(keyboardController._isVirtualScrolling()&&(currentFocusedRowIndex=visibleRowIndex+dataController.getRowIndexOffset()),keyboardController.setFocusedRowIndex(currentFocusedRowIndex),this._triggerUpdateFocusedRow(focusedRowKey)):this._navigateToRow(focusedRowKey,!0).done((focusedRowIndex=>{currentFocusedRowIndex>=0&&focusedRowIndex<0?this._focusRowByIndex():currentFocusedRowIndex<0&&focusedRowIndex>=0&&keyboardController.setFocusedRowIndex(focusedRowIndex)}))}else currentFocusedRowIndex>=0&&this.getController("focus")._focusRowByIndex(currentFocusedRowIndex)},isRowFocused:function(key){var focusedRowKey=this.option("focusedRowKey");if((0,utils_type.$K)(focusedRowKey))return(0,common.bY)(key,this.option("focusedRowKey"))},updateFocusedRow:function(change){var $tableElement,$mainRow,that=this,focusedRowIndex=that._dataController.getRowIndexByKey(change.focusedRowKey),rowsView=that.getView("rowsView");(0,iterator.S6)(rowsView.getTableElements(),(function(index,element){var isMainTable=0===index;$tableElement=(0,renderer.Z)(element),that._clearPreviousFocusedRow($tableElement,focusedRowIndex);var $row=that._prepareFocusedRow({changedItem:that._dataController.getVisibleRows()[focusedRowIndex],$tableElement,focusedRowIndex});isMainTable&&($mainRow=$row)})),$mainRow&&rowsView.scrollToElementVertically($mainRow)},_clearPreviousFocusedRow:function($tableElement,focusedRowIndex){var $prevRowFocusedElement=$tableElement.find(".dx-row.dx-row-focused").filter(((_,focusedRow)=>{var $focusedRowTable=(0,renderer.Z)(focusedRow).closest(".".concat(this.addWidgetPrefix("table")));return $tableElement.is($focusedRowTable)}));$prevRowFocusedElement.removeClass("dx-row-focused").removeClass("dx-cell-focus-disabled").removeAttr("tabindex"),$prevRowFocusedElement.children("td").removeAttr("tabindex"),0!==focusedRowIndex&&(0,renderer.Z)(this.getView("rowsView").getRowElement(0)).removeClass("dx-cell-focus-disabled").removeAttr("tabIndex")},_prepareFocusedRow:function(options){var $row,changedItem=options.changedItem;if(changedItem&&("data"===changedItem.rowType||"group"===changedItem.rowType)){var focusedRowIndex=options.focusedRowIndex,$tableElement=options.$tableElement,tabIndex=this.option("tabindex")||0,rowsView=this.getView("rowsView");($row=(0,renderer.Z)(rowsView._getRowElements($tableElement).eq(focusedRowIndex))).addClass("dx-row-focused").attr("tabindex",tabIndex)}return $row}})},extenders:{controllers:{keyboardNavigation:{init:function(){var rowIndex=this.option("focusedRowIndex"),columnIndex=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),this.callBase(),this.setRowFocusType(),this._focusedCellPosition={},(0,utils_type.$K)(rowIndex)&&rowIndex>=0&&(this._focusedCellPosition.rowIndex=rowIndex),(0,utils_type.$K)(columnIndex)&&columnIndex>=0&&(this._focusedCellPosition.columnIndex=columnIndex)},setFocusedRowIndex:function(rowIndex){var dataController=this.getController("data");this.callBase(rowIndex);var visibleRowIndex=rowIndex-dataController.getRowIndexOffset(),visibleRow=dataController.getVisibleRows()[visibleRowIndex];visibleRow&&visibleRow.isNewRow||this.option("focusedRowIndex",rowIndex)},setFocusedColumnIndex:function(columnIndex){this.callBase(columnIndex),this.option("focusedColumnIndex",columnIndex)},_escapeKeyHandler:function(eventArgs,isEditing){!isEditing&&this.option("focusedRowEnabled")?this.isCellFocusType()&&(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(eventArgs.originalEvent.target),!0)):this.callBase(eventArgs,isEditing)},_updateFocusedCellPosition:function($cell,direction){var prevRowIndex=this.option("focusedRowIndex"),prevColumnIndex=this.option("focusedColumnIndex"),position=this.callBase($cell,direction);position&&position.columnIndex>=0&&this._fireFocusedCellChanged($cell,prevColumnIndex,prevRowIndex)}},editorFactory:{renderFocusOverlay:function($element,isHideBorder){var $cell,keyboardController=this.getController("keyboardNavigation"),focusedRowEnabled=this.option("focusedRowEnabled"),editingController=this.getController("editing");if(focusedRowEnabled&&null!=keyboardController&&keyboardController.isRowFocusType()&&!editingController.isEditing()){if(focusedRowEnabled){"row"===keyboardController._getElementType($element)&&!$element.hasClass("dx-row-focused")&&($cell=keyboardController.getFirstValidCellInRow($element),keyboardController.focus($cell))}}else this.callBase($element,isHideBorder)}},columns:{getSortDataSourceParameters:function(_,sortByKey){var result=this.callBase.apply(this,arguments),dataController=this.getController("data"),dataSource=dataController._dataSource,store=dataController.store(),key=store&&store.key(),remoteOperations=dataSource&&dataSource.remoteOperations()||{},isLocalOperations=Object.keys(remoteOperations).every((operationName=>!remoteOperations[operationName]));if(key&&(this.option("focusedRowEnabled")&&!1!==this.getController("focus").isAutoNavigateToFocusedRow()||sortByKey)){var notSortedKeys=(key=Array.isArray(key)?key:[key]).filter((key=>!this.columnOption(key,"sortOrder")));notSortedKeys.length&&(result=result||[],isLocalOperations?result.push({selector:dataSource.getDataIndexGetter(),desc:!1}):notSortedKeys.forEach((notSortedKey=>result.push({selector:notSortedKey,desc:!1}))))}return result}},data:{_applyChange:function(change){if(!change||"updateFocusedRow"!==change.changeType)return this.callBase.apply(this,arguments)},_fireChanged:function(e){if(this.callBase(e),this.option("focusedRowEnabled")&&this._dataSource){var isPartialUpdateWithDeleting="update"===e.changeType&&e.repaintChangesOnly&&e.changeTypes&&e.changeTypes.indexOf("remove")>=0;"refresh"===e.changeType&&e.items.length||isPartialUpdateWithDeleting?(this._updatePageIndexes(),this._updateFocusedRow(e)):"append"===e.changeType||"prepend"===e.changeType?this._updatePageIndexes():"update"===e.changeType&&e.repaintChangesOnly&&this._updateFocusedRow(e)}},_updatePageIndexes:function(){var prevRenderingPageIndex=this._lastRenderingPageIndex||0,renderingPageIndex=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=renderingPageIndex,this._isPagingByRendering=renderingPageIndex!==prevRenderingPageIndex},isPagingByRendering:function(){return this._isPagingByRendering},_updateFocusedRow:function(e){var operationTypes=e.operationTypes||{},focusController=this.getController("focus"),{reload,fullReload,pageIndex,paging}=operationTypes,isVirtualScrolling=this.getController("keyboardNavigation")._isVirtualScrolling(),pagingWithoutVirtualScrolling=paging&&!isVirtualScrolling,focusedRowKey=this.option("focusedRowKey"),isAutoNavigate=focusController.isAutoNavigateToFocusedRow();if(reload&&!1===pageIndex&&!fullReload&&(0,utils_type.$K)(focusedRowKey))focusController._navigateToRow(focusedRowKey,!0).done((function(focusedRowIndex){focusedRowIndex<0&&focusController._focusRowByIndex(void 0,operationTypes)}));else if(pagingWithoutVirtualScrolling&&isAutoNavigate){var rowIndexByKey=this.getRowIndexByKey(focusedRowKey),focusedRowIndex=this.option("focusedRowIndex");!(focusedRowIndex>=0)||!(focusedRowIndex===rowIndexByKey)&&rowIndexByKey>=0||focusController._focusRowByIndex(focusedRowIndex,operationTypes)}else pagingWithoutVirtualScrolling&&!isAutoNavigate&&this.getRowIndexByKey(focusedRowKey)<0?this.option("focusedRowIndex",-1):operationTypes.fullReload&&focusController._focusRowByKeyOrIndex()},getPageIndexByKey:function(key){var that=this,d=new utils_deferred.BH;return that.getGlobalRowIndexByKey(key).done((function(globalIndex){d.resolve(globalIndex>=0?Math.floor(globalIndex/that.pageSize()):-1)})).fail(d.reject),d.promise()},getGlobalRowIndexByKey:function(key){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(key):this._calculateGlobalRowIndexByFlatData(key)},_calculateGlobalRowIndexByFlatData:function(key,groupFilter,useGroup){var that=this,deferred=new utils_deferred.BH,dataSource=that._dataSource;if(Array.isArray(key))return deferred.resolve(-1).promise();var filter=that._generateFilterByKey(key);return dataSource.load({filter:that._concatWithCombinedFilter(filter),skip:0,take:1}).done((function(data){data.length>0?(filter=that._generateOperationFilterByKey(key,data[0],useGroup),dataSource.load({filter:that._concatWithCombinedFilter(filter,groupFilter),skip:0,take:1,requireTotalCount:!0}).done((function(_,extra){deferred.resolve(extra.totalCount)}))):deferred.resolve(-1)})),deferred.promise()},_concatWithCombinedFilter:function(filter,groupFilter){var combinedFilter=this.getCombinedFilter();return ui_grid_core_utils.combineFilters([filter,combinedFilter,groupFilter])},_generateBooleanFilter:function(selector,value,sortInfo){var{desc}=sortInfo;switch(!0){case!1===value&&desc:return[selector,"=",!0];case!1===value&&!desc:return[selector,"=",null];case!0===value&&!desc:case!(0,utils_type.jn)(value)&&desc:return[selector,"<>",value];default:return}},_generateOperationFilterByKey:function(key,rowData,useGroup){var that=this,dateSerializationFormat=that.option("dateSerializationFormat"),isRemoteFiltering=that._dataSource.remoteOperations().filtering,filter=that._generateFilterByKey(key,"<"),sort=that._columnsController.getSortDataSourceParameters(!isRemoteFiltering,!0);if(useGroup){var group=that._columnsController.getGroupDataSourceParameters(!isRemoteFiltering);group&&(sort=sort?group.concat(sort):group)}return sort&&sort.slice().reverse().forEach((function(sortInfo){var{selector,desc,compare}=sortInfo,{getter,rawValue,safeValue}=UiGridCoreFocusUtils_getSortFilterValue(sortInfo,rowData,{isRemoteFiltering,dateSerializationFormat,getSelector:selector=>that._columnsController.columnOption(selector,"selector")});if(filter=[[selector,"=",safeValue],"and",filter],null===rawValue||(0,utils_type.jn)(rawValue)){var booleanFilter=that._generateBooleanFilter(selector,safeValue,desc);booleanFilter&&(filter=[booleanFilter,"or",filter])}else{var sortFilter,filterOperation=desc?">":"<";compare?sortFilter=data=>"<"===filterOperation?compare(rawValue,getter(data))>=1:compare(rawValue,getter(data))<=-1:(sortFilter=[selector,filterOperation,safeValue],desc||(sortFilter=[sortFilter,"or",[selector,"=",null]])),filter=[sortFilter,"or",filter]}})),filter},_generateFilterByKey:function(key,operation){var dataSourceKey=this._dataSource.key(),filter=[];if(operation||(operation="="),Array.isArray(dataSourceKey))for(var i=0;i<dataSourceKey.length;++i){var keyPart=key[dataSourceKey[i]];keyPart&&(filter.length>0&&filter.push("and"),filter.push([dataSourceKey[i],operation,keyPart]))}else filter=[dataSourceKey,operation,key];return filter},_getLastItemIndex:function(){return this.items(!0).length-1}},editing:{_deleteRowCore:function(rowIndex){var deferred=this.callBase.apply(this,arguments),dataController=this.getController("data"),rowKey=dataController.getKeyByRowIndex(rowIndex);deferred.done((()=>{var rowIndex=dataController.getRowIndexByKey(rowKey),visibleRows=dataController.getVisibleRows();-1!==rowIndex||visibleRows.length||this.getController("focus")._resetFocusedRow()}))}}},views:{rowsView:{_createRow:function(row){var $row=this.callBase.apply(this,arguments);return this.option("focusedRowEnabled")&&row&&this.getController("focus").isRowFocused(row.key)&&$row.addClass("dx-row-focused"),$row},_checkRowKeys:function(options){if(this.callBase.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){var store=this._dataController.store();store&&!store.key()&&this._dataController.fireError("E1042","Row focusing")}},_update:function(change){"updateFocusedRow"===change.changeType?this.option("focusedRowEnabled")&&this.getController("focus").updateFocusedRow(change):this.callBase(change)},updateFocusElementTabIndex:function($cellElements,preventScroll){var rowIndex=this.getController("keyboardNavigation").getVisibleRowIndex(),row=this._dataController.getVisibleRows()[rowIndex];!this.option("focusedRowEnabled")||null!=row&&row.isNewRow?this.callBase($cellElements):this._setFocusedRowElementTabIndex(preventScroll)},_setFocusedRowElementTabIndex:function(preventScroll){var focusedRowKey=this.option("focusedRowKey"),tabIndex=this.option("tabIndex")||0,dataController=this._dataController,columnsController=this._columnsController,rowIndex=dataController.getRowIndexByKey(focusedRowKey),columnIndex=this.option("focusedColumnIndex"),$row=this._findRowElementForTabIndex();if((0,utils_type.$K)(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),$row.attr("tabIndex",tabIndex),rowIndex>=0&&!preventScroll&&(columnIndex<0&&(columnIndex=0),rowIndex+=dataController.getRowIndexOffset(),columnIndex+=columnsController.getColumnIndexOffset(),this.getController("keyboardNavigation").setFocusedCellPosition(rowIndex,columnIndex),this.getController("focus").isAutoNavigateToFocusedRow())){var dataSource=dataController.dataSource(),operationTypes=dataSource&&dataSource.operationTypes();!operationTypes||operationTypes.paging||dataController.isPagingByRendering()||(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize))}},_findRowElementForTabIndex:function(){var focusedRowKey=this.option("focusedRowKey"),rowIndex=this._dataController.getRowIndexByKey(focusedRowKey);return(0,renderer.Z)(this.getRowElement(rowIndex>=0?rowIndex:0))},scrollToRowElement:function(key){var rowIndex=this.getController("data").getRowIndexByKey(key),$row=(0,renderer.Z)(this.getRow(rowIndex));return this.scrollToElementVertically($row)},scrollToElementVertically:function($row){var scrollable=this.getScrollable();if(scrollable&&$row.length){var position=scrollable.getScrollElementPosition($row,"vertical");return this.scrollTopPosition(position)}return(new utils_deferred.BH).resolve()},scrollTopPosition:function(scrollTop){var d=new utils_deferred.BH,scrollable=this.getScrollable();if(scrollable){var currentScrollTop=scrollable.scrollTop(),scrollHandler=()=>{scrollable.off("scroll",scrollHandler),d.resolve()};if(scrollTop!==currentScrollTop)return scrollable.on("scroll",scrollHandler),this._dataController.resetFilterApplying(),scrollable.scrollTo({top:scrollTop}),d.promise()}return d.resolve()}}}}};module_core.registerModule("focus",(0,extend.l)(!0,{},focusModule,{extenders:{controllers:{data:{changeRowExpand(key){return this.option("focusedRowEnabled")&&this.isRowExpanded(key)&&this._isFocusedRowInside(key)&&this.option("focusedRowKey",key),this.callBase.apply(this,arguments)},_isFocusedRowInside(parentKey){const focusedRowKey=this.option("focusedRowKey"),rowIndex=this.getRowIndexByKey(focusedRowKey),focusedRow=rowIndex>=0&&this.getVisibleRows()[rowIndex];let parent=focusedRow&&focusedRow.node.parent;for(;parent;){if(parent.key===parentKey)return!0;parent=parent.parent}return!1},getParentKey(key){const dataSource=this._dataSource,node=this.getNodeByKey(key),d=new utils_deferred.BH;return node?d.resolve(node.parent?node.parent.key:void 0):dataSource.load({filter:[dataSource.getKeyExpr(),"=",key]}).done((items=>{const parentData=items[0];parentData?d.resolve(dataSource.parentKeyOf(parentData)):d.reject()})).fail(d.reject),d.promise()},expandAscendants(key){const that=this,dataSource=that._dataSource,d=new utils_deferred.BH;return that.getParentKey(key).done((parentKey=>{dataSource&&void 0!==parentKey&&parentKey!==that.option("rootValue")?(dataSource._isNodesInitializing=!0,that.expandRow(parentKey),dataSource._isNodesInitializing=!1,that.expandAscendants(parentKey).done(d.resolve).fail(d.reject)):d.resolve()})).fail(d.reject),d.promise()},getPageIndexByKey(key){const that=this,dataSource=that._dataSource,d=new utils_deferred.BH;return that.expandAscendants(key).done((()=>{dataSource.load({parentIds:[]}).done((nodes=>{const offset=function findIndex(items,callback){let result=-1;return items.forEach(((node,index)=>{callback(node)&&(result=index)})),result}(nodes,(node=>that.keyOf(node.data)===key));let pageIndex=-1;offset>=0&&(pageIndex=Math.floor(offset/that.pageSize())),d.resolve(pageIndex)})).fail(d.reject)})).fail(d.reject),d.promise()}}}}}));var sortable=__webpack_require__("./node_modules/devextreme/esm/ui/sortable.js");const const_ATTRIBUTES_dragCell="dx-drag-cell",CLASSES_cellFocusDisabled="dx-cell-focus-disabled",CLASSES_handleIcon="drag-icon",CLASSES_commandDrag="dx-command-drag",CLASSES_sortableWithoutHandle="dx-sortable-without-handle",CLASSES_rowsView="rowsview",GridCoreRowDraggingDom_createHandleTemplateFunc=addWidgetPrefix=>(container,options)=>{const $container=(0,renderer.Z)(container);if($container.attr(const_ATTRIBUTES_dragCell,""),"data"===options.rowType)return $container.addClass(CLASSES_cellFocusDisabled),(0,renderer.Z)("<span>").addClass(addWidgetPrefix(CLASSES_handleIcon));module_utils.setEmptyText($container)},RowDraggingExtender={init(){this.callBase.apply(this,arguments),this._updateHandleColumn()},_allowReordering(){const rowDragging=this.option("rowDragging");return!(!rowDragging||!(rowDragging.allowReordering||rowDragging.allowDropInsideItem||rowDragging.group))},_updateHandleColumn(){const rowDragging=this.option("rowDragging"),allowReordering=this._allowReordering(),columnsController=this._columnsController,isHandleColumnVisible=allowReordering&&rowDragging.showDragIcons;columnsController&&columnsController.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",cssClass:CLASSES_commandDrag,width:"auto",cellTemplate:this._getHandleTemplate(),visible:isHandleColumnVisible}),columnsController.columnOption("type:drag","visible",isHandleColumnVisible)},_renderContent(){const rowDragging=this.option("rowDragging"),allowReordering=this._allowReordering(),$content=this.callBase.apply(this,arguments),isFixedTableRendering=this._isFixedTableRendering,currentSortableName=isFixedTableRendering?"_sortableFixed":"_sortable",anotherSortableName=isFixedTableRendering?"_sortable":"_sortableFixed",togglePointerEventsStyle=toggle=>{var _a;null===(_a=this._sortableFixed)||void 0===_a||_a.$element().css("pointerEvents",toggle?"auto":"")},rowSelector=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",filter=this.option("dataRowTemplate")?"> table > tbody"+rowSelector:"> table > tbody > "+rowSelector;return(allowReordering||this[currentSortableName])&&$content.length&&(this[currentSortableName]=this._createComponent($content,sortable.Z,(0,extend.l)({component:this.component,contentTemplate:null,filter,cursorOffset:options=>{const{event}=options,rowsViewOffset=(0,renderer.Z)(this.element()).offset();return{x:event.pageX-rowsViewOffset.left}},onDraggableElementShown:e=>{if(rowDragging.dragTemplate)return;const gridInstance=(0,renderer.Z)(e.dragElement).children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(gridInstance)},dragTemplate:this._getDraggableRowTemplate(),handle:rowDragging.showDragIcons&&"."+CLASSES_commandDrag,dropFeedbackMode:"indicate"},rowDragging,{onDragStart:e=>{var _a,_b;null===(_a=this.getController("keyboardNavigation"))||void 0===_a||_a._resetFocusedCell();const row=e.component.getVisibleRows()[e.fromIndex];e.itemData=row&&row.data;const isDataRow=row&&"data"===row.rowType;e.cancel=!allowReordering||!isDataRow,null===(_b=rowDragging.onDragStart)||void 0===_b||_b.call(rowDragging,e)},onDragEnter:()=>{togglePointerEventsStyle(!0)},onDragLeave:()=>{togglePointerEventsStyle(!1)},onDragEnd:e=>{var _a;togglePointerEventsStyle(!1),null===(_a=rowDragging.onDragEnd)||void 0===_a||_a.call(rowDragging,e)},onAdd:e=>{var _a;togglePointerEventsStyle(!1),null===(_a=rowDragging.onAdd)||void 0===_a||_a.call(rowDragging,e)},dropFeedbackMode:rowDragging.dropFeedbackMode,onOptionChanged:e=>{this._sortableFixed&&("fromIndex"!==e.name&&"toIndex"!==e.name||this[anotherSortableName].option(e.name,e.value))}})),$content.toggleClass("dx-scrollable-container",isFixedTableRendering),$content.toggleClass(CLASSES_sortableWithoutHandle,allowReordering&&!rowDragging.showDragIcons)),$content},_renderCore(e){this.callBase.apply(this,arguments),e&&"update"===e.changeType&&e.repaintChangesOnly&&module_utils.isVirtualRowRendering(this)&&(0,common.Su)((()=>{this._updateSortable()}))},_updateSortable(){const offset=this._dataController.getRowIndexOffset();[this._sortable,this._sortableFixed].forEach((sortable=>{null==sortable||sortable.option("offset",offset),null==sortable||sortable.update()}))},_resizeCore(){this.callBase.apply(this,arguments),this._updateSortable()},_getDraggableGridOptions(options){const gridOptions=this.option(),columns=this.getColumns(),$rowElement=(0,renderer.Z)(this.getRowElement(options.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:gridOptions.columnFixing,columnAutoWidth:gridOptions.columnAutoWidth,showColumnLines:gridOptions.showColumnLines,columns:columns.map((column=>({width:column.width||column.visibleWidth,fixed:column.fixed,fixedPosition:column.fixedPosition}))),onRowPrepared:e=>{const rowsView=e.component.getView("rowsView");(0,renderer.Z)(e.rowElement).replaceWith($rowElement.eq(rowsView._isFixedTableRendering?1:0).clone())}}},_synchronizeScrollLeftPosition(gridInstance){const scrollable=null==gridInstance?void 0:gridInstance.getScrollable();null==scrollable||scrollable.scrollTo({x:this._scrollLeft})},_getDraggableRowTemplate(){return options=>{const $rootElement=this.component.$element(),$dataGridContainer=(0,renderer.Z)("<div>");(0,size.cl)($dataGridContainer,(0,size.dz)($rootElement));const items=this._dataController.items(),row=items&&items[options.fromIndex],gridOptions=this._getDraggableGridOptions(row);return this._createComponent($dataGridContainer,this.component.NAME,gridOptions),$dataGridContainer.find(".dx-gridbase-container").children(`:not(.${this.addWidgetPrefix(CLASSES_rowsView)})`).hide(),$dataGridContainer}},_getHandleTemplate(){return GridCoreRowDraggingDom_createHandleTemplateFunc((string=>this.addWidgetPrefix(string)))},optionChanged(args){"rowDragging"===args.name&&(this._updateHandleColumn(),this._invalidate(!0,!0),args.handled=!0),this.callBase.apply(this,arguments)}},rowDraggingModule={defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:RowDraggingExtender}}};module_core.registerModule("rowDragging",rowDraggingModule);const tree_list=module_widget_base;var devextreme_angular_core=__webpack_require__("./node_modules/devextreme-angular/fesm2015/devextreme-angular-core.js"),devextreme_angular_ui_nested=__webpack_require__("./node_modules/devextreme-angular/fesm2015/devextreme-angular-ui-nested.js");class DxTreeListComponent extends devextreme_angular_core.Ay{constructor(elementRef,ngZone,templateHost,_watcherHelper,_idh,optionHost,transferState,platformId){super(elementRef,ngZone,templateHost,_watcherHelper,transferState,platformId),this._watcherHelper=_watcherHelper,this._idh=_idh,this._createEventEmitters([{subscribe:"adaptiveDetailRowPreparing",emit:"onAdaptiveDetailRowPreparing"},{subscribe:"cellClick",emit:"onCellClick"},{subscribe:"cellDblClick",emit:"onCellDblClick"},{subscribe:"cellHoverChanged",emit:"onCellHoverChanged"},{subscribe:"cellPrepared",emit:"onCellPrepared"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"contextMenuPreparing",emit:"onContextMenuPreparing"},{subscribe:"dataErrorOccurred",emit:"onDataErrorOccurred"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"editCanceled",emit:"onEditCanceled"},{subscribe:"editCanceling",emit:"onEditCanceling"},{subscribe:"editingStart",emit:"onEditingStart"},{subscribe:"editorPrepared",emit:"onEditorPrepared"},{subscribe:"editorPreparing",emit:"onEditorPreparing"},{subscribe:"focusedCellChanged",emit:"onFocusedCellChanged"},{subscribe:"focusedCellChanging",emit:"onFocusedCellChanging"},{subscribe:"focusedRowChanged",emit:"onFocusedRowChanged"},{subscribe:"focusedRowChanging",emit:"onFocusedRowChanging"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"initNewRow",emit:"onInitNewRow"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"nodesInitialized",emit:"onNodesInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"rowClick",emit:"onRowClick"},{subscribe:"rowCollapsed",emit:"onRowCollapsed"},{subscribe:"rowCollapsing",emit:"onRowCollapsing"},{subscribe:"rowDblClick",emit:"onRowDblClick"},{subscribe:"rowExpanded",emit:"onRowExpanded"},{subscribe:"rowExpanding",emit:"onRowExpanding"},{subscribe:"rowInserted",emit:"onRowInserted"},{subscribe:"rowInserting",emit:"onRowInserting"},{subscribe:"rowPrepared",emit:"onRowPrepared"},{subscribe:"rowRemoved",emit:"onRowRemoved"},{subscribe:"rowRemoving",emit:"onRowRemoving"},{subscribe:"rowUpdated",emit:"onRowUpdated"},{subscribe:"rowUpdating",emit:"onRowUpdating"},{subscribe:"rowValidating",emit:"onRowValidating"},{subscribe:"saved",emit:"onSaved"},{subscribe:"saving",emit:"onSaving"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{subscribe:"toolbarPreparing",emit:"onToolbarPreparing"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"allowColumnReorderingChange"},{emit:"allowColumnResizingChange"},{emit:"autoExpandAllChange"},{emit:"autoNavigateToFocusedRowChange"},{emit:"cacheEnabledChange"},{emit:"cellHintEnabledChange"},{emit:"columnAutoWidthChange"},{emit:"columnChooserChange"},{emit:"columnFixingChange"},{emit:"columnHidingEnabledChange"},{emit:"columnMinWidthChange"},{emit:"columnResizingModeChange"},{emit:"columnsChange"},{emit:"columnWidthChange"},{emit:"customizeColumnsChange"},{emit:"dataSourceChange"},{emit:"dataStructureChange"},{emit:"dateSerializationFormatChange"},{emit:"disabledChange"},{emit:"editingChange"},{emit:"elementAttrChange"},{emit:"errorRowEnabledChange"},{emit:"expandedRowKeysChange"},{emit:"expandNodesOnFilteringChange"},{emit:"filterBuilderChange"},{emit:"filterBuilderPopupChange"},{emit:"filterModeChange"},{emit:"filterPanelChange"},{emit:"filterRowChange"},{emit:"filterSyncEnabledChange"},{emit:"filterValueChange"},{emit:"focusedColumnIndexChange"},{emit:"focusedRowEnabledChange"},{emit:"focusedRowIndexChange"},{emit:"focusedRowKeyChange"},{emit:"hasItemsExprChange"},{emit:"headerFilterChange"},{emit:"heightChange"},{emit:"highlightChangesChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"itemsExprChange"},{emit:"keyboardNavigationChange"},{emit:"keyExprChange"},{emit:"loadPanelChange"},{emit:"noDataTextChange"},{emit:"pagerChange"},{emit:"pagingChange"},{emit:"parentIdExprChange"},{emit:"remoteOperationsChange"},{emit:"renderAsyncChange"},{emit:"repaintChangesOnlyChange"},{emit:"rootValueChange"},{emit:"rowAlternationEnabledChange"},{emit:"rowDraggingChange"},{emit:"rtlEnabledChange"},{emit:"scrollingChange"},{emit:"searchPanelChange"},{emit:"selectedRowKeysChange"},{emit:"selectionChange"},{emit:"showBordersChange"},{emit:"showColumnHeadersChange"},{emit:"showColumnLinesChange"},{emit:"showRowLinesChange"},{emit:"sortingChange"},{emit:"stateStoringChange"},{emit:"syncLookupFilterValuesChange"},{emit:"tabIndexChange"},{emit:"toolbarChange"},{emit:"twoWayBindingEnabledChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wordWrapEnabledChange"}]),this._idh.setHost(this),optionHost.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(value){this._setOption("accessKey",value)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(value){this._setOption("activeStateEnabled",value)}get allowColumnReordering(){return this._getOption("allowColumnReordering")}set allowColumnReordering(value){this._setOption("allowColumnReordering",value)}get allowColumnResizing(){return this._getOption("allowColumnResizing")}set allowColumnResizing(value){this._setOption("allowColumnResizing",value)}get autoExpandAll(){return this._getOption("autoExpandAll")}set autoExpandAll(value){this._setOption("autoExpandAll",value)}get autoNavigateToFocusedRow(){return this._getOption("autoNavigateToFocusedRow")}set autoNavigateToFocusedRow(value){this._setOption("autoNavigateToFocusedRow",value)}get cacheEnabled(){return this._getOption("cacheEnabled")}set cacheEnabled(value){this._setOption("cacheEnabled",value)}get cellHintEnabled(){return this._getOption("cellHintEnabled")}set cellHintEnabled(value){this._setOption("cellHintEnabled",value)}get columnAutoWidth(){return this._getOption("columnAutoWidth")}set columnAutoWidth(value){this._setOption("columnAutoWidth",value)}get columnChooser(){return this._getOption("columnChooser")}set columnChooser(value){this._setOption("columnChooser",value)}get columnFixing(){return this._getOption("columnFixing")}set columnFixing(value){this._setOption("columnFixing",value)}get columnHidingEnabled(){return this._getOption("columnHidingEnabled")}set columnHidingEnabled(value){this._setOption("columnHidingEnabled",value)}get columnMinWidth(){return this._getOption("columnMinWidth")}set columnMinWidth(value){this._setOption("columnMinWidth",value)}get columnResizingMode(){return this._getOption("columnResizingMode")}set columnResizingMode(value){this._setOption("columnResizingMode",value)}get columns(){return this._getOption("columns")}set columns(value){this._setOption("columns",value)}get columnWidth(){return this._getOption("columnWidth")}set columnWidth(value){this._setOption("columnWidth",value)}get customizeColumns(){return this._getOption("customizeColumns")}set customizeColumns(value){this._setOption("customizeColumns",value)}get dataSource(){return this._getOption("dataSource")}set dataSource(value){this._setOption("dataSource",value)}get dataStructure(){return this._getOption("dataStructure")}set dataStructure(value){this._setOption("dataStructure",value)}get dateSerializationFormat(){return this._getOption("dateSerializationFormat")}set dateSerializationFormat(value){this._setOption("dateSerializationFormat",value)}get disabled(){return this._getOption("disabled")}set disabled(value){this._setOption("disabled",value)}get editing(){return this._getOption("editing")}set editing(value){this._setOption("editing",value)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(value){this._setOption("elementAttr",value)}get errorRowEnabled(){return this._getOption("errorRowEnabled")}set errorRowEnabled(value){this._setOption("errorRowEnabled",value)}get expandedRowKeys(){return this._getOption("expandedRowKeys")}set expandedRowKeys(value){this._setOption("expandedRowKeys",value)}get expandNodesOnFiltering(){return this._getOption("expandNodesOnFiltering")}set expandNodesOnFiltering(value){this._setOption("expandNodesOnFiltering",value)}get filterBuilder(){return this._getOption("filterBuilder")}set filterBuilder(value){this._setOption("filterBuilder",value)}get filterBuilderPopup(){return this._getOption("filterBuilderPopup")}set filterBuilderPopup(value){this._setOption("filterBuilderPopup",value)}get filterMode(){return this._getOption("filterMode")}set filterMode(value){this._setOption("filterMode",value)}get filterPanel(){return this._getOption("filterPanel")}set filterPanel(value){this._setOption("filterPanel",value)}get filterRow(){return this._getOption("filterRow")}set filterRow(value){this._setOption("filterRow",value)}get filterSyncEnabled(){return this._getOption("filterSyncEnabled")}set filterSyncEnabled(value){this._setOption("filterSyncEnabled",value)}get filterValue(){return this._getOption("filterValue")}set filterValue(value){this._setOption("filterValue",value)}get focusedColumnIndex(){return this._getOption("focusedColumnIndex")}set focusedColumnIndex(value){this._setOption("focusedColumnIndex",value)}get focusedRowEnabled(){return this._getOption("focusedRowEnabled")}set focusedRowEnabled(value){this._setOption("focusedRowEnabled",value)}get focusedRowIndex(){return this._getOption("focusedRowIndex")}set focusedRowIndex(value){this._setOption("focusedRowIndex",value)}get focusedRowKey(){return this._getOption("focusedRowKey")}set focusedRowKey(value){this._setOption("focusedRowKey",value)}get hasItemsExpr(){return this._getOption("hasItemsExpr")}set hasItemsExpr(value){this._setOption("hasItemsExpr",value)}get headerFilter(){return this._getOption("headerFilter")}set headerFilter(value){this._setOption("headerFilter",value)}get height(){return this._getOption("height")}set height(value){this._setOption("height",value)}get highlightChanges(){return this._getOption("highlightChanges")}set highlightChanges(value){this._setOption("highlightChanges",value)}get hint(){return this._getOption("hint")}set hint(value){this._setOption("hint",value)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(value){this._setOption("hoverStateEnabled",value)}get itemsExpr(){return this._getOption("itemsExpr")}set itemsExpr(value){this._setOption("itemsExpr",value)}get keyboardNavigation(){return this._getOption("keyboardNavigation")}set keyboardNavigation(value){this._setOption("keyboardNavigation",value)}get keyExpr(){return this._getOption("keyExpr")}set keyExpr(value){this._setOption("keyExpr",value)}get loadPanel(){return this._getOption("loadPanel")}set loadPanel(value){this._setOption("loadPanel",value)}get noDataText(){return this._getOption("noDataText")}set noDataText(value){this._setOption("noDataText",value)}get pager(){return this._getOption("pager")}set pager(value){this._setOption("pager",value)}get paging(){return this._getOption("paging")}set paging(value){this._setOption("paging",value)}get parentIdExpr(){return this._getOption("parentIdExpr")}set parentIdExpr(value){this._setOption("parentIdExpr",value)}get remoteOperations(){return this._getOption("remoteOperations")}set remoteOperations(value){this._setOption("remoteOperations",value)}get renderAsync(){return this._getOption("renderAsync")}set renderAsync(value){this._setOption("renderAsync",value)}get repaintChangesOnly(){return this._getOption("repaintChangesOnly")}set repaintChangesOnly(value){this._setOption("repaintChangesOnly",value)}get rootValue(){return this._getOption("rootValue")}set rootValue(value){this._setOption("rootValue",value)}get rowAlternationEnabled(){return this._getOption("rowAlternationEnabled")}set rowAlternationEnabled(value){this._setOption("rowAlternationEnabled",value)}get rowDragging(){return this._getOption("rowDragging")}set rowDragging(value){this._setOption("rowDragging",value)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(value){this._setOption("rtlEnabled",value)}get scrolling(){return this._getOption("scrolling")}set scrolling(value){this._setOption("scrolling",value)}get searchPanel(){return this._getOption("searchPanel")}set searchPanel(value){this._setOption("searchPanel",value)}get selectedRowKeys(){return this._getOption("selectedRowKeys")}set selectedRowKeys(value){this._setOption("selectedRowKeys",value)}get selection(){return this._getOption("selection")}set selection(value){this._setOption("selection",value)}get showBorders(){return this._getOption("showBorders")}set showBorders(value){this._setOption("showBorders",value)}get showColumnHeaders(){return this._getOption("showColumnHeaders")}set showColumnHeaders(value){this._setOption("showColumnHeaders",value)}get showColumnLines(){return this._getOption("showColumnLines")}set showColumnLines(value){this._setOption("showColumnLines",value)}get showRowLines(){return this._getOption("showRowLines")}set showRowLines(value){this._setOption("showRowLines",value)}get sorting(){return this._getOption("sorting")}set sorting(value){this._setOption("sorting",value)}get stateStoring(){return this._getOption("stateStoring")}set stateStoring(value){this._setOption("stateStoring",value)}get syncLookupFilterValues(){return this._getOption("syncLookupFilterValues")}set syncLookupFilterValues(value){this._setOption("syncLookupFilterValues",value)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(value){this._setOption("tabIndex",value)}get toolbar(){return this._getOption("toolbar")}set toolbar(value){this._setOption("toolbar",value)}get twoWayBindingEnabled(){return this._getOption("twoWayBindingEnabled")}set twoWayBindingEnabled(value){this._setOption("twoWayBindingEnabled",value)}get visible(){return this._getOption("visible")}set visible(value){this._setOption("visible",value)}get width(){return this._getOption("width")}set width(value){this._setOption("width",value)}get wordWrapEnabled(){return this._getOption("wordWrapEnabled")}set wordWrapEnabled(value){this._setOption("wordWrapEnabled",value)}get columnsChildren(){return this._getOption("columns")}set columnsChildren(value){this.setChildren("columns",value)}_createInstance(element,options){return new tree_list(element,options)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(changes){super.ngOnChanges(changes),this.setupChanges("columns",changes),this.setupChanges("dataSource",changes),this.setupChanges("expandedRowKeys",changes),this.setupChanges("selectedRowKeys",changes)}setupChanges(prop,changes){prop in this._optionsToUpdate||this._idh.setup(prop,changes)}ngDoCheck(){this._idh.doCheck("columns"),this._idh.doCheck("dataSource"),this._idh.doCheck("expandedRowKeys"),this._idh.doCheck("selectedRowKeys"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(name,value){let isSetup=this._idh.setupSingle(name,value),isChanged=null!==this._idh.getChanges(name,value);(isSetup||isChanged)&&super._setOption(name,value)}}DxTreeListComponent.ɵfac=function DxTreeListComponent_Factory(t){return new(t||DxTreeListComponent)(core["ɵɵdirectiveInject"](core.ElementRef),core["ɵɵdirectiveInject"](core.NgZone),core["ɵɵdirectiveInject"](devextreme_angular_core._5),core["ɵɵdirectiveInject"](devextreme_angular_core._h),core["ɵɵdirectiveInject"](devextreme_angular_core.i9),core["ɵɵdirectiveInject"](devextreme_angular_core.al),core["ɵɵdirectiveInject"](platform_browser.TransferState),core["ɵɵdirectiveInject"](core.PLATFORM_ID))},DxTreeListComponent.ɵcmp=core["ɵɵdefineComponent"]({type:DxTreeListComponent,selectors:[["dx-tree-list"]],contentQueries:function DxTreeListComponent_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["ɵɵcontentQuery"](dirIndex,devextreme_angular_ui_nested.qvW,4),2&rf){let _t;core["ɵɵqueryRefresh"](_t=core["ɵɵloadQuery"]())&&(ctx.columnsChildren=_t)}},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",allowColumnReordering:"allowColumnReordering",allowColumnResizing:"allowColumnResizing",autoExpandAll:"autoExpandAll",autoNavigateToFocusedRow:"autoNavigateToFocusedRow",cacheEnabled:"cacheEnabled",cellHintEnabled:"cellHintEnabled",columnAutoWidth:"columnAutoWidth",columnChooser:"columnChooser",columnFixing:"columnFixing",columnHidingEnabled:"columnHidingEnabled",columnMinWidth:"columnMinWidth",columnResizingMode:"columnResizingMode",columns:"columns",columnWidth:"columnWidth",customizeColumns:"customizeColumns",dataSource:"dataSource",dataStructure:"dataStructure",dateSerializationFormat:"dateSerializationFormat",disabled:"disabled",editing:"editing",elementAttr:"elementAttr",errorRowEnabled:"errorRowEnabled",expandedRowKeys:"expandedRowKeys",expandNodesOnFiltering:"expandNodesOnFiltering",filterBuilder:"filterBuilder",filterBuilderPopup:"filterBuilderPopup",filterMode:"filterMode",filterPanel:"filterPanel",filterRow:"filterRow",filterSyncEnabled:"filterSyncEnabled",filterValue:"filterValue",focusedColumnIndex:"focusedColumnIndex",focusedRowEnabled:"focusedRowEnabled",focusedRowIndex:"focusedRowIndex",focusedRowKey:"focusedRowKey",hasItemsExpr:"hasItemsExpr",headerFilter:"headerFilter",height:"height",highlightChanges:"highlightChanges",hint:"hint",hoverStateEnabled:"hoverStateEnabled",itemsExpr:"itemsExpr",keyboardNavigation:"keyboardNavigation",keyExpr:"keyExpr",loadPanel:"loadPanel",noDataText:"noDataText",pager:"pager",paging:"paging",parentIdExpr:"parentIdExpr",remoteOperations:"remoteOperations",renderAsync:"renderAsync",repaintChangesOnly:"repaintChangesOnly",rootValue:"rootValue",rowAlternationEnabled:"rowAlternationEnabled",rowDragging:"rowDragging",rtlEnabled:"rtlEnabled",scrolling:"scrolling",searchPanel:"searchPanel",selectedRowKeys:"selectedRowKeys",selection:"selection",showBorders:"showBorders",showColumnHeaders:"showColumnHeaders",showColumnLines:"showColumnLines",showRowLines:"showRowLines",sorting:"sorting",stateStoring:"stateStoring",syncLookupFilterValues:"syncLookupFilterValues",tabIndex:"tabIndex",toolbar:"toolbar",twoWayBindingEnabled:"twoWayBindingEnabled",visible:"visible",width:"width",wordWrapEnabled:"wordWrapEnabled"},outputs:{onAdaptiveDetailRowPreparing:"onAdaptiveDetailRowPreparing",onCellClick:"onCellClick",onCellDblClick:"onCellDblClick",onCellHoverChanged:"onCellHoverChanged",onCellPrepared:"onCellPrepared",onContentReady:"onContentReady",onContextMenuPreparing:"onContextMenuPreparing",onDataErrorOccurred:"onDataErrorOccurred",onDisposing:"onDisposing",onEditCanceled:"onEditCanceled",onEditCanceling:"onEditCanceling",onEditingStart:"onEditingStart",onEditorPrepared:"onEditorPrepared",onEditorPreparing:"onEditorPreparing",onFocusedCellChanged:"onFocusedCellChanged",onFocusedCellChanging:"onFocusedCellChanging",onFocusedRowChanged:"onFocusedRowChanged",onFocusedRowChanging:"onFocusedRowChanging",onInitialized:"onInitialized",onInitNewRow:"onInitNewRow",onKeyDown:"onKeyDown",onNodesInitialized:"onNodesInitialized",onOptionChanged:"onOptionChanged",onRowClick:"onRowClick",onRowCollapsed:"onRowCollapsed",onRowCollapsing:"onRowCollapsing",onRowDblClick:"onRowDblClick",onRowExpanded:"onRowExpanded",onRowExpanding:"onRowExpanding",onRowInserted:"onRowInserted",onRowInserting:"onRowInserting",onRowPrepared:"onRowPrepared",onRowRemoved:"onRowRemoved",onRowRemoving:"onRowRemoving",onRowUpdated:"onRowUpdated",onRowUpdating:"onRowUpdating",onRowValidating:"onRowValidating",onSaved:"onSaved",onSaving:"onSaving",onSelectionChanged:"onSelectionChanged",onToolbarPreparing:"onToolbarPreparing",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",allowColumnReorderingChange:"allowColumnReorderingChange",allowColumnResizingChange:"allowColumnResizingChange",autoExpandAllChange:"autoExpandAllChange",autoNavigateToFocusedRowChange:"autoNavigateToFocusedRowChange",cacheEnabledChange:"cacheEnabledChange",cellHintEnabledChange:"cellHintEnabledChange",columnAutoWidthChange:"columnAutoWidthChange",columnChooserChange:"columnChooserChange",columnFixingChange:"columnFixingChange",columnHidingEnabledChange:"columnHidingEnabledChange",columnMinWidthChange:"columnMinWidthChange",columnResizingModeChange:"columnResizingModeChange",columnsChange:"columnsChange",columnWidthChange:"columnWidthChange",customizeColumnsChange:"customizeColumnsChange",dataSourceChange:"dataSourceChange",dataStructureChange:"dataStructureChange",dateSerializationFormatChange:"dateSerializationFormatChange",disabledChange:"disabledChange",editingChange:"editingChange",elementAttrChange:"elementAttrChange",errorRowEnabledChange:"errorRowEnabledChange",expandedRowKeysChange:"expandedRowKeysChange",expandNodesOnFilteringChange:"expandNodesOnFilteringChange",filterBuilderChange:"filterBuilderChange",filterBuilderPopupChange:"filterBuilderPopupChange",filterModeChange:"filterModeChange",filterPanelChange:"filterPanelChange",filterRowChange:"filterRowChange",filterSyncEnabledChange:"filterSyncEnabledChange",filterValueChange:"filterValueChange",focusedColumnIndexChange:"focusedColumnIndexChange",focusedRowEnabledChange:"focusedRowEnabledChange",focusedRowIndexChange:"focusedRowIndexChange",focusedRowKeyChange:"focusedRowKeyChange",hasItemsExprChange:"hasItemsExprChange",headerFilterChange:"headerFilterChange",heightChange:"heightChange",highlightChangesChange:"highlightChangesChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",itemsExprChange:"itemsExprChange",keyboardNavigationChange:"keyboardNavigationChange",keyExprChange:"keyExprChange",loadPanelChange:"loadPanelChange",noDataTextChange:"noDataTextChange",pagerChange:"pagerChange",pagingChange:"pagingChange",parentIdExprChange:"parentIdExprChange",remoteOperationsChange:"remoteOperationsChange",renderAsyncChange:"renderAsyncChange",repaintChangesOnlyChange:"repaintChangesOnlyChange",rootValueChange:"rootValueChange",rowAlternationEnabledChange:"rowAlternationEnabledChange",rowDraggingChange:"rowDraggingChange",rtlEnabledChange:"rtlEnabledChange",scrollingChange:"scrollingChange",searchPanelChange:"searchPanelChange",selectedRowKeysChange:"selectedRowKeysChange",selectionChange:"selectionChange",showBordersChange:"showBordersChange",showColumnHeadersChange:"showColumnHeadersChange",showColumnLinesChange:"showColumnLinesChange",showRowLinesChange:"showRowLinesChange",sortingChange:"sortingChange",stateStoringChange:"stateStoringChange",syncLookupFilterValuesChange:"syncLookupFilterValuesChange",tabIndexChange:"tabIndexChange",toolbarChange:"toolbarChange",twoWayBindingEnabledChange:"twoWayBindingEnabledChange",visibleChange:"visibleChange",widthChange:"widthChange",wordWrapEnabledChange:"wordWrapEnabledChange"},features:[core["ɵɵProvidersFeature"]([devextreme_angular_core._5,devextreme_angular_core._h,devextreme_angular_core.al,devextreme_angular_core.i9]),core["ɵɵInheritDefinitionFeature"],core["ɵɵNgOnChangesFeature"]],decls:0,vars:0,template:function DxTreeListComponent_Template(rf,ctx){},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](DxTreeListComponent,[{type:core.Component,args:[{selector:"dx-tree-list",template:"",providers:[devextreme_angular_core._5,devextreme_angular_core._h,devextreme_angular_core.al,devextreme_angular_core.i9]}]}],(function(){return[{type:core.ElementRef},{type:core.NgZone},{type:devextreme_angular_core._5},{type:devextreme_angular_core._h},{type:devextreme_angular_core.i9},{type:devextreme_angular_core.al},{type:platform_browser.TransferState},{type:void 0,decorators:[{type:core.Inject,args:[core.PLATFORM_ID]}]}]}),{accessKey:[{type:core.Input}],activeStateEnabled:[{type:core.Input}],allowColumnReordering:[{type:core.Input}],allowColumnResizing:[{type:core.Input}],autoExpandAll:[{type:core.Input}],autoNavigateToFocusedRow:[{type:core.Input}],cacheEnabled:[{type:core.Input}],cellHintEnabled:[{type:core.Input}],columnAutoWidth:[{type:core.Input}],columnChooser:[{type:core.Input}],columnFixing:[{type:core.Input}],columnHidingEnabled:[{type:core.Input}],columnMinWidth:[{type:core.Input}],columnResizingMode:[{type:core.Input}],columns:[{type:core.Input}],columnWidth:[{type:core.Input}],customizeColumns:[{type:core.Input}],dataSource:[{type:core.Input}],dataStructure:[{type:core.Input}],dateSerializationFormat:[{type:core.Input}],disabled:[{type:core.Input}],editing:[{type:core.Input}],elementAttr:[{type:core.Input}],errorRowEnabled:[{type:core.Input}],expandedRowKeys:[{type:core.Input}],expandNodesOnFiltering:[{type:core.Input}],filterBuilder:[{type:core.Input}],filterBuilderPopup:[{type:core.Input}],filterMode:[{type:core.Input}],filterPanel:[{type:core.Input}],filterRow:[{type:core.Input}],filterSyncEnabled:[{type:core.Input}],filterValue:[{type:core.Input}],focusedColumnIndex:[{type:core.Input}],focusedRowEnabled:[{type:core.Input}],focusedRowIndex:[{type:core.Input}],focusedRowKey:[{type:core.Input}],hasItemsExpr:[{type:core.Input}],headerFilter:[{type:core.Input}],height:[{type:core.Input}],highlightChanges:[{type:core.Input}],hint:[{type:core.Input}],hoverStateEnabled:[{type:core.Input}],itemsExpr:[{type:core.Input}],keyboardNavigation:[{type:core.Input}],keyExpr:[{type:core.Input}],loadPanel:[{type:core.Input}],noDataText:[{type:core.Input}],pager:[{type:core.Input}],paging:[{type:core.Input}],parentIdExpr:[{type:core.Input}],remoteOperations:[{type:core.Input}],renderAsync:[{type:core.Input}],repaintChangesOnly:[{type:core.Input}],rootValue:[{type:core.Input}],rowAlternationEnabled:[{type:core.Input}],rowDragging:[{type:core.Input}],rtlEnabled:[{type:core.Input}],scrolling:[{type:core.Input}],searchPanel:[{type:core.Input}],selectedRowKeys:[{type:core.Input}],selection:[{type:core.Input}],showBorders:[{type:core.Input}],showColumnHeaders:[{type:core.Input}],showColumnLines:[{type:core.Input}],showRowLines:[{type:core.Input}],sorting:[{type:core.Input}],stateStoring:[{type:core.Input}],syncLookupFilterValues:[{type:core.Input}],tabIndex:[{type:core.Input}],toolbar:[{type:core.Input}],twoWayBindingEnabled:[{type:core.Input}],visible:[{type:core.Input}],width:[{type:core.Input}],wordWrapEnabled:[{type:core.Input}],onAdaptiveDetailRowPreparing:[{type:core.Output}],onCellClick:[{type:core.Output}],onCellDblClick:[{type:core.Output}],onCellHoverChanged:[{type:core.Output}],onCellPrepared:[{type:core.Output}],onContentReady:[{type:core.Output}],onContextMenuPreparing:[{type:core.Output}],onDataErrorOccurred:[{type:core.Output}],onDisposing:[{type:core.Output}],onEditCanceled:[{type:core.Output}],onEditCanceling:[{type:core.Output}],onEditingStart:[{type:core.Output}],onEditorPrepared:[{type:core.Output}],onEditorPreparing:[{type:core.Output}],onFocusedCellChanged:[{type:core.Output}],onFocusedCellChanging:[{type:core.Output}],onFocusedRowChanged:[{type:core.Output}],onFocusedRowChanging:[{type:core.Output}],onInitialized:[{type:core.Output}],onInitNewRow:[{type:core.Output}],onKeyDown:[{type:core.Output}],onNodesInitialized:[{type:core.Output}],onOptionChanged:[{type:core.Output}],onRowClick:[{type:core.Output}],onRowCollapsed:[{type:core.Output}],onRowCollapsing:[{type:core.Output}],onRowDblClick:[{type:core.Output}],onRowExpanded:[{type:core.Output}],onRowExpanding:[{type:core.Output}],onRowInserted:[{type:core.Output}],onRowInserting:[{type:core.Output}],onRowPrepared:[{type:core.Output}],onRowRemoved:[{type:core.Output}],onRowRemoving:[{type:core.Output}],onRowUpdated:[{type:core.Output}],onRowUpdating:[{type:core.Output}],onRowValidating:[{type:core.Output}],onSaved:[{type:core.Output}],onSaving:[{type:core.Output}],onSelectionChanged:[{type:core.Output}],onToolbarPreparing:[{type:core.Output}],accessKeyChange:[{type:core.Output}],activeStateEnabledChange:[{type:core.Output}],allowColumnReorderingChange:[{type:core.Output}],allowColumnResizingChange:[{type:core.Output}],autoExpandAllChange:[{type:core.Output}],autoNavigateToFocusedRowChange:[{type:core.Output}],cacheEnabledChange:[{type:core.Output}],cellHintEnabledChange:[{type:core.Output}],columnAutoWidthChange:[{type:core.Output}],columnChooserChange:[{type:core.Output}],columnFixingChange:[{type:core.Output}],columnHidingEnabledChange:[{type:core.Output}],columnMinWidthChange:[{type:core.Output}],columnResizingModeChange:[{type:core.Output}],columnsChange:[{type:core.Output}],columnWidthChange:[{type:core.Output}],customizeColumnsChange:[{type:core.Output}],dataSourceChange:[{type:core.Output}],dataStructureChange:[{type:core.Output}],dateSerializationFormatChange:[{type:core.Output}],disabledChange:[{type:core.Output}],editingChange:[{type:core.Output}],elementAttrChange:[{type:core.Output}],errorRowEnabledChange:[{type:core.Output}],expandedRowKeysChange:[{type:core.Output}],expandNodesOnFilteringChange:[{type:core.Output}],filterBuilderChange:[{type:core.Output}],filterBuilderPopupChange:[{type:core.Output}],filterModeChange:[{type:core.Output}],filterPanelChange:[{type:core.Output}],filterRowChange:[{type:core.Output}],filterSyncEnabledChange:[{type:core.Output}],filterValueChange:[{type:core.Output}],focusedColumnIndexChange:[{type:core.Output}],focusedRowEnabledChange:[{type:core.Output}],focusedRowIndexChange:[{type:core.Output}],focusedRowKeyChange:[{type:core.Output}],hasItemsExprChange:[{type:core.Output}],headerFilterChange:[{type:core.Output}],heightChange:[{type:core.Output}],highlightChangesChange:[{type:core.Output}],hintChange:[{type:core.Output}],hoverStateEnabledChange:[{type:core.Output}],itemsExprChange:[{type:core.Output}],keyboardNavigationChange:[{type:core.Output}],keyExprChange:[{type:core.Output}],loadPanelChange:[{type:core.Output}],noDataTextChange:[{type:core.Output}],pagerChange:[{type:core.Output}],pagingChange:[{type:core.Output}],parentIdExprChange:[{type:core.Output}],remoteOperationsChange:[{type:core.Output}],renderAsyncChange:[{type:core.Output}],repaintChangesOnlyChange:[{type:core.Output}],rootValueChange:[{type:core.Output}],rowAlternationEnabledChange:[{type:core.Output}],rowDraggingChange:[{type:core.Output}],rtlEnabledChange:[{type:core.Output}],scrollingChange:[{type:core.Output}],searchPanelChange:[{type:core.Output}],selectedRowKeysChange:[{type:core.Output}],selectionChange:[{type:core.Output}],showBordersChange:[{type:core.Output}],showColumnHeadersChange:[{type:core.Output}],showColumnLinesChange:[{type:core.Output}],showRowLinesChange:[{type:core.Output}],sortingChange:[{type:core.Output}],stateStoringChange:[{type:core.Output}],syncLookupFilterValuesChange:[{type:core.Output}],tabIndexChange:[{type:core.Output}],toolbarChange:[{type:core.Output}],twoWayBindingEnabledChange:[{type:core.Output}],visibleChange:[{type:core.Output}],widthChange:[{type:core.Output}],wordWrapEnabledChange:[{type:core.Output}],columnsChildren:[{type:core.ContentChildren,args:[devextreme_angular_ui_nested.qvW]}]});class DxTreeListModule{}DxTreeListModule.ɵfac=function DxTreeListModule_Factory(t){return new(t||DxTreeListModule)},DxTreeListModule.ɵmod=core["ɵɵdefineNgModule"]({type:DxTreeListModule}),DxTreeListModule.ɵinj=core["ɵɵdefineInjector"]({imports:[[devextreme_angular_ui_nested.Uz5,devextreme_angular_ui_nested.LNK,devextreme_angular_ui_nested.mtS,devextreme_angular_ui_nested.tRk,devextreme_angular_ui_nested.idP,devextreme_angular_ui_nested.HaS,devextreme_angular_ui_nested.CxW,devextreme_angular_ui_nested.FZZ,devextreme_angular_ui_nested.Inm,devextreme_angular_ui_nested.e1H,devextreme_angular_ui_nested.$D5,devextreme_angular_ui_nested.SCM,devextreme_angular_ui_nested.DTR,devextreme_angular_ui_nested.ZCX,devextreme_angular_ui_nested.Oll,devextreme_angular_ui_nested.Q8p,devextreme_angular_ui_nested.Jiy,devextreme_angular_ui_nested._9O,devextreme_angular_ui_nested.kSd,devextreme_angular_ui_nested.fOF,devextreme_angular_ui_nested.IOm,devextreme_angular_ui_nested.kOw,devextreme_angular_ui_nested.weU,devextreme_angular_ui_nested.D_l,devextreme_angular_ui_nested.JxK,devextreme_angular_ui_nested.zZW,devextreme_angular_ui_nested.ynY,devextreme_angular_ui_nested.lgR,devextreme_angular_ui_nested.sni,devextreme_angular_ui_nested.waX,devextreme_angular_ui_nested.pxS,devextreme_angular_ui_nested.pGy,devextreme_angular_ui_nested.SH1,devextreme_angular_ui_nested.FJZ,devextreme_angular_ui_nested.RbS,devextreme_angular_ui_nested.$wd,devextreme_angular_ui_nested.xHg,devextreme_angular_ui_nested.p6x,devextreme_angular_ui_nested.vLN,devextreme_angular_ui_nested.rH1,devextreme_angular_ui_nested.lUW,devextreme_angular_ui_nested.$9q,devextreme_angular_ui_nested.nD3,devextreme_angular_ui_nested.Upd,devextreme_angular_ui_nested.WSE,devextreme_angular_ui_nested.LHj,devextreme_angular_ui_nested._PP,devextreme_angular_ui_nested.ywL,devextreme_angular_ui_nested.WyY,devextreme_angular_ui_nested.$YR,devextreme_angular_ui_nested.kEo,devextreme_angular_ui_nested.uKt,devextreme_angular_ui_nested.YOZ,devextreme_angular_ui_nested.azD,devextreme_angular_core.Lz,devextreme_angular_core.ie,platform_browser.BrowserTransferStateModule],devextreme_angular_ui_nested.Uz5,devextreme_angular_ui_nested.LNK,devextreme_angular_ui_nested.mtS,devextreme_angular_ui_nested.tRk,devextreme_angular_ui_nested.idP,devextreme_angular_ui_nested.HaS,devextreme_angular_ui_nested.CxW,devextreme_angular_ui_nested.FZZ,devextreme_angular_ui_nested.Inm,devextreme_angular_ui_nested.e1H,devextreme_angular_ui_nested.$D5,devextreme_angular_ui_nested.SCM,devextreme_angular_ui_nested.DTR,devextreme_angular_ui_nested.ZCX,devextreme_angular_ui_nested.Oll,devextreme_angular_ui_nested.Q8p,devextreme_angular_ui_nested.Jiy,devextreme_angular_ui_nested._9O,devextreme_angular_ui_nested.kSd,devextreme_angular_ui_nested.fOF,devextreme_angular_ui_nested.IOm,devextreme_angular_ui_nested.kOw,devextreme_angular_ui_nested.weU,devextreme_angular_ui_nested.D_l,devextreme_angular_ui_nested.JxK,devextreme_angular_ui_nested.zZW,devextreme_angular_ui_nested.ynY,devextreme_angular_ui_nested.lgR,devextreme_angular_ui_nested.sni,devextreme_angular_ui_nested.waX,devextreme_angular_ui_nested.pxS,devextreme_angular_ui_nested.pGy,devextreme_angular_ui_nested.SH1,devextreme_angular_ui_nested.FJZ,devextreme_angular_ui_nested.RbS,devextreme_angular_ui_nested.$wd,devextreme_angular_ui_nested.xHg,devextreme_angular_ui_nested.p6x,devextreme_angular_ui_nested.vLN,devextreme_angular_ui_nested.rH1,devextreme_angular_ui_nested.lUW,devextreme_angular_ui_nested.$9q,devextreme_angular_ui_nested.nD3,devextreme_angular_ui_nested.Upd,devextreme_angular_ui_nested.WSE,devextreme_angular_ui_nested.LHj,devextreme_angular_ui_nested._PP,devextreme_angular_ui_nested.ywL,devextreme_angular_ui_nested.WyY,devextreme_angular_ui_nested.$YR,devextreme_angular_ui_nested.kEo,devextreme_angular_ui_nested.uKt,devextreme_angular_ui_nested.YOZ,devextreme_angular_ui_nested.azD,devextreme_angular_core.ie]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](DxTreeListModule,[{type:core.NgModule,args:[{imports:[devextreme_angular_ui_nested.Uz5,devextreme_angular_ui_nested.LNK,devextreme_angular_ui_nested.mtS,devextreme_angular_ui_nested.tRk,devextreme_angular_ui_nested.idP,devextreme_angular_ui_nested.HaS,devextreme_angular_ui_nested.CxW,devextreme_angular_ui_nested.FZZ,devextreme_angular_ui_nested.Inm,devextreme_angular_ui_nested.e1H,devextreme_angular_ui_nested.$D5,devextreme_angular_ui_nested.SCM,devextreme_angular_ui_nested.DTR,devextreme_angular_ui_nested.ZCX,devextreme_angular_ui_nested.Oll,devextreme_angular_ui_nested.Q8p,devextreme_angular_ui_nested.Jiy,devextreme_angular_ui_nested._9O,devextreme_angular_ui_nested.kSd,devextreme_angular_ui_nested.fOF,devextreme_angular_ui_nested.IOm,devextreme_angular_ui_nested.kOw,devextreme_angular_ui_nested.weU,devextreme_angular_ui_nested.D_l,devextreme_angular_ui_nested.JxK,devextreme_angular_ui_nested.zZW,devextreme_angular_ui_nested.ynY,devextreme_angular_ui_nested.lgR,devextreme_angular_ui_nested.sni,devextreme_angular_ui_nested.waX,devextreme_angular_ui_nested.pxS,devextreme_angular_ui_nested.pGy,devextreme_angular_ui_nested.SH1,devextreme_angular_ui_nested.FJZ,devextreme_angular_ui_nested.RbS,devextreme_angular_ui_nested.$wd,devextreme_angular_ui_nested.xHg,devextreme_angular_ui_nested.p6x,devextreme_angular_ui_nested.vLN,devextreme_angular_ui_nested.rH1,devextreme_angular_ui_nested.lUW,devextreme_angular_ui_nested.$9q,devextreme_angular_ui_nested.nD3,devextreme_angular_ui_nested.Upd,devextreme_angular_ui_nested.WSE,devextreme_angular_ui_nested.LHj,devextreme_angular_ui_nested._PP,devextreme_angular_ui_nested.ywL,devextreme_angular_ui_nested.WyY,devextreme_angular_ui_nested.$YR,devextreme_angular_ui_nested.kEo,devextreme_angular_ui_nested.uKt,devextreme_angular_ui_nested.YOZ,devextreme_angular_ui_nested.azD,devextreme_angular_core.Lz,devextreme_angular_core.ie,platform_browser.BrowserTransferStateModule],declarations:[DxTreeListComponent],exports:[DxTreeListComponent,devextreme_angular_ui_nested.Uz5,devextreme_angular_ui_nested.LNK,devextreme_angular_ui_nested.mtS,devextreme_angular_ui_nested.tRk,devextreme_angular_ui_nested.idP,devextreme_angular_ui_nested.HaS,devextreme_angular_ui_nested.CxW,devextreme_angular_ui_nested.FZZ,devextreme_angular_ui_nested.Inm,devextreme_angular_ui_nested.e1H,devextreme_angular_ui_nested.$D5,devextreme_angular_ui_nested.SCM,devextreme_angular_ui_nested.DTR,devextreme_angular_ui_nested.ZCX,devextreme_angular_ui_nested.Oll,devextreme_angular_ui_nested.Q8p,devextreme_angular_ui_nested.Jiy,devextreme_angular_ui_nested._9O,devextreme_angular_ui_nested.kSd,devextreme_angular_ui_nested.fOF,devextreme_angular_ui_nested.IOm,devextreme_angular_ui_nested.kOw,devextreme_angular_ui_nested.weU,devextreme_angular_ui_nested.D_l,devextreme_angular_ui_nested.JxK,devextreme_angular_ui_nested.zZW,devextreme_angular_ui_nested.ynY,devextreme_angular_ui_nested.lgR,devextreme_angular_ui_nested.sni,devextreme_angular_ui_nested.waX,devextreme_angular_ui_nested.pxS,devextreme_angular_ui_nested.pGy,devextreme_angular_ui_nested.SH1,devextreme_angular_ui_nested.FJZ,devextreme_angular_ui_nested.RbS,devextreme_angular_ui_nested.$wd,devextreme_angular_ui_nested.xHg,devextreme_angular_ui_nested.p6x,devextreme_angular_ui_nested.vLN,devextreme_angular_ui_nested.rH1,devextreme_angular_ui_nested.lUW,devextreme_angular_ui_nested.$9q,devextreme_angular_ui_nested.nD3,devextreme_angular_ui_nested.Upd,devextreme_angular_ui_nested.WSE,devextreme_angular_ui_nested.LHj,devextreme_angular_ui_nested._PP,devextreme_angular_ui_nested.ywL,devextreme_angular_ui_nested.WyY,devextreme_angular_ui_nested.$YR,devextreme_angular_ui_nested.kEo,devextreme_angular_ui_nested.uKt,devextreme_angular_ui_nested.YOZ,devextreme_angular_ui_nested.azD,devextreme_angular_core.ie]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&core["ɵɵsetNgModuleScope"](DxTreeListModule,{declarations:[DxTreeListComponent],imports:[devextreme_angular_ui_nested.Uz5,devextreme_angular_ui_nested.LNK,devextreme_angular_ui_nested.mtS,devextreme_angular_ui_nested.tRk,devextreme_angular_ui_nested.idP,devextreme_angular_ui_nested.HaS,devextreme_angular_ui_nested.CxW,devextreme_angular_ui_nested.FZZ,devextreme_angular_ui_nested.Inm,devextreme_angular_ui_nested.e1H,devextreme_angular_ui_nested.$D5,devextreme_angular_ui_nested.SCM,devextreme_angular_ui_nested.DTR,devextreme_angular_ui_nested.ZCX,devextreme_angular_ui_nested.Oll,devextreme_angular_ui_nested.Q8p,devextreme_angular_ui_nested.Jiy,devextreme_angular_ui_nested._9O,devextreme_angular_ui_nested.kSd,devextreme_angular_ui_nested.fOF,devextreme_angular_ui_nested.IOm,devextreme_angular_ui_nested.kOw,devextreme_angular_ui_nested.weU,devextreme_angular_ui_nested.D_l,devextreme_angular_ui_nested.JxK,devextreme_angular_ui_nested.zZW,devextreme_angular_ui_nested.ynY,devextreme_angular_ui_nested.lgR,devextreme_angular_ui_nested.sni,devextreme_angular_ui_nested.waX,devextreme_angular_ui_nested.pxS,devextreme_angular_ui_nested.pGy,devextreme_angular_ui_nested.SH1,devextreme_angular_ui_nested.FJZ,devextreme_angular_ui_nested.RbS,devextreme_angular_ui_nested.$wd,devextreme_angular_ui_nested.xHg,devextreme_angular_ui_nested.p6x,devextreme_angular_ui_nested.vLN,devextreme_angular_ui_nested.rH1,devextreme_angular_ui_nested.lUW,devextreme_angular_ui_nested.$9q,devextreme_angular_ui_nested.nD3,devextreme_angular_ui_nested.Upd,devextreme_angular_ui_nested.WSE,devextreme_angular_ui_nested.LHj,devextreme_angular_ui_nested._PP,devextreme_angular_ui_nested.ywL,devextreme_angular_ui_nested.WyY,devextreme_angular_ui_nested.$YR,devextreme_angular_ui_nested.kEo,devextreme_angular_ui_nested.uKt,devextreme_angular_ui_nested.YOZ,devextreme_angular_ui_nested.azD,devextreme_angular_core.Lz,devextreme_angular_core.ie,platform_browser.BrowserTransferStateModule],exports:[DxTreeListComponent,devextreme_angular_ui_nested.Uz5,devextreme_angular_ui_nested.LNK,devextreme_angular_ui_nested.mtS,devextreme_angular_ui_nested.tRk,devextreme_angular_ui_nested.idP,devextreme_angular_ui_nested.HaS,devextreme_angular_ui_nested.CxW,devextreme_angular_ui_nested.FZZ,devextreme_angular_ui_nested.Inm,devextreme_angular_ui_nested.e1H,devextreme_angular_ui_nested.$D5,devextreme_angular_ui_nested.SCM,devextreme_angular_ui_nested.DTR,devextreme_angular_ui_nested.ZCX,devextreme_angular_ui_nested.Oll,devextreme_angular_ui_nested.Q8p,devextreme_angular_ui_nested.Jiy,devextreme_angular_ui_nested._9O,devextreme_angular_ui_nested.kSd,devextreme_angular_ui_nested.fOF,devextreme_angular_ui_nested.IOm,devextreme_angular_ui_nested.kOw,devextreme_angular_ui_nested.weU,devextreme_angular_ui_nested.D_l,devextreme_angular_ui_nested.JxK,devextreme_angular_ui_nested.zZW,devextreme_angular_ui_nested.ynY,devextreme_angular_ui_nested.lgR,devextreme_angular_ui_nested.sni,devextreme_angular_ui_nested.waX,devextreme_angular_ui_nested.pxS,devextreme_angular_ui_nested.pGy,devextreme_angular_ui_nested.SH1,devextreme_angular_ui_nested.FJZ,devextreme_angular_ui_nested.RbS,devextreme_angular_ui_nested.$wd,devextreme_angular_ui_nested.xHg,devextreme_angular_ui_nested.p6x,devextreme_angular_ui_nested.vLN,devextreme_angular_ui_nested.rH1,devextreme_angular_ui_nested.lUW,devextreme_angular_ui_nested.$9q,devextreme_angular_ui_nested.nD3,devextreme_angular_ui_nested.Upd,devextreme_angular_ui_nested.WSE,devextreme_angular_ui_nested.LHj,devextreme_angular_ui_nested._PP,devextreme_angular_ui_nested.ywL,devextreme_angular_ui_nested.WyY,devextreme_angular_ui_nested.$YR,devextreme_angular_ui_nested.kEo,devextreme_angular_ui_nested.uKt,devextreme_angular_ui_nested.YOZ,devextreme_angular_ui_nested.azD,devextreme_angular_core.ie]})},"./node_modules/devextreme-angular/fesm2015/devextreme-angular-ui-tree-view.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>DxTreeViewModule,u:()=>DxTreeViewComponent});var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/platform-browser/fesm2020/platform-browser.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs"),devextreme_ui_tree_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/devextreme/esm/ui/tree_view.js"),devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/devextreme-angular/fesm2015/devextreme-angular-core.js"),devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/devextreme-angular/fesm2015/devextreme-angular-ui-nested.js");class DxTreeViewComponent extends devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ay{constructor(elementRef,ngZone,templateHost,_watcherHelper,_idh,optionHost,transferState,platformId){super(elementRef,ngZone,templateHost,_watcherHelper,transferState,platformId),this._watcherHelper=_watcherHelper,this._idh=_idh,this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"itemClick",emit:"onItemClick"},{subscribe:"itemCollapsed",emit:"onItemCollapsed"},{subscribe:"itemContextMenu",emit:"onItemContextMenu"},{subscribe:"itemExpanded",emit:"onItemExpanded"},{subscribe:"itemHold",emit:"onItemHold"},{subscribe:"itemRendered",emit:"onItemRendered"},{subscribe:"itemSelectionChanged",emit:"onItemSelectionChanged"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"selectAllValueChanged",emit:"onSelectAllValueChanged"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"animationEnabledChange"},{emit:"createChildrenChange"},{emit:"dataSourceChange"},{emit:"dataStructureChange"},{emit:"disabledChange"},{emit:"disabledExprChange"},{emit:"displayExprChange"},{emit:"elementAttrChange"},{emit:"expandAllEnabledChange"},{emit:"expandedExprChange"},{emit:"expandEventChange"},{emit:"expandNodesRecursiveChange"},{emit:"focusStateEnabledChange"},{emit:"hasItemsExprChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"itemHoldTimeoutChange"},{emit:"itemsChange"},{emit:"itemsExprChange"},{emit:"itemTemplateChange"},{emit:"keyExprChange"},{emit:"noDataTextChange"},{emit:"parentIdExprChange"},{emit:"rootValueChange"},{emit:"rtlEnabledChange"},{emit:"scrollDirectionChange"},{emit:"searchEditorOptionsChange"},{emit:"searchEnabledChange"},{emit:"searchExprChange"},{emit:"searchModeChange"},{emit:"searchTimeoutChange"},{emit:"searchValueChange"},{emit:"selectAllTextChange"},{emit:"selectByClickChange"},{emit:"selectedExprChange"},{emit:"selectionModeChange"},{emit:"selectNodesRecursiveChange"},{emit:"showCheckBoxesModeChange"},{emit:"tabIndexChange"},{emit:"useNativeScrollingChange"},{emit:"virtualModeEnabledChange"},{emit:"visibleChange"},{emit:"widthChange"}]),this._idh.setHost(this),optionHost.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(value){this._setOption("accessKey",value)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(value){this._setOption("activeStateEnabled",value)}get animationEnabled(){return this._getOption("animationEnabled")}set animationEnabled(value){this._setOption("animationEnabled",value)}get createChildren(){return this._getOption("createChildren")}set createChildren(value){this._setOption("createChildren",value)}get dataSource(){return this._getOption("dataSource")}set dataSource(value){this._setOption("dataSource",value)}get dataStructure(){return this._getOption("dataStructure")}set dataStructure(value){this._setOption("dataStructure",value)}get disabled(){return this._getOption("disabled")}set disabled(value){this._setOption("disabled",value)}get disabledExpr(){return this._getOption("disabledExpr")}set disabledExpr(value){this._setOption("disabledExpr",value)}get displayExpr(){return this._getOption("displayExpr")}set displayExpr(value){this._setOption("displayExpr",value)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(value){this._setOption("elementAttr",value)}get expandAllEnabled(){return this._getOption("expandAllEnabled")}set expandAllEnabled(value){this._setOption("expandAllEnabled",value)}get expandedExpr(){return this._getOption("expandedExpr")}set expandedExpr(value){this._setOption("expandedExpr",value)}get expandEvent(){return this._getOption("expandEvent")}set expandEvent(value){this._setOption("expandEvent",value)}get expandNodesRecursive(){return this._getOption("expandNodesRecursive")}set expandNodesRecursive(value){this._setOption("expandNodesRecursive",value)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(value){this._setOption("focusStateEnabled",value)}get hasItemsExpr(){return this._getOption("hasItemsExpr")}set hasItemsExpr(value){this._setOption("hasItemsExpr",value)}get height(){return this._getOption("height")}set height(value){this._setOption("height",value)}get hint(){return this._getOption("hint")}set hint(value){this._setOption("hint",value)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(value){this._setOption("hoverStateEnabled",value)}get itemHoldTimeout(){return this._getOption("itemHoldTimeout")}set itemHoldTimeout(value){this._setOption("itemHoldTimeout",value)}get items(){return this._getOption("items")}set items(value){this._setOption("items",value)}get itemsExpr(){return this._getOption("itemsExpr")}set itemsExpr(value){this._setOption("itemsExpr",value)}get itemTemplate(){return this._getOption("itemTemplate")}set itemTemplate(value){this._setOption("itemTemplate",value)}get keyExpr(){return this._getOption("keyExpr")}set keyExpr(value){this._setOption("keyExpr",value)}get noDataText(){return this._getOption("noDataText")}set noDataText(value){this._setOption("noDataText",value)}get parentIdExpr(){return this._getOption("parentIdExpr")}set parentIdExpr(value){this._setOption("parentIdExpr",value)}get rootValue(){return this._getOption("rootValue")}set rootValue(value){this._setOption("rootValue",value)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(value){this._setOption("rtlEnabled",value)}get scrollDirection(){return this._getOption("scrollDirection")}set scrollDirection(value){this._setOption("scrollDirection",value)}get searchEditorOptions(){return this._getOption("searchEditorOptions")}set searchEditorOptions(value){this._setOption("searchEditorOptions",value)}get searchEnabled(){return this._getOption("searchEnabled")}set searchEnabled(value){this._setOption("searchEnabled",value)}get searchExpr(){return this._getOption("searchExpr")}set searchExpr(value){this._setOption("searchExpr",value)}get searchMode(){return this._getOption("searchMode")}set searchMode(value){this._setOption("searchMode",value)}get searchTimeout(){return this._getOption("searchTimeout")}set searchTimeout(value){this._setOption("searchTimeout",value)}get searchValue(){return this._getOption("searchValue")}set searchValue(value){this._setOption("searchValue",value)}get selectAllText(){return this._getOption("selectAllText")}set selectAllText(value){this._setOption("selectAllText",value)}get selectByClick(){return this._getOption("selectByClick")}set selectByClick(value){this._setOption("selectByClick",value)}get selectedExpr(){return this._getOption("selectedExpr")}set selectedExpr(value){this._setOption("selectedExpr",value)}get selectionMode(){return this._getOption("selectionMode")}set selectionMode(value){this._setOption("selectionMode",value)}get selectNodesRecursive(){return this._getOption("selectNodesRecursive")}set selectNodesRecursive(value){this._setOption("selectNodesRecursive",value)}get showCheckBoxesMode(){return this._getOption("showCheckBoxesMode")}set showCheckBoxesMode(value){this._setOption("showCheckBoxesMode",value)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(value){this._setOption("tabIndex",value)}get useNativeScrolling(){return this._getOption("useNativeScrolling")}set useNativeScrolling(value){this._setOption("useNativeScrolling",value)}get virtualModeEnabled(){return this._getOption("virtualModeEnabled")}set virtualModeEnabled(value){this._setOption("virtualModeEnabled",value)}get visible(){return this._getOption("visible")}set visible(value){this._setOption("visible",value)}get width(){return this._getOption("width")}set width(value){this._setOption("width",value)}get itemsChildren(){return this._getOption("items")}set itemsChildren(value){this.setChildren("items",value)}_createInstance(element,options){return new devextreme_ui_tree_view__WEBPACK_IMPORTED_MODULE_0__.Z(element,options)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(changes){super.ngOnChanges(changes),this.setupChanges("dataSource",changes),this.setupChanges("items",changes),this.setupChanges("searchExpr",changes)}setupChanges(prop,changes){prop in this._optionsToUpdate||this._idh.setup(prop,changes)}ngDoCheck(){this._idh.doCheck("dataSource"),this._idh.doCheck("items"),this._idh.doCheck("searchExpr"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(name,value){let isSetup=this._idh.setupSingle(name,value),isChanged=null!==this._idh.getChanges(name,value);(isSetup||isChanged)&&super._setOption(name,value)}}DxTreeViewComponent.ɵfac=function DxTreeViewComponent_Factory(t){return new(t||DxTreeViewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.NgZone),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__._5),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__._h),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.i9),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.al),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__.TransferState),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.PLATFORM_ID))},DxTreeViewComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({type:DxTreeViewComponent,selectors:[["dx-tree-view"]],contentQueries:function DxTreeViewComponent_ContentQueries(rf,ctx,dirIndex){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵcontentQuery"](dirIndex,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.ZT3,4),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t=_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]())&&(ctx.itemsChildren=_t)}},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",animationEnabled:"animationEnabled",createChildren:"createChildren",dataSource:"dataSource",dataStructure:"dataStructure",disabled:"disabled",disabledExpr:"disabledExpr",displayExpr:"displayExpr",elementAttr:"elementAttr",expandAllEnabled:"expandAllEnabled",expandedExpr:"expandedExpr",expandEvent:"expandEvent",expandNodesRecursive:"expandNodesRecursive",focusStateEnabled:"focusStateEnabled",hasItemsExpr:"hasItemsExpr",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",itemHoldTimeout:"itemHoldTimeout",items:"items",itemsExpr:"itemsExpr",itemTemplate:"itemTemplate",keyExpr:"keyExpr",noDataText:"noDataText",parentIdExpr:"parentIdExpr",rootValue:"rootValue",rtlEnabled:"rtlEnabled",scrollDirection:"scrollDirection",searchEditorOptions:"searchEditorOptions",searchEnabled:"searchEnabled",searchExpr:"searchExpr",searchMode:"searchMode",searchTimeout:"searchTimeout",searchValue:"searchValue",selectAllText:"selectAllText",selectByClick:"selectByClick",selectedExpr:"selectedExpr",selectionMode:"selectionMode",selectNodesRecursive:"selectNodesRecursive",showCheckBoxesMode:"showCheckBoxesMode",tabIndex:"tabIndex",useNativeScrolling:"useNativeScrolling",virtualModeEnabled:"virtualModeEnabled",visible:"visible",width:"width"},outputs:{onContentReady:"onContentReady",onDisposing:"onDisposing",onInitialized:"onInitialized",onItemClick:"onItemClick",onItemCollapsed:"onItemCollapsed",onItemContextMenu:"onItemContextMenu",onItemExpanded:"onItemExpanded",onItemHold:"onItemHold",onItemRendered:"onItemRendered",onItemSelectionChanged:"onItemSelectionChanged",onOptionChanged:"onOptionChanged",onSelectAllValueChanged:"onSelectAllValueChanged",onSelectionChanged:"onSelectionChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",animationEnabledChange:"animationEnabledChange",createChildrenChange:"createChildrenChange",dataSourceChange:"dataSourceChange",dataStructureChange:"dataStructureChange",disabledChange:"disabledChange",disabledExprChange:"disabledExprChange",displayExprChange:"displayExprChange",elementAttrChange:"elementAttrChange",expandAllEnabledChange:"expandAllEnabledChange",expandedExprChange:"expandedExprChange",expandEventChange:"expandEventChange",expandNodesRecursiveChange:"expandNodesRecursiveChange",focusStateEnabledChange:"focusStateEnabledChange",hasItemsExprChange:"hasItemsExprChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",itemHoldTimeoutChange:"itemHoldTimeoutChange",itemsChange:"itemsChange",itemsExprChange:"itemsExprChange",itemTemplateChange:"itemTemplateChange",keyExprChange:"keyExprChange",noDataTextChange:"noDataTextChange",parentIdExprChange:"parentIdExprChange",rootValueChange:"rootValueChange",rtlEnabledChange:"rtlEnabledChange",scrollDirectionChange:"scrollDirectionChange",searchEditorOptionsChange:"searchEditorOptionsChange",searchEnabledChange:"searchEnabledChange",searchExprChange:"searchExprChange",searchModeChange:"searchModeChange",searchTimeoutChange:"searchTimeoutChange",searchValueChange:"searchValueChange",selectAllTextChange:"selectAllTextChange",selectByClickChange:"selectByClickChange",selectedExprChange:"selectedExprChange",selectionModeChange:"selectionModeChange",selectNodesRecursiveChange:"selectNodesRecursiveChange",showCheckBoxesModeChange:"showCheckBoxesModeChange",tabIndexChange:"tabIndexChange",useNativeScrollingChange:"useNativeScrollingChange",virtualModeEnabledChange:"virtualModeEnabledChange",visibleChange:"visibleChange",widthChange:"widthChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵProvidersFeature"]([devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__._5,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__._h,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.al,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.i9]),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"],_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵNgOnChangesFeature"]],decls:0,vars:0,template:function DxTreeViewComponent_Template(rf,ctx){},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵsetClassMetadata"](DxTreeViewComponent,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Component,args:[{selector:"dx-tree-view",template:"",providers:[devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__._5,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__._h,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.al,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.i9]}]}],(function(){return[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef},{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.NgZone},{type:devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__._5},{type:devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__._h},{type:devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.i9},{type:devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.al},{type:_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__.TransferState},{type:void 0,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Inject,args:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.PLATFORM_ID]}]}]}),{accessKey:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],activeStateEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],animationEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],createChildren:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],dataSource:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],dataStructure:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],disabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],disabledExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],displayExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],elementAttr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],expandAllEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],expandedExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],expandEvent:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],expandNodesRecursive:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],focusStateEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],hasItemsExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],height:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],hint:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],hoverStateEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],itemHoldTimeout:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],items:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],itemsExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],itemTemplate:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],keyExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],noDataText:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],parentIdExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],rootValue:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],rtlEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],scrollDirection:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],searchEditorOptions:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],searchEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],searchExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],searchMode:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],searchTimeout:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],searchValue:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],selectAllText:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],selectByClick:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],selectedExpr:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],selectionMode:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],selectNodesRecursive:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],showCheckBoxesMode:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],tabIndex:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],useNativeScrolling:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],virtualModeEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],visible:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],width:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],onContentReady:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onDisposing:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onInitialized:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onItemClick:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onItemCollapsed:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onItemContextMenu:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onItemExpanded:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onItemHold:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onItemRendered:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onItemSelectionChanged:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onOptionChanged:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onSelectAllValueChanged:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onSelectionChanged:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],accessKeyChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],activeStateEnabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],animationEnabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],createChildrenChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],dataSourceChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],dataStructureChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],disabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],disabledExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],displayExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],elementAttrChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],expandAllEnabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],expandedExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],expandEventChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],expandNodesRecursiveChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],focusStateEnabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],hasItemsExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],heightChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],hintChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],hoverStateEnabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],itemHoldTimeoutChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],itemsChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],itemsExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],itemTemplateChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],keyExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],noDataTextChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],parentIdExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],rootValueChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],rtlEnabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],scrollDirectionChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],searchEditorOptionsChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],searchEnabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],searchExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],searchModeChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],searchTimeoutChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],searchValueChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],selectAllTextChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],selectByClickChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],selectedExprChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],selectionModeChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],selectNodesRecursiveChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],showCheckBoxesModeChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],tabIndexChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],useNativeScrollingChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],virtualModeEnabledChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],visibleChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],widthChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],itemsChildren:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.ContentChildren,args:[devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.ZT3]}]});class DxTreeViewModule{}DxTreeViewModule.ɵfac=function DxTreeViewModule_Factory(t){return new(t||DxTreeViewModule)},DxTreeViewModule.ɵmod=_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineNgModule"]({type:DxTreeViewModule}),DxTreeViewModule.ɵinj=_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjector"]({imports:[[devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.Q8p,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.ZOF,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.idP,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.UxI,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lz,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.ie,_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__.BrowserTransferStateModule],devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.Q8p,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.ZOF,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.idP,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.UxI,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.ie]}),("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵsetClassMetadata"](DxTreeViewModule,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.NgModule,args:[{imports:[devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.Q8p,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.ZOF,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.idP,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.UxI,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lz,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.ie,_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__.BrowserTransferStateModule],declarations:[DxTreeViewComponent],exports:[DxTreeViewComponent,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.Q8p,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.ZOF,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.idP,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.UxI,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.ie]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsetNgModuleScope"](DxTreeViewModule,{declarations:[DxTreeViewComponent],imports:[devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.Q8p,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.ZOF,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.idP,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.UxI,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lz,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.ie,_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__.BrowserTransferStateModule],exports:[DxTreeViewComponent,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.Q8p,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.ZOF,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.idP,devextreme_angular_ui_nested__WEBPACK_IMPORTED_MODULE_4__.UxI,devextreme_angular_core__WEBPACK_IMPORTED_MODULE_1__.ie]})},"./node_modules/devextreme/esm/events/double_click.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>DBLCLICK_EVENT_NAME});var _events_core_events_engine__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/devextreme/esm/events/core/events_engine.js"),_core_utils_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/devextreme/esm/core/utils/dom.js"),_core_dom_adapter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/devextreme/esm/core/dom_adapter.js"),_core_class__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/devextreme/esm/core/class.js"),_core_event_registrator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/devextreme/esm/events/core/event_registrator.js"),_click__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/devextreme/esm/events/click.js"),_utils_index__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/devextreme/esm/events/utils/index.js"),DBLCLICK_EVENT_NAME="dxdblclick",NAMESPACED_CLICK_EVENT=(0,_utils_index__WEBPACK_IMPORTED_MODULE_6__.V4)(_click__WEBPACK_IMPORTED_MODULE_5__.u,"dxDblClick"),DblClick=_core_class__WEBPACK_IMPORTED_MODULE_3__.Z.inherit({ctor:function(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick:function(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add:function(){this._handlerCount<=0&&_events_core_events_engine__WEBPACK_IMPORTED_MODULE_0__.Z.on(_core_dom_adapter__WEBPACK_IMPORTED_MODULE_2__.Z.getDocument(),NAMESPACED_CLICK_EVENT,this._clickHandler.bind(this)),this._handlerCount++},_clickHandler:function(e){var timeStamp=e.timeStamp||Date.now(),timeBetweenClicks=timeStamp-this._lastClickTimeStamp;!(timeBetweenClicks<0)&&timeBetweenClicks<300?((0,_utils_index__WEBPACK_IMPORTED_MODULE_6__.BX)({type:DBLCLICK_EVENT_NAME,target:(0,_core_utils_dom__WEBPACK_IMPORTED_MODULE_1__.Ls)(this._firstClickTarget,e.target),originalEvent:e}),this._forgetLastClick()):(this._firstClickTarget=e.target,this._lastClickTimeStamp=timeStamp)},remove:function(){this._handlerCount--,this._handlerCount<=0&&(this._forgetLastClick(),_events_core_events_engine__WEBPACK_IMPORTED_MODULE_0__.Z.off(_core_dom_adapter__WEBPACK_IMPORTED_MODULE_2__.Z.getDocument(),NAMESPACED_CLICK_EVENT))}});(0,_core_event_registrator__WEBPACK_IMPORTED_MODULE_4__.Z)(DBLCLICK_EVENT_NAME,new DblClick)},"./node_modules/devextreme/esm/renovation/ui/scroll_view/utils/scroll_direction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>ScrollDirection});var _common_consts__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/devextreme/esm/renovation/ui/scroll_view/common/consts.js");class ScrollDirection{constructor(direction){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=null!=direction?direction:_common_consts__WEBPACK_IMPORTED_MODULE_0__.Et}get isHorizontal(){return this.direction===_common_consts__WEBPACK_IMPORTED_MODULE_0__.Xv||this.direction===_common_consts__WEBPACK_IMPORTED_MODULE_0__.b$}get isVertical(){return this.direction===_common_consts__WEBPACK_IMPORTED_MODULE_0__.Et||this.direction===_common_consts__WEBPACK_IMPORTED_MODULE_0__.b$}get isBoth(){return this.direction===_common_consts__WEBPACK_IMPORTED_MODULE_0__.b$}}},"./node_modules/devextreme/esm/ui/editor/ui.data_expression.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _core_utils_variable_wrapper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/devextreme/esm/core/utils/variable_wrapper.js"),_core_utils_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/devextreme/esm/core/utils/data.js"),_core_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/devextreme/esm/core/utils/common.js"),_core_utils_type__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/devextreme/esm/core/utils/type.js"),_core_utils_extend__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/devextreme/esm/core/utils/extend.js"),_data_helper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/devextreme/esm/data_helper.js"),_data_data_source_data_source__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/devextreme/esm/data/data_source/data_source.js"),_data_array_store__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/devextreme/esm/data/array_store.js"),_core_utils_deferred__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/devextreme/esm/core/utils/deferred.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_core_utils_extend__WEBPACK_IMPORTED_MODULE_4__.l)({},_data_helper__WEBPACK_IMPORTED_MODULE_5__.Z,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new _data_data_source_data_source__WEBPACK_IMPORTED_MODULE_6__.o({store:new _data_array_store__WEBPACK_IMPORTED_MODULE_7__.Z(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter:function(){this._displayGetter=(0,_core_utils_data__WEBPACK_IMPORTED_MODULE_1__.vb)(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=(0,_core_utils_data__WEBPACK_IMPORTED_MODULE_1__.vb)(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(value){var deferred=new _core_utils_deferred__WEBPACK_IMPORTED_MODULE_8__.BH;return value=this._unwrappedValue(value),(0,_core_utils_type__WEBPACK_IMPORTED_MODULE_3__.$K)(value)?(this._loadSingle(this._valueGetterExpr(),value).done(function(item){this._isValueEquals(this._valueGetter(item),value)?deferred.resolve(item):deferred.reject()}.bind(this)).fail((function(){deferred.reject()})),this._loadValueDeferred=deferred,deferred.promise()):deferred.reject().promise()},_rejectValueLoading:function(){var _this$_loadValueDefer;null===(_this$_loadValueDefer=this._loadValueDeferred)||void 0===_this$_loadValueDefer||_this$_loadValueDefer.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(value){var _value;return(value=null!==(_value=value)&&void 0!==_value?_value:this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(value=this._getItemKey(value)),_core_utils_variable_wrapper__WEBPACK_IMPORTED_MODULE_0__.default.unwrap(value)},_getItemKey:function(value){var key=this._dataSource.key();if(Array.isArray(key)){for(var result={},i=0,n=key.length;i<n;i++)result[key[i]]=value[key[i]];return result}return key&&"object"==typeof value&&(value=value[key]),value},_isValueEquals:function(value1,value2){var dataSourceKey=this._dataSource&&this._dataSource.key(),result=this._compareValues(value1,value2);return!result&&dataSourceKey&&(0,_core_utils_type__WEBPACK_IMPORTED_MODULE_3__.$K)(value1)&&(0,_core_utils_type__WEBPACK_IMPORTED_MODULE_3__.$K)(value2)&&(result=Array.isArray(dataSourceKey)?this._compareByCompositeKey(value1,value2,dataSourceKey):this._compareByKey(value1,value2,dataSourceKey)),result},_compareByCompositeKey:function(value1,value2,key){var isObject=_core_utils_type__WEBPACK_IMPORTED_MODULE_3__.Kn;if(!isObject(value1)||!isObject(value2))return!1;for(var i=0,n=key.length;i<n;i++)if(value1[key[i]]!==value2[key[i]])return!1;return!0},_compareByKey:function(value1,value2,key){var unwrapObservable=_core_utils_variable_wrapper__WEBPACK_IMPORTED_MODULE_0__.default.unwrap,valueKey1=(0,_core_utils_common__WEBPACK_IMPORTED_MODULE_2__.IS)(unwrapObservable(value1[key]),value1),valueKey2=(0,_core_utils_common__WEBPACK_IMPORTED_MODULE_2__.IS)(unwrapObservable(value2[key]),value2);return this._compareValues(valueKey1,valueKey2)},_compareValues:function(value1,value2){return(0,_core_utils_data__WEBPACK_IMPORTED_MODULE_1__.Ex)(value1,!0)===(0,_core_utils_data__WEBPACK_IMPORTED_MODULE_1__.Ex)(value2,!0)},_initDynamicTemplates:_core_utils_common__WEBPACK_IMPORTED_MODULE_2__.ZT,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var valueExpr=this.option("valueExpr");return(0,_core_utils_type__WEBPACK_IMPORTED_MODULE_3__.HD)(valueExpr)&&"this"!==valueExpr||(0,_core_utils_type__WEBPACK_IMPORTED_MODULE_3__.mf)(valueExpr)?valueExpr:null},_dataExpressionOptionChanged:function(args){switch(args.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}})},"./node_modules/devextreme/esm/ui/hierarchical_collection/ui.hierarchical_collection_widget.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>ui_hierarchical_collection_widget});var renderer=__webpack_require__("./node_modules/devextreme/esm/core/renderer.js"),data=__webpack_require__("./node_modules/devextreme/esm/core/utils/data.js"),extend=__webpack_require__("./node_modules/devextreme/esm/core/utils/extend.js"),iterator=__webpack_require__("./node_modules/devextreme/esm/core/utils/iterator.js"),devices=__webpack_require__("./node_modules/devextreme/esm/core/devices.js"),icon=__webpack_require__("./node_modules/devextreme/esm/core/utils/icon.js"),core_class=__webpack_require__("./node_modules/devextreme/esm/core/class.js"),common=__webpack_require__("./node_modules/devextreme/esm/core/utils/common.js"),type=__webpack_require__("./node_modules/devextreme/esm/core/utils/type.js"),ui_errors=__webpack_require__("./node_modules/devextreme/esm/ui/widget/ui.errors.js"),ui_search_box_mixin=__webpack_require__("./node_modules/devextreme/esm/ui/widget/ui.search_box_mixin.js"),text_box=__webpack_require__("./node_modules/devextreme/esm/ui/text_box.js"),query=__webpack_require__("./node_modules/devextreme/esm/data/query.js"),store_helper=__webpack_require__("./node_modules/devextreme/esm/data/store_helper.js"),DataConverter=core_class.Z.inherit({ctor:function(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes:function(items,parentKey){var that=this;(0,iterator.S6)(items,(function(_,item){var parentId=(0,type.$K)(parentKey)?parentKey:that._getParentId(item),node=that._convertItemToNode(item,parentId);that._dataStructure.push(node),that._checkForDuplicateId(node.internalFields.key),that._indexByKey[node.internalFields.key]=that._dataStructure.length-1,that._itemHasChildren(item)&&that._convertItemsToNodes(that._dataAccessors.getters.items(item),node.internalFields.key)}))},_checkForDuplicateId:function(key){if((0,type.$K)(this._indexByKey[key]))throw ui_errors.Z.Error("E1040",key)},_getParentId:function(item){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(item):void 0},_itemHasChildren:function(item){if("plain"!==this._dataType){var items=this._dataAccessors.getters.items(item);return items&&items.length}},_getUniqueKey:function(item){var keyGetter=this._dataAccessors.getters.key,itemKey=keyGetter(item);return keyGetter&&(itemKey||0===itemKey)&&(0,type.pt)(itemKey)?itemKey:this.getItemsCount()},_convertItemToNode:function(item,parentKey){this._itemsCount++,!1!==item.visible&&this._visibleItemsCount++;var node={internalFields:{disabled:this._dataAccessors.getters.disabled(item,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(item,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(item,{defaultValue:!1}),key:this._getUniqueKey(item),parentKey:(0,type.$K)(parentKey)?parentKey:this._rootValue,item:this._makeObjectFromPrimitive(item),childrenKeys:[]}};return(0,extend.l)(node,item),delete node.items,node},setChildrenKeys:function(){var that=this;(0,iterator.S6)(this._dataStructure,(function(_,node){if(node.internalFields.parentKey!==that._rootValue){var parent=that.getParentNode(node);parent&&parent.internalFields.childrenKeys.push(node.internalFields.key)}}))},_makeObjectFromPrimitive:function(item){if((0,type.pt)(item)){var key=item;item={},this._dataAccessors.setters.key(item,key)}return item},_convertToPublicNode:function(node,parent){if(!node)return null;var publicNode={text:this._dataAccessors.getters.display(node),key:node.internalFields.key,selected:node.internalFields.selected,expanded:node.internalFields.expanded,disabled:node.internalFields.disabled,parent:parent||null,itemData:node.internalFields.item,children:[],items:[]};return publicNode.parent&&(publicNode.parent.children.push(publicNode),publicNode.parent.items.push(publicNode)),publicNode},convertToPublicNodes:function(data,parent){if(!data.length)return[];var that=this,publicNodes=[];return(0,iterator.S6)(data,(function(_,node){node=(0,type.pt)(node)?that._getByKey(node):node;var publicNode=that._convertToPublicNode(node,parent);publicNode.children=that.convertToPublicNodes(node.internalFields.childrenKeys,publicNode),publicNodes.push(publicNode),node.internalFields.publicNode=publicNode})),publicNodes},setDataAccessors:function(accessors){this._dataAccessors=accessors},_getByKey:function(key){return this._dataStructure[this.getIndexByKey(key)]||null},getParentNode:function(node){return this._getByKey(node.internalFields.parentKey)},getByKey:function(data,key){if(null==key)return null;var result=null,that=this;return function(data,key){return(0,iterator.S6)(data,(function(_,element){if((element.internalFields&&element.internalFields.key||that._dataAccessors.getters.key(element)).toString()===key.toString())return result=element,!1})),result}(data,key)},getItemsCount:function(){return this._itemsCount},getVisibleItemsCount:function(){return this._visibleItemsCount},updateIndexByKey:function(){var that=this;this._indexByKey={},(0,iterator.S6)(this._dataStructure,(function(index,node){that._checkForDuplicateId(node.internalFields.key),that._indexByKey[node.internalFields.key]=index}))},updateChildrenKeys:function(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys:function(){this._indexByKey={},(0,iterator.S6)(this._dataStructure,(function(index,node){node.internalFields.childrenKeys=[]}))},getIndexByKey:function(key){return this._indexByKey[key]},createPlainStructure:function(items,rootValue,dataType){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=rootValue,this._dataType=dataType,this._indexByKey={},this._convertItemsToNodes(items),this.setChildrenKeys(),this._dataStructure}});const ui_data_converter=DataConverter;ui_search_box_mixin.Z.setEditorClass(text_box.Z);var DataAdapter=core_class.Z.inherit({ctor:function(options){this.options={},(0,extend.l)(this.options,this._defaultOptions(),options),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption:function(name,value){this.options[name]=value,"recursiveSelection"===name&&this._updateSelection()},_defaultOptions:function(){return{dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new ui_data_converter,onNodeChanged:common.ZT,sort:null}},_createInternalDataStructure:function(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection:function(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray("selected")},_updateExpansion:function(key){this.options.recursiveExpansion&&(key?this._updateOneBranch(key):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray("expanded")},_updateNodesKeysArray:function(property){var that=this,array=[];return(0,iterator.S6)(that._getDataBySelectionMode(),(function(_,node){that._isNodeVisible(node)&&node.internalFields[property]&&("expanded"===property||that.options.multipleSelection?array.push(node.internalFields.key):(array.length&&that.toggleSelection(array[0],!1,!0),array=[node.internalFields.key]))})),array},_getDataBySelectionMode:function(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:function(node){return!1!==node.internalFields.item.visible},_getByKey:function(data,key){return data===this._dataStructure?this.options.dataConverter._getByKey(key):this.options.dataConverter.getByKey(data,key)},_setChildrenSelection:function(){var that=this;(0,iterator.S6)(this._dataStructure,(function(_,node){if(node.internalFields.childrenKeys.length){var isSelected=node.internalFields.selected;!0===isSelected&&that._toggleChildrenSelection(node,isSelected)}}))},_setParentSelection:function(){var that=this;(0,iterator.S6)(this._dataStructure,(function(_,node){that.options.dataConverter.getParentNode(node)&&node.internalFields.parentKey!==that.options.rootValue&&that._iterateParents(node,(function(parent){var newParentState=that._calculateSelectedState(parent);that._setFieldState(parent,"selected",newParentState)}))}))},_setParentExpansion:function(){var that=this;(0,iterator.S6)(this._dataStructure,(function(_,node){node.internalFields.expanded&&that._updateOneBranch(node.internalFields.key)}))},_updateOneBranch:function(key){var that=this,node=this.getNodeByKey(key);that._iterateParents(node,(function(parent){that._setFieldState(parent,"expanded",!0)}))},_iterateChildren:function(node,recursive,callback,processedKeys){if((0,type.mf)(callback)){var that=this,nodeKey=node.internalFields.key;-1===(processedKeys=processedKeys||[]).indexOf(nodeKey)&&(processedKeys.push(nodeKey),(0,iterator.S6)(node.internalFields.childrenKeys,(function(_,key){var child=that.getNodeByKey(key);callback(child),child.internalFields.childrenKeys.length&&recursive&&that._iterateChildren(child,recursive,callback,processedKeys)})))}},_iterateParents:function(node,callback,processedKeys){if(node.internalFields.parentKey!==this.options.rootValue&&(0,type.mf)(callback)){processedKeys=processedKeys||[];var key=node.internalFields.key;if(-1===processedKeys.indexOf(key)){processedKeys.push(key);var parent=this.options.dataConverter.getParentNode(node);parent&&(callback(parent),parent.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(parent,callback,processedKeys))}}},_calculateSelectedState:function(node){for(var itemsCount=node.internalFields.childrenKeys.length,selectedItemsCount=0,invisibleItemsCount=0,result=!1,i=0;i<=itemsCount-1;i++){var childNode=this.getNodeByKey(node.internalFields.childrenKeys[i]),isChildInvisible=!1===childNode.internalFields.item.visible,childState=childNode.internalFields.selected;isChildInvisible?invisibleItemsCount++:childState?selectedItemsCount++:void 0===childState&&(selectedItemsCount+=.5)}return selectedItemsCount&&(result=selectedItemsCount===itemsCount-invisibleItemsCount||void 0),result},_toggleChildrenSelection:function(node,state){var that=this;this._iterateChildren(node,!0,(function(child){that._isNodeVisible(child)&&that._setFieldState(child,"selected",state)}))},_setFieldState:function(node,field,state){node.internalFields[field]!==state&&(node.internalFields[field]=state,node.internalFields.publicNode&&(node.internalFields.publicNode[field]=state),this.options.dataAccessors.setters[field](node.internalFields.item,state),this.options.onNodeChanged(node))},_markChildren:function(keys){var that=this;(0,iterator.S6)(keys,(function(_,key){var index=that.getIndexByKey(key),node=that.getNodeByKey(key);that._dataStructure[index]=0,node.internalFields.childrenKeys.length&&that._markChildren(node.internalFields.childrenKeys)}))},_removeNode:function(key){var node=this.getNodeByKey(key);this._dataStructure[this.getIndexByKey(key)]=0,this._markChildren(node.internalFields.childrenKeys);var that=this,counter=0,items=(0,extend.l)([],this._dataStructure);(0,iterator.S6)(items,(function(index,item){item||(that._dataStructure.splice(index-counter,1),counter++)}))},_addNode:function(item){var dataConverter=this.options.dataConverter,node=dataConverter._convertItemToNode(item,this.options.dataAccessors.getters.parentKey(item));this._dataStructure=this._dataStructure.concat(node),this._initialDataStructure=this._initialDataStructure.concat(node),dataConverter._dataStructure=dataConverter._dataStructure.concat(node)},_updateFields:function(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys:function(){return this._selectedNodesKeys},getExpandedNodesKeys:function(){return this._expandedNodesKeys},getData:function(){return this._dataStructure},getFullData:function(){return this._initialDataStructure},getNodeByItem:function(item){var result=null;return(0,iterator.S6)(this._dataStructure,(function(_,node){if(node.internalFields.item===item)return result=node,!1})),result},getNodesByItems:function(items){var that=this,nodes=[];return(0,iterator.S6)(items,(function(_,item){var node=that.getNodeByItem(item);node&&nodes.push(node)})),nodes},getNodeByKey:function(key,data){return this._getByKey(data||this._getDataBySelectionMode(),key)},getTreeNodes:function(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount:function(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount:function(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:function(node){return node.internalFields.publicNode},getRootNodes:function(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes:function(parentKey){return(0,query.Z)(this._dataStructure).filter(["internalFields.parentKey",parentKey]).toArray()},getIndexByKey:function(key){return this.options.dataConverter.getIndexByKey(key)},addItem:function(item){this._addNode(item),this._updateFields()},removeItem:function(key){this._removeNode(key),this._updateFields()},toggleSelection:function(key,state,selectRecursive){var isSingleModeUnselect=this._isSingleModeUnselect(state),node=this._getByKey(selectRecursive||isSingleModeUnselect?this._initialDataStructure:this._dataStructure,key);this._setFieldState(node,"selected",state),this.options.recursiveSelection&&!selectRecursive&&(state?this._setChildrenSelection():this._toggleChildrenSelection(node,state),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray("selected")},_isSingleModeUnselect:function(selectionState){return!this.options.multipleSelection&&!selectionState},toggleNodeDisabledState:function(key,state){var node=this.getNodeByKey(key);this._setFieldState(node,"disabled",state)},toggleSelectAll:function(state){if((0,type.$K)(state)){var that=this,lastSelectedKey=that._selectedNodesKeys[that._selectedNodesKeys.length-1],dataStructure=that._isSingleModeUnselect(state)?this._initialDataStructure:this._dataStructure;(0,iterator.S6)(dataStructure,(function(index,node){that._isNodeVisible(node)&&that._setFieldState(node,"selected",state)})),that._selectedNodesKeys=that._updateNodesKeysArray("selected"),!state&&that.options.selectionRequired&&that.toggleSelection(lastSelectedKey,!0)}},isAllSelected:function(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion:function(key,state){var node=this.getNodeByKey(key);this._setFieldState(node,"expanded",state),state&&this._updateExpansion(key),this._expandedNodesKeys=this._updateNodesKeysArray("expanded")},isFiltered:function(item){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[item]).length},_createCriteria:function(selector,value,operation){var searchFilter=[];return Array.isArray(selector)?((0,iterator.S6)(selector,(function(i,item){searchFilter.push([item,operation,value],"or")})),searchFilter.pop(),searchFilter):[selector,operation,value]},_filterDataStructure:function(filterValue,dataStructure){var selector=this.options.searchExpr||this.options.dataAccessors.getters.display,operation=ui_search_box_mixin.Z.getOperationBySearchMode(this.options.searchMode),criteria=this._createCriteria(selector,filterValue,operation);return dataStructure=dataStructure||this._initialDataStructure,(0,query.Z)(dataStructure).filter(criteria).toArray()},search:function(searchValue){var that=this,matches=this._filterDataStructure(searchValue),dataConverter=this.options.dataConverter;return function lookForParents(matches,index){for(var length=matches.length;index<length;){var node=matches[index];if(node.internalFields.parentKey!==that.options.rootValue){var parent=dataConverter.getParentNode(node);parent?(parent.internalFields.expanded||that._setFieldState(parent,"expanded",!0),matches.includes(parent)?index++:(matches.splice(index,0,parent),lookForParents(matches,index))):(ui_errors.Z.log("W1007",node.internalFields.parentKey,node.internalFields.key),index++)}else index++}}(matches,0),this.options.sort&&(matches=store_helper.default.queryByOptions((0,query.Z)(matches),{sort:this.options.sort}).toArray()),dataConverter._indexByKey={},(0,iterator.S6)(matches,(function(index,node){node.internalFields.childrenKeys=[],dataConverter._indexByKey[node.internalFields.key]=index})),dataConverter._dataStructure=matches,dataConverter.setChildrenKeys(),dataConverter._dataStructure}});const ui_data_adapter=DataAdapter;var ui_collection_widget_edit=__webpack_require__("./node_modules/devextreme/esm/ui/collection/ui.collection_widget.edit.js"),bindable_template=__webpack_require__("./node_modules/devextreme/esm/core/templates/bindable_template.js");const ui_hierarchical_collection_widget=ui_collection_widget_edit.Z.inherit({_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===devices.Z.real().deviceType&&!devices.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource:function(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter:function(){var accessors=this._createDataAdapterAccessors();this._dataAdapter=new ui_data_adapter((0,extend.l)({dataAccessors:{getters:accessors.getters,setters:accessors.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:common.ZT,_initDynamicTemplates:function(){var that=this;this._templateManager.addDefaultTemplates({item:new bindable_template.c(function($container,itemData){$container.html(itemData.html).append(this._getIconContainer(itemData)).append(this._getTextContainer(itemData)).append(this._getPopoutContainer(itemData)),that._addContentClasses(itemData,$container.parent())}.bind(this),["text","html","items","icon"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_getIconContainer:function(itemData){return itemData.icon?(0,icon.H)(itemData.icon):void 0},_getTextContainer:function(itemData){return(0,renderer.Z)("<span>").text(itemData.text)},_getPopoutContainer:common.ZT,_addContentClasses:common.ZT,_initAccessors:function(){var that=this;(0,iterator.S6)(this._getAccessors(),(function(_,accessor){that._compileAccessor(accessor)})),this._compileDisplayGetter()},_getAccessors:function(){return["key","selected","items","disabled","parentId","expanded"]},_getChildNodes:function(node){var that=this,arr=[];return(0,iterator.S6)(node.internalFields.childrenKeys,(function(_,key){var childNode=that._dataAdapter.getNodeByKey(key);arr.push(childNode)})),arr},_hasChildren:function(node){return node&&node.internalFields.childrenKeys.length},_compileAccessor:function(optionName){var getter="_"+optionName+"Getter",setter="_"+optionName+"Setter",optionExpr=this.option(optionName+"Expr");return optionExpr?(0,type.mf)(optionExpr)?(this[setter]=function(obj,value){obj[optionExpr()]=value},void(this[getter]=function(obj){return obj[optionExpr()]})):(this[getter]=(0,data.vb)(optionExpr),void(this[setter]=(0,data.OM)(optionExpr))):(this[getter]=common.ZT,void(this[setter]=common.ZT))},_createDataAdapterAccessors:function(){var that=this,accessors={getters:{},setters:{}};return(0,iterator.S6)(this._getAccessors(),(function(_,accessor){var getterName="_"+accessor+"Getter",setterName="_"+accessor+"Setter",newAccessor="parentId"===accessor?"parentKey":accessor;accessors.getters[newAccessor]=that[getterName],accessors.setters[newAccessor]=that[setterName]})),accessors.getters.display=this._displayGetter?this._displayGetter:itemData=>itemData.text,accessors},_initMarkup:function(){this.callBase(),this._addWidgetClass()},_addWidgetClass:function(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:common.ZT,_renderItemFrame:function(index,itemData){var $itemFrame=this.callBase.apply(this,arguments);return $itemFrame.toggleClass("dx-state-disabled",!!this._disabledGetter(itemData)),$itemFrame},_optionChanged:function(args){switch(args.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(args);break;default:this.callBase(args)}}})},"./node_modules/devextreme/esm/ui/tabs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>tabs});var size=__webpack_require__("./node_modules/devextreme/esm/core/utils/size.js"),renderer=__webpack_require__("./node_modules/devextreme/esm/core/renderer.js"),events_engine=__webpack_require__("./node_modules/devextreme/esm/events/core/events_engine.js"),devices=__webpack_require__("./node_modules/devextreme/esm/core/devices.js"),component_registrator=__webpack_require__("./node_modules/devextreme/esm/core/component_registrator.js"),ui_button=__webpack_require__("./node_modules/devextreme/esm/ui/button.js"),utils_ink_ripple=__webpack_require__("./node_modules/devextreme/esm/ui/widget/utils.ink_ripple.js"),utils=__webpack_require__("./node_modules/devextreme/esm/events/utils/index.js"),extend=__webpack_require__("./node_modules/devextreme/esm/core/utils/extend.js"),type=__webpack_require__("./node_modules/devextreme/esm/core/utils/type.js"),pointer=__webpack_require__("./node_modules/devextreme/esm/events/pointer.js"),iterator=__webpack_require__("./node_modules/devextreme/esm/core/utils/iterator.js"),item=__webpack_require__("./node_modules/devextreme/esm/ui/collection/item.js");const tabs_item=item.Z.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge:function(badge){if(this._$element.children(".dx-badge").remove(),badge){var $badge=(0,renderer.Z)("<div>").addClass("dx-tabs-item-badge").addClass("dx-badge").text(badge);this._$element.append($badge)}}});var themes=__webpack_require__("./node_modules/devextreme/esm/ui/themes.js"),hold=__webpack_require__("./node_modules/devextreme/esm/events/hold.js"),ui_scrollable=__webpack_require__("./node_modules/devextreme/esm/ui/scroll_view/ui.scrollable.js"),ui_collection_widget_live_update=__webpack_require__("./node_modules/devextreme/esm/ui/collection/ui.collection_widget.live_update.js"),icon=__webpack_require__("./node_modules/devextreme/esm/core/utils/icon.js"),bindable_template=__webpack_require__("./node_modules/devextreme/esm/core/templates/bindable_template.js"),deferred=__webpack_require__("./node_modules/devextreme/esm/core/utils/deferred.js");function getScrollLeftMax(element){return element.scrollWidth-element.clientWidth}__webpack_require__("./node_modules/devextreme/esm/renovation/ui/scroll_view/utils/scroll_direction.js");function isReachedLeft(scrollOffsetLeft,epsilon){return Math.round(scrollOffsetLeft)<=epsilon}function isReachedRight(element,scrollOffsetLeft,epsilon){return Math.round(getScrollLeftMax(element)-scrollOffsetLeft)<=epsilon}var Tabs=ui_collection_widget_live_update.Z.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions:function(){return(0,extend.l)(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:function(data){return data?data.badge:void 0},_itemAttributes:{role:"tab"}})},_defaultOptionsRules:function(){var themeName=(0,themes.Vk)();return this.callBase().concat([{device:function(){return"desktop"!==devices.Z.real().deviceType},options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:function(){return"desktop"===devices.Z.real().deviceType&&!devices.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,themes.x2)(themeName)},options:{useInkRipple:!0,selectOnFocus:!1}}])},_init:function(){this.callBase(),this.setAria("role","tablist"),this.$element().addClass("dx-tabs"),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new bindable_template.c(function($container,data){(0,type.PO)(data)?this._prepareDefaultItemTemplate(data,$container):$container.text(String(data));var $iconElement=(0,icon.H)(data.icon);$iconElement&&$iconElement.prependTo($container),$container.wrapInner((0,renderer.Z)("<span>").addClass("dx-tab-text"))}.bind(this),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(itemTemplate,renderArgs){var{itemData,container,index}=renderArgs;return this._deferredTemplates[index]=new deferred.BH,itemTemplate.render({model:itemData,container,index,onRendered:()=>this._deferredTemplates[index].resolve()})},_itemClass:function(){return"dx-tab"},_selectedItemClass:function(){return"dx-tab-selected"},_itemDataKey:function(){return"dxTabData"},_initMarkup:function(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass("dx-overflow-hidden")},_render:function(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){deferred.gx.apply(this,this._deferredTemplates).done((()=>this._renderScrolling()))},_renderScrolling:function(){var removeClasses=["dx-tabs-stretched","dx-tabs-expanded","dx-overflow-hidden"];if(this.$element().removeClass(removeClasses.join(" ")),this.option("scrollingEnabled")&&this._isItemsWidthExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());var scrollable=this.getScrollable();if(scrollable.update(),this.option("rtlEnabled")){var maxLeftOffset=getScrollLeftMax((0,renderer.Z)(this.getScrollable().container()).get(0));scrollable.scrollTo({left:maxLeftOffset})}this._updateNavButtonsVisibility(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsWidthExceeded()||(this._cleanScrolling(),this._needStretchItems()&&!this._isItemsWidthExceeded()&&this.$element().addClass("dx-tabs-stretched"),this.$element().removeClass("dx-tabs-nav-buttons").addClass("dx-tabs-expanded"))},_isItemsWidthExceeded:function(){return this._getSummaryItemsWidth(this._getVisibleItems(),!0)-1>(0,size.dz)(this.$element())},_needStretchItems:function(){var $visibleItems=this._getVisibleItems(),elementWidth=(0,size.dz)(this.$element()),itemsWidth=[];return(0,iterator.S6)($visibleItems,((_,item)=>{itemsWidth.push((0,size.Y_)(item,!0))})),Math.max.apply(null,itemsWidth)>=elementWidth/$visibleItems.length},_cleanNavButtons:function(){this._leftButton&&this._rightButton&&(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling:function(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple:function(){this._inkRipple=(0,utils_ink_ripple.sY)()},_toggleActiveState:function($element,value,e){if(this.callBase.apply(this,arguments),this._inkRipple){var config={element:$element,event:e};value?this._inkRipple.showWave(config):this._inkRipple.hideWave(config)}},_renderMultiple:function(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper:function(){this._$wrapper=(0,renderer.Z)("<div>").addClass("dx-tabs-wrapper"),this.$element().append(this._$wrapper)},_itemContainer:function(){return this._$wrapper},_renderScrollable:function(){var $itemContainer=this.$element().wrapInner((0,renderer.Z)("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent($itemContainer,ui_scrollable.Z,{direction:"horizontal",showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsVisibility()}}),this.$element().append(this._scrollable.$element())},_scrollToItem:function(itemData){if(this._scrollable){var $item=this._editStrategy.getItemElement(itemData);this._scrollable.scrollToElement($item)}},_renderNavButtons:function(){if(this.$element().toggleClass("dx-tabs-nav-buttons",this.option("showNavButtons")),this.option("showNavButtons")){var rtlEnabled=this.option("rtlEnabled");this._leftButton=this._createNavButton(-30,rtlEnabled?"chevronnext":"chevronprev");var $leftButton=this._leftButton.$element();$leftButton.addClass("dx-tabs-nav-button-left"),this.$element().prepend($leftButton),this._rightButton=this._createNavButton(30,rtlEnabled?"chevronprev":"chevronnext");var $rightButton=this._rightButton.$element();$rightButton.addClass("dx-tabs-nav-button-right"),this.$element().append($rightButton)}},_updateNavButtonsVisibility:function(){var scrollable=this.getScrollable();this._leftButton&&this._leftButton.option("disabled",isReachedLeft(scrollable.scrollLeft(),1)),this._rightButton&&this._rightButton.option("disabled",isReachedRight((0,renderer.Z)(scrollable.container()).get(0),scrollable.scrollLeft(),1))},_updateScrollPosition:function(offset,duration){this._scrollable.update(),this._scrollable.scrollBy(offset/duration)},_createNavButton:function(offset,icon){var that=this,holdAction=that._createAction((function(){that._holdInterval=setInterval((function(){that._updateScrollPosition(offset,5)}),5)})),holdEventName=(0,utils.V4)(hold.Z.name,"dxNavButton"),pointerUpEventName=(0,utils.V4)(pointer.Z.up,"dxNavButton"),pointerOutEventName=(0,utils.V4)(pointer.Z.out,"dxNavButton"),navButton=this._createComponent((0,renderer.Z)("<div>").addClass("dx-tabs-nav-button"),ui_button.Z,{focusStateEnabled:!1,icon,onClick:function(){that._updateScrollPosition(offset,1)},integrationOptions:{}}),$navButton=navButton.$element();return events_engine.Z.on($navButton,holdEventName,{timeout:300},function(e){holdAction({event:e})}.bind(this)),events_engine.Z.on($navButton,pointerUpEventName,(function(){that._clearInterval()})),events_engine.Z.on($navButton,pointerOutEventName,(function(){that._clearInterval()})),navButton},_clearInterval:function(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection:function(addedSelection){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(addedSelection[0]),{left:1,right:1})},_visibilityChanged:function(visible){visible&&this._dimensionChanged()},_dimensionChanged:function(){this._renderScrolling()},_itemSelectHandler:function(e){"single"===this.option("selectionMode")&&this.isItemSelected(e.currentTarget)||this.callBase(e)},_clean:function(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_optionChanged:function(args){switch(args.name){case"useInkRipple":case"scrollingEnabled":case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(args.name,args.value);break;case"width":this.callBase(args),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(args);break;default:this.callBase(args)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted($item,deletedActionArgs){this.callBase($item,deletedActionArgs),this._renderScrolling()},getScrollable(){return this._scrollable}});Tabs.ItemClass=tabs_item,(0,component_registrator.Z)("dxTabs",Tabs);const tabs=Tabs},"./node_modules/devextreme/esm/ui/tree_view.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>tree_view});var renderer=__webpack_require__("./node_modules/devextreme/esm/core/renderer.js"),component_registrator=__webpack_require__("./node_modules/devextreme/esm/core/component_registrator.js"),ui_search_box_mixin=__webpack_require__("./node_modules/devextreme/esm/ui/widget/ui.search_box_mixin.js"),text_box=__webpack_require__("./node_modules/devextreme/esm/ui/text_box.js"),extend=__webpack_require__("./node_modules/devextreme/esm/core/utils/extend.js"),size=__webpack_require__("./node_modules/devextreme/esm/core/utils/size.js"),dom_adapter=__webpack_require__("./node_modules/devextreme/esm/core/dom_adapter.js"),events_engine=__webpack_require__("./node_modules/devextreme/esm/events/core/events_engine.js"),message=__webpack_require__("./node_modules/devextreme/esm/localization/message.js"),events_click=__webpack_require__("./node_modules/devextreme/esm/events/click.js"),common=__webpack_require__("./node_modules/devextreme/esm/core/utils/common.js"),utils_window=__webpack_require__("./node_modules/devextreme/esm/core/utils/window.js"),type=__webpack_require__("./node_modules/devextreme/esm/core/utils/type.js"),iterator=__webpack_require__("./node_modules/devextreme/esm/core/utils/iterator.js"),core_element=__webpack_require__("./node_modules/devextreme/esm/core/element.js"),check_box=__webpack_require__("./node_modules/devextreme/esm/ui/check_box.js"),ui_hierarchical_collection_widget=__webpack_require__("./node_modules/devextreme/esm/ui/hierarchical_collection/ui.hierarchical_collection_widget.js"),utils=__webpack_require__("./node_modules/devextreme/esm/events/utils/index.js"),pointer=__webpack_require__("./node_modules/devextreme/esm/events/pointer.js"),double_click=__webpack_require__("./node_modules/devextreme/esm/events/double_click.js"),fx=__webpack_require__("./node_modules/devextreme/esm/animation/fx.js"),ui_scrollable=__webpack_require__("./node_modules/devextreme/esm/ui/scroll_view/ui.scrollable.js"),load_indicator=__webpack_require__("./node_modules/devextreme/esm/ui/load_indicator.js"),utils_deferred=__webpack_require__("./node_modules/devextreme/esm/core/utils/deferred.js"),support=__webpack_require__("./node_modules/devextreme/esm/core/utils/support.js"),get_relative_offset=__webpack_require__("./node_modules/devextreme/esm/renovation/ui/scroll_view/utils/get_relative_offset.js"),consts=__webpack_require__("./node_modules/devextreme/esm/renovation/ui/scroll_view/common/consts.js"),NODE_CLASS="".concat("dx-treeview","-node"),NODE_CONTAINER_CLASS="".concat(NODE_CLASS,"-container"),NODE_LOAD_INDICATOR_CLASS="".concat(NODE_CLASS,"-loadindicator"),OPENED_NODE_CONTAINER_CLASS="".concat(NODE_CLASS,"-container-opened"),IS_LEAF="".concat(NODE_CLASS,"-is-leaf"),ITEM_CLASS="".concat("dx-treeview","-item"),ITEM_WITH_CHECKBOX_CLASS="".concat(ITEM_CLASS,"-with-checkbox"),ITEM_WITHOUT_CHECKBOX_CLASS="".concat(ITEM_CLASS,"-without-checkbox"),ITEM_DATA_KEY="".concat(ITEM_CLASS,"-data"),TOGGLE_ITEM_VISIBILITY_CLASS="".concat("dx-treeview","-toggle-item-visibility"),LOAD_INDICATOR_CLASS="".concat("dx-treeview","-loadindicator"),LOAD_INDICATOR_WRAPPER_CLASS="".concat("dx-treeview","-loadindicator-wrapper"),TOGGLE_ITEM_VISIBILITY_OPENED_CLASS="".concat("dx-treeview","-toggle-item-visibility-opened"),SELECT_ALL_ITEM_CLASS="".concat("dx-treeview","-select-all-item");const ui_tree_view_base=ui_hierarchical_collection_widget.Z.inherit({_supportedKeys:function(e){var click=e=>{var $itemElement=(0,renderer.Z)(this.option("focusedElement"));$itemElement.length&&(e.target=$itemElement,e.currentTarget=$itemElement,this._itemClickHandler(e,$itemElement.children("."+ITEM_CLASS)),this._getEventNameByOption(this.option("expandEvent"))===(0,utils.V4)(events_click.u,"dxTreeView_expand")&&this._expandEventHandler(e))},select=e=>{e.preventDefault();var $focusedElement=(0,renderer.Z)(this.option("focusedElement")),checkboxInstance=this._getCheckBoxInstance($focusedElement);if(!checkboxInstance.option("disabled")){var currentState=checkboxInstance.option("value");this._updateItemSelection(!currentState,$focusedElement.find("."+ITEM_CLASS).get(0),!0)}},toggleExpandedNestedItems=function(state,e){if(this.option("expandAllEnabled")){e.preventDefault();var $rootElement=(0,renderer.Z)(this.option("focusedElement"));if($rootElement.length){var rootItem=this._getItemData($rootElement.find(".".concat(ITEM_CLASS)));this._toggleExpandedNestedItems([rootItem],state)}}};return(0,extend.l)(this.callBase(),{enter:this._showCheckboxes()?select:click,space:this._showCheckboxes()?select:click,asterisk:toggleExpandedNestedItems.bind(this,!0),minus:toggleExpandedNestedItems.bind(this,!1)})},_toggleExpandedNestedItems:function(items,state){if(items)for(var i=0,len=items.length;i<len;i++){var item=items[i],node=this._dataAdapter.getNodeByItem(item);this._toggleExpandedState(node,state),this._toggleExpandedNestedItems(item.items,state)}},_getNodeElement:function(node,cache){var key=this._encodeString(node.internalFields.key);if(cache)return cache.$nodeByKey||(cache.$nodeByKey={},this.$element().find(".".concat(NODE_CLASS)).each((function(){var $node=(0,renderer.Z)(this),key=$node.attr("data-item-id");cache.$nodeByKey[key]=$node}))),cache.$nodeByKey[key]||(0,renderer.Z)();var element=this.$element().get(0).querySelector("[".concat("data-item-id",'="').concat(key,'"]'));return(0,renderer.Z)(element)},_activeStateUnit:"."+ITEM_CLASS,_widgetClass:function(){return"dx-treeview"},_getDefaultOptions:function(){var defaultOptions=(0,extend.l)(this.callBase(),{animationEnabled:!0,dataStructure:"tree",deferRendering:!0,expandAllEnabled:!1,hasItemsExpr:"hasItems",selectNodesRecursive:!0,expandNodesRecursive:!0,showCheckBoxesMode:"none",selectAllText:message.Z.format("dxList-selectAll"),onItemSelectionChanged:null,onItemExpanded:null,onItemCollapsed:null,scrollDirection:"vertical",useNativeScrolling:!0,virtualModeEnabled:!1,rootValue:0,focusStateEnabled:!1,selectionMode:"multiple",expandEvent:"dblclick",selectByClick:!1,createChildren:null,onSelectAllValueChanged:null});return(0,extend.l)(!0,defaultOptions,{integrationOptions:{useDeferUpdateForTemplates:!1}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return!support.nativeScrolling},options:{useNativeScrolling:!1}}])},_initSelectedItems:common.ZT,_syncSelectionOptions:common.C$,_fireSelectionChanged:function(){var selectionChangePromise=this._selectionChangePromise;(0,utils_deferred.gx)(selectionChangePromise).done(function(){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})()}.bind(this))},_createSelectAllValueChangedAction:function(){this._selectAllValueChangedAction=this._createActionByOption("onSelectAllValueChanged",{excludeValidators:["disabled","readOnly"]})},_fireSelectAllValueChanged:function(value){this._selectAllValueChangedAction({value})},_checkBoxModeChange:function(value,previousValue){if("none"!==previousValue&&"none"!==value){var selectAllExists=this._$selectAllItem&&this._$selectAllItem.length;switch(value){case"selectAll":selectAllExists||(this._createSelectAllValueChangedAction(),this._renderSelectAllItem());break;case"normal":selectAllExists&&(this._$selectAllItem.remove(),delete this._$selectAllItem)}}else this.repaint()},_removeSelection:function(){var that=this;(0,iterator.S6)(this._dataAdapter.getFullData(),(function(_,node){that._hasChildren(node)&&that._dataAdapter.toggleSelection(node.internalFields.key,!1,!0)}))},_optionChanged:function(args){var{name,value,previousValue}=args;switch(name){case"selectAllText":this._$selectAllItem&&this._$selectAllItem.dxCheckBox("instance").option("text",value);break;case"showCheckBoxesMode":this._checkBoxModeChange(value,previousValue);break;case"scrollDirection":this.getScrollable().option("direction",value);break;case"useNativeScrolling":this.getScrollable().option("useNative",value);break;case"items":delete this._$selectAllItem,this.callBase(args);break;case"dataSource":this.callBase(args),this._initDataAdapter(),this._filter={};break;case"hasItemsExpr":this._initAccessors(),this.repaint();break;case"expandEvent":this._initExpandEvent();break;case"deferRendering":case"dataStructure":case"rootValue":case"createChildren":case"expandNodesRecursive":case"onItemSelectionChanged":case"onItemExpanded":case"onItemCollapsed":case"expandAllEnabled":case"animationEnabled":case"virtualModeEnabled":case"selectByClick":break;case"selectionMode":this._initDataAdapter(),this.callBase(args);break;case"onSelectAllValueChanged":this._createSelectAllValueChangedAction();break;case"selectNodesRecursive":this._dataAdapter.setOption("recursiveSelection",args.value),this.repaint();break;default:this.callBase(args)}},_initDataSource:function(){this._useCustomChildrenLoader()?this._loadChildrenByCustomLoader(null).done(function(newItems){newItems&&newItems.length&&this.option("items",newItems)}.bind(this)):(this.callBase(),this._isVirtualMode()&&this._initVirtualMode())},_initVirtualMode:function(){var filter=this._filter;filter.custom||(filter.custom=this._dataSource.filter()),filter.internal||(filter.internal=[this.option("parentIdExpr"),this.option("rootValue")])},_useCustomChildrenLoader:function(){return(0,type.mf)(this.option("createChildren"))&&this._isDataStructurePlain()},_loadChildrenByCustomLoader:function(parentNode){var invocationResult=this.option("createChildren").call(this,parentNode);return Array.isArray(invocationResult)?(new utils_deferred.BH).resolve(invocationResult).promise():invocationResult&&(0,type.mf)(invocationResult.then)?(0,utils_deferred.p4)(invocationResult):(new utils_deferred.BH).resolve([]).promise()},_combineFilter:function(){return this._filter.custom&&this._filter.custom.length?[this._filter.custom,this._filter.internal]:this._filter.internal},_dataSourceLoadErrorHandler:function(){this._renderEmptyMessage()},_init:function(){this._filter={},this.callBase(),this._initStoreChangeHandlers()},_dataSourceChangedHandler:function(newItems){var items=this.option("items");this._initialized&&this._isVirtualMode()&&items.length||this.option("items",newItems)},_removeTreeViewLoadIndicator:function(){this._treeViewLoadIndicator&&(this._treeViewLoadIndicator.remove(),this._treeViewLoadIndicator=null)},_createTreeViewLoadIndicator:function(){return this._treeViewLoadIndicator=(0,renderer.Z)("<div>").addClass(LOAD_INDICATOR_CLASS),this._createComponent(this._treeViewLoadIndicator,load_indicator.Z,{}),this._treeViewLoadIndicator},_dataSourceLoadingChangedHandler:function(isLoading){var resultFilter;if(this._isVirtualMode()&&(resultFilter=this._combineFilter(),this._dataSource.filter(resultFilter)),isLoading&&!this._dataSource.isLoaded()){this.option("items",[]);var $wrapper=(0,renderer.Z)("<div>").addClass(LOAD_INDICATOR_WRAPPER_CLASS);this._createTreeViewLoadIndicator().appendTo($wrapper),this.itemsContainer().append($wrapper),this._isVirtualMode()&&this._dataSource.filter()!==resultFilter&&this._dataSource.filter([])}else this._removeTreeViewLoadIndicator()},_initStoreChangeHandlers:function(){"plain"===this.option("dataStructure")&&this._dataSource&&this._dataSource.store().on("inserted",(newItem=>{this.option().items=this.option("items").concat(newItem),this._dataAdapter.addItem(newItem),this._dataAdapter.isFiltered(newItem)&&this._updateLevel(this._parentIdGetter(newItem))})).on("removed",(removedKey=>{var node=this._dataAdapter.getNodeByKey(removedKey);(0,type.$K)(node)&&(this.option("items")[this._dataAdapter.getIndexByKey(node.internalFields.key)]=0,this._markChildrenItemsToRemove(node),this._removeItems(),this._dataAdapter.removeItem(removedKey),this._updateLevel(this._parentIdGetter(node)))}))},_markChildrenItemsToRemove:function(node){var keys=node.internalFields.childrenKeys;(0,iterator.S6)(keys,((_,key)=>{this.option("items")[this._dataAdapter.getIndexByKey(key)]=0,this._markChildrenItemsToRemove(this._dataAdapter.getNodeByKey(key))}))},_removeItems:function(){var items=(0,extend.l)(!0,[],this.option("items")),counter=0;(0,iterator.S6)(items,((index,item)=>{item||(this.option("items").splice(index-counter,1),counter++)}))},_updateLevel:function(parentId){var $container=this._getContainerByParentKey(parentId);this._renderItems($container,this._dataAdapter.getChildrenNodes(parentId))},_getOldContainer:function($itemElement){if($itemElement.length)return $itemElement.children(".".concat(NODE_CONTAINER_CLASS));var scrollable=this.getScrollable();return scrollable?(0,renderer.Z)(scrollable.content()).children():(0,renderer.Z)()},_getContainerByParentKey:function(parentId){var node=this._dataAdapter.getNodeByKey(parentId),$itemElement=node?this._getNodeElement(node):[];this._getOldContainer($itemElement).remove();var $container=this._renderNodeContainer($itemElement);if(this._isRootLevel(parentId)){var scrollable=this.getScrollable();scrollable||this._renderScrollableContainer(),(0,renderer.Z)(scrollable.content()).append($container)}return $container},_isRootLevel:function(parentId){return parentId===this.option("rootValue")},_getAccessors:function(){var accessors=this.callBase();return accessors.push("hasItems"),accessors},_getDataAdapterOptions:function(){return{rootValue:this.option("rootValue"),multipleSelection:!this._isSingleSelection(),recursiveSelection:this._isRecursiveSelection(),recursiveExpansion:this.option("expandNodesRecursive"),selectionRequired:this.option("selectionRequired"),dataType:this.option("dataStructure"),sort:this._dataSource&&this._dataSource.sort()}},_initMarkup:function(){this._renderScrollableContainer(),this._renderEmptyMessage(this._dataAdapter.getRootNodes()),this.callBase(),this.setAria("role","tree")},_renderContentImpl:function(){var $nodeContainer=this._renderNodeContainer();(0,renderer.Z)(this.getScrollable().content()).append($nodeContainer),this.option("items")&&this.option("items").length&&(this._renderItems($nodeContainer,this._dataAdapter.getRootNodes()),this._initExpandEvent(),this._selectAllEnabled()&&(this._createSelectAllValueChangedAction(),this._renderSelectAllItem($nodeContainer)))},_isVirtualMode:function(){return this.option("virtualModeEnabled")&&this._isDataStructurePlain()&&!!this.option("dataSource")},_isDataStructurePlain:function(){return"plain"===this.option("dataStructure")},_fireContentReadyAction:function(){var dataSource=this.getDataSource(),skipContentReadyAction=dataSource&&!dataSource.isLoaded()||this._skipContentReadyAndItemExpanded,scrollable=this.getScrollable();scrollable&&(0,utils_window.Ym)()&&scrollable.update(),skipContentReadyAction||this.callBase(),scrollable&&(0,utils_window.Ym)()&&scrollable.update()},_renderScrollableContainer:function(){this._scrollable=this._createComponent((0,renderer.Z)("<div>").appendTo(this.$element()),ui_scrollable.Z,{useNative:this.option("useNativeScrolling"),direction:this.option("scrollDirection"),useKeyboard:!1})},_renderNodeContainer:function($parent){var $container=(0,renderer.Z)("<ul>").addClass(NODE_CONTAINER_CLASS);if(this.setAria("role","group",$container),$parent&&$parent.length){var itemData=this._getItemData($parent.children("."+ITEM_CLASS));this._expandedGetter(itemData)&&$container.addClass(OPENED_NODE_CONTAINER_CLASS),$container.appendTo($parent)}return $container},_createDOMElement:function($nodeContainer,node){var $node=(0,renderer.Z)("<li>").addClass(NODE_CLASS).attr("data-item-id",this._encodeString(node.internalFields.key)).prependTo($nodeContainer);return this.setAria({role:"treeitem",label:this._displayGetter(node.internalFields.item)||"",expanded:node.internalFields.expanded||!1,level:this._getLevel($nodeContainer)},$node),$node},_getLevel:function($nodeContainer){var parent=$nodeContainer.parent();return parent.hasClass("dx-scrollable-content")?1:parseInt(parent.attr("aria-level"))+1},_showCheckboxes:function(){return"none"!==this.option("showCheckBoxesMode")},_selectAllEnabled:function(){return"selectAll"===this.option("showCheckBoxesMode")&&!this._isSingleSelection()},_renderItems:function($nodeContainer,nodes){for(var i=nodes.length-1;i>=0;i--)this._renderItem(i,nodes[i],$nodeContainer);this._renderedItemsCount+=nodes.length},_renderItem:function(nodeIndex,node,$nodeContainer){var $node=this._createDOMElement($nodeContainer,node),nodeData=node.internalFields,showCheckBox=this._showCheckboxes();$node.addClass(showCheckBox?ITEM_WITH_CHECKBOX_CLASS:ITEM_WITHOUT_CHECKBOX_CLASS),$node.toggleClass("dx-state-invisible",!1===nodeData.item.visible),showCheckBox&&this._renderCheckBox($node,node),this.setAria("selected",nodeData.selected,$node),this._toggleSelectedClass($node,nodeData.selected),this.callBase(this._renderedItemsCount+nodeIndex,nodeData.item,$node),!1!==nodeData.item.visible&&this._renderChildren($node,node)},_setAriaSelected:function(){},_renderChildren:function($node,node){this._hasChildren(node)?(this._renderToggleItemVisibilityIcon($node,node),this.option("deferRendering")&&!node.internalFields.expanded||this._loadSublevel(node).done((childNodes=>{this._renderSublevel($node,this._getActualNode(node),childNodes)}))):this._addLeafClass($node)},_getActualNode:function(cachedNode){return this._dataAdapter.getNodeByKey(cachedNode.internalFields.key)},_hasChildren:function(node){return this._isVirtualMode()||this._useCustomChildrenLoader()?!1!==this._hasItemsGetter(node.internalFields.item):this.callBase(node)},_loadSublevel:function(node){var deferred=new utils_deferred.BH,childrenNodes=this._getChildNodes(node);return childrenNodes.length?deferred.resolve(childrenNodes):this._loadNestedItems(node).done((items=>{deferred.resolve(this._dataAdapter.getNodesByItems(items))})),deferred.promise()},_renderSublevel:function($node,node,childNodes){var $nestedNodeContainer=this._renderNodeContainer($node,node),childNodesByChildrenKeys=childNodes.filter((childNode=>-1!==node.internalFields.childrenKeys.indexOf(childNode.internalFields.key)));if(this._renderItems($nestedNodeContainer,childNodesByChildrenKeys),childNodesByChildrenKeys.length&&!node.internalFields.selected){var firstChild=childNodesByChildrenKeys[0];this._updateParentsState(firstChild,this._getNodeElement(firstChild))}this._normalizeIconState($node,childNodesByChildrenKeys.length),node.internalFields.expanded&&$nestedNodeContainer.addClass(OPENED_NODE_CONTAINER_CLASS)},_executeItemRenderAction:function(itemIndex,itemData,itemElement){var node=this._getNode(itemElement);this._getItemRenderAction()({itemElement,itemIndex,itemData,node:this._dataAdapter.getPublicNode(node)})},_addLeafClass:function($node){$node.addClass(IS_LEAF)},_expandEventHandler:function(e){(0,renderer.Z)(e.currentTarget.parentNode).hasClass(IS_LEAF)||this._toggleExpandedState(e.currentTarget,void 0,e)},_initExpandEvent:function(){var expandedEventName=this._getEventNameByOption(this.option("expandEvent")),$itemsContainer=this._itemContainer(),itemSelector=this._itemSelector();events_engine.Z.off($itemsContainer,".dxTreeView_expand",itemSelector),events_engine.Z.on($itemsContainer,expandedEventName,itemSelector,this._expandEventHandler.bind(this))},_getEventNameByOption:function(name){var event="click"===name?events_click.u:double_click.u;return(0,utils.V4)(event,"dxTreeView_expand")},_getNode:function(identifier){if(!(0,type.$K)(identifier))return null;if(identifier.internalFields)return identifier;if((0,type.pt)(identifier))return this._dataAdapter.getNodeByKey(identifier);var itemElement=(0,renderer.Z)(identifier).get(0);return itemElement?dom_adapter.Z.isElementNode(itemElement)?this._getNodeByElement(itemElement):this._dataAdapter.getNodeByItem(itemElement):null},_getNodeByElement:function(itemElement){var $node=(0,renderer.Z)(itemElement).closest("."+NODE_CLASS),key=this._decodeString($node.attr("data-item-id"));return this._dataAdapter.getNodeByKey(key)},_toggleExpandedState:function(itemElement,state,e){var node=this._getNode(itemElement);if(!node)return(new utils_deferred.BH).reject().promise();if(node.internalFields.disabled)return(new utils_deferred.BH).reject().promise();var currentState=node.internalFields.expanded;if(currentState===state)return(new utils_deferred.BH).resolve().promise();if(this._hasChildren(node)){var $node=this._getNodeElement(node);if($node.find(".".concat(NODE_LOAD_INDICATOR_CLASS,":not(.").concat("dx-state-invisible",")")).length)return(new utils_deferred.BH).reject().promise();this._createLoadIndicator($node)}return(0,type.$K)(state)||(state=!currentState),this._dataAdapter.toggleExpansion(node.internalFields.key,state),this._updateExpandedItemsUI(node,state,e)},_createLoadIndicator:function($node){var $icon=$node.children("."+TOGGLE_ITEM_VISIBILITY_CLASS),$nodeContainer=$node.children(".".concat(NODE_CONTAINER_CLASS));$icon.hasClass(TOGGLE_ITEM_VISIBILITY_OPENED_CLASS)||$nodeContainer.not(":empty").length||(this._createComponent((0,renderer.Z)("<div>").addClass(NODE_LOAD_INDICATOR_CLASS),load_indicator.Z,{}).$element().appendTo($node),$icon.hide())},_renderToggleItemVisibilityIcon:function($node,node){var $icon=(0,renderer.Z)("<div>").addClass(TOGGLE_ITEM_VISIBILITY_CLASS).appendTo($node);node.internalFields.expanded&&($icon.addClass(TOGGLE_ITEM_VISIBILITY_OPENED_CLASS),$node.parent().addClass(OPENED_NODE_CONTAINER_CLASS)),node.internalFields.disabled&&$icon.addClass("dx-state-disabled"),this._renderToggleItemVisibilityIconClick($icon,node)},_renderToggleItemVisibilityIconClick:function($icon,node){var eventName=(0,utils.V4)(events_click.u,this.NAME);events_engine.Z.off($icon,eventName),events_engine.Z.on($icon,eventName,(e=>{this._toggleExpandedState(node.internalFields.key,void 0,e)}))},_updateExpandedItemsUI:function(node,state,e){var $node=this._getNodeElement(node),isHiddenNode=!$node.length||state&&$node.is(":hidden");if(this.option("expandNodesRecursive")&&isHiddenNode){var parentNode=this._getNode(node.internalFields.parentKey);parentNode&&this._updateExpandedItemsUI(parentNode,state,e)}var $icon=$node.children("."+TOGGLE_ITEM_VISIBILITY_CLASS),$nodeContainer=$node.children(".".concat(NODE_CONTAINER_CLASS));$icon.toggleClass(TOGGLE_ITEM_VISIBILITY_OPENED_CLASS,state);var nodeContainerExists=$nodeContainer.length>0,completionCallback=new utils_deferred.BH;return!state||nodeContainerExists&&!$nodeContainer.is(":empty")?(this._animateNodeContainer(node,state,e,completionCallback),completionCallback.promise()):0===node.internalFields.childrenKeys.length&&(this._isVirtualMode()||this._useCustomChildrenLoader())?(this._loadNestedItemsWithUpdate(node,state,e,completionCallback),completionCallback.promise()):(this._renderSublevel($node,node,this._getChildNodes(node)),this._fireContentReadyAction(),this._animateNodeContainer(node,state,e,completionCallback),completionCallback.promise())},_loadNestedItemsWithUpdate:function(node,state,e,completionCallback){var $node=this._getNodeElement(node);this._loadNestedItems(node).done((items=>{var actualNodeData=this._getActualNode(node);this._renderSublevel($node,actualNodeData,this._dataAdapter.getNodesByItems(items)),items&&items.length?(this._fireContentReadyAction(),this._animateNodeContainer(actualNodeData,state,e,completionCallback)):completionCallback.resolve()}))},_loadNestedItems:function(node){if(this._useCustomChildrenLoader()){var publicNode=this._dataAdapter.getPublicNode(node);return this._loadChildrenByCustomLoader(publicNode).done((newItems=>{this._areNodesExists(newItems)||this._appendItems(newItems)}))}return this._isVirtualMode()?(this._filter.internal=[this.option("parentIdExpr"),node.internalFields.key],this._dataSource.filter(this._combineFilter()),this._dataSource.load().done((newItems=>{this._areNodesExists(newItems)||this._appendItems(newItems)}))):(new utils_deferred.BH).resolve([]).promise()},_areNodesExists:function(newItems,items){var keyOfRootItem=this.keyOf(newItems[0]),fullData=this._dataAdapter.getFullData();return!!this._dataAdapter.getNodeByKey(keyOfRootItem,fullData)},_appendItems:function(newItems){this.option().items=this.option("items").concat(newItems),this._initDataAdapter()},_animateNodeContainer:function(node,state,e,completionCallback){var $node=this._getNodeElement(node),$nodeContainer=$node.children(".".concat(NODE_CONTAINER_CLASS));node&&completionCallback&&0===$nodeContainer.length&&completionCallback.resolve(),$nodeContainer.addClass(OPENED_NODE_CONTAINER_CLASS);var nodeHeight=(0,size.Cr)($nodeContainer);fx.Z.stop($nodeContainer,!0),fx.Z.animate($nodeContainer,{type:"custom",duration:this.option("animationEnabled")?400:0,from:{maxHeight:state?0:nodeHeight},to:{maxHeight:state?nodeHeight:0},complete:function(){$nodeContainer.css("maxHeight","none"),$nodeContainer.toggleClass(OPENED_NODE_CONTAINER_CLASS,state),this.setAria("expanded",state,$node),this.getScrollable().update(),this._fireExpandedStateUpdatedEvent(state,node,e),completionCallback&&completionCallback.resolve()}.bind(this)})},_fireExpandedStateUpdatedEvent:function(isExpanded,node,e){if(this._hasChildren(node)&&!this._skipContentReadyAndItemExpanded){var optionName=isExpanded?"onItemExpanded":"onItemCollapsed";if((0,type.$K)(e))this._itemDXEventHandler(e,optionName,{node:this._dataAdapter.getPublicNode(node)});else{var target=this._getNodeElement(node);this._itemEventHandler(target,optionName,{event:e,node:this._dataAdapter.getPublicNode(node)})}}},_normalizeIconState:function($node,hasNewItems){var _LoadIndicator$getIns,$loadIndicator=$node.find(".".concat(NODE_LOAD_INDICATOR_CLASS));$loadIndicator.length&&(null===(_LoadIndicator$getIns=load_indicator.Z.getInstance($loadIndicator))||void 0===_LoadIndicator$getIns||_LoadIndicator$getIns.option("visible",!1));var $toggleItem=$node.find(".".concat(TOGGLE_ITEM_VISIBILITY_CLASS));hasNewItems?$toggleItem.show():($toggleItem.removeClass(TOGGLE_ITEM_VISIBILITY_CLASS),$node.addClass(IS_LEAF))},_emptyMessageContainer:function(){var scrollable=this.getScrollable();return scrollable?(0,renderer.Z)(scrollable.content()):this.callBase()},_renderContent:function(){var items=this.option("items");items&&items.length&&(this._contentAlreadyRendered=!0),this.callBase()},_renderSelectAllItem:function($container){$container=$container||this.$element().find(".".concat(NODE_CONTAINER_CLASS)).first(),this._$selectAllItem=(0,renderer.Z)("<div>").addClass(SELECT_ALL_ITEM_CLASS);var value=this._dataAdapter.isAllSelected();this._createComponent(this._$selectAllItem,check_box.Z,{value,tabIndex:1,text:this.option("selectAllText"),onValueChanged:this._onSelectAllCheckboxValueChanged.bind(this)}),this._toggleSelectedClass(this._$selectAllItem,value),$container.before(this._$selectAllItem)},_onSelectAllCheckboxValueChanged:function(args){this._toggleSelectAll(args),this._fireSelectAllValueChanged(args.value)},_toggleSelectAll:function(args){this._dataAdapter.toggleSelectAll(args.value),this._updateItemsUI(),this._fireSelectionChanged()},_renderCheckBox:function($node,node){var $checkbox=(0,renderer.Z)("<div>").appendTo($node);this._createComponent($checkbox,check_box.Z,{value:node.internalFields.selected,onValueChanged:this._changeCheckboxValue.bind(this),focusStateEnabled:!1,disabled:this._disabledGetter(node)})},_toggleSelectedClass:function($node,value){$node.toggleClass("dx-state-selected",!!value)},_toggleNodeDisabledState:function(node,state){var $node=this._getNodeElement(node),$item=$node.find("."+ITEM_CLASS).eq(0);(this._dataAdapter.toggleNodeDisabledState(node.internalFields.key,state),$item.toggleClass("dx-state-disabled",!!state),this._showCheckboxes())&&this._getCheckBoxInstance($node).option("disabled",!!state)},_itemOptionChanged:function(item,property,value){var node=this._dataAdapter.getNodeByItem(item);property===this.option("disabledExpr")&&this._toggleNodeDisabledState(node,value)},_changeCheckboxValue:function(e){var $item=(0,renderer.Z)(e.element).parent("."+NODE_CLASS).children("."+ITEM_CLASS),item=this._getItemData($item),node=this._getNodeByElement($item),value=e.value;node&&node.internalFields.selected===value||this._updateItemSelection(value,item,e.event)},_isSingleSelection:function(){return"single"===this.option("selectionMode")},_isRecursiveSelection:function(){return this.option("selectNodesRecursive")&&"single"!==this.option("selectionMode")},_isLastSelectedBranch:function(publicNode,selectedNodesKeys,deep){var keyIndex=selectedNodesKeys.indexOf(publicNode.key);return keyIndex>=0&&selectedNodesKeys.splice(keyIndex,1),deep&&(0,iterator.S6)(publicNode.children,function(_,childNode){this._isLastSelectedBranch(childNode,selectedNodesKeys,!0)}.bind(this)),publicNode.parent&&this._isLastSelectedBranch(publicNode.parent,selectedNodesKeys),0===selectedNodesKeys.length},_isLastRequired:function(node){var selectionRequired=this.option("selectionRequired"),isSingleMode=this._isSingleSelection(),selectedNodesKeys=this.getSelectedNodeKeys();if(selectionRequired)return isSingleMode?1===selectedNodesKeys.length:this._isLastSelectedBranch(node.internalFields.publicNode,selectedNodesKeys.slice(),!0)},_updateItemSelection:function(value,itemElement,dxEvent){var node=this._getNode(itemElement);if(!node||!1===node.visible)return!1;if(node.internalFields.selected===value)return!0;if(!value&&this._isLastRequired(node)){if(this._showCheckboxes()){var $node=this._getNodeElement(node);this._getCheckBoxInstance($node).option("value",!0)}return!1}if(value&&this._isSingleSelection()){var selectedKeys=this.getSelectedNodeKeys();(0,iterator.S6)(selectedKeys,((index,key)=>{this._dataAdapter.toggleSelection(key,!1),this._updateItemsUI(),this._fireItemSelectionChanged(this._getNode(key))}))}this._dataAdapter.toggleSelection(node.internalFields.key,value);var isAllSelected=this._dataAdapter.isAllSelected(),needFireSelectAllChanged=this._selectAllEnabled()&&this._$selectAllItem.dxCheckBox("instance").option("value")!==isAllSelected;return this._updateItemsUI(),this._fireItemSelectionChanged(node,dxEvent),this._fireSelectionChanged(),needFireSelectAllChanged&&this._fireSelectAllValueChanged(isAllSelected),!0},_fireItemSelectionChanged:function(node,dxEvent){var initiator=dxEvent||this._findItemElementByItem(node.internalFields.item);(dxEvent?this._itemDXEventHandler:this._itemEventHandler).call(this,initiator,"onItemSelectionChanged",{node:this._dataAdapter.getPublicNode(node),itemData:node.internalFields.item})},_getCheckBoxInstance:function($node){return $node.children(".dx-checkbox").dxCheckBox("instance")},_updateItemsUI:function(){var cache={};if((0,iterator.S6)(this._dataAdapter.getData(),((_,node)=>{var $node=this._getNodeElement(node,cache),nodeSelection=node.internalFields.selected;$node.length&&(this._toggleSelectedClass($node,nodeSelection),this.setAria("selected",nodeSelection,$node),this._showCheckboxes()&&this._getCheckBoxInstance($node).option("value",nodeSelection))})),this._selectAllEnabled()){var selectAllCheckbox=this._$selectAllItem.dxCheckBox("instance");selectAllCheckbox.option("onValueChanged",void 0),selectAllCheckbox.option("value",this._dataAdapter.isAllSelected()),selectAllCheckbox.option("onValueChanged",this._onSelectAllCheckboxValueChanged.bind(this))}},_updateParentsState:function(node,$node){if($node){var parentNode=this._dataAdapter.getNodeByKey(node.internalFields.parentKey),$parentNode=(0,renderer.Z)($node.parents("."+NODE_CLASS)[0]);if(this._showCheckboxes()){var parentValue=parentNode.internalFields.selected;this._getCheckBoxInstance($parentNode).option("value",parentValue),this._toggleSelectedClass($parentNode,parentValue)}parentNode.internalFields.parentKey!==this.option("rootValue")&&this._updateParentsState(parentNode,$parentNode)}},_itemEventHandlerImpl:function(initiator,action,actionArgs){var $itemElement=(0,renderer.Z)(initiator).closest("."+NODE_CLASS).children("."+ITEM_CLASS);return action((0,extend.l)(this._extendActionArgs($itemElement),actionArgs))},_itemContextMenuHandler:function(e){this._createEventHandler("onItemContextMenu",e)},_itemHoldHandler:function(e){this._createEventHandler("onItemHold",e)},_createEventHandler:function(eventName,e){var node=this._getNodeByElement(e.currentTarget);this._itemDXEventHandler(e,eventName,{node:this._dataAdapter.getPublicNode(node)})},_itemClass:function(){return ITEM_CLASS},_itemDataKey:function(){return ITEM_DATA_KEY},_attachClickEvent:function(){var clickSelector="."+this._itemClass(),pointerDownSelector="."+NODE_CLASS+", ."+SELECT_ALL_ITEM_CLASS,eventName=(0,utils.V4)(events_click.u,this.NAME),pointerDownEvent=(0,utils.V4)(pointer.Z.down,this.NAME),$itemContainer=this._itemContainer(),that=this;events_engine.Z.off($itemContainer,eventName,clickSelector),events_engine.Z.off($itemContainer,pointerDownEvent,pointerDownSelector),events_engine.Z.on($itemContainer,eventName,clickSelector,(function(e){that._itemClickHandler(e,(0,renderer.Z)(this))})),events_engine.Z.on($itemContainer,pointerDownEvent,pointerDownSelector,(function(e){that._itemPointerDownHandler(e)}))},_itemClickHandler:function(e,$item){var itemData=this._getItemData($item),node=this._getNodeByElement($item);this._itemDXEventHandler(e,"onItemClick",{node:this._dataAdapter.getPublicNode(node)}),this.option("selectByClick")&&!e.isDefaultPrevented()&&this._updateItemSelection(!node.internalFields.selected,itemData,e)},_updateSelectionToFirstItem:function($items,startIndex){for(var itemIndex=startIndex;itemIndex>=0;){var $item=(0,renderer.Z)($items[itemIndex]);this._updateItemSelection(!0,$item.find("."+ITEM_CLASS).get(0)),itemIndex--}},_updateSelectionToLastItem:function($items,startIndex){for(var length=$items.length,itemIndex=startIndex;itemIndex<length;){var $item=(0,renderer.Z)($items[itemIndex]);this._updateItemSelection(!0,$item.find("."+ITEM_CLASS).get(0)),itemIndex++}},_focusInHandler:function(e){this._updateFocusState(e,!0);var isSelectAllItem=(0,renderer.Z)(e.target).hasClass(SELECT_ALL_ITEM_CLASS);if(isSelectAllItem||this.option("focusedElement")){clearTimeout(this._setFocusedItemTimeout);var element=isSelectAllItem?(0,core_element.u)(this._$selectAllItem):(0,renderer.Z)(this.option("focusedElement"));this._setFocusedItemTimeout=setTimeout((()=>{this._setFocusedItem(element)}))}else{var $activeItem=this._getActiveItem();this.option("focusedElement",(0,core_element.u)($activeItem.closest("."+NODE_CLASS)))}},_setFocusedItem:function($target){$target&&$target.length&&($target.children().hasClass("dx-state-disabled")||this.callBase($target))},_itemPointerDownHandler:function(e){if(this.option("focusStateEnabled")){var $target=(0,renderer.Z)(e.target).closest("."+NODE_CLASS+", ."+SELECT_ALL_ITEM_CLASS);if($target.length){var itemElement=$target.hasClass("dx-state-disabled")?null:$target;this.option("focusedElement",(0,core_element.u)(itemElement))}}},_findNonDisabledNodes:function($nodes){return $nodes.not((function(){return(0,renderer.Z)(this).children("."+ITEM_CLASS).hasClass("dx-state-disabled")}))},_moveFocus:function(location,e){var FOCUS_LEFT=this.option("rtlEnabled")?"right":"left",FOCUS_RIGHT=this.option("rtlEnabled")?"left":"right";this.$element().find(".".concat(NODE_CONTAINER_CLASS)).each((function(){fx.Z.stop(this,!0)}));var $items=this._findNonDisabledNodes(this._nodeElements());if($items&&$items.length)switch(location){case"up":var $prevItem=this._prevItem($items);this.option("focusedElement",(0,core_element.u)($prevItem));var prevItemElement=this._getNodeItemElement($prevItem);this.getScrollable().scrollToElement(prevItemElement),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,prevItemElement);break;case"down":var $nextItem=this._nextItem($items);this.option("focusedElement",(0,core_element.u)($nextItem));var nextItemElement=this._getNodeItemElement($nextItem);this.getScrollable().scrollToElement(nextItemElement),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,nextItemElement);break;case"first":var $firstItem=$items.first();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToFirstItem($items,$items.index(this._prevItem($items))),this.option("focusedElement",(0,core_element.u)($firstItem)),this.getScrollable().scrollToElement(this._getNodeItemElement($firstItem));break;case"last":var $lastItem=$items.last();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToLastItem($items,$items.index(this._nextItem($items))),this.option("focusedElement",(0,core_element.u)($lastItem)),this.getScrollable().scrollToElement(this._getNodeItemElement($lastItem));break;case FOCUS_RIGHT:this._expandFocusedContainer();break;case FOCUS_LEFT:this._collapseFocusedContainer();break;default:return void this.callBase.apply(this,arguments)}},_getNodeItemElement:function($node){return $node.find("."+ITEM_CLASS).get(0)},_nodeElements:function(){return this.$element().find("."+NODE_CLASS).not(":hidden")},_expandFocusedContainer:function(){var $focusedNode=(0,renderer.Z)(this.option("focusedElement"));if($focusedNode.length&&!$focusedNode.hasClass(IS_LEAF)){if($focusedNode.find(".".concat(NODE_CONTAINER_CLASS)).eq(0).hasClass(OPENED_NODE_CONTAINER_CLASS)){var $nextItem=this._nextItem(this._findNonDisabledNodes(this._nodeElements()));return this.option("focusedElement",(0,core_element.u)($nextItem)),void this.getScrollable().scrollToElement(this._getNodeItemElement($nextItem))}var node=this._getNodeByElement($focusedNode.children("."+ITEM_CLASS));this._toggleExpandedState(node,!0)}},_getClosestNonDisabledNode:function($node){do{$node=$node.parent().closest("."+NODE_CLASS)}while($node.children(".dx-treeview-item.dx-state-disabled").length);return $node},_collapseFocusedContainer:function(){var $focusedNode=(0,renderer.Z)(this.option("focusedElement"));if($focusedNode.length){var nodeElement=$focusedNode.find(".".concat(NODE_CONTAINER_CLASS)).eq(0);if(!$focusedNode.hasClass(IS_LEAF)&&nodeElement.hasClass(OPENED_NODE_CONTAINER_CLASS)){var node=this._getNodeByElement($focusedNode.children("."+ITEM_CLASS));this._toggleExpandedState(node,!1)}else{var collapsedNode=this._getClosestNonDisabledNode($focusedNode);collapsedNode.length&&this.option("focusedElement",(0,core_element.u)(collapsedNode)),this.getScrollable().scrollToElement(this._getNodeItemElement(collapsedNode))}}},_encodeString:function(value){return(0,type.HD)(value)?encodeURI(value):value},_decodeString:function(value){return(0,type.HD)(value)?decodeURI(value):value},getScrollable:function(){return this._scrollable},updateDimensions:function(){var deferred=new utils_deferred.BH,scrollable=this.getScrollable();return scrollable?scrollable.update().done((()=>{deferred.resolveWith(this)})):deferred.resolveWith(this),deferred.promise()},selectItem:function(itemElement){return this._updateItemSelection(!0,itemElement)},unselectItem:function(itemElement){return this._updateItemSelection(!1,itemElement)},expandItem:function(itemElement){return this._toggleExpandedState(itemElement,!0)},collapseItem:function(itemElement){return this._toggleExpandedState(itemElement,!1)},getNodes:function(){return this._dataAdapter.getTreeNodes()},getSelectedNodes:function(){return this.getSelectedNodeKeys().map((key=>{var node=this._dataAdapter.getNodeByKey(key);return this._dataAdapter.getPublicNode(node)}))},getSelectedNodeKeys:function(){return this._dataAdapter.getSelectedNodesKeys()},selectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!0):this._toggleSelectAll({value:!0})},unselectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!1):this._toggleSelectAll({value:!1})},_allItemsExpandedHandler:function(){this._skipContentReadyAndItemExpanded=!1,this._fireContentReadyAction()},expandAll:function(){var nodes=this._dataAdapter.getData(),expandingPromises=[];this._skipContentReadyAndItemExpanded=!0,nodes.forEach((node=>expandingPromises.push(this._toggleExpandedState(node.internalFields.key,!0)))),Promise.allSettled(expandingPromises).then((()=>{var _this$_allItemsExpand;return null===(_this$_allItemsExpand=this._allItemsExpanded)||void 0===_this$_allItemsExpand?void 0:_this$_allItemsExpand.call(this)}))},collapseAll:function(){(0,iterator.S6)(this._dataAdapter.getExpandedNodesKeys(),function(_,key){this._toggleExpandedState(key,!1)}.bind(this))},scrollToItem:function(keyOrItemOrElement){var node=this._getNode(keyOrItemOrElement);if(!node)return(new utils_deferred.BH).reject().promise();for(var nodeKeysToExpand=[],parentNode=node.internalFields.publicNode.parent;null!=parentNode;)parentNode.expanded||nodeKeysToExpand.push(parentNode.key),parentNode=parentNode.parent;var scrollCallback=new utils_deferred.BH;return this._expandNodes(nodeKeysToExpand.reverse()).always((()=>{var $element=this._getNodeElement(node);$element&&$element.length?(this.scrollToElementTopLeft($element.get(0)),scrollCallback.resolve()):scrollCallback.reject()})),scrollCallback.promise()},scrollToElementTopLeft:function(targetElement){var scrollable=this.getScrollable(),{scrollDirection,rtlEnabled}=this.option(),targetLocation={top:0,left:0},relativeOffset=(0,get_relative_offset.d)(consts.hj,targetElement);if(scrollDirection!==consts.Et){var containerElement=(0,renderer.Z)(scrollable.container()).get(0);targetLocation.left=rtlEnabled?relativeOffset.left+targetElement.offsetWidth-containerElement.clientWidth:relativeOffset.left}scrollDirection!==consts.Xv&&(targetLocation.top=relativeOffset.top),scrollable.scrollTo(targetLocation)},_expandNodes:function(keysToExpand){if(!keysToExpand||0===keysToExpand.length)return(new utils_deferred.BH).resolve().promise();var resultCallback=new utils_deferred.BH,callbacksByNodes=keysToExpand.map((key=>this.expandItem(key)));return utils_deferred.gx.apply(renderer.Z,callbacksByNodes).done((()=>resultCallback.resolve())).fail((()=>resultCallback.reject())),resultCallback.promise()},_dispose:function(){this.callBase(),clearTimeout(this._setFocusedItemTimeout),this._allItemsExpandedHandler=null}});ui_search_box_mixin.Z.setEditorClass(text_box.Z);var ui_tree_view_search_NODE_CONTAINER_CLASS="".concat("dx-treeview","-node-container"),TreeViewSearch=ui_tree_view_base.inherit(ui_search_box_mixin.Z).inherit({_addWidgetPrefix:function(className){return"".concat("dx-treeview","-").concat(className)},_optionChanged:function(args){switch(args.name){case"searchValue":this._showCheckboxes()&&this._isRecursiveSelection()&&this._removeSelection(),this._initDataAdapter(),this._updateSearch(),this._repaintContainer(),this.option("focusedElement",null);break;case"searchExpr":this._initDataAdapter(),this.repaint();break;case"searchMode":this.option("expandNodesRecursive")?this._updateDataAdapter():this._initDataAdapter(),this.repaint();break;default:this.callBase(args)}},_updateDataAdapter:function(){this._setOptionWithoutOptionChange("expandNodesRecursive",!1),this._initDataAdapter(),this._setOptionWithoutOptionChange("expandNodesRecursive",!0)},_getDataAdapterOptions:function(){return(0,extend.l)(this.callBase(),{searchValue:this.option("searchValue"),searchMode:this.option("searchMode")||"contains",searchExpr:this.option("searchExpr")})},_updateSearch:function(){if(this._searchEditor){var editorOptions=this._getSearchEditorOptions();this._searchEditor.option(editorOptions)}},_repaintContainer:function(){var rootNodes,$container=this.$element().find(".".concat(ui_tree_view_search_NODE_CONTAINER_CLASS)).first();$container.length&&($container.empty(),rootNodes=this._dataAdapter.getRootNodes(),this._renderEmptyMessage(rootNodes),this._renderItems($container,rootNodes),this._fireContentReadyAction())},_itemContainer:function(isSearchMode){return this._scrollable&&isSearchMode?(0,renderer.Z)(this._scrollable.content()):this.callBase()},_addWidgetClass:function(){this.$element().addClass(this._widgetClass())},_clean:function(){this.callBase(),this._removeSearchBox()}});(0,component_registrator.Z)("dxTreeView",TreeViewSearch);const tree_view=TreeViewSearch}}]);